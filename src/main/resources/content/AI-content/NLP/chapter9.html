<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬9ç« ï¼šå¯¹è¯ç³»ç»Ÿ - è®©æœºå™¨å­¦ä¼šäº¤æµ</title>
    <meta name="description" content="æ¢ç´¢å¯¹è¯ç³»ç»Ÿçš„åŸç†ã€æŠ€æœ¯å’Œåº”ç”¨">

    <!-- æ•°å­¦å…¬å¼æ”¯æŒ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
            onload="renderMathInElement(document.body, {
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false}
                ]
            });"></script>

    <style>
        /* ===== CSSå˜é‡å®šä¹‰ï¼ˆä¼˜åŒ–é¢œè‰²æ–¹æ¡ˆï¼Œæ›´æŸ”å’Œã€æ›´ç°ä»£ï¼‰ ===== */
        :root {
            /* æ¸å˜è‰²ï¼ˆè°ƒæ•´ä¸ºæ›´æŸ”å’Œçš„è“ç»¿è°ƒï¼‰ */
            --primary-gradient: linear-gradient(135deg, #5c9ead 0%, #a3d4e0 100%);
            --hero-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --card-gradient: linear-gradient(135deg, rgba(79, 172, 254, 0.08), rgba(0, 242, 254, 0.04));
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --info-gradient: linear-gradient(135deg, #2af598 0%, #009efd 100%);
            --warning-gradient: linear-gradient(135deg, #f5af19 0%, #f12711 100%);

            /* ä¸»é¢˜è‰²ï¼ˆå¢åŠ å¯¹æ¯”åº¦ï¼‰ */
            --primary: #4facfe;
            --primary-light: #00f2fe;
            --primary-dark: #0066cc;
            --secondary: #38ef7d;
            --accent: #f5af19;

            /* åŠŸèƒ½è‰² */
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;

            /* èƒŒæ™¯è‰²ï¼ˆæ›´æš—ï¼Œå‡å°‘çœ¼ç›ç–²åŠ³ï¼‰ */
            --bg-dark: #0f0f1e;
            --bg-section: #1a1a2e;
            --bg-card: #252542;
            --bg-code: #1e1e2e;

            /* æ–‡å­—è‰²ï¼ˆå¢åŠ å¯è¯»æ€§ï¼‰ */
            --text-primary: #f0f0f0;
            --text-secondary: #b0b0b0;
            --text-muted: #808080;

            /* å…¶ä»–ï¼ˆä¼˜åŒ–é˜´å½±å’Œè¿‡æ¸¡ï¼‰ */
            --border-color: rgba(255, 255, 255, 0.12);
            --shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 20px 45px -10px rgba(0, 0, 0, 0.6);
            --radius: 0.8rem;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ===== å…¨å±€æ ·å¼ï¼ˆä¼˜åŒ–å­—ä½“å’Œé—´è·ï¼‰ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.8;
            font-size: 16px;
            overflow-x: hidden;
        }

        /* ===== èƒŒæ™¯æ•ˆæœï¼ˆä¼˜åŒ–ä¸ºæ›´åŠ¨æ€ï¼‰ ===== */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.05;
            background-image:
                    radial-gradient(circle at 20% 80%, var(--primary) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, var(--secondary) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            animation: subtle-move 20s linear infinite alternate;
        }

        @keyframes subtle-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(5px, 5px); }
        }

        /* ===== å¸ƒå±€ï¼ˆä¼˜åŒ–paddingï¼‰ ===== */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 1;
        }

        /* ===== å¯¼èˆªæ ï¼ˆæ·»åŠ é˜´å½±ï¼‰ ===== */
        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
            transition: var(--transition);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .nav-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-title h1 {
            font-size: 1.25rem;
            font-weight: 600;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-menu {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        /* è¿›åº¦æ¡ï¼ˆä¼˜åŒ–é¢œè‰²è¿‡æ¸¡ï¼‰ */
        .progress-container {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: var(--primary-gradient);
            width: 0;
            transition: width 0.3s ease;
        }

        /* ===== ä¾§è¾¹æ ï¼ˆä¼˜åŒ–æ»šåŠ¨æ¡ï¼‰ ===== */
        .sidebar {
            position: fixed;
            left: -300px;
            top: 60px;
            bottom: 0;
            width: 300px;
            background: var(--bg-section);
            border-right: 1px solid var(--border-color);
            padding: 2rem;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 999;
            box-shadow: 5px 0 25px rgba(0, 0, 0, 0.5);
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 3px;
        }

        .sidebar.open {
            transform: translateX(300px);
        }

        .toc-title {
            color: var(--primary-light);
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-section {
            margin-bottom: 1.5rem;
        }

        .toc-section-title {
            color: var(--text-muted);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
            padding-left: 0.5rem;
        }

        .toc-item {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            margin-bottom: 0.25rem;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .toc-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: var(--primary);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .toc-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            padding-left: 1.5rem;
        }

        .toc-item.active {
            background: var(--card-gradient);
            color: var(--primary-light);
        }

        .toc-item.active::before {
            transform: translateX(0);
        }

        /* ===== æŒ‰é’®æ ·å¼ï¼ˆä¼˜åŒ–hoveræ•ˆæœï¼‰ ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-size: 0.95rem;
            font-weight: 500;
            text-decoration: none;
            transition: var(--transition);
            cursor: pointer;
            border: none;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-icon {
            background: transparent;
            padding: 0.5rem;
            color: var(--text-secondary);
        }

        /* ===== ä¸»å†…å®¹ ===== */
        main {
            margin-top: 80px;
            padding-bottom: 4rem;
            position: relative;
            z-index: 1;
        }

        /* ===== ç« èŠ‚å¤´éƒ¨ï¼ˆä¼˜åŒ–åŠ¨ç”»ï¼‰ ===== */
        .chapter-hero {
            background: var(--hero-gradient);
            padding: 6rem 0;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .chapter-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background:
                    radial-gradient(circle at 30% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                    radial-gradient(circle at 70% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            animation: pulse 4s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        .chapter-hero-content {
            text-align: center;
            color: white;
            position: relative;
            z-index: 1;
        }

        .chapter-hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: 800;
            letter-spacing: -0.02em;
            animation: fadeInUp 0.8s ease;
        }

        .chapter-hero p {
            font-size: 1.5rem;
            opacity: 0.95;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== å†…å®¹å¡ç‰‡ï¼ˆä¼˜åŒ–paddingå’Œshadowï¼‰ ===== */
        .section-card {
            background: var(--bg-section);
            border-radius: var(--radius);
            padding: 3rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .section-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--primary-gradient);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.5s ease;
        }

        .section-card:hover::before {
            transform: scaleX(1);
        }

        .section-card h2 {
            color: var(--primary-light);
            margin-bottom: 2rem;
            font-size: 2.25rem;
            font-weight: 700;
        }

        .section-card h3 {
            color: var(--text-primary);
            margin: 2rem 0 1rem;
            font-size: 1.5rem;
            font-weight: 600;
        }

        /* ===== æ€è€ƒå¼•å¯¼æ¡† ===== */
        .think-guide-box {
            background: linear-gradient(135deg, rgba(79, 172, 254, 0.1), rgba(0, 242, 254, 0.1));
            border: 2px solid rgba(79, 172, 254, 0.3);
            border-radius: var(--radius);
            padding: 2.5rem;
            margin: 2rem 0;
            position: relative;
        }

        .think-guide-box::before {
            content: 'ğŸ¤”';
            position: absolute;
            top: -18px;
            left: 30px;
            font-size: 2.5rem;
            background: var(--bg-section);
            padding: 0 0.75rem;
        }

        .think-guide-box h4 {
            color: var(--primary-light);
            margin-bottom: 1.25rem;
            font-size: 1.25rem;
        }

        .think-question {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--primary);
        }

        .think-question h5 {
            color: var(--primary-light);
            margin-bottom: 0.5rem;
        }

        /* ===== é—®é¢˜åˆ†ææ¡† ===== */
        .problem-analysis-box {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(241, 39, 17, 0.1));
            border: 2px solid rgba(245, 158, 11, 0.3);
            border-radius: var(--radius);
            padding: 2.5rem;
            margin: 2rem 0;
            position: relative;
        }

        .problem-analysis-box::before {
            content: 'ğŸ”';
            position: absolute;
            top: -18px;
            left: 30px;
            font-size: 2.5rem;
            background: var(--bg-section);
            padding: 0 0.75rem;
        }

        .problem-analysis-box h4 {
            color: var(--accent);
            margin-bottom: 1.25rem;
            font-size: 1.25rem;
        }

        .analysis-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--accent);
        }

        .analysis-item h5 {
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        /* ===== å¯¹è¯ç¤ºä¾‹ï¼ˆä¼˜åŒ–é—´è·å’ŒèƒŒæ™¯ï¼‰ ===== */
        .dialogue-demo {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 2rem 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .dialogue-message {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            animation: messageSlide 0.3s ease;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .avatar-user {
            background: var(--primary-gradient);
        }

        .avatar-bot {
            background: var(--success-gradient);
        }

        .message-content {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem 1.25rem;
            border-radius: 0.75rem;
            position: relative;
        }

        .message-content::before {
            content: '';
            position: absolute;
            top: 12px;
            width: 0;
            height: 0;
            border-style: solid;
        }

        /* ä¿®å¤ï¼šç”¨æˆ·æ¶ˆæ¯å³å¯¹é½ï¼Œç®­å¤´åœ¨å³æŒ‡å‘å·¦ */
        .message-user {
            flex-direction: row-reverse;
            justify-content: flex-start; /* è°ƒæ•´å¯¹é½ */
        }

        .message-user .message-content {
            text-align: right; /* å¯é€‰ï¼šæ–‡æœ¬å³å¯¹é½ */
        }

        .message-user .message-content::before {
            right: -8px; /* ç®­å¤´ç§»åˆ°å³è¾¹ */
            border-width: 8px 0 8px 8px; /* ç®­å¤´æŒ‡å‘å·¦ */
            border-color: transparent transparent transparent rgba(255, 255, 255, 0.05);
        }

        /* æœºå™¨äººæ¶ˆæ¯ï¼šç®­å¤´åœ¨å·¦æŒ‡å‘å³ï¼ˆåŸæ ·ï¼Œä½†ç¡®è®¤å¯¹é½ï¼‰ */
        .message-bot .message-content::before {
            left: -8px;
            border-width: 8px 8px 8px 0;
            border-color: transparent rgba(255, 255, 255, 0.05) transparent transparent;
        }

        .message-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 0.25rem;
        }

        /* ===== æ¶æ„å›¾ ===== */
        .architecture-diagram {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }

        .arch-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            min-width: 600px;
        }

        .arch-component {
            background: var(--bg-section);
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s;
            position: relative;
        }

        .arch-component:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .arch-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .arch-title {
            color: var(--primary-light);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .arch-desc {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        /* ===== ä»£ç å—ï¼ˆä¼˜åŒ–ç¼©è¿›ä¿ç•™ï¼‰ ===== */
        .code-block {
            background: var(--bg-code);
            border: 1px solid #30363d;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .code-header {
            background: #161b22;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #30363d;
        }

        .code-lang {
            color: var(--primary-light);
            font-size: 0.875rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-lang::before {
            content: '';
            width: 12px;
            height: 12px;
            background: var(--primary);
            border-radius: 50%;
            display: inline-block;
        }

        .code-actions {
            display: flex;
            gap: 0.5rem;
        }

        .code-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-secondary);
            padding: 0.375rem 0.875rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .code-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-1px);
        }

        .code-content {
            padding: 1.5rem;
            overflow-x: auto;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            font-size: 0.875rem;
            line-height: 1.7;
            white-space: pre; /* ç¡®ä¿ä¿ç•™ç©ºæ ¼å’Œæ¢è¡Œ */
        }

        .code-content pre {
            margin: 0;
            color: #e6edf3;
            white-space: pre; /* é‡å¤ç¡®ä¿ */
            word-wrap: normal;
        }

        /* ä»£ç é«˜äº® */
        .keyword { color: #ff79c6; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; }
        .function { color: #50fa7b; }
        .number { color: #bd93f9; }

        /* ===== å¡ç‰‡ç½‘æ ¼ ===== */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .info-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .info-card:hover::before {
            opacity: 0.05;
        }

        .card-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .card-title {
            color: var(--primary-light);
            margin-bottom: 1rem;
            font-size: 1.25rem;
            font-weight: 600;
        }

        /* ===== æç¤ºæ¡† ===== */
        .tip {
            padding: 1.5rem 2rem;
            border-radius: var(--radius);
            margin: 2rem 0;
            border-left: 4px solid;
            position: relative;
            overflow: hidden;
        }

        .tip::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.05;
            background: currentColor;
        }

        .tip-icon {
            font-size: 1.5rem;
            margin-right: 1rem;
            vertical-align: middle;
        }

        .tip.info {
            background: rgba(59, 130, 246, 0.1);
            border-color: var(--info);
            color: var(--text-primary);
        }

        .tip.warning {
            background: rgba(245, 158, 11, 0.1);
            border-color: var(--warning);
            color: var(--text-primary);
        }

        .tip.success {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success);
            color: var(--text-primary);
        }

        .tip.danger {
            background: rgba(239, 68, 68, 0.1);
            border-color: var(--danger);
            color: var(--text-primary);
        }

        /* ===== æµç¨‹å›¾ ===== */
        .flow-diagram {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }

        .flow-container {
            display: flex;
            align-items: center;
            gap: 2rem;
            min-width: 800px;
            padding: 1rem;
        }

        .flow-step {
            flex: 1;
            background: var(--bg-section);
            border: 2px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1.5rem;
            text-align: center;
            position: relative;
            transition: all 0.3s;
        }

        .flow-step:hover {
            transform: translateY(-5px);
            border-color: var(--primary);
            box-shadow: var(--shadow);
        }

        .flow-step::after {
            content: 'â†’';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.5rem;
            color: var(--primary);
        }

        .flow-step:last-child::after {
            display: none;
        }

        .step-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }

        .step-title {
            color: var(--primary-light);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        /* ===== æ¯”è¾ƒè¡¨æ ¼ ===== */
        .comparison-table {
            background: var(--bg-card);
            border-radius: var(--radius);
            overflow: hidden;
            margin: 2rem 0;
            box-shadow: var(--shadow);
        }

        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th {
            background: var(--primary-gradient);
            color: white;
            padding: 1.25rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .comparison-table td {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .comparison-table tr:hover td {
            background: rgba(79, 172, 254, 0.05);
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        /* ===== å“åº”å¼è®¾è®¡ ===== */
        @media (max-width: 768px) {
            .chapter-hero h1 {
                font-size: 2.5rem;
            }

            .section-card {
                padding: 2rem;
            }

            .flow-container {
                flex-direction: column;
                min-width: auto;
            }

            .flow-step::after {
                content: 'â†“';
                right: 50%;
                bottom: -30px;
                top: auto;
                transform: translateX(50%);
            }
        }

        /* ===== å·¥å…·ç±» ===== */
        .text-center { text-align: center; }
        .text-muted { color: var(--text-muted); }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }
    </style>
</head>
<body>

<!-- èƒŒæ™¯æ•ˆæœ -->
<div class="bg-pattern"></div>

<!-- å¯¼èˆªæ  -->
<nav class="nav-header">
    <div class="container">
        <div class="nav-content">
            <div class="nav-title">
                <button id="toggle-sidebar" class="btn btn-icon">
                    <svg width="20" height="20" fill="currentColor">
                        <path d="M3 5h14M3 10h14M3 15h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <h1>ç¬¬9ç« ï¼šå¯¹è¯ç³»ç»Ÿ</h1>
            </div>
            <div class="nav-menu">
                <button class="btn btn-icon" id="theme-toggle">ğŸŒ™</button>
                <a href="#summary" class="btn btn-secondary">ç« èŠ‚æ€»ç»“</a>
            </div>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </div>
</nav>

<!-- ä¾§è¾¹æ  -->
<aside class="sidebar" id="sidebar">
    <h3 class="toc-title">
        <span>ğŸ“š</span>
        <span>æœ¬ç« å¯¼èˆª</span>
    </h3>

    <div class="toc-section">
        <div class="toc-section-title">å¼•è¨€</div>
        <a href="#intro" class="toc-item active">äººæœºå¯¹è¯çš„æ¼”è¿›</a>
        <a href="#what-is-dialogue" class="toc-item">ä»€ä¹ˆæ˜¯å¯¹è¯ç³»ç»Ÿ</a>
    </div>

    <div class="toc-section">
        <div class="toc-section-title">æ ¸å¿ƒæŠ€æœ¯</div>
        <a href="#nlu" class="toc-item">è‡ªç„¶è¯­è¨€ç†è§£</a>
        <a href="#dialogue-management" class="toc-item">å¯¹è¯ç®¡ç†</a>
        <a href="#nlg" class="toc-item">è‡ªç„¶è¯­è¨€ç”Ÿæˆ</a>
    </div>

    <div class="toc-section">
        <div class="toc-section-title">ç³»ç»Ÿç±»å‹</div>
        <a href="#task-oriented" class="toc-item">ä»»åŠ¡å‹å¯¹è¯ç³»ç»Ÿ</a>
        <a href="#open-domain" class="toc-item">å¼€æ”¾åŸŸå¯¹è¯ç³»ç»Ÿ</a>
        <a href="#multimodal" class="toc-item">å¤šæ¨¡æ€å¯¹è¯ç³»ç»Ÿ</a>
    </div>

    <div class="toc-section">
        <div class="toc-section-title">æŠ€æœ¯å®ç°</div>
        <a href="#architecture" class="toc-item">ç³»ç»Ÿæ¶æ„è®¾è®¡</a>
        <a href="#implementation" class="toc-item">å®ç°æ–¹æ³•</a>
        <a href="#evaluation" class="toc-item">è¯„ä¼°ä¸ä¼˜åŒ–</a>
    </div>

    <div class="toc-section">
        <div class="toc-section-title">åº”ç”¨ä¸å±•æœ›</div>
        <a href="#applications" class="toc-item">å®é™…åº”ç”¨</a>
        <a href="#challenges" class="toc-item">æŒ‘æˆ˜ä¸æœºé‡</a>
        <a href="#summary" class="toc-item">æœ¬ç« æ€»ç»“</a>
    </div>
</aside>

<!-- ä¸»å†…å®¹ -->
<main>
    <!-- ç« èŠ‚æ ‡é¢˜ -->
    <section class="chapter-hero">
        <div class="container">
            <div class="chapter-hero-content">
                <h1>å¯¹è¯ç³»ç»Ÿ</h1>
                <p>è®©æœºå™¨å­¦ä¼šè‡ªç„¶äº¤æµçš„è‰ºæœ¯</p>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- å¼•è¨€ï¼šäººæœºå¯¹è¯çš„æ¼”è¿› -->
        <section id="intro" class="section-card">
            <h2>ğŸ¤– äººæœºå¯¹è¯çš„æ¼”è¿›</h2>

            <div class="think-guide-box">
                <h4>å¼€å§‹å‰çš„æ€è€ƒ</h4>
                <div class="think-question">
                    <h5>ğŸ’­ æ€è€ƒ1ï¼šä»€ä¹ˆæ˜¯çœŸæ­£çš„"å¯¹è¯"ï¼Ÿ</h5>
                    <p>
                        å½“ä½ ä¸æœ‹å‹èŠå¤©æ—¶ï¼Œä½ ä»¬æ˜¯å¦‚ä½•ç†è§£å½¼æ­¤çš„ï¼Ÿå¯¹è¯ä¸ä»…ä»…æ˜¯é—®ç­”ï¼Œ
                        è¿˜åŒ…å«äº†æƒ…æ„Ÿã€è¯­å¢ƒã€èƒŒæ™¯çŸ¥è¯†ç­‰å¤šä¸ªç»´åº¦ã€‚æœºå™¨å¦‚ä½•æ‰èƒ½åšåˆ°è¿™äº›ï¼Ÿ
                    </p>
                </div>
                <div class="think-question">
                    <h5>ğŸ’­ æ€è€ƒ2ï¼šä¸ºä»€ä¹ˆå¯¹è¯ç³»ç»Ÿå¦‚æ­¤é‡è¦ï¼Ÿ</h5>
                    <p>
                        æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæœºå™¨èƒ½å¤Ÿè‡ªç„¶åœ°ç†è§£å’Œå›åº”äººç±»ï¼Œè¿™å°†å¦‚ä½•æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Ÿ
                        ä»å®¢æœåˆ°æ•™è‚²ï¼Œä»åŒ»ç–—åˆ°å¨±ä¹ï¼Œå¯¹è¯ç³»ç»Ÿæ­£åœ¨é‡å¡‘äººæœºäº¤äº’çš„æœªæ¥ã€‚
                    </p>
                </div>
            </div>

            <h3>å¯¹è¯ç³»ç»Ÿçš„å‘å±•å†ç¨‹</h3>
            <div class="flow-diagram">
                <div class="flow-container">
                    <div class="flow-step">
                        <span class="step-icon">ğŸ—£ï¸</span>
                        <div class="step-title">1960s ELIZA</div>
                        <div class="text-muted">æ¨¡å¼åŒ¹é…æ—¶ä»£</div>
                    </div>
                    <div class="flow-step">
                        <span class="step-icon">ğŸ“</span>
                        <div class="step-title">1990s IVR</div>
                        <div class="text-muted">è¯­éŸ³èœå•ç³»ç»Ÿ</div>
                    </div>
                    <div class="flow-step">
                        <span class="step-icon">ğŸ¤–</span>
                        <div class="step-title">2010s Siri/Alexa</div>
                        <div class="text-muted">æ™ºèƒ½åŠ©æ‰‹æ—¶ä»£</div>
                    </div>
                    <div class="flow-step">
                        <span class="step-icon">ğŸ§ </span>
                        <div class="step-title">2020s ChatGPT</div>
                        <div class="text-muted">å¤§æ¨¡å‹é©å‘½</div>
                    </div>
                </div>
            </div>

            <div class="problem-analysis-box">
                <h4>æ ¸å¿ƒæŒ‘æˆ˜åˆ†æ</h4>
                <div class="analysis-item">
                    <h5>ğŸ¯ è¯­è¨€ç†è§£çš„å¤æ‚æ€§</h5>
                    <ul>
                        <li><strong>æ­§ä¹‰æ€§ï¼š</strong>"æˆ‘çœ‹åˆ°äº†å¥¹çš„ç”»"ï¼ˆæ˜¯çœ‹åˆ°ç”»ä½œè¿˜æ˜¯çœ‹åˆ°å¥¹åœ¨ç”»ç”»ï¼Ÿï¼‰</li>
                        <li><strong>è¯­å¢ƒä¾èµ–ï¼š</strong>"å¤ªå†·äº†"ï¼ˆæ˜¯å¤©æ°”ï¼Ÿç©ºè°ƒï¼Ÿè¿˜æ˜¯æ€åº¦ï¼Ÿï¼‰</li>
                        <li><strong>éšå«æ„å›¾ï¼š</strong>"ç°åœ¨å‡ ç‚¹äº†ï¼Ÿ"ï¼ˆå¯èƒ½æ˜¯æƒ³è¯´è¯¥èµ°äº†ï¼‰</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ”„ å¯¹è¯è¿è´¯æ€§</h5>
                    <ul>
                        <li><strong>è¯é¢˜è¿½è¸ªï¼š</strong>å¦‚ä½•è®°ä½ä¹‹å‰è®¨è®ºçš„å†…å®¹</li>
                        <li><strong>æŒ‡ä»£æ¶ˆè§£ï¼š</strong>"ä»–"ã€"é‚£ä¸ª"æŒ‡çš„æ˜¯ä»€ä¹ˆ</li>
                        <li><strong>è¯­å¢ƒåˆ‡æ¢ï¼š</strong>è¯é¢˜è½¬æ¢æ—¶çš„è‡ªç„¶è¿‡æ¸¡</li>
                    </ul>
                </div>
            </div>

            <div class="dialogue-demo">
                <h3 class="text-center mb-3">ä¸€ä¸ªç†æƒ³çš„å¯¹è¯ç¤ºä¾‹</h3>
                <div class="dialogue-message message-user">
                    <div class="message-avatar avatar-user">ğŸ‘¤</div>
                    <div class="message-content">
                        <div class="message-label">ç”¨æˆ·</div>
                        <p>æˆ‘æƒ³è®¢ä¸€å¼ æ˜å¤©å»åŒ—äº¬çš„æœºç¥¨</p>
                    </div>
                </div>
                <div class="dialogue-message message-bot">
                    <div class="message-avatar avatar-bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-label">ç³»ç»Ÿ</div>
                        <p>å¥½çš„ï¼Œè¯·é—®æ‚¨ä»å“ªä¸ªåŸå¸‚å‡ºå‘ï¼Ÿåå¥½æ—©ä¸Šã€ä¸‹åˆè¿˜æ˜¯æ™šä¸Šçš„èˆªç­ï¼Ÿ</p>
                    </div>
                </div>
                <div class="dialogue-message message-user">
                    <div class="message-avatar avatar-user">ğŸ‘¤</div>
                    <div class="message-content">
                        <div class="message-label">ç”¨æˆ·</div>
                        <p>ä»ä¸Šæµ·å‡ºå‘ï¼Œæœ€å¥½æ˜¯æ—©ä¸Šçš„</p>
                    </div>
                </div>
                <div class="dialogue-message message-bot">
                    <div class="message-avatar avatar-bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-label">ç³»ç»Ÿ</div>
                        <p>æŸ¥åˆ°æ˜å¤©æ—©ä¸Šæœ‰3ä¸ªèˆªç­ï¼š<br>
                            âœˆï¸ 7:30 ä¸œèˆªMU5101ï¼Œç¥¨ä»·Â¥680<br>
                            âœˆï¸ 8:45 å›½èˆªCA1831ï¼Œç¥¨ä»·Â¥750<br>
                            âœˆï¸ 9:20 å—èˆªCZ3907ï¼Œç¥¨ä»·Â¥620<br>
                            æ‚¨æƒ³é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿ</p>
                    </div>
                </div>
            </div>

            <div class="tip info mt-4">
                <span class="tip-icon">ğŸ’¡</span>
                <strong>ç†è§£å¯¹è¯çš„æœ¬è´¨</strong>
                <p class="mt-2">
                    å¯¹è¯ä¸ä»…æ˜¯ä¿¡æ¯äº¤æ¢ï¼Œæ›´æ˜¯ç†è§£ã€æ¨ç†å’Œå…±æƒ…çš„è¿‡ç¨‹ã€‚
                    ä¸€ä¸ªä¼˜ç§€çš„å¯¹è¯ç³»ç»Ÿéœ€è¦ç†è§£ç”¨æˆ·çš„çœŸå®æ„å›¾ï¼Œç»´æŒå¯¹è¯çš„è¿è´¯æ€§ï¼Œ
                    å¹¶æä¾›æœ‰ä»·å€¼çš„å›åº”ã€‚
                </p>
            </div>
        </section>

        <!-- ä»€ä¹ˆæ˜¯å¯¹è¯ç³»ç»Ÿ -->
        <section id="what-is-dialogue" class="section-card">
            <h2>ğŸ’¬ ä»€ä¹ˆæ˜¯å¯¹è¯ç³»ç»Ÿ</h2>

            <div class="think-guide-box">
                <h4>æ·±å…¥ç†è§£å¯¹è¯ç³»ç»Ÿ</h4>
                <div class="think-question">
                    <h5>ğŸ¤” å¯¹è¯ç³»ç»Ÿçš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</h5>
                    <p>
                        å¯¹è¯ç³»ç»Ÿæ˜¯ä¸€ä¸ªèƒ½å¤Ÿç†è§£äººç±»è¯­è¨€ã€ç®¡ç†å¯¹è¯çŠ¶æ€ã€
                        å¹¶ç”Ÿæˆåˆé€‚å›åº”çš„æ™ºèƒ½ç³»ç»Ÿã€‚å®ƒè¯•å›¾æ¨¡æ‹Ÿäººç±»ä¹‹é—´çš„è‡ªç„¶äº¤æµè¿‡ç¨‹ã€‚
                    </p>
                </div>
            </div>

            <h3>å¯¹è¯ç³»ç»Ÿçš„æ ¸å¿ƒç»„ä»¶</h3>
            <div class="architecture-diagram">
                <div class="arch-container">
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ‘‚</span>
                        <div class="arch-title">è¯­éŸ³è¯†åˆ«ï¼ˆASRï¼‰</div>
                        <div class="arch-desc">å°†è¯­éŸ³è½¬æ¢ä¸ºæ–‡æœ¬</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ§ </span>
                        <div class="arch-title">è‡ªç„¶è¯­è¨€ç†è§£ï¼ˆNLUï¼‰</div>
                        <div class="arch-desc">ç†è§£ç”¨æˆ·æ„å›¾å’Œå®ä½“</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ¯</span>
                        <div class="arch-title">å¯¹è¯ç®¡ç†ï¼ˆDMï¼‰</div>
                        <div class="arch-desc">å†³ç­–å’ŒçŠ¶æ€è¿½è¸ª</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">âœï¸</span>
                        <div class="arch-title">è‡ªç„¶è¯­è¨€ç”Ÿæˆï¼ˆNLGï¼‰</div>
                        <div class="arch-desc">ç”Ÿæˆå›å¤æ–‡æœ¬</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ”Š</span>
                        <div class="arch-title">è¯­éŸ³åˆæˆï¼ˆTTSï¼‰</div>
                        <div class="arch-desc">å°†æ–‡æœ¬è½¬æ¢ä¸ºè¯­éŸ³</div>
                    </div>
                </div>
            </div>

            <div class="card-grid mt-4">
                <div class="info-card">
                    <span class="card-icon">ğŸ¯</span>
                    <h4 class="card-title">ä»»åŠ¡å‹å¯¹è¯</h4>
                    <p>ä¸“æ³¨äºå®Œæˆç‰¹å®šä»»åŠ¡ï¼š</p>
                    <ul class="mt-2">
                        <li>è®¢ç¥¨è®¢é¤</li>
                        <li>æŸ¥è¯¢ä¿¡æ¯</li>
                        <li>æ§åˆ¶è®¾å¤‡</li>
                        <li>å®¢æˆ·æœåŠ¡</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ’¬</span>
                    <h4 class="card-title">å¼€æ”¾åŸŸå¯¹è¯</h4>
                    <p>è‡ªç”±å¯¹è¯æ— ç‰¹å®šç›®æ ‡ï¼š</p>
                    <ul class="mt-2">
                        <li>é—²èŠäº¤æµ</li>
                        <li>æƒ…æ„Ÿé™ªä¼´</li>
                        <li>çŸ¥è¯†é—®ç­”</li>
                        <li>åˆ›æ„å¯¹è¯</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ”„</span>
                    <h4 class="card-title">æ··åˆå‹å¯¹è¯</h4>
                    <p>ç»“åˆä»»åŠ¡å’Œé—²èŠï¼š</p>
                    <ul class="mt-2">
                        <li>æ™ºèƒ½åŠ©æ‰‹</li>
                        <li>æ•™è‚²æœºå™¨äºº</li>
                        <li>å¥åº·é¡¾é—®</li>
                        <li>è™šæ‹Ÿä¼´ä¾£</li>
                    </ul>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>å¯¹è¯ç³»ç»Ÿé¢ä¸´çš„å…³é”®é—®é¢˜</h4>
                <div class="analysis-item">
                    <h5>ğŸŒ å¤šæ ·æ€§é—®é¢˜</h5>
                    <p>åŒä¸€ä¸ªæ„æ€å¯ä»¥æœ‰æ— æ•°ç§è¡¨è¾¾æ–¹å¼ï¼š</p>
                    <ul>
                        <li>"æˆ‘æƒ³è®¢æœºç¥¨" vs "å¸®æˆ‘çœ‹çœ‹æ˜å¤©çš„èˆªç­" vs "æœ‰å»åŒ—äº¬çš„é£æœºå—"</li>
                        <li>å¦‚ä½•è®©ç³»ç»Ÿç†è§£è¿™äº›ä¸åŒè¡¨è¾¾èƒŒåçš„ç›¸åŒæ„å›¾ï¼Ÿ</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ” æ­§ä¹‰æ€§é—®é¢˜</h5>
                    <p>è‡ªç„¶è¯­è¨€å……æ»¡æ­§ä¹‰ï¼š</p>
                    <ul>
                        <li>"æˆ‘è¦å¤§æ¯çš„"ï¼ˆå’–å•¡ï¼Ÿå¥¶èŒ¶ï¼Ÿéœ€è¦ç»“åˆä¸Šä¸‹æ–‡ï¼‰</li>
                        <li>"ä¸è¦äº†"ï¼ˆå–æ¶ˆè®¢å•ï¼Ÿè¿˜æ˜¯ä¸éœ€è¦å…¶ä»–ä¸œè¥¿ï¼Ÿï¼‰</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ­ ä¸ªæ€§åŒ–é—®é¢˜</h5>
                    <p>ä¸åŒç”¨æˆ·æœ‰ä¸åŒçš„è¡¨è¾¾ä¹ æƒ¯å’Œåå¥½ï¼š</p>
                    <ul>
                        <li>å¹´é¾„ã€åœ°åŸŸã€æ•™è‚²èƒŒæ™¯çš„å·®å¼‚</li>
                        <li>å¦‚ä½•ä¸ºæ¯ä¸ªç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„å¯¹è¯ä½“éªŒï¼Ÿ</li>
                    </ul>
                </div>
            </div>

            <div class="tip success mt-4">
                <span class="tip-icon">âœ…</span>
                <strong>å…³é”®è®¤è¯†</strong>
                <p class="mt-2">
                    å¯¹è¯ç³»ç»Ÿçš„ç›®æ ‡ä¸æ˜¯ç®€å•çš„é—®ç­”åŒ¹é…ï¼Œè€Œæ˜¯ç†è§£ç”¨æˆ·çš„çœŸå®éœ€æ±‚ï¼Œ
                    ç»´æŠ¤å¯¹è¯çš„ä¸Šä¸‹æ–‡ï¼Œå¹¶æä¾›æœ‰ä»·å€¼ã€è‡ªç„¶çš„å›åº”ã€‚
                </p>
            </div>
        </section>

        <!-- è‡ªç„¶è¯­è¨€ç†è§£ -->
        <section id="nlu" class="section-card">
            <h2>ğŸ§  è‡ªç„¶è¯­è¨€ç†è§£ï¼ˆNLUï¼‰</h2>

            <div class="think-guide-box">
                <h4>ç†è§£çš„è‰ºæœ¯</h4>
                <div class="think-question">
                    <h5>ğŸ’­ ä»€ä¹ˆæ˜¯"ç†è§£"ï¼Ÿ</h5>
                    <p>
                        å½“æœ‰äººè¯´"æˆ‘é¥¿äº†"ï¼Œä½ ä¸ä»…ç†è§£å­—é¢æ„æ€ï¼Œè¿˜èƒ½æ¨æ–­å‡ºä»–å¯èƒ½æƒ³åƒä¸œè¥¿ã€
                        éœ€è¦æ‰¾é¤å…ã€æˆ–è€…åœ¨æš—ç¤ºè¯¥åƒé¥­äº†ã€‚æœºå™¨å¦‚ä½•è¾¾åˆ°è¿™ç§ç†è§£æ°´å¹³ï¼Ÿ
                    </p>
                </div>
            </div>

            <h3>NLUçš„æ ¸å¿ƒä»»åŠ¡</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ¯</span>
                    <h4 class="card-title">æ„å›¾è¯†åˆ«</h4>
                    <p>è¯†åˆ«ç”¨æˆ·æƒ³åšä»€ä¹ˆï¼š</p>
                    <div class="code-block mt-2">
                        <div class="code-content">
                            <pre>è¾“å…¥ï¼š"æˆ‘æƒ³çœ‹çœ‹æ˜å¤©çš„å¤©æ°”"
æ„å›¾ï¼šquery_weather
ç½®ä¿¡åº¦ï¼š0.95</pre>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ·ï¸</span>
                    <h4 class="card-title">å®ä½“æŠ½å–</h4>
                    <p>æå–å…³é”®ä¿¡æ¯ï¼š</p>
                    <div class="code-block mt-2">
                        <div class="code-content">
                            <pre>è¾“å…¥ï¼š"è®¢ä¸€å¼ æ˜å¤©å»åŒ—äº¬çš„æœºç¥¨"
å®ä½“ï¼š
  - æ—¶é—´ï¼šæ˜å¤©
  - ç›®çš„åœ°ï¼šåŒ—äº¬
  - ç±»å‹ï¼šæœºç¥¨</pre>
                        </div>
                    </div>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ˜Š</span>
                    <h4 class="card-title">æƒ…æ„Ÿåˆ†æ</h4>
                    <p>ç†è§£ç”¨æˆ·æƒ…ç»ªï¼š</p>
                    <div class="code-block mt-2">
                        <div class="code-content">
                            <pre>è¾“å…¥ï¼š"è¿™æœåŠ¡å¤ªå·®äº†ï¼"
æƒ…æ„Ÿï¼šè´Ÿé¢ï¼ˆæ„¤æ€’ï¼‰
å¼ºåº¦ï¼š0.8</pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="code-block mt-4">
                <div class="code-header">
                    <span class="code-lang">Python - åŸºäºBERTçš„æ„å›¾è¯†åˆ«å’Œå®ä½“æŠ½å–</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                </div>
                <div class="code-content">
                    <pre>import torch
import torch.nn as nn
from transformers import BertModel, BertTokenizer
import numpy as np

class JointNLU(nn.Module):
    """
    è”åˆæ„å›¾è¯†åˆ«å’Œæ§½ä½å¡«å……æ¨¡å‹
    åŒæ—¶å®Œæˆæ„å›¾åˆ†ç±»å’Œå®ä½“æŠ½å–ä»»åŠ¡
    """
    def __init__(self, bert_model_name, num_intents, num_slots, dropout=0.3):
        super().__init__()

        # BERTç¼–ç å™¨
        self.bert = BertModel.from_pretrained(bert_model_name)
        self.dropout = nn.Dropout(dropout)

        # æ„å›¾åˆ†ç±»å¤´
        self.intent_classifier = nn.Linear(
            self.bert.config.hidden_size,
            num_intents
        )

        # æ§½ä½æ ‡æ³¨å¤´ï¼ˆåºåˆ—æ ‡æ³¨ï¼‰
        self.slot_classifier = nn.Linear(
            self.bert.config.hidden_size,
            num_slots
        )

        # æ„å›¾-æ§½ä½äº¤äº’å±‚ï¼ˆå¯é€‰ï¼‰
        self.intent_slot_attn = nn.MultiheadAttention(
            self.bert.config.hidden_size,
            num_heads=8,
            dropout=dropout
        )

    def forward(self, input_ids, attention_mask):
        # BERTç¼–ç 
        outputs = self.bert(
            input_ids=input_ids,
            attention_mask=attention_mask
        )

        sequence_output = outputs.last_hidden_state  # [batch, seq_len, hidden]
        pooled_output = outputs.pooler_output       # [batch, hidden]

        # æ„å›¾è¯†åˆ«
        pooled_output = self.dropout(pooled_output)
        intent_logits = self.intent_classifier(pooled_output)

        # æ§½ä½å¡«å……
        sequence_output = self.dropout(sequence_output)
        slot_logits = self.slot_classifier(sequence_output)

        return intent_logits, slot_logits

class NLUProcessor:
    """
    NLUæ•°æ®å¤„ç†å™¨
    """
    def __init__(self, tokenizer, intent_labels, slot_labels):
        self.tokenizer = tokenizer
        self.intent_labels = intent_labels
        self.slot_labels = slot_labels

        self.intent2id = {label: i for i, label in enumerate(intent_labels)}
        self.id2intent = {i: label for i, label in enumerate(intent_labels)}

        self.slot2id = {label: i for i, label in enumerate(slot_labels)}
        self.id2slot = {i: label for i, label in enumerate(slot_labels)}

    def process_example(self, text, intent=None, slots=None):
        """
        å¤„ç†å•ä¸ªæ ·æœ¬
        """
        # åˆ†è¯
        encoding = self.tokenizer(
            text,
            max_length=128,
            padding='max_length',
            truncation=True,
            return_tensors='pt'
        )

        result = {
            'input_ids': encoding['input_ids'][0],
            'attention_mask': encoding['attention_mask'][0]
        }

        # å¤„ç†æ ‡ç­¾
        if intent:
            result['intent_label'] = self.intent2id[intent]

        if slots:
            # å¯¹é½æ§½ä½æ ‡ç­¾åˆ°åˆ†è¯åçš„åºåˆ—
            slot_ids = self._align_labels(
                encoding.word_ids()[0],
                slots
            )
            result['slot_labels'] = torch.tensor(slot_ids)

        return result

class DialogueNLU:
    """
    å¯¹è¯ç³»ç»Ÿçš„NLUæ¨¡å—
    """
    def __init__(self, model, processor):
        self.model = model
        self.processor = processor
        self.model.eval()

    def understand(self, utterance):
        """
        ç†è§£ç”¨æˆ·è¾“å…¥
        """
        # é¢„å¤„ç†
        inputs = self.processor.process_example(utterance)

        # æ¨ç†
        with torch.no_grad():
            intent_logits, slot_logits = self.model(
                inputs['input_ids'].unsqueeze(0),
                inputs['attention_mask'].unsqueeze(0)
            )

        # è§£ææ„å›¾
        intent_probs = torch.softmax(intent_logits, dim=-1)
        intent_id = torch.argmax(intent_probs, dim=-1).item()
        intent = self.processor.id2intent[intent_id]
        intent_conf = intent_probs[0][intent_id].item()

        # è§£ææ§½ä½
        slot_preds = torch.argmax(slot_logits, dim=-1)[0]
        slots = self._extract_slots(
            utterance,
            slot_preds,
            inputs['attention_mask']
        )

        return {
            'text': utterance,
            'intent': {
                'name': intent,
                'confidence': intent_conf
            },
            'entities': slots
        }

    def _extract_slots(self, text, predictions, mask):
        """
        ä»é¢„æµ‹ç»“æœä¸­æå–æ§½ä½ä¿¡æ¯
        """
        tokens = self.processor.tokenizer.tokenize(text)
        slots = []

        current_slot = None
        for i, (token, pred, m) in enumerate(zip(tokens, predictions, mask)):
            if m == 0:  # padding
                break

            slot_label = self.processor.id2slot[pred.item()]

            if slot_label.startswith('B-'):
                # å¼€å§‹æ–°æ§½ä½
                if current_slot:
                    slots.append(current_slot)

                current_slot = {
                    'type': slot_label[2:],
                    'value': token.replace('##', ''),
                    'start': i,
                    'end': i + 1
                }

            elif slot_label.startswith('I-') and current_slot:
                # ç»§ç»­å½“å‰æ§½ä½
                if slot_label[2:] == current_slot['type']:
                    current_slot['value'] += token.replace('##', '')
                    current_slot['end'] = i + 1

            else:
                # éæ§½ä½
                if current_slot:
                    slots.append(current_slot)
                    current_slot = None

        if current_slot:
            slots.append(current_slot)

        return slots

# ========== å¤šè½®å¯¹è¯ä¸Šä¸‹æ–‡ç†è§£ ==========
class ContextualNLU:
    """
    è€ƒè™‘ä¸Šä¸‹æ–‡çš„NLUæ¨¡å—
    """
    def __init__(self, base_nlu):
        self.base_nlu = base_nlu
        self.context_window = 5  # è€ƒè™‘æœ€è¿‘5è½®å¯¹è¯
        self.dialogue_history = []

    def understand_with_context(self, utterance):
        """
        ç»“åˆä¸Šä¸‹æ–‡ç†è§£å½“å‰è¾“å…¥
        """
        # åŸºç¡€ç†è§£
        base_result = self.base_nlu.understand(utterance)

        # æŒ‡ä»£æ¶ˆè§£
        resolved_text = self._resolve_references(
            utterance,
            self.dialogue_history
        )

        # æ„å›¾è¡¥å…¨
        if base_result['intent']['confidence'] < 0.5:
            base_result['intent'] = self._infer_intent_from_context(
                base_result,
                self.dialogue_history
            )

        # å®ä½“ç»§æ‰¿
        base_result['entities'] = self._inherit_entities(
            base_result['entities'],
            self.dialogue_history
        )

        # æ›´æ–°å†å²
        self.dialogue_history.append({
            'user': utterance,
            'nlu': base_result
        })

        # ä¿æŒçª—å£å¤§å°
        if len(self.dialogue_history) > self.context_window:
            self.dialogue_history.pop(0)

        return base_result

    def _resolve_references(self, text, history):
        """
        è§£ææŒ‡ä»£è¯
        """
        # ç®€å•çš„è§„åˆ™ç¤ºä¾‹
        if 'é‚£ä¸ª' in text or 'é‚£é‡Œ' in text:
            # æŸ¥æ‰¾æœ€è¿‘æåˆ°çš„å®ä½“
            for turn in reversed(history):
                for entity in turn['nlu']['entities']:
                    if entity['type'] in ['location', 'item']:
                        text = text.replace('é‚£ä¸ª', entity['value'])
                        text = text.replace('é‚£é‡Œ', entity['value'])
                        break

        return text

# ========== ä½¿ç”¨ç¤ºä¾‹ ==========
def demo_nlu():
    # åˆå§‹åŒ–
    tokenizer = BertTokenizer.from_pretrained('bert-base-chinese')

    intent_labels = ['è®¢ç¥¨', 'æŸ¥è¯¢', 'å–æ¶ˆ', 'é—²èŠ', 'å…¶ä»–']
    slot_labels = ['O', 'B-å‡ºå‘åœ°', 'I-å‡ºå‘åœ°', 'B-ç›®çš„åœ°', 'I-ç›®çš„åœ°',
                   'B-æ—¶é—´', 'I-æ—¶é—´', 'B-æ•°é‡', 'I-æ•°é‡']

    model = JointNLU(
        'bert-base-chinese',
        num_intents=len(intent_labels),
        num_slots=len(slot_labels)
    )

    processor = NLUProcessor(tokenizer, intent_labels, slot_labels)
    nlu = DialogueNLU(model, processor)
    contextual_nlu = ContextualNLU(nlu)

    # æµ‹è¯•å¯¹è¯
    dialogue = [
        "æˆ‘æƒ³è®¢æœºç¥¨",
        "ä»åŒ—äº¬åˆ°ä¸Šæµ·",
        "æ˜å¤©æ—©ä¸Šçš„",
        "è¦ä¸¤å¼ "
    ]

    for utterance in dialogue:
        result = contextual_nlu.understand_with_context(utterance)
        print(f"\nç”¨æˆ·: {utterance}")
        print(f"æ„å›¾: {result['intent']['name']} ({result['intent']['confidence']:.2f})")
        print(f"å®ä½“: {result['entities']}")

if __name__ == "__main__":
    demo_nlu()</pre>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>NLUçš„å…³é”®æŒ‘æˆ˜</h4>
                <div class="analysis-item">
                    <h5>ğŸŒ å¤šè¯­è¨€ç†è§£</h5>
                    <ul>
                        <li>ä¸åŒè¯­è¨€çš„è¯­æ³•ç»“æ„å·®å¼‚</li>
                        <li>è·¨è¯­è¨€çš„æ„å›¾å¯¹é½</li>
                        <li>ä½èµ„æºè¯­è¨€çš„å¤„ç†</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ”„ ä¸Šä¸‹æ–‡ä¾èµ–</h5>
                    <ul>
                        <li>çœç•¥å’ŒæŒ‡ä»£çš„å¤„ç†</li>
                        <li>å¤šè½®å¯¹è¯çš„ä¿¡æ¯ç§¯ç´¯</li>
                        <li>è¯é¢˜åˆ‡æ¢çš„æ£€æµ‹</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ­ å£è¯­åŒ–è¡¨è¾¾</h5>
                    <ul>
                        <li>è¯­æ³•ä¸å®Œæ•´</li>
                        <li>å£å¤´ç¦…å’Œå¡«å……è¯</li>
                        <li>æ–¹è¨€å’Œä¿šè¯­</li>
                    </ul>
                </div>
            </div>

            <div class="tip info mt-4">
                <span class="tip-icon">ğŸ’¡</span>
                <strong>NLUæœ€ä½³å®è·µ</strong>
                <ul class="mt-2">
                    <li>ä½¿ç”¨é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ä½œä¸ºåŸºç¡€</li>
                    <li>è”åˆè®­ç»ƒæ„å›¾è¯†åˆ«å’Œå®ä½“æŠ½å–</li>
                    <li>å¼•å…¥å¯¹è¯å†å²è¿›è¡Œä¸Šä¸‹æ–‡ç†è§£</li>
                    <li>æŒç»­æ”¶é›†çœŸå®æ•°æ®ä¼˜åŒ–æ¨¡å‹</li>
                </ul>
            </div>
        </section>

        <!-- å¯¹è¯ç®¡ç† -->
        <section id="dialogue-management" class="section-card">
            <h2>ğŸ¯ å¯¹è¯ç®¡ç†ï¼ˆDMï¼‰</h2>

            <div class="think-guide-box">
                <h4>å¯¹è¯çš„æ™ºæ…§</h4>
                <div class="think-question">
                    <h5>ğŸ¤” å¦‚ä½•ç®¡ç†å¯¹è¯ï¼Ÿ</h5>
                    <p>
                        æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªé¤å…æœåŠ¡å‘˜ï¼Œå½“å®¢äººè¯´"æˆ‘è¦é‚£ä¸ª"æ—¶ï¼Œ
                        ä½ éœ€è¦è®°ä½ä¹‹å‰çš„èœå•è®¨è®ºï¼Œç†è§£"é‚£ä¸ª"æŒ‡ä»€ä¹ˆï¼Œ
                        å¹¶å†³å®šä¸‹ä¸€æ­¥è¯¥ç¡®è®¤è®¢å•è¿˜æ˜¯æ¨èå…¶ä»–èœå“ã€‚
                        è¿™å°±æ˜¯å¯¹è¯ç®¡ç†çš„æ ¸å¿ƒã€‚
                    </p>
                </div>
            </div>

            <h3>å¯¹è¯ç®¡ç†çš„æ ¸å¿ƒåŠŸèƒ½</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ“Š</span>
                    <h4 class="card-title">çŠ¶æ€è¿½è¸ª</h4>
                    <p>ç»´æŠ¤å¯¹è¯çš„å½“å‰çŠ¶æ€ï¼š</p>
                    <ul class="mt-2">
                        <li>ç”¨æˆ·ç›®æ ‡å’Œåå¥½</li>
                        <li>å·²æ”¶é›†çš„ä¿¡æ¯</li>
                        <li>å¾…ç¡®è®¤çš„å†…å®¹</li>
                        <li>å†å²äº¤äº’è®°å½•</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ¤–</span>
                    <h4 class="card-title">ç­–ç•¥å†³ç­–</h4>
                    <p>å†³å®šç³»ç»Ÿçš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨ï¼š</p>
                    <ul class="mt-2">
                        <li>è¯·æ±‚ç¼ºå¤±ä¿¡æ¯</li>
                        <li>ç¡®è®¤é‡è¦ç»†èŠ‚</li>
                        <li>æ‰§è¡Œç”¨æˆ·è¯·æ±‚</li>
                        <li>æä¾›æ¨èå»ºè®®</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ”„</span>
                    <h4 class="card-title">é”™è¯¯æ¢å¤</h4>
                    <p>å¤„ç†ç†è§£é”™è¯¯å’Œå¼‚å¸¸ï¼š</p>
                    <ul class="mt-2">
                        <li>æ¾„æ¸…æ­§ä¹‰</li>
                        <li>çº æ­£è¯¯è§£</li>
                        <li>é‡æ–°å¼•å¯¼å¯¹è¯</li>
                        <li>ä¼˜é›…é™çº§</li>
                    </ul>
                </div>
            </div>

            <div class="code-block mt-4">
                <div class="code-header">
                    <span class="code-lang">Python - åŸºäºå¼ºåŒ–å­¦ä¹ çš„å¯¹è¯ç®¡ç†</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                </div>
                <div class="code-content">
                    <pre>import torch
import torch.nn as nn
import torch.nn.functional as F
from collections import defaultdict
import numpy as np

class DialogueState:
    """
    å¯¹è¯çŠ¶æ€è¡¨ç¤º
    """
    def __init__(self):
        self.slots = {}  # æ§½ä½ä¿¡æ¯
        self.intent = None  # å½“å‰æ„å›¾
        self.history = []  # å¯¹è¯å†å²
        self.turn = 0  # å¯¹è¯è½®æ¬¡
        self.confirmed = set()  # å·²ç¡®è®¤çš„æ§½ä½

    def update(self, nlu_result):
        """æ›´æ–°å¯¹è¯çŠ¶æ€"""
        # æ›´æ–°æ„å›¾
        if nlu_result['intent']['confidence'] > 0.7:
            self.intent = nlu_result['intent']['name']

        # æ›´æ–°æ§½ä½
        for entity in nlu_result['entities']:
            slot_name = entity['type']
            slot_value = entity['value']

            # å¦‚æœæ§½ä½å·²å­˜åœ¨ä¸”æœªç¡®è®¤ï¼Œå¯èƒ½éœ€è¦æ¾„æ¸…
            if slot_name in self.slots and slot_name not in self.confirmed:
                if self.slots[slot_name] != slot_value:
                    # å†²çªï¼Œéœ€è¦æ¾„æ¸…
                    self.slots[slot_name] = {
                        'value': slot_value,
                        'candidates': [self.slots[slot_name], slot_value],
                        'need_confirm': True
                    }
            else:
                self.slots[slot_name] = slot_value

        # æ›´æ–°å†å²
        self.history.append(nlu_result)
        self.turn += 1

    def get_missing_slots(self, required_slots):
        """è·å–ç¼ºå¤±çš„å¿…éœ€æ§½ä½"""
        missing = []
        for slot in required_slots:
            if slot not in self.slots or self.slots[slot] is None:
                missing.append(slot)
        return missing

    def to_vector(self, slot_list, intent_list):
        """å°†çŠ¶æ€è½¬æ¢ä¸ºå‘é‡è¡¨ç¤º"""
        # æ§½ä½ç¼–ç 
        slot_vector = []
        for slot in slot_list:
            if slot in self.slots:
                slot_vector.extend([1, 1 if slot in self.confirmed else 0])
            else:
                slot_vector.extend([0, 0])

        # æ„å›¾ç¼–ç 
        intent_vector = [0] * len(intent_list)
        if self.intent in intent_list:
            intent_vector[intent_list.index(self.intent)] = 1

        # å…¶ä»–ç‰¹å¾
        other_features = [
            self.turn / 20,  # å½’ä¸€åŒ–çš„è½®æ¬¡
            len(self.history) / 20,  # å†å²é•¿åº¦
            len(self.confirmed) / len(slot_list) if slot_list else 0  # å®Œæˆåº¦
        ]

        return np.array(slot_vector + intent_vector + other_features, dtype=np.float32)

class DialoguePolicy(nn.Module):
    """
    åŸºäºæ·±åº¦å¼ºåŒ–å­¦ä¹ çš„å¯¹è¯ç­–ç•¥
    """
    def __init__(self, state_dim, action_dim, hidden_dim=128):
        super().__init__()

        # ç­–ç•¥ç½‘ç»œ
        self.policy_net = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU(),
            nn.Dropout(0.2),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Dropout(0.2),
            nn.Linear(hidden_dim, action_dim)
        )

        # ä»·å€¼ç½‘ç»œ
        self.value_net = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU(),
            nn.Dropout(0.2),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, 1)
        )

    def forward(self, state):
        # åŠ¨ä½œæ¦‚ç‡
        action_logits = self.policy_net(state)
        action_probs = F.softmax(action_logits, dim=-1)

        # çŠ¶æ€ä»·å€¼
        state_value = self.value_net(state)

        return action_probs, state_value

    def select_action(self, state, epsilon=0.1):
        """é€‰æ‹©åŠ¨ä½œï¼ˆå¸¦æ¢ç´¢ï¼‰"""
        if np.random.random() < epsilon:
            # éšæœºæ¢ç´¢
            action = np.random.randint(0, self.policy_net[-1].out_features)
        else:
            # æ ¹æ®ç­–ç•¥é€‰æ‹©
            with torch.no_grad():
                state_tensor = torch.FloatTensor(state).unsqueeze(0)
                action_probs, _ = self.forward(state_tensor)
                action = torch.multinomial(action_probs, 1).item()

        return action

class DialogueManager:
    """
    å¯¹è¯ç®¡ç†å™¨
    """
    def __init__(self, policy_model, action_templates):
        self.policy = policy_model
        self.action_templates = action_templates
        self.state = DialogueState()

        # å®šä¹‰åŠ¨ä½œç©ºé—´
        self.actions = [
            'request_slot',      # è¯·æ±‚æ§½ä½ä¿¡æ¯
            'confirm_slot',      # ç¡®è®¤æ§½ä½å€¼
            'inform',           # æä¾›ä¿¡æ¯
            'suggest',          # æä¾›å»ºè®®
            'execute',          # æ‰§è¡Œä»»åŠ¡
            'clarify',          # æ¾„æ¸…æ­§ä¹‰
            'apologize',        # é“æ­‰
            'close'             # ç»“æŸå¯¹è¯
        ]

        # æ„å›¾æ‰€éœ€æ§½ä½
        self.required_slots = {
            'è®¢ç¥¨': ['å‡ºå‘åœ°', 'ç›®çš„åœ°', 'æ—¶é—´'],
            'æŸ¥è¯¢': ['æŸ¥è¯¢ç±»å‹', 'æŸ¥è¯¢å¯¹è±¡'],
            'å–æ¶ˆ': ['è®¢å•å·']
        }

    def process(self, nlu_result):
        """
        å¤„ç†ç”¨æˆ·è¾“å…¥ï¼Œè¿”å›ç³»ç»ŸåŠ¨ä½œ
        """
        # æ›´æ–°çŠ¶æ€
        self.state.update(nlu_result)

        # è·å–çŠ¶æ€å‘é‡
        state_vector = self.state.to_vector(
            ['å‡ºå‘åœ°', 'ç›®çš„åœ°', 'æ—¶é—´', 'æ•°é‡'],
            ['è®¢ç¥¨', 'æŸ¥è¯¢', 'å–æ¶ˆ', 'é—²èŠ']
        )

        # é€‰æ‹©åŠ¨ä½œ
        action_idx = self.policy.select_action(state_vector)
        action_type = self.actions[action_idx]

        # ç”Ÿæˆå…·ä½“å“åº”
        response = self._generate_response(action_type)

        return {
            'action': action_type,
            'response': response,
            'state': self.state
        }

    def _generate_response(self, action_type):
        """
        æ ¹æ®åŠ¨ä½œç±»å‹ç”Ÿæˆå“åº”
        """
        if action_type == 'request_slot':
            # è¯·æ±‚ç¼ºå¤±ä¿¡æ¯
            missing = self.state.get_missing_slots(
                self.required_slots.get(self.state.intent, [])
            )
            if missing:
                slot = missing[0]
                return self.action_templates['request_slot'][slot]

        elif action_type == 'confirm_slot':
            # ç¡®è®¤æ§½ä½å€¼
            for slot, value in self.state.slots.items():
                if slot not in self.state.confirmed:
                    return f"è¯·ç¡®è®¤{slot}æ˜¯{value}ï¼Œå¯¹å—ï¼Ÿ"

        elif action_type == 'execute':
            # æ‰§è¡Œä»»åŠ¡
            if self.state.intent == 'è®¢ç¥¨':
                return self._book_ticket()
            elif self.state.intent == 'æŸ¥è¯¢':
                return self._query_info()

        elif action_type == 'clarify':
            # æ¾„æ¸…æ­§ä¹‰
            return "æŠ±æ­‰ï¼Œæˆ‘ä¸å¤ªæ˜ç™½æ‚¨çš„æ„æ€ï¼Œèƒ½å†è¯´ä¸€éå—ï¼Ÿ"

        return "æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ"

    def _book_ticket(self):
        """æ‰§è¡Œè®¢ç¥¨æ“ä½œ"""
        # æ£€æŸ¥æ˜¯å¦æ‰€æœ‰ä¿¡æ¯éƒ½å·²æ”¶é›†
        required = self.required_slots['è®¢ç¥¨']
        missing = self.state.get_missing_slots(required)

        if not missing:
            # æ¨¡æ‹Ÿè®¢ç¥¨
            slots = self.state.slots
            return f"""
å¥½çš„ï¼Œå·²ä¸ºæ‚¨é¢„è®¢ï¼š
âœˆï¸ {slots['å‡ºå‘åœ°']} â†’ {slots['ç›®çš„åœ°']}
ğŸ“… æ—¶é—´ï¼š{slots['æ—¶é—´']}
ğŸ’º æ•°é‡ï¼š{slots.get('æ•°é‡', 1)}å¼ 

è¯·ç¡®è®¤è®¢å•ä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Ÿ
"""
        else:
            return f"è¯·æä¾›{missing[0]}ä¿¡æ¯"

# ========== åŸºäºè§„åˆ™çš„å¯¹è¯ç®¡ç† ==========
class RuleBasedDM:
    """
    åŸºäºè§„åˆ™çš„å¯¹è¯ç®¡ç†ï¼ˆä½œä¸ºå¯¹æ¯”ï¼‰
    """
    def __init__(self):
        self.state = DialogueState()
        self.rules = self._define_rules()

    def _define_rules(self):
        """å®šä¹‰å¯¹è¯è§„åˆ™"""
        return {
            # (æ„å›¾, æ¡ä»¶) -> åŠ¨ä½œ
            ('è®¢ç¥¨', 'missing_slots'): 'request_slot',
            ('è®¢ç¥¨', 'all_slots_filled'): 'confirm_and_execute',
            ('æŸ¥è¯¢', 'missing_query_type'): 'ask_query_type',
            ('é—²èŠ', 'any'): 'chitchat',
            ('unclear', 'low_confidence'): 'clarify'
        }

    def process(self, nlu_result):
        """å¤„ç†ç”¨æˆ·è¾“å…¥"""
        self.state.update(nlu_result)

        # æ ¹æ®è§„åˆ™é€‰æ‹©åŠ¨ä½œ
        action = self._apply_rules()
        response = self._execute_action(action)

        return {
            'action': action,
            'response': response,
            'state': self.state
        }

# ========== ä½¿ç”¨ç¤ºä¾‹ ==========
def demo_dialogue_management():
    # åˆå§‹åŒ–ç­–ç•¥æ¨¡å‹
    state_dim = 15  # çŠ¶æ€å‘é‡ç»´åº¦
    action_dim = 8   # åŠ¨ä½œæ•°é‡

    policy = DialoguePolicy(state_dim, action_dim)

    # åŠ¨ä½œæ¨¡æ¿
    templates = {
        'request_slot': {
            'å‡ºå‘åœ°': "è¯·é—®æ‚¨ä»å“ªé‡Œå‡ºå‘ï¼Ÿ",
            'ç›®çš„åœ°': "è¯·é—®æ‚¨è¦å»å“ªé‡Œï¼Ÿ",
            'æ—¶é—´': "è¯·é—®æ‚¨æƒ³ä»€ä¹ˆæ—¶å€™å‡ºå‘ï¼Ÿ"
        }
    }

    # åˆ›å»ºå¯¹è¯ç®¡ç†å™¨
    dm = DialogueManager(policy, templates)

    # æ¨¡æ‹Ÿå¯¹è¯
    nlu_results = [
        {
            'intent': {'name': 'è®¢ç¥¨', 'confidence': 0.9},
            'entities': []
        },
        {
            'intent': {'name': 'è®¢ç¥¨', 'confidence': 0.95},
            'entities': [
                {'type': 'å‡ºå‘åœ°', 'value': 'åŒ—äº¬'},
                {'type': 'ç›®çš„åœ°', 'value': 'ä¸Šæµ·'}
            ]
        },
        {
            'intent': {'name': 'è®¢ç¥¨', 'confidence': 0.8},
            'entities': [
                {'type': 'æ—¶é—´', 'value': 'æ˜å¤©æ—©ä¸Š'}
            ]
        }
    ]

    for nlu_result in nlu_results:
        response = dm.process(nlu_result)
        print(f"åŠ¨ä½œ: {response['action']}")
        print(f"å›å¤: {response['response']}")
        print(f"çŠ¶æ€: {response['state'].slots}\n")

if __name__ == "__main__":
    demo_dialogue_management()</pre>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>å¯¹è¯ç®¡ç†çš„æ ¸å¿ƒæŒ‘æˆ˜</h4>
                <div class="analysis-item">
                    <h5>ğŸ¯ ç­–ç•¥å­¦ä¹ </h5>
                    <ul>
                        <li>å¦‚ä½•ä»æœ‰é™çš„å¯¹è¯æ•°æ®ä¸­å­¦ä¹ æœ€ä¼˜ç­–ç•¥</li>
                        <li>å¤„ç†ç¨€ç–å¥–åŠ±é—®é¢˜</li>
                        <li>å¹³è¡¡æ¢ç´¢ä¸åˆ©ç”¨</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ”„ çŠ¶æ€è¡¨ç¤º</h5>
                    <ul>
                        <li>å¦‚ä½•æœ‰æ•ˆè¡¨ç¤ºå¤æ‚çš„å¯¹è¯çŠ¶æ€</li>
                        <li>å¤„ç†éƒ¨åˆ†å¯è§‚å¯Ÿæ€§</li>
                        <li>çŠ¶æ€ç©ºé—´çˆ†ç‚¸é—®é¢˜</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ­ ç”¨æˆ·å»ºæ¨¡</h5>
                    <ul>
                        <li>ç†è§£ä¸åŒç”¨æˆ·çš„è¡Œä¸ºæ¨¡å¼</li>
                        <li>é€‚åº”ç”¨æˆ·åå¥½</li>
                        <li>å¤„ç†ç”¨æˆ·æƒ…ç»ªå˜åŒ–</li>
                    </ul>
                </div>
            </div>

            <div class="tip success mt-4">
                <span class="tip-icon">âœ…</span>
                <strong>å¯¹è¯ç®¡ç†æœ€ä½³å®è·µ</strong>
                <ul class="mt-2">
                    <li>ç»“åˆè§„åˆ™å’Œå­¦ä¹ æ–¹æ³•çš„æ··åˆç­–ç•¥</li>
                    <li>è®¾è®¡åˆç†çš„çŠ¶æ€è¡¨ç¤ºå’ŒåŠ¨ä½œç©ºé—´</li>
                    <li>ä½¿ç”¨ç”¨æˆ·æ¨¡æ‹Ÿå™¨è¿›è¡Œç­–ç•¥è®­ç»ƒ</li>
                    <li>å®ç°ä¼˜é›…çš„é”™è¯¯æ¢å¤æœºåˆ¶</li>
                </ul>
            </div>
        </section>

        <!-- è‡ªç„¶è¯­è¨€ç”Ÿæˆ -->
        <section id="nlg" class="section-card">
            <h2>âœï¸ è‡ªç„¶è¯­è¨€ç”Ÿæˆï¼ˆNLGï¼‰</h2>

            <div class="think-guide-box">
                <h4>ç”Ÿæˆçš„è‰ºæœ¯</h4>
                <div class="think-question">
                    <h5>ğŸ’­ ä»€ä¹ˆæ˜¯å¥½çš„å›å¤ï¼Ÿ</h5>
                    <p>
                        æƒ³è±¡ä½ æ˜¯å®¢æœï¼Œé¢å¯¹ç”¨æˆ·çš„æŠ•è¯‰ï¼Œä½ ä¼šå¦‚ä½•å›å¤ï¼Ÿ
                        ä¸ä»…è¦å‡†ç¡®ä¼ è¾¾ä¿¡æ¯ï¼Œè¿˜è¦æ³¨æ„è¯­æ°”ã€æƒ…æ„Ÿï¼Œ
                        è®©ç”¨æˆ·æ„Ÿåˆ°è¢«ç†è§£å’Œå°Šé‡ã€‚è¿™å°±æ˜¯NLGçš„æŒ‘æˆ˜ã€‚
                    </p>
                </div>
            </div>

            <h3>NLGçš„å…³é”®è¦ç´ </h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ“</span>
                    <h4 class="card-title">å†…å®¹è§„åˆ’</h4>
                    <p>å†³å®šè¯´ä»€ä¹ˆï¼š</p>
                    <ul class="mt-2">
                        <li>é€‰æ‹©ç›¸å…³ä¿¡æ¯</li>
                        <li>ç»„ç»‡é€»è¾‘ç»“æ„</li>
                        <li>æ§åˆ¶ä¿¡æ¯é‡</li>
                        <li>çªå‡ºé‡ç‚¹å†…å®¹</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ¨</span>
                    <h4 class="card-title">è¯­è¨€å®ç°</h4>
                    <p>å†³å®šæ€ä¹ˆè¯´ï¼š</p>
                    <ul class="mt-2">
                        <li>è¯æ±‡é€‰æ‹©</li>
                        <li>å¥å¼å˜åŒ–</li>
                        <li>è¯­æ°”æ§åˆ¶</li>
                        <li>é£æ ¼é€‚é…</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">âœ¨</span>
                    <h4 class="card-title">è¡¨é¢å®ç°</h4>
                    <p>ç”Ÿæˆæœ€ç»ˆæ–‡æœ¬ï¼š</p>
                    <ul class="mt-2">
                        <li>è¯­æ³•æ­£ç¡®æ€§</li>
                        <li>æµç•…æ€§</li>
                        <li>è¿è´¯æ€§</li>
                        <li>å¤šæ ·æ€§</li>
                    </ul>
                </div>
            </div>

            <div class="code-block mt-4">
                <div class="code-header">
                    <span class="code-lang">Python - åŸºäºæ¨¡æ¿å’Œç¥ç»ç½‘ç»œçš„NLG</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                </div>
                <div class="code-content">
                    <pre>import torch
import torch.nn as nn
from transformers import GPT2LMHeadModel, GPT2Tokenizer
import random
import re

class TemplateNLG:
    """
    åŸºäºæ¨¡æ¿çš„NLG
    ç®€å•ã€å¯æ§ã€é€‚åˆä»»åŠ¡å‹å¯¹è¯
    """
    def __init__(self):
        self.templates = {
            'request_slot': {
                'å‡ºå‘åœ°': [
                    "è¯·é—®æ‚¨ä»å“ªé‡Œå‡ºå‘ï¼Ÿ",
                    "æ‚¨çš„å‡ºå‘åŸå¸‚æ˜¯ï¼Ÿ",
                    "èƒ½å‘Šè¯‰æˆ‘æ‚¨ä»å“ªä¸ªåŸå¸‚å‡ºå‘å—ï¼Ÿ"
                ],
                'ç›®çš„åœ°': [
                    "è¯·é—®æ‚¨è¦å»å“ªé‡Œï¼Ÿ",
                    "æ‚¨çš„ç›®çš„åœ°æ˜¯ï¼Ÿ",
                    "æ‚¨æƒ³å»å“ªä¸ªåŸå¸‚ï¼Ÿ"
                ],
                'æ—¶é—´': [
                    "è¯·é—®æ‚¨æƒ³ä»€ä¹ˆæ—¶å€™å‡ºå‘ï¼Ÿ",
                    "æ‚¨è®¡åˆ’å“ªå¤©å‡ºè¡Œï¼Ÿ",
                    "èƒ½å‘Šè¯‰æˆ‘æ‚¨çš„å‡ºå‘æ—¶é—´å—ï¼Ÿ"
                ]
            },
            'confirm': {
                'default': [
                    "è¯·ç¡®è®¤ï¼š{info}ï¼Œå¯¹å—ï¼Ÿ",
                    "æˆ‘ç†è§£çš„æ˜¯ï¼š{info}ï¼Œæ­£ç¡®å—ï¼Ÿ",
                    "è®©æˆ‘ç¡®è®¤ä¸€ä¸‹ï¼š{info}ï¼Œæ˜¯è¿™æ ·å—ï¼Ÿ"
                ]
            },
            'inform': {
                'success': [
                    "å·²ä¸ºæ‚¨{action}æˆåŠŸï¼{details}",
                    "å¥½çš„ï¼Œ{action}å·²å®Œæˆã€‚{details}",
                    "âœ… {action}æˆåŠŸï¼{details}"
                ],
                'failure': [
                    "æŠ±æ­‰ï¼Œ{action}å¤±è´¥ã€‚{reason}",
                    "å¾ˆé—æ†¾ï¼Œæ— æ³•{action}ã€‚{reason}",
                    "ğŸ˜” {action}é‡åˆ°é—®é¢˜ï¼š{reason}"
                ]
            },
            'chitchat': {
                'greeting': [
                    "æ‚¨å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ",
                    "æ¬¢è¿ï¼è¯·é—®éœ€è¦ä»€ä¹ˆæœåŠ¡ï¼Ÿ",
                    "æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼"
                ],
                'thanks': [
                    "ä¸å®¢æ°”ï¼Œè¿™æ˜¯æˆ‘åº”è¯¥åšçš„ï¼",
                    "å¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨ï¼",
                    "éšæ—¶ä¸ºæ‚¨æœåŠ¡ï¼ğŸ˜Š"
                ]
            }
        }

    def generate(self, dialogue_act, **kwargs):
        """
        æ ¹æ®å¯¹è¯åŠ¨ä½œç”Ÿæˆå›å¤
        """
        act_type = dialogue_act['type']
        act_content = dialogue_act.get('content', {})

        # é€‰æ‹©æ¨¡æ¿ç±»åˆ«
        if act_type in self.templates:
            templates = self.templates[act_type]

            # é€‰æ‹©å…·ä½“æ¨¡æ¿
            sub_type = act_content.get('sub_type', 'default')
            if sub_type in templates:
                template_list = templates[sub_type]
            else:
                template_list = templates.get('default', [""])

            # éšæœºé€‰æ‹©ä¸€ä¸ªæ¨¡æ¿
            template = random.choice(template_list)

            # å¡«å……æ¨¡æ¿
            response = self._fill_template(template, act_content, kwargs)

            return response
        else:
            return "æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ"

    def _fill_template(self, template, content, kwargs):
        """å¡«å……æ¨¡æ¿å˜é‡"""
        # åˆå¹¶æ‰€æœ‰å¯ç”¨å˜é‡
        variables = {**content, **kwargs}

        # ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢å˜é‡
        def replace_var(match):
            var_name = match.group(1)
            return str(variables.get(var_name, ''))

        result = re.sub(r'\{(\w+)\}', replace_var, template)
        return result

class NeuralNLG(nn.Module):
    """
    åŸºäºç¥ç»ç½‘ç»œçš„NLG
    ä½¿ç”¨GPT-2è¿›è¡Œæ¡ä»¶æ–‡æœ¬ç”Ÿæˆ
    """
    def __init__(self, model_name='gpt2'):
        super().__init__()
        self.tokenizer = GPT2Tokenizer.from_pretrained(model_name)
        self.model = GPT2LMHeadModel.from_pretrained(model_name)

        # æ·»åŠ ç‰¹æ®Šæ ‡è®°
        special_tokens = {
            'pad_token': '[PAD]',
            'additional_special_tokens': [
                '[ACT]', '[SLOT]', '[VALUE]', '[EOS]'
            ]
        }
        self.tokenizer.add_special_tokens(special_tokens)
        self.model.resize_token_embeddings(len(self.tokenizer))

    def generate(self, dialogue_act, context=None, max_length=100):
        """
        åŸºäºå¯¹è¯åŠ¨ä½œç”Ÿæˆå›å¤
        """
        # æ„å»ºè¾“å…¥
        prompt = self._build_prompt(dialogue_act, context)

        # ç¼–ç 
        inputs = self.tokenizer.encode(
            prompt,
            return_tensors='pt',
            truncation=True,
            max_length=max_length
        )

        # ç”Ÿæˆ
        with torch.no_grad():
            outputs = self.model.generate(
                inputs,
                max_length=max_length,
                num_return_sequences=1,
                temperature=0.8,
                do_sample=True,
                top_p=0.9,
                pad_token_id=self.tokenizer.pad_token_id,
                eos_token_id=self.tokenizer.eos_token_id
            )

        # è§£ç 
        response = self.tokenizer.decode(
            outputs[0],
            skip_special_tokens=True
        )

        # æå–ç”Ÿæˆçš„éƒ¨åˆ†
        response = response[len(prompt):].strip()

        return response

    def _build_prompt(self, dialogue_act, context):
        """
        æ„å»ºç”Ÿæˆæç¤º
        """
        prompt_parts = []

        # æ·»åŠ ä¸Šä¸‹æ–‡
        if context:
            prompt_parts.append(f"Context: {context}")

        # æ·»åŠ å¯¹è¯åŠ¨ä½œ
        prompt_parts.append(f"[ACT] {dialogue_act['type']}")

        # æ·»åŠ æ§½ä½ä¿¡æ¯
        if 'slots' in dialogue_act:
            for slot, value in dialogue_act['slots'].items():
                prompt_parts.append(f"[SLOT] {slot} [VALUE] {value}")

        prompt_parts.append("Response:")

        return " ".join(prompt_parts)

class PersonalizedNLG:
    """
    ä¸ªæ€§åŒ–NLG
    æ ¹æ®ç”¨æˆ·ç”»åƒè°ƒæ•´ç”Ÿæˆé£æ ¼
    """
    def __init__(self, base_nlg):
        self.base_nlg = base_nlg
        self.style_modifiers = {
            'formal': {
                'æ‚¨': 'æ‚¨',
                'å—': 'å—',
                'è¯·': 'è¯·',
                'emoji': False
            },
            'casual': {
                'æ‚¨': 'ä½ ',
                'å—': 'å‘¢',
                'è¯·': '',
                'emoji': True
            },
            'enthusiastic': {
                'exclamation': True,
                'emoji': True,
                'positive_words': ['å¤ªå¥½äº†', 'çœŸæ£’', 'éå¸¸å¥½']
            }
        }

    def generate(self, dialogue_act, user_profile=None):
        """
        ç”Ÿæˆä¸ªæ€§åŒ–å›å¤
        """
        # åŸºç¡€ç”Ÿæˆ
        base_response = self.base_nlg.generate(dialogue_act)

        # é£æ ¼è°ƒæ•´
        if user_profile:
            style = user_profile.get('preferred_style', 'formal')
            response = self._apply_style(base_response, style)
        else:
            response = base_response

        # æƒ…æ„Ÿè°ƒæ•´
        if user_profile and user_profile.get('emotion_state') == 'frustrated':
            response = self._add_empathy(response)

        return response

    def _apply_style(self, text, style):
        """åº”ç”¨é£æ ¼ä¿®æ”¹"""
        if style not in self.style_modifiers:
            return text

        modifiers = self.style_modifiers[style]

        # æ›¿æ¢ç§°å‘¼
        for old, new in modifiers.items():
            if isinstance(old, str) and isinstance(new, str):
                text = text.replace(old, new)

        # æ·»åŠ è¡¨æƒ…
        if modifiers.get('emoji') and not any(emoji in text for emoji in ['ğŸ˜Š', 'ğŸ‘', 'âœ¨']):
            text += ' ğŸ˜Š'

        return text

    def _add_empathy(self, text):
        """æ·»åŠ å…±æƒ…è¡¨è¾¾"""
        empathy_phrases = [
            "æˆ‘ç†è§£æ‚¨çš„æ„Ÿå—ã€‚",
            "å¾ˆæŠ±æ­‰ç»™æ‚¨å¸¦æ¥å›°æ‰°ã€‚",
            "æˆ‘ä¼šå°½åŠ›å¸®åŠ©æ‚¨è§£å†³é—®é¢˜ã€‚"
        ]
        return random.choice(empathy_phrases) + text

class ControllableNLG:
    """
    å¯æ§NLG
    æ§åˆ¶ç”Ÿæˆæ–‡æœ¬çš„å¤šä¸ªå±æ€§
    """
    def __init__(self):
        self.template_nlg = TemplateNLG()
        self.neural_nlg = NeuralNLG()
        self.personalized_nlg = PersonalizedNLG(self.template_nlg)

    def generate(self, dialogue_act, control_params=None):
        """
        æ ¹æ®æ§åˆ¶å‚æ•°ç”Ÿæˆæ–‡æœ¬

        æ§åˆ¶å‚æ•°åŒ…æ‹¬ï¼š
        - method: 'template' æˆ– 'neural'
        - style: 'formal', 'casual', 'enthusiastic'
        - length: 'short', 'medium', 'long'
        - emotion: 'neutral', 'positive', 'empathetic'
        """
        if not control_params:
            control_params = {'method': 'template'}

        # é€‰æ‹©ç”Ÿæˆæ–¹æ³•
        method = control_params.get('method', 'template')

        if method == 'neural':
            response = self.neural_nlg.generate(dialogue_act)
        else:
            response = self.template_nlg.generate(dialogue_act)

        # åº”ç”¨é£æ ¼
        if 'style' in control_params:
            user_profile = {'preferred_style': control_params['style']}
            response = self.personalized_nlg._apply_style(response, control_params['style'])

        # æ§åˆ¶é•¿åº¦
        if control_params.get('length') == 'short':
            response = self._shorten(response)
        elif control_params.get('length') == 'long':
            response = self._expand(response)

        # æ·»åŠ æƒ…æ„Ÿ
        if control_params.get('emotion') == 'positive':
            response = self._add_positive_emotion(response)
        elif control_params.get('emotion') == 'empathetic':
            response = self._add_empathy(response)

        return response

    def _shorten(self, text):
        """ç¼©çŸ­æ–‡æœ¬"""
        # ç®€å•å®ç°ï¼šåªä¿ç•™ç¬¬ä¸€å¥
        sentences = text.split('ã€‚')
        return sentences[0] + 'ã€‚' if sentences[0] else text

    def _expand(self, text):
        """æ‰©å±•æ–‡æœ¬"""
        expansions = [
            "å¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–é—®é¢˜ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚",
            "æˆ‘ä¼šå…¨ç¨‹ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚",
            "å¸Œæœ›è¿™ä¸ªå›ç­”å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚"
        ]
        return text + ' ' + random.choice(expansions)

# ========== ä½¿ç”¨ç¤ºä¾‹ ==========
def demo_nlg():
    # åˆ›å»ºNLGå®ä¾‹
    nlg = ControllableNLG()

    # æµ‹è¯•ä¸åŒçš„å¯¹è¯åŠ¨ä½œ
    test_cases = [
        {
            'dialogue_act': {
                'type': 'request_slot',
                'content': {'sub_type': 'å‡ºå‘åœ°'}
            },
            'control': {'style': 'casual', 'emotion': 'positive'}
        },
        {
            'dialogue_act': {
                'type': 'inform',
                'content': {
                    'sub_type': 'success',
                    'action': 'è®¢ç¥¨',
                    'details': 'è®¢å•å·ï¼šTK123456'
                }
            },
            'control': {'style': 'formal', 'length': 'long'}
        },
        {
            'dialogue_act': {
                'type': 'chitchat',
                'content': {'sub_type': 'greeting'}
            },
            'control': {'style': 'enthusiastic', 'emotion': 'positive'}
        }
    ]

    for test in test_cases:
        response = nlg.generate(
            test['dialogue_act'],
            test['control']
        )
        print(f"åŠ¨ä½œ: {test['dialogue_act']}")
        print(f"æ§åˆ¶: {test['control']}")
        print(f"å›å¤: {response}\n")

if __name__ == "__main__":
    demo_nlg()</pre>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>NLGçš„æ ¸å¿ƒæŒ‘æˆ˜</h4>
                <div class="analysis-item">
                    <h5>ğŸ¨ è‡ªç„¶æ€§ä¸å¤šæ ·æ€§</h5>
                    <ul>
                        <li>é¿å…æœºæ¢°é‡å¤çš„å›å¤</li>
                        <li>ä¿æŒè¯­è¨€çš„è‡ªç„¶æµç•…</li>
                        <li>é€‚åº”ä¸åŒçš„è¡¨è¾¾é£æ ¼</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ¯ å‡†ç¡®æ€§ä¸ç›¸å…³æ€§</h5>
                    <ul>
                        <li>ç¡®ä¿ä¿¡æ¯ä¼ è¾¾å‡†ç¡®</li>
                        <li>é¿å…äº§ç”Ÿé”™è¯¯æˆ–è¯¯å¯¼æ€§å†…å®¹</li>
                        <li>ä¿æŒä¸ä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ˜Š æƒ…æ„Ÿä¸ä¸ªæ€§åŒ–</h5>
                    <ul>
                        <li>ç†è§£å’Œè¡¨è¾¾é€‚å½“çš„æƒ…æ„Ÿ</li>
                        <li>é€‚åº”ç”¨æˆ·çš„æ²Ÿé€šé£æ ¼</li>
                        <li>å»ºç«‹ä¸ªæ€§åŒ–çš„å¯¹è¯ä½“éªŒ</li>
                    </ul>
                </div>
            </div>

            <div class="tip info mt-4">
                <span class="tip-icon">ğŸ’¡</span>
                <strong>NLGæœ€ä½³å®è·µ</strong>
                <ul class="mt-2">
                    <li>ç»“åˆæ¨¡æ¿å’Œç¥ç»æ–¹æ³•çš„ä¼˜åŠ¿</li>
                    <li>å®ç°å¤šç»´åº¦çš„å¯æ§ç”Ÿæˆ</li>
                    <li>æ³¨é‡ç”¨æˆ·ä½“éªŒå’Œæƒ…æ„Ÿè®¾è®¡</li>
                    <li>å»ºç«‹è´¨é‡è¯„ä¼°å’Œè¿‡æ»¤æœºåˆ¶</li>
                </ul>
            </div>
        </section>

        <!-- ä»»åŠ¡å‹å¯¹è¯ç³»ç»Ÿ -->
        <section id="task-oriented" class="section-card">
            <h2>ğŸ¯ ä»»åŠ¡å‹å¯¹è¯ç³»ç»Ÿ</h2>

            <div class="think-guide-box">
                <h4>ç›®æ ‡å¯¼å‘çš„å¯¹è¯</h4>
                <div class="think-question">
                    <h5>ğŸ’­ å¦‚ä½•é«˜æ•ˆå®Œæˆä»»åŠ¡ï¼Ÿ</h5>
                    <p>
                        ä»»åŠ¡å‹å¯¹è¯ç³»ç»Ÿå°±åƒä¸€ä¸ªä¸“ä¸šçš„åŠ©æ‰‹ï¼Œ
                        éœ€è¦å¿«é€Ÿç†è§£ç”¨æˆ·éœ€æ±‚ï¼Œæ”¶é›†å¿…è¦ä¿¡æ¯ï¼Œ
                        å¹¶é«˜æ•ˆåœ°å®Œæˆç‰¹å®šä»»åŠ¡ã€‚å¦‚ä½•è®¾è®¡è¿™æ ·çš„ç³»ç»Ÿï¼Ÿ
                    </p>
                </div>
            </div>

            <h3>ä»»åŠ¡å‹å¯¹è¯çš„ç‰¹ç‚¹</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ¯</span>
                    <h4 class="card-title">æ˜ç¡®çš„ç›®æ ‡</h4>
                    <ul>
                        <li>è®¢ç¥¨ã€è®¢é¤ã€æŸ¥è¯¢</li>
                        <li>æœ‰é™çš„ä»»åŠ¡èŒƒå›´</li>
                        <li>å¯é‡åŒ–çš„æˆåŠŸæ ‡å‡†</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ“‹</span>
                    <h4 class="card-title">ç»“æ„åŒ–æµç¨‹</h4>
                    <ul>
                        <li>æ§½ä½å¡«å……</li>
                        <li>ä¿¡æ¯ç¡®è®¤</li>
                        <li>ä»»åŠ¡æ‰§è¡Œ</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">âš¡</span>
                    <h4 class="card-title">æ•ˆç‡ä¼˜å…ˆ</h4>
                    <ul>
                        <li>æœ€å°‘è½®æ¬¡å®Œæˆ</li>
                        <li>ç²¾å‡†ä¿¡æ¯æ”¶é›†</li>
                        <li>å¿«é€Ÿé”™è¯¯æ¢å¤</li>
                    </ul>
                </div>
            </div>

            <div class="dialogue-demo mt-4">
                <h3 class="text-center mb-3">è®¢é¤å¯¹è¯ç¤ºä¾‹</h3>
                <div class="dialogue-message message-user">
                    <div class="message-avatar avatar-user">ğŸ‘¤</div>
                    <div class="message-content">
                        <div class="message-label">ç”¨æˆ·</div>
                        <p>æˆ‘æƒ³è®¢ä¸ªæŠ«è¨</p>
                    </div>
                </div>
                <div class="dialogue-message message-bot">
                    <div class="message-avatar avatar-bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-label">ç³»ç»Ÿ</div>
                        <p>å¥½çš„ï¼è¯·é—®æ‚¨æƒ³è¦ä»€ä¹ˆå£å‘³çš„æŠ«è¨ï¼Ÿæˆ‘ä»¬æœ‰ï¼š<br>
                            ğŸ• å¤å¨å¤·é£æƒ…<br>
                            ğŸ• æ„å¼é¦™è‚ <br>
                            ğŸ• ç”°å›­è”¬èœ<br>
                            ğŸ• æµ·é²œè‡³å°Š</p>
                    </div>
                </div>
                <div class="dialogue-message message-user">
                    <div class="message-avatar avatar-user">ğŸ‘¤</div>
                    <div class="message-content">
                        <div class="message-label">ç”¨æˆ·</div>
                        <p>å¤å¨å¤·çš„ï¼Œè¦å¤§ä»½</p>
                    </div>
                </div>
                <div class="dialogue-message message-bot">
                    <div class="message-avatar avatar-bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-label">ç³»ç»Ÿ</div>
                        <p>å¤å¨å¤·é£æƒ…å¤§ä»½æŠ«è¨ï¼Œä»·æ ¼æ˜¯89å…ƒã€‚è¯·é—®é€åˆ°å“ªé‡Œï¼Ÿ</p>
                    </div>
                </div>
            </div>

            <div class="tip success mt-4">
                <span class="tip-icon">âœ…</span>
                <strong>ä»»åŠ¡å‹å¯¹è¯ç³»ç»Ÿè®¾è®¡è¦ç‚¹</strong>
                <ul class="mt-2">
                    <li>æ¸…æ™°çš„ä»»åŠ¡å®šä¹‰å’Œè¾¹ç•Œ</li>
                    <li>é«˜æ•ˆçš„ä¿¡æ¯æ”¶é›†ç­–ç•¥</li>
                    <li>å¼ºå¤§çš„é”™è¯¯å¤„ç†èƒ½åŠ›</li>
                    <li>ä¸åç«¯ç³»ç»Ÿçš„æ— ç¼é›†æˆ</li>
                </ul>
            </div>
        </section>

        <!-- å¼€æ”¾åŸŸå¯¹è¯ç³»ç»Ÿ -->
        <section id="open-domain" class="section-card">
            <h2>ğŸ’¬ å¼€æ”¾åŸŸå¯¹è¯ç³»ç»Ÿ</h2>

            <div class="think-guide-box">
                <h4>è‡ªç”±å¯¹è¯çš„æŒ‘æˆ˜</h4>
                <div class="think-question">
                    <h5>ğŸ¤” å¦‚ä½•è¿›è¡Œæœ‰æ„ä¹‰çš„é—²èŠï¼Ÿ</h5>
                    <p>
                        å¼€æ”¾åŸŸå¯¹è¯æ²¡æœ‰ç‰¹å®šç›®æ ‡ï¼Œè¯é¢˜å¯èƒ½éšæ—¶è½¬æ¢ã€‚
                        ç³»ç»Ÿéœ€è¦å…·å¤‡å¹¿æ³›çš„çŸ¥è¯†ã€è‰¯å¥½çš„è¯­è¨€ç†è§£èƒ½åŠ›ï¼Œ
                        ä»¥åŠä¿æŒå¯¹è¯è¶£å‘³æ€§çš„èƒ½åŠ›ã€‚
                    </p>
                </div>
            </div>

            <h3>å¼€æ”¾åŸŸå¯¹è¯çš„ç‰¹å¾</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸŒ</span>
                    <h4 class="card-title">è¯é¢˜å¤šæ ·æ€§</h4>
                    <ul>
                        <li>å¤©æ°”ã€æ–°é—»ã€å¨±ä¹</li>
                        <li>ä¸ªäººç»å†åˆ†äº«</li>
                        <li>è§‚ç‚¹è®¨è®º</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ­</span>
                    <h4 class="card-title">æƒ…æ„Ÿäº¤æµ</h4>
                    <ul>
                        <li>å…±æƒ…ç†è§£</li>
                        <li>æƒ…ç»ªå“åº”</li>
                        <li>ä¸ªæ€§è¡¨è¾¾</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">â™¾ï¸</span>
                    <h4 class="card-title">æŒç»­æ€§</h4>
                    <ul>
                        <li>é•¿æœŸè®°å¿†</li>
                        <li>è¯é¢˜è¿è´¯</li>
                        <li>å…³ç³»å»ºç«‹</li>
                    </ul>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>å¼€æ”¾åŸŸå¯¹è¯çš„æ ¸å¿ƒéš¾é¢˜</h4>
                <div class="analysis-item">
                    <h5>ğŸ§  çŸ¥è¯†å¹¿åº¦</h5>
                    <ul>
                        <li>éœ€è¦æµ·é‡çš„ä¸–ç•ŒçŸ¥è¯†</li>
                        <li>çŸ¥è¯†çš„å®æ—¶æ›´æ–°</li>
                        <li>çŸ¥è¯†çš„å‡†ç¡®æ€§éªŒè¯</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ’­ å¯¹è¯æ·±åº¦</h5>
                    <ul>
                        <li>é¿å…è‚¤æµ…çš„å›å¤</li>
                        <li>ä¿æŒè§‚ç‚¹çš„ä¸€è‡´æ€§</li>
                        <li>æ·±å…¥çš„è¯é¢˜æ¢è®¨</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ¨ ä¸ªæ€§å¡‘é€ </h5>
                    <ul>
                        <li>å»ºç«‹ç‹¬ç‰¹çš„å¯¹è¯é£æ ¼</li>
                        <li>ä¿æŒäººæ ¼çš„ä¸€è‡´æ€§</li>
                        <li>é€‚åº¦çš„å¹½é»˜å’Œåˆ›æ„</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- å¤šæ¨¡æ€å¯¹è¯ç³»ç»Ÿ -->
        <section id="multimodal" class="section-card">
            <h2>ğŸ–¼ï¸ å¤šæ¨¡æ€å¯¹è¯ç³»ç»Ÿ</h2>
            <div class="think-guide-box">
                <h4>è¶…è¶Šæ–‡å­—çš„äº¤æµ</h4>
                <div class="think-question">
                    <h5>ğŸ‘ï¸ å¦‚æœå¯¹è¯ä¸åªæ˜¯æ–‡å­—ï¼Ÿ</h5>
                    <p>
                        äººç±»äº¤æµä¸ä»…ä¾é è¯­è¨€ï¼Œè¿˜æœ‰è¡¨æƒ…ã€æ‰‹åŠ¿ã€å›¾åƒç­‰ã€‚
                        å¤šæ¨¡æ€å¯¹è¯ç³»ç»Ÿè¯•å›¾æ•´åˆè¿™äº›ä¿¡æ¯ï¼Œ
                        åˆ›é€ æ›´è‡ªç„¶ã€æ›´ä¸°å¯Œçš„äº¤äº’ä½“éªŒã€‚
                    </p>
                </div>
            </div>

            <h3>å¤šæ¨¡æ€çš„ç»´åº¦</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ‘ï¸</span>
                    <h4 class="card-title">è§†è§‰ç†è§£</h4>
                    <ul>
                        <li>å›¾åƒæè¿°å’Œé—®ç­”</li>
                        <li>è¡¨æƒ…è¯†åˆ«</li>
                        <li>æ‰‹åŠ¿ç†è§£</li>
                        <li>åœºæ™¯æ„ŸçŸ¥</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸµ</span>
                    <h4 class="card-title">è¯­éŸ³ç‰¹å¾</h4>
                    <ul>
                        <li>è¯­è°ƒæƒ…æ„Ÿåˆ†æ</li>
                        <li>è¯­é€ŸèŠ‚å¥</li>
                        <li>å£°çº¹è¯†åˆ«</li>
                        <li>ç¯å¢ƒéŸ³ç†è§£</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ¤</span>
                    <h4 class="card-title">å¤šæ¨¡æ€èåˆ</h4>
                    <ul>
                        <li>è·¨æ¨¡æ€å¯¹é½</li>
                        <li>ä¿¡æ¯äº’è¡¥</li>
                        <li>å†²çªæ¶ˆè§£</li>
                        <li>ç»Ÿä¸€è¡¨ç¤º</li>
                    </ul>
                </div>
            </div>

            <div class="dialogue-demo mt-4">
                <h3 class="text-center mb-3">å¤šæ¨¡æ€å¯¹è¯ç¤ºä¾‹</h3>
                <div class="dialogue-message message-user">
                    <div class="message-avatar avatar-user">ğŸ‘¤</div>
                    <div class="message-content">
                        <div class="message-label">ç”¨æˆ·ï¼ˆå±•ç¤ºç…§ç‰‡ï¼‰</div>
                        <p>ğŸ–¼ï¸ [æµ·æ»©æ—¥è½ç…§ç‰‡]<br>è¿™æ˜¯æˆ‘æ˜¨å¤©æ‹çš„ï¼Œæ¼‚äº®å—ï¼Ÿ</p>
                    </div>
                </div>
                <div class="dialogue-message message-bot">
                    <div class="message-avatar avatar-bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-label">ç³»ç»Ÿ</div>
                        <p>å“‡ï¼è¿™å¼ æ—¥è½ç…§ç‰‡çœŸçš„å¾ˆç¾ï¼ğŸ˜ æ©™çº¢è‰²çš„å¤©ç©ºå€’æ˜ åœ¨æµ·é¢ä¸Šï¼Œ
                            è¿˜æœ‰è¿œå¤„çš„æ¤°å­æ ‘å‰ªå½±ï¼Œå¾ˆæœ‰çƒ­å¸¦é£æƒ…ã€‚æ˜¯åœ¨å“ªä¸ªæµ·æ»©æ‹çš„ï¼Ÿ</p>
                    </div>
                </div>
                <div class="dialogue-message message-user">
                    <div class="message-avatar avatar-user">ğŸ‘¤</div>
                    <div class="message-content">
                        <div class="message-label">ç”¨æˆ·</div>
                        <p>ä¸‰äºšçš„ï¼Œå¤©æ°”ç‰¹åˆ«å¥½</p>
                    </div>
                </div>
                <div class="dialogue-message message-bot">
                    <div class="message-avatar avatar-bot">ğŸ¤–</div>
                    <div class="message-content">
                        <div class="message-label">ç³»ç»Ÿ</div>
                        <p>ä¸‰äºšç¡®å®æ˜¯çœ‹æ—¥è½çš„å¥½åœ°æ–¹ï¼ä»ç…§ç‰‡çš„å…‰çº¿çœ‹ï¼Œ
                            åº”è¯¥æ˜¯å‚æ™š6-7ç‚¹å·¦å³å§ï¼Ÿè¿™ä¸ªå­£èŠ‚å»ä¸‰äºšçœŸæ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚
                            é™¤äº†æµ·æ»©ï¼Œä½ è¿˜å»äº†å…¶ä»–æ™¯ç‚¹å—ï¼Ÿ</p>
                    </div>
                </div>
            </div>

            <div class="tip info mt-4">
                <span class="tip-icon">ğŸ’¡</span>
                <strong>å¤šæ¨¡æ€å¯¹è¯çš„å…³é”®æŠ€æœ¯</strong>
                <ul class="mt-2">
                    <li>è·¨æ¨¡æ€é¢„è®­ç»ƒæ¨¡å‹ï¼ˆå¦‚CLIPã€ALIGNï¼‰</li>
                    <li>æ³¨æ„åŠ›æœºåˆ¶å®ç°æ¨¡æ€é—´äº¤äº’</li>
                    <li>å¤šæ¨¡æ€è¡¨ç¤ºå­¦ä¹ å’Œå¯¹é½</li>
                    <li>ç»Ÿä¸€çš„å¤šæ¨¡æ€ç”Ÿæˆæ¡†æ¶</li>
                </ul>
            </div>
        </section>

        <!-- ç³»ç»Ÿæ¶æ„è®¾è®¡ -->
        <section id="architecture" class="section-card">
            <h2>ğŸ—ï¸ ç³»ç»Ÿæ¶æ„è®¾è®¡</h2>

            <div class="think-guide-box">
                <h4>æ„å»ºå¯æ‰©å±•çš„å¯¹è¯ç³»ç»Ÿ</h4>
                <div class="think-question">
                    <h5>ğŸ”§ å¦‚ä½•è®¾è®¡ä¸€ä¸ªå¥½çš„æ¶æ„ï¼Ÿ</h5>
                    <p>
                        ä¸€ä¸ªä¼˜ç§€çš„å¯¹è¯ç³»ç»Ÿæ¶æ„éœ€è¦è€ƒè™‘æ¨¡å—åŒ–ã€å¯æ‰©å±•æ€§ã€
                        æ€§èƒ½ä¼˜åŒ–ã€å®¹é”™å¤„ç†ç­‰å¤šä¸ªæ–¹é¢ã€‚å¦‚ä½•å¹³è¡¡è¿™äº›éœ€æ±‚ï¼Ÿ
                    </p>
                </div>
            </div>

            <h3>å…¸å‹æ¶æ„æ¨¡å¼</h3>
            <div class="architecture-diagram">
                <h4 class="text-center mb-3">æ¨¡å—åŒ–å¯¹è¯ç³»ç»Ÿæ¶æ„</h4>
                <div class="arch-container">
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ¤</span>
                        <div class="arch-title">å‰ç«¯æ¥å£</div>
                        <div class="arch-desc">è¯­éŸ³/æ–‡æœ¬/å›¾åƒè¾“å…¥</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ”„</span>
                        <div class="arch-title">é¢„å¤„ç†å™¨</div>
                        <div class="arch-desc">æ ¼å¼åŒ–ã€å»å™ªã€æ ‡å‡†åŒ–</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ§ </span>
                        <div class="arch-title">ç†è§£æ¨¡å—</div>
                        <div class="arch-desc">NLUã€æ„å›¾è¯†åˆ«ã€å®ä½“æŠ½å–</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ’¾</span>
                        <div class="arch-title">çŠ¶æ€ç®¡ç†</div>
                        <div class="arch-desc">å¯¹è¯å†å²ã€ç”¨æˆ·ç”»åƒ</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ¯</span>
                        <div class="arch-title">å†³ç­–å¼•æ“</div>
                        <div class="arch-desc">ç­–ç•¥é€‰æ‹©ã€åŠ¨ä½œè§„åˆ’</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">âš™ï¸</span>
                        <div class="arch-title">æ‰§è¡Œå™¨</div>
                        <div class="arch-desc">APIè°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">âœï¸</span>
                        <div class="arch-title">ç”Ÿæˆæ¨¡å—</div>
                        <div class="arch-desc">NLGã€å›å¤ç”Ÿæˆ</div>
                    </div>
                    <div class="arch-component">
                        <span class="arch-icon">ğŸ“Š</span>
                        <div class="arch-title">åˆ†ææ¨¡å—</div>
                        <div class="arch-desc">æ—¥å¿—ã€ç›‘æ§ã€ä¼˜åŒ–</div>
                    </div>
                </div>
            </div>

            <div class="code-block mt-4">
                <div class="code-header">
                    <span class="code-lang">Python - æ¨¡å—åŒ–å¯¹è¯ç³»ç»Ÿå®ç°</span>
                    <div class="code-actions">
                        <button class="code-btn" onclick="copyCode(this)">å¤åˆ¶</button>
                    </div>
                </div>
                <div class="code-content">
                    <pre>from abc import ABC, abstractmethod
from typing import Dict, List, Optional, Any
import asyncio
import logging
from dataclasses import dataclass
from datetime import datetime

# ========== æ•°æ®ç»“æ„å®šä¹‰ ==========
@dataclass
class Message:
    """å¯¹è¯æ¶ˆæ¯"""
    id: str
    user_id: str
    content: str
    timestamp: datetime
    metadata: Dict[str, Any] = None

@dataclass
class DialogueContext:
    """å¯¹è¯ä¸Šä¸‹æ–‡"""
    session_id: str
    user_id: str
    messages: List[Message]
    state: Dict[str, Any]
    user_profile: Dict[str, Any]

# ========== åŸºç¡€ç»„ä»¶æ¥å£ ==========
class Component(ABC):
    """å¯¹è¯ç³»ç»Ÿç»„ä»¶åŸºç±»"""

    @abstractmethod
    async def process(self, input_data: Any, context: DialogueContext) -> Any:
        """å¤„ç†è¾“å…¥å¹¶è¿”å›ç»“æœ"""
        pass

class Pipeline:
    """ç»„ä»¶ç®¡é“"""

    def __init__(self):
        self.components: List[Component] = []
        self.logger = logging.getLogger(__name__)

    def add_component(self, component: Component):
        """æ·»åŠ ç»„ä»¶åˆ°ç®¡é“"""
        self.components.append(component)
        return self

    async def execute(self, input_data: Any, context: DialogueContext) -> Any:
        """æ‰§è¡Œç®¡é“"""
        result = input_data

        for component in self.components:
            try:
                result = await component.process(result, context)
                self.logger.debug(f"{component.__class__.__name__} å¤„ç†å®Œæˆ")
            except Exception as e:
                self.logger.error(f"{component.__class__.__name__} å¤„ç†å¤±è´¥: {e}")
                raise

        return result

# ========== å…·ä½“ç»„ä»¶å®ç° ==========
class PreProcessor(Component):
    """é¢„å¤„ç†ç»„ä»¶"""

    async def process(self, input_data: str, context: DialogueContext) -> str:
        # æ–‡æœ¬æ¸…æ´—
        text = input_data.strip()
        text = text.replace('\n', ' ')
        text = ' '.join(text.split())  # å»é™¤å¤šä½™ç©ºæ ¼

        # æ•æ„Ÿè¯è¿‡æ»¤
        text = self._filter_sensitive_words(text)

        return text

    def _filter_sensitive_words(self, text: str) -> str:
        # ç®€å•ç¤ºä¾‹
        sensitive_words = ['æ•æ„Ÿè¯1', 'æ•æ„Ÿè¯2']
        for word in sensitive_words:
            text = text.replace(word, '*' * len(word))
        return text

class NLUComponent(Component):
    """è‡ªç„¶è¯­è¨€ç†è§£ç»„ä»¶"""

    def __init__(self, nlu_model):
        self.nlu_model = nlu_model

    async def process(self, input_data: str, context: DialogueContext) -> Dict:
        # è°ƒç”¨NLUæ¨¡å‹
        nlu_result = self.nlu_model.understand(input_data)

        # ç»“åˆä¸Šä¸‹æ–‡å¢å¼ºç†è§£
        if context.messages:
            nlu_result = self._enhance_with_context(nlu_result, context)

        return nlu_result

    def _enhance_with_context(self, nlu_result: Dict, context: DialogueContext) -> Dict:
        # ä¸Šä¸‹æ–‡å¢å¼ºé€»è¾‘
        return nlu_result

class DialogueManagerComponent(Component):
    """å¯¹è¯ç®¡ç†ç»„ä»¶"""

    def __init__(self, policy_model):
        self.policy_model = policy_model

    async def process(self, input_data: Dict, context: DialogueContext) -> Dict:
        # æ›´æ–°å¯¹è¯çŠ¶æ€
        self._update_state(context, input_data)

        # å†³ç­–ä¸‹ä¸€æ­¥åŠ¨ä½œ
        action = self.policy_model.decide(context.state)

        # æ‰§è¡ŒåŠ¨ä½œ
        result = await self._execute_action(action, context)

        return {
            'action': action,
            'result': result,
            'nlu': input_data
        }

    def _update_state(self, context: DialogueContext, nlu_result: Dict):
        # çŠ¶æ€æ›´æ–°é€»è¾‘
        context.state['intent'] = nlu_result.get('intent')
        context.state['entities'] = nlu_result.get('entities', {})

    async def _execute_action(self, action: str, context: DialogueContext) -> Any:
        # åŠ¨ä½œæ‰§è¡Œé€»è¾‘
        if action == 'query_database':
            return await self._query_db(context.state['entities'])
        elif action == 'call_api':
            return await self._call_external_api(context.state)
        else:
            return None

class NLGComponent(Component):
    """è‡ªç„¶è¯­è¨€ç”Ÿæˆç»„ä»¶"""

    def __init__(self, nlg_model):
        self.nlg_model = nlg_model

    async def process(self, input_data: Dict, context: DialogueContext) -> str:
        # ç”Ÿæˆå›å¤
        response = self.nlg_model.generate(
            dialogue_act=input_data['action'],
            content=input_data.get('result'),
            context=context
        )

        # ä¸ªæ€§åŒ–è°ƒæ•´
        if context.user_profile:
            response = self._personalize(response, context.user_profile)

        return response

    def _personalize(self, response: str, user_profile: Dict) -> str:
        # ä¸ªæ€§åŒ–é€»è¾‘
        return response

class PostProcessor(Component):
    """åå¤„ç†ç»„ä»¶"""

    async def process(self, input_data: str, context: DialogueContext) -> str:
        # æ ¼å¼åŒ–
        response = self._format_response(input_data)

        # æ·»åŠ ç¤¼è²Œç”¨è¯­
        if context.state.get('is_ending'):
            response += " æ„Ÿè°¢æ‚¨çš„ä½¿ç”¨ï¼"

        return response

    def _format_response(self, text: str) -> str:
        # æ ¼å¼åŒ–é€»è¾‘
        return text

# ========== å¯¹è¯ç³»ç»Ÿä¸»ç±» ==========
class DialogueSystem:
    """å¯¹è¯ç³»ç»Ÿä¸»ç±»"""

    def __init__(self):
        self.pipeline = Pipeline()
        self.context_manager = ContextManager()
        self.logger = logging.getLogger(__name__)
        self._setup_pipeline()

    def _setup_pipeline(self):
        """é…ç½®å¤„ç†ç®¡é“"""
        # åˆå§‹åŒ–å„ä¸ªç»„ä»¶
        preprocessor = PreProcessor()
        nlu = NLUComponent(nlu_model=None)  # å®é™…ä½¿ç”¨æ—¶ä¼ å…¥æ¨¡å‹
        dm = DialogueManagerComponent(policy_model=None)
        nlg = NLGComponent(nlg_model=None)
        postprocessor = PostProcessor()

        # æ„å»ºç®¡é“
        self.pipeline.add_component(preprocessor) \
                     .add_component(nlu) \
                     .add_component(dm) \
                     .add_component(nlg) \
                     .add_component(postprocessor)

    async def process_message(self, message: Message) -> str:
        """å¤„ç†ç”¨æˆ·æ¶ˆæ¯"""
        try:
            # è·å–æˆ–åˆ›å»ºä¸Šä¸‹æ–‡
            context = self.context_manager.get_context(message.user_id)

            # æ·»åŠ æ¶ˆæ¯åˆ°å†å²
            context.messages.append(message)

            # æ‰§è¡Œå¤„ç†ç®¡é“
            response = await self.pipeline.execute(message.content, context)

            # ä¿å­˜ä¸Šä¸‹æ–‡
            self.context_manager.save_context(context)

            # è®°å½•å¯¹è¯
            self._log_dialogue(message, response)

            return response

        except Exception as e:
            self.logger.error(f"å¤„ç†æ¶ˆæ¯å¤±è´¥: {e}")
            return "æŠ±æ­‰ï¼Œç³»ç»Ÿé‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¯·ç¨åå†è¯•ã€‚"

    def _log_dialogue(self, message: Message, response: str):
        """è®°å½•å¯¹è¯æ—¥å¿—"""
        self.logger.info(f"ç”¨æˆ·({message.user_id}): {message.content}")
        self.logger.info(f"ç³»ç»Ÿ: {response}")

class ContextManager:
    """ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""

    def __init__(self):
        self.contexts: Dict[str, DialogueContext] = {}

    def get_context(self, user_id: str) -> DialogueContext:
        """è·å–ç”¨æˆ·ä¸Šä¸‹æ–‡"""
        if user_id not in self.contexts:
            self.contexts[user_id] = DialogueContext(
                session_id=self._generate_session_id(),
                user_id=user_id,
                messages=[],
                state={},
                user_profile=self._load_user_profile(user_id)
            )
        return self.contexts[user_id]

    def save_context(self, context: DialogueContext):
        """ä¿å­˜ä¸Šä¸‹æ–‡"""
        self.contexts[context.user_id] = context

    def _generate_session_id(self) -> str:
        import uuid
        return str(uuid.uuid4())

    def _load_user_profile(self, user_id: str) -> Dict:
        # ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·ç”»åƒ
        return {}

# ========== ä½¿ç”¨ç¤ºä¾‹ ==========
async def main():
    # åˆ›å»ºå¯¹è¯ç³»ç»Ÿ
    dialogue_system = DialogueSystem()

    # æ¨¡æ‹Ÿç”¨æˆ·æ¶ˆæ¯
    message = Message(
        id="msg_001",
        user_id="user_123",
        content="æˆ‘æƒ³è®¢ä¸€å¼ æ˜å¤©å»åŒ—äº¬çš„æœºç¥¨",
        timestamp=datetime.now()
    )

    # å¤„ç†æ¶ˆæ¯
    response = await dialogue_system.process_message(message)
    print(f"ç³»ç»Ÿå›å¤: {response}")

if __name__ == "__main__":
    # é…ç½®æ—¥å¿—
    logging.basicConfig(level=logging.INFO)

    # è¿è¡Œç¤ºä¾‹
    asyncio.run(main())</pre>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>æ¶æ„è®¾è®¡çš„å…³é”®è€ƒè™‘</h4>
                <div class="analysis-item">
                    <h5>âš¡ æ€§èƒ½ä¼˜åŒ–</h5>
                    <ul>
                        <li>å¼‚æ­¥å¤„ç†æé«˜å¹¶å‘èƒ½åŠ›</li>
                        <li>ç¼“å­˜ç­–ç•¥å‡å°‘é‡å¤è®¡ç®—</li>
                        <li>è´Ÿè½½å‡è¡¡åº”å¯¹é«˜å¹¶å‘</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ”§ å¯ç»´æŠ¤æ€§</h5>
                    <ul>
                        <li>æ¨¡å—åŒ–è®¾è®¡ä¾¿äºå‡çº§</li>
                        <li>ç»Ÿä¸€çš„æ¥å£è§„èŒƒ</li>
                        <li>å®Œå–„çš„æ—¥å¿—å’Œç›‘æ§</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ›¡ï¸ å®¹é”™å¤„ç†</h5>
                    <ul>
                        <li>ä¼˜é›…çš„é”™è¯¯æ¢å¤</li>
                        <li>é™çº§ç­–ç•¥</li>
                        <li>è¶…æ—¶æ§åˆ¶</li>
                    </ul>
                </div>
            </div>

            <div class="tip success mt-4">
                <span class="tip-icon">âœ…</span>
                <strong>æ¶æ„è®¾è®¡æœ€ä½³å®è·µ</strong>
                <ul class="mt-2">
                    <li>é‡‡ç”¨å¾®æœåŠ¡æ¶æ„å®ç°ç»„ä»¶è§£è€¦</li>
                    <li>ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†å¼‚æ­¥ä»»åŠ¡</li>
                    <li>å®ç°å®Œå–„çš„ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶</li>
                    <li>è®¾è®¡çµæ´»çš„é…ç½®ç®¡ç†ç³»ç»Ÿ</li>
                </ul>
            </div>
        </section>

        <!-- å®ç°æ–¹æ³• -->
        <section id="implementation" class="section-card">
            <h2>ğŸ’» å®ç°æ–¹æ³•</h2>

            <div class="think-guide-box">
                <h4>ä»ç†è®ºåˆ°å®è·µ</h4>
                <div class="think-question">
                    <h5>ğŸ› ï¸ å¦‚ä½•æ„å»ºä¸€ä¸ªå®Œæ•´çš„å¯¹è¯ç³»ç»Ÿï¼Ÿ</h5>
                    <p>
                        äº†è§£äº†å„ä¸ªç»„ä»¶åï¼Œå¦‚ä½•å°†å®ƒä»¬æ•´åˆæˆä¸€ä¸ª
                        å¯ç”¨çš„ç³»ç»Ÿï¼Ÿéœ€è¦è€ƒè™‘å“ªäº›å·¥ç¨‹ç»†èŠ‚ï¼Ÿ
                    </p>
                </div>
            </div>

            <h3>å®ç°è·¯å¾„é€‰æ‹©</h3>
            <div class="comparison-table">
                <table>
                    <thead>
                    <tr>
                        <th>å®ç°æ–¹å¼</th>
                        <th>ä¼˜åŠ¿</th>
                        <th>åŠ£åŠ¿</th>
                        <th>é€‚ç”¨åœºæ™¯</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>åŸºäºè§„åˆ™</td>
                        <td>å¯æ§ã€å¯è§£é‡Šã€å¿«é€Ÿå¼€å‘</td>
                        <td>æ‰©å±•æ€§å·®ã€ç»´æŠ¤æˆæœ¬é«˜</td>
                        <td>ç®€å•ä»»åŠ¡ã€ç‰¹å®šé¢†åŸŸ</td>
                    </tr>
                    <tr>
                        <td>æ£€ç´¢å¼</td>
                        <td>å›å¤è´¨é‡é«˜ã€å®‰å…¨å¯æ§</td>
                        <td>è¦†ç›–æœ‰é™ã€ç¼ºä¹çµæ´»æ€§</td>
                        <td>FAQã€å®¢æœç³»ç»Ÿ</td>
                    </tr>
                    <tr>
                        <td>ç”Ÿæˆå¼</td>
                        <td>çµæ´»ã€è‡ªç„¶ã€è¦†ç›–å¹¿</td>
                        <td>å¯æ§æ€§å·®ã€å¯èƒ½ç”Ÿæˆé”™è¯¯</td>
                        <td>å¼€æ”¾åŸŸå¯¹è¯ã€åˆ›æ„åº”ç”¨</td>
                    </tr>
                    <tr>
                        <td>æ··åˆå¼</td>
                        <td>ç»¼åˆä¼˜åŠ¿ã€æ€§èƒ½å‡è¡¡</td>
                        <td>ç³»ç»Ÿå¤æ‚ã€å¼€å‘æˆæœ¬é«˜</td>
                        <td>å•†ä¸šåº”ç”¨ã€ç»¼åˆåœºæ™¯</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="card-grid mt-4">
                <div class="info-card">
                    <span class="card-icon">ğŸš€</span>
                    <h4 class="card-title">å¿«é€ŸåŸå‹</h4>
                    <p>ä½¿ç”¨ç°æœ‰æ¡†æ¶å¿«é€Ÿæ­å»ºï¼š</p>
                    <ul class="mt-2">
                        <li>Rasaï¼šå¼€æºå¯¹è¯æ¡†æ¶</li>
                        <li>Dialogflowï¼šGoogleå¹³å°</li>
                        <li>Bot Frameworkï¼šå¾®è½¯æ–¹æ¡ˆ</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ”¬</span>
                    <h4 class="card-title">æ·±åº¦å®šåˆ¶</h4>
                    <p>åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ¡ˆï¼š</p>
                    <ul class="mt-2">
                        <li>é¢„è®­ç»ƒæ¨¡å‹å¾®è°ƒ</li>
                        <li>ç«¯åˆ°ç«¯è®­ç»ƒ</li>
                        <li>å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">â˜ï¸</span>
                    <h4 class="card-title">äº‘æœåŠ¡é›†æˆ</h4>
                    <p>åˆ©ç”¨äº‘å¹³å°èƒ½åŠ›ï¼š</p>
                    <ul class="mt-2">
                        <li>è¯­éŸ³è¯†åˆ«API</li>
                        <li>æœºå™¨ç¿»è¯‘æœåŠ¡</li>
                        <li>çŸ¥è¯†å›¾è°±æ¥å£</li>
                    </ul>
                </div>
            </div>

            <div class="tip info mt-4">
                <span class="tip-icon">ğŸ’¡</span>
                <strong>å®ç°å»ºè®®</strong>
                <ul class="mt-2">
                    <li>ä»å°è§„æ¨¡è¯•ç‚¹å¼€å§‹ï¼Œé€æ­¥æ‰©å±•åŠŸèƒ½</li>
                    <li>é‡è§†æ•°æ®æ”¶é›†å’ŒæŒç»­ä¼˜åŒ–</li>
                    <li>å»ºç«‹A/Bæµ‹è¯•æœºåˆ¶</li>
                    <li>å…³æ³¨ç”¨æˆ·åé¦ˆå’Œä½“éªŒæ”¹è¿›</li>
                </ul>
            </div>
        </section>

        <!-- è¯„ä¼°ä¸ä¼˜åŒ– -->
        <section id="evaluation" class="section-card">
            <h2>ğŸ“Š è¯„ä¼°ä¸ä¼˜åŒ–</h2>

            <div class="think-guide-box">
                <h4>å¦‚ä½•è¡¡é‡å¯¹è¯è´¨é‡ï¼Ÿ</h4>
                <div class="think-question">
                    <h5>ğŸ“ ä»€ä¹ˆæ˜¯"å¥½"çš„å¯¹è¯ï¼Ÿ</h5>
                    <p>
                        è¯„ä¼°å¯¹è¯ç³»ç»Ÿæ¯”è¯„ä¼°å…¶ä»–NLPä»»åŠ¡æ›´å¤æ‚ã€‚
                        é™¤äº†å‡†ç¡®æ€§ï¼Œè¿˜è¦è€ƒè™‘æµç•…æ€§ã€è¿è´¯æ€§ã€
                        æœ‰ç”¨æ€§ã€è¶£å‘³æ€§ç­‰å¤šä¸ªç»´åº¦ã€‚
                    </p>
                </div>
            </div>

            <h3>è¯„ä¼°æŒ‡æ ‡ä½“ç³»</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ“ˆ</span>
                    <h4 class="card-title">è‡ªåŠ¨è¯„ä¼°æŒ‡æ ‡</h4>
                    <ul>
                        <li><strong>BLEUï¼š</strong>æ–‡æœ¬ç›¸ä¼¼åº¦</li>
                        <li><strong>Perplexityï¼š</strong>è¯­è¨€æ¨¡å‹å›°æƒ‘åº¦</li>
                        <li><strong>ä»»åŠ¡æˆåŠŸç‡ï¼š</strong>å®Œæˆç‡</li>
                        <li><strong>å“åº”æ—¶é—´ï¼š</strong>ç³»ç»Ÿå»¶è¿Ÿ</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ‘¥</span>
                    <h4 class="card-title">äººå·¥è¯„ä¼°ç»´åº¦</h4>
                    <ul>
                        <li><strong>ç›¸å…³æ€§ï¼š</strong>å›å¤æ˜¯å¦åˆ‡é¢˜</li>
                        <li><strong>ä¿¡æ¯é‡ï¼š</strong>å†…å®¹ä¸°å¯Œåº¦</li>
                        <li><strong>æµç•…æ€§ï¼š</strong>è¯­è¨€è‡ªç„¶åº¦</li>
                        <li><strong>ä¸€è‡´æ€§ï¼š</strong>é€»è¾‘è¿è´¯æ€§</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ˜Š</span>
                    <h4 class="card-title">ç”¨æˆ·ä½“éªŒæŒ‡æ ‡</h4>
                    <ul>
                        <li><strong>æ»¡æ„åº¦ï¼š</strong>ç”¨æˆ·è¯„åˆ†</li>
                        <li><strong>å‚ä¸åº¦ï¼š</strong>å¯¹è¯è½®æ•°</li>
                        <li><strong>ç•™å­˜ç‡ï¼š</strong>å›è®¿é¢‘ç‡</li>
                        <li><strong>æ¨èåº¦ï¼š</strong>NPSåˆ†æ•°</li>
                    </ul>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>ä¼˜åŒ–ç­–ç•¥</h4>
                <div class="analysis-item">
                    <h5>ğŸ“Š æ•°æ®é©±åŠ¨ä¼˜åŒ–</h5>
                    <ul>
                        <li>æ”¶é›†çœŸå®å¯¹è¯æ•°æ®</li>
                        <li>åˆ†æå¤±è´¥æ¡ˆä¾‹</li>
                        <li>æŒ–æ˜ç”¨æˆ·éœ€æ±‚æ¨¡å¼</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ”„ æŒç»­å­¦ä¹ </h5>
                    <ul>
                        <li>åœ¨çº¿å­¦ä¹ æœºåˆ¶</li>
                        <li>ä¸»åŠ¨å­¦ä¹ ç­–ç•¥</li>
                        <li>ç”¨æˆ·åé¦ˆå¾ªç¯</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ¯ é’ˆå¯¹æ€§æ”¹è¿›</h5>
                    <ul>
                        <li>è¯†åˆ«ç³»ç»Ÿç“¶é¢ˆ</li>
                        <li>ä¼˜åŒ–å…³é”®è·¯å¾„</li>
                        <li>æå‡è¾¹ç¼˜æ¡ˆä¾‹å¤„ç†</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- å®é™…åº”ç”¨ -->
        <section id="applications" class="section-card">
            <h2>ğŸ’¼ å®é™…åº”ç”¨</h2>

            <div class="think-guide-box">
                <h4>å¯¹è¯ç³»ç»Ÿçš„ä»·å€¼å®ç°</h4>
                <div class="think-question">
                    <h5>ğŸŒŸ å¦‚ä½•åˆ›é€ çœŸæ­£çš„ä»·å€¼ï¼Ÿ</h5>
                    <p>
                        å¯¹è¯ç³»ç»Ÿä¸æ˜¯æŠ€æœ¯ç‚«è€€ï¼Œè€Œæ˜¯è¦è§£å†³å®é™…é—®é¢˜ï¼Œ
                        æå‡æ•ˆç‡ï¼Œæ”¹å–„ä½“éªŒã€‚åœ¨å“ªäº›åœºæ™¯ä¸­å®ƒä»¬å‘æŒ¥ç€é‡è¦ä½œç”¨ï¼Ÿ
                    </p>
                </div>
            </div>

            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸª</span>
                    <h4 class="card-title">æ™ºèƒ½å®¢æœ</h4>
                    <p>7Ã—24å°æ—¶æœåŠ¡ï¼š</p>
                    <ul class="mt-2">
                        <li>å¸¸è§é—®é¢˜è§£ç­”</li>
                        <li>è®¢å•æŸ¥è¯¢å¤„ç†</li>
                        <li>æŠ•è¯‰å»ºè®®æ”¶é›†</li>
                        <li>äººå·¥åå¸­ååŠ©</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ¥</span>
                    <h4 class="card-title">åŒ»ç–—åŠ©æ‰‹</h4>
                    <p>å¥åº·ç®¡ç†æ”¯æŒï¼š</p>
                    <ul class="mt-2">
                        <li>ç—‡çŠ¶åˆæ­¥è¯„ä¼°</li>
                        <li>ç”¨è¯æé†’æœåŠ¡</li>
                        <li>å¥åº·çŸ¥è¯†é—®ç­”</li>
                        <li>å¿ƒç†å¥åº·é™ªä¼´</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ“š</span>
                    <h4 class="card-title">æ•™è‚²è¾…å¯¼</h4>
                    <p>ä¸ªæ€§åŒ–å­¦ä¹ ï¼š</p>
                    <ul class="mt-2">
                        <li>æ™ºèƒ½ç­”ç–‘è§£æƒ‘</li>
                        <li>å­¦ä¹ è¿›åº¦è·Ÿè¸ª</li>
                        <li>çŸ¥è¯†ç‚¹è®²è§£</li>
                        <li>ä½œä¸šæ‰¹æ”¹åé¦ˆ</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ®</span>
                    <h4 class="card-title">å¨±ä¹äº’åŠ¨</h4>
                    <p>æ²‰æµ¸å¼ä½“éªŒï¼š</p>
                    <ul class="mt-2">
                        <li>æ¸¸æˆNPCå¯¹è¯</li>
                        <li>è™šæ‹Ÿè§’è‰²æ‰®æ¼”</li>
                        <li>æ•…äº‹åˆ›ä½œåŠ©æ‰‹</li>
                        <li>æƒ…æ„Ÿé™ªä¼´æœºå™¨äºº</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ¢</span>
                    <h4 class="card-title">ä¼ä¸šåŠ©æ‰‹</h4>
                    <p>åŠå…¬æ•ˆç‡æå‡ï¼š</p>
                    <ul class="mt-2">
                        <li>ä¼šè®®æ—¥ç¨‹å®‰æ’</li>
                        <li>æ–‡æ¡£ä¿¡æ¯æ£€ç´¢</li>
                        <li>æ•°æ®åˆ†ææŠ¥å‘Š</li>
                        <li>å›¢é˜Ÿåä½œç®¡ç†</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ </span>
                    <h4 class="card-title">æ™ºèƒ½å®¶å±…</h4>
                    <p>ç”Ÿæ´»ä¾¿åˆ©åŒ–ï¼š</p>
                    <ul class="mt-2">
                        <li>è®¾å¤‡è¯­éŸ³æ§åˆ¶</li>
                        <li>åœºæ™¯è‡ªåŠ¨åŒ–</li>
                        <li>èƒ½æºç®¡ç†ä¼˜åŒ–</li>
                        <li>å®‰é˜²ç›‘æ§æé†’</li>
                    </ul>
                </div>
            </div>

            <div class="tip success mt-4">
                <span class="tip-icon">âœ…</span>
                <strong>æˆåŠŸåº”ç”¨çš„å…³é”®</strong>
                <ul class="mt-2">
                    <li>æ·±å…¥ç†è§£ç”¨æˆ·éœ€æ±‚å’Œä½¿ç”¨åœºæ™¯</li>
                    <li>è®¾å®šåˆç†çš„æœŸæœ›å’Œç³»ç»Ÿè¾¹ç•Œ</li>
                    <li>æä¾›æµç•…çš„äººæœºåä½œæœºåˆ¶</li>
                    <li>æŒç»­æ”¶é›†åé¦ˆå¹¶æ”¹è¿›ç³»ç»Ÿ</li>
                </ul>
            </div>
        </section>

        <!-- æŒ‘æˆ˜ä¸æœºé‡ -->
        <section id="challenges" class="section-card">
            <h2>ğŸš€ æŒ‘æˆ˜ä¸æœºé‡</h2>

            <div class="think-guide-box">
                <h4>é¢å‘æœªæ¥çš„æ€è€ƒ</h4>
                <div class="think-question">
                    <h5>ğŸ”® å¯¹è¯ç³»ç»Ÿå°†å¦‚ä½•å‘å±•ï¼Ÿ</h5>
                    <p>
                        éšç€æŠ€æœ¯çš„è¿›æ­¥ï¼Œå¯¹è¯ç³»ç»Ÿé¢ä¸´å“ªäº›æ–°çš„æŒ‘æˆ˜ï¼Ÿ
                        åˆæœ‰å“ªäº›æ¿€åŠ¨äººå¿ƒçš„æœºé‡ï¼Ÿæˆ‘ä»¬è¯¥å¦‚ä½•å‡†å¤‡ï¼Ÿ
                    </p>
                </div>
            </div>

            <h3>å½“å‰æŒ‘æˆ˜</h3>
            <div class="problem-analysis-box">
                <div class="analysis-item">
                    <h5>ğŸ§  è®¤çŸ¥èƒ½åŠ›å±€é™</h5>
                    <ul>
                        <li><strong>å¸¸è¯†æ¨ç†ï¼š</strong>ç¼ºä¹äººç±»èˆ¬çš„å¸¸è¯†ç†è§£</li>
                        <li><strong>å› æœå…³ç³»ï¼š</strong>éš¾ä»¥ç†è§£æ·±å±‚å› æœ</li>
                        <li><strong>æŠ½è±¡æ€ç»´ï¼š</strong>å¤„ç†æŠ½è±¡æ¦‚å¿µèƒ½åŠ›æœ‰é™</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ˜Š æƒ…æ„Ÿä¸ç¤¾äº¤</h5>
                    <ul>
                        <li><strong>æƒ…æ„Ÿç†è§£ï¼š</strong>éš¾ä»¥æ•æ‰ç»†å¾®æƒ…æ„Ÿ</li>
                        <li><strong>åŒç†å¿ƒï¼š</strong>ç¼ºä¹çœŸæ­£çš„å…±æƒ…èƒ½åŠ›</li>
                        <li><strong>ç¤¾äº¤è§„èŒƒï¼š</strong>ä¸æ‡‚å¤æ‚çš„ç¤¾äº¤æ½œè§„åˆ™</li>
                    </ul>
                </div>
                <div class="analysis-item">
                    <h5>âš–ï¸ ä¼¦ç†ä¸å®‰å…¨</h5>
                    <ul>
                        <li><strong>åè§é—®é¢˜ï¼š</strong>å¯èƒ½å»¶ç»­è®­ç»ƒæ•°æ®çš„åè§</li>
                        <li><strong>éšç§ä¿æŠ¤ï¼š</strong>å¦‚ä½•ä¿æŠ¤ç”¨æˆ·éšç§</li>
                        <li><strong>è™šå‡ä¿¡æ¯ï¼š</strong>å¯èƒ½ç”Ÿæˆè¯¯å¯¼æ€§å†…å®¹</li>
                    </ul>
                </div>
            </div>

            <h3 class="mt-4">æœªæ¥æœºé‡</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ§¬</span>
                    <h4 class="card-title">æŠ€æœ¯çªç ´</h4>
                    <ul>
                        <li>æ›´å¼ºå¤§çš„è¯­è¨€æ¨¡å‹</li>
                        <li>å¤šæ¨¡æ€æ·±åº¦èåˆ</li>
                        <li>çŸ¥è¯†å¢å¼ºå¯¹è¯</li>
                        <li>ä¸ªæ€§åŒ–è‡ªé€‚åº”</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸŒ</span>
                    <h4 class="card-title">åº”ç”¨æ‹“å±•</h4>
                    <ul>
                        <li>å…ƒå®‡å®™è™šæ‹ŸåŠ©æ‰‹</li>
                        <li>è·¨è¯­è¨€å®æ—¶å¯¹è¯</li>
                        <li>ä¸“ä¸šé¢†åŸŸæ·±åº¦åº”ç”¨</li>
                        <li>æƒ…æ„Ÿé™ªä¼´æœºå™¨äºº</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ¤</span>
                    <h4 class="card-title">äººæœºååŒ</h4>
                    <ul>
                        <li>å¢å¼ºäººç±»èƒ½åŠ›</li>
                        <li>åˆ›é€ æ€§åä½œ</li>
                        <li>å†³ç­–æ”¯æŒç³»ç»Ÿ</li>
                        <li>ç»ˆèº«å­¦ä¹ ä¼™ä¼´</li>
                    </ul>
                </div>
            </div>

            <div class="tip warning mt-4">
                <span class="tip-icon">âš ï¸</span>
                <strong>éœ€è¦å…³æ³¨çš„é—®é¢˜</strong>
                <ul class="mt-2">
                    <li>ç¡®ä¿AIç³»ç»Ÿçš„å¯è§£é‡Šæ€§å’Œå¯æ§æ€§</li>
                    <li>å»ºç«‹å¥å…¨çš„ä¼¦ç†è§„èŒƒå’Œç›‘ç®¡æœºåˆ¶</li>
                    <li>é‡è§†æ•°æ®å®‰å…¨å’Œç”¨æˆ·éšç§ä¿æŠ¤</li>
                    <li>é¿å…è¿‡åº¦ä¾èµ–ï¼Œä¿æŒäººç±»ä¸»ä½“æ€§</li>
                </ul>
            </div>
        </section>

        <!-- æœ¬ç« æ€»ç»“ -->
        <section id="summary" class="section-card">
            <h2>ğŸ“š æœ¬ç« æ€»ç»“</h2>

            <div class="think-guide-box">
                <h4>å›é¡¾ä¸å±•æœ›</h4>
                <div class="think-question">
                    <h5>ğŸ’¡ æˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆï¼Ÿ</h5>
                    <p>
                        é€šè¿‡æœ¬ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº†å¯¹è¯ç³»ç»Ÿçš„
                        åŸç†ã€æŠ€æœ¯å’Œåº”ç”¨ã€‚è®©æˆ‘ä»¬æ€»ç»“å…³é”®è¦ç‚¹ï¼Œ
                        å¹¶æ€è€ƒå¦‚ä½•å°†è¿™äº›çŸ¥è¯†åº”ç”¨åˆ°å®è·µä¸­ã€‚
                    </p>
                </div>
            </div>

            <h3>æ ¸å¿ƒçŸ¥è¯†ç‚¹</h3>
            <div class="card-grid">
                <div class="info-card">
                    <span class="card-icon">ğŸ—ï¸</span>
                    <h4 class="card-title">ç³»ç»Ÿæ¶æ„</h4>
                    <ul>
                        <li>NLUï¼šç†è§£ç”¨æˆ·æ„å›¾</li>
                        <li>DMï¼šç®¡ç†å¯¹è¯æµç¨‹</li>
                        <li>NLGï¼šç”Ÿæˆè‡ªç„¶å›å¤</li>
                        <li>æ¨¡å—åŒ–è®¾è®¡æ€æƒ³</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ”§</span>
                    <h4 class="card-title">å…³é”®æŠ€æœ¯</h4>
                    <ul>
                        <li>æ„å›¾è¯†åˆ«å’Œæ§½ä½å¡«å……</li>
                        <li>å¯¹è¯çŠ¶æ€è¿½è¸ª</li>
                        <li>ç­–ç•¥å­¦ä¹ æ–¹æ³•</li>
                        <li>ä¸ªæ€§åŒ–ç”ŸæˆæŠ€æœ¯</li>
                    </ul>
                </div>

                <div class="info-card">
                    <span class="card-icon">ğŸ’¼</span>
                    <h4 class="card-title">å®è·µè¦ç‚¹</h4>
                    <ul>
                        <li>ä»å…·ä½“åœºæ™¯å‡ºå‘</li>
                        <li>è¿­ä»£ä¼˜åŒ–ç­–ç•¥</li>
                        <li>ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</li>
                        <li>æŒç»­å­¦ä¹ æ”¹è¿›</li>
                    </ul>
                </div>
            </div>

            <div class="problem-analysis-box mt-4">
                <h4>å…³é”®è®¤è¯†</h4>
                <div class="analysis-item">
                    <h5>ğŸ¯ å¯¹è¯çš„æœ¬è´¨</h5>
                    <p>
                        å¯¹è¯ä¸ä»…æ˜¯ä¿¡æ¯äº¤æ¢ï¼Œæ›´æ˜¯ç†è§£ã€æ¨ç†å’Œå…±æƒ…çš„è¿‡ç¨‹ã€‚
                        å¥½çš„å¯¹è¯ç³»ç»Ÿéœ€è¦åœ¨æŠ€æœ¯å’Œäººæ–‡ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ã€‚
                    </p>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ”„ ç³»ç»ŸåŒ–æ€ç»´</h5>
                    <p>
                        å¯¹è¯ç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤æ‚çš„å·¥ç¨‹ï¼Œéœ€è¦å¤šä¸ªç»„ä»¶ååŒå·¥ä½œã€‚
                        æ¨¡å—åŒ–è®¾è®¡å’Œæ ‡å‡†åŒ–æ¥å£æ˜¯æ„å»ºå¯æ‰©å±•ç³»ç»Ÿçš„å…³é”®ã€‚
                    </p>
                </div>
                <div class="analysis-item">
                    <h5>ğŸ“ˆ æŒç»­è¿›åŒ–</h5>
                    <p>
                        å¯¹è¯ç³»ç»Ÿéœ€è¦ä¸æ–­å­¦ä¹ å’Œæ”¹è¿›ã€‚æ•°æ®é©±åŠ¨ã€ç”¨æˆ·åé¦ˆ
                        å’ŒæŠ€æœ¯åˆ›æ–°æ˜¯æ¨åŠ¨ç³»ç»Ÿè¿›åŒ–çš„ä¸‰å¤§åŠ¨åŠ›ã€‚
                    </p>
                </div>
            </div>

            <div class="tip success mt-4">
                <span class="tip-icon">ğŸ‰</span>
                <strong>å­¦ä¹ æˆæœ</strong>
                <p class="mt-2">
                    æ­å–œä½ å®Œæˆäº†å¯¹è¯ç³»ç»Ÿçš„å­¦ä¹ ï¼ä½ å·²ç»æŒæ¡äº†æ„å»ºæ™ºèƒ½å¯¹è¯ç³»ç»Ÿçš„
                    æ ¸å¿ƒçŸ¥è¯†å’Œæ–¹æ³•ã€‚è®°ä½ï¼Œå¯¹è¯ç³»ç»Ÿçš„ç›®æ ‡æ˜¯åˆ›é€ æœ‰ä»·å€¼çš„äººæœºäº¤äº’ä½“éªŒï¼Œ
                    è®©æŠ€æœ¯çœŸæ­£æœåŠ¡äºäººç±»ã€‚ç»§ç»­æ¢ç´¢ï¼Œä¸æ–­å®è·µï¼Œ
                    ä½ å°†èƒ½å¤Ÿåˆ›é€ å‡ºæ›´åŠ æ™ºèƒ½ã€è‡ªç„¶çš„å¯¹è¯ç³»ç»Ÿï¼
                </p>
            </div>

            <div class="text-center mt-4">
                <a href="chapter8.html" class="btn btn-secondary">
                    <span>â¬…ï¸</span> ä¸Šä¸€ç« 
                </a>
                <a href="chapter10.html" class="btn btn-primary">
                    <span>â¡ï¸</span> ä¸‹ä¸€ç« 
                </a>
            </div>
        </section>
    </div>
</main>

<!-- JavaScript -->
<script>
    // ä¾§è¾¹æ åˆ‡æ¢
    document.getElementById('toggle-sidebar').addEventListener('click', function() {
        document.getElementById('sidebar').classList.toggle('open');
    });

    // è¿›åº¦æ¡æ›´æ–°
    function updateProgressBar() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
        const progress = (scrollTop / scrollHeight) * 100;
        document.getElementById('progress-bar').style.width = progress + '%';
    }

    window.addEventListener('scroll', updateProgressBar);

    // ç›®å½•é«˜äº®
    function updateTOC() {
        const sections = document.querySelectorAll('section[id]');
        const tocItems = document.querySelectorAll('.toc-item');

        let currentSection = '';

        sections.forEach(section => {
            const rect = section.getBoundingClientRect();
            if (rect.top <= 100 && rect.bottom >= 100) {
                currentSection = section.id;
            }
        });

        tocItems.forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('href') === '#' + currentSection) {
                item.classList.add('active');
            }
        });
    }

    window.addEventListener('scroll', updateTOC);

    // å¹³æ»‘æ»šåŠ¨
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // ä»£ç å¤åˆ¶åŠŸèƒ½
    function copyCode(button) {
        const codeContent = button.closest('.code-block').querySelector('pre').textContent;
        if (navigator.clipboard) {
            navigator.clipboard.writeText(codeContent).then(() => {
                button.textContent = 'å·²å¤åˆ¶';
                setTimeout(() => {
                    button.textContent = 'å¤åˆ¶';
                }, 2000);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥', err);
                button.textContent = 'å¤åˆ¶å¤±è´¥';
            });
        } else {
            const textarea = document.createElement('textarea');
            textarea.textContent = codeContent;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            button.textContent = 'å·²å¤åˆ¶';
            setTimeout(() => {
                button.textContent = 'å¤åˆ¶';
            }, 2000);
        }
    }

    // å¯¹è¯æ¶ˆæ¯åŠ¨ç”»
    const dialogueMessages = document.querySelectorAll('.dialogue-message');
    const dialogueObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry, index) => {
            if (entry.isIntersecting) {
                setTimeout(() => {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }, index * 200);
            }
        });
    }, { threshold: 0.1 });

    dialogueMessages.forEach(message => {
        message.style.opacity = '0';
        message.style.transform = 'translateY(20px)';
        dialogueObserver.observe(message);
    });

    // åˆå§‹åŒ–
    updateProgressBar();
    updateTOC();

    // æ·»åŠ åŠ¨ç”»æ•ˆæœ
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    document.querySelectorAll('.section-card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'all 0.6s ease-out';
        observer.observe(card);
    });
</script>

</body>
</html>