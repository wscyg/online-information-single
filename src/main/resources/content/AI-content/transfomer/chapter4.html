<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬4ç« ï¼šæ·±å…¥åˆ†æ - å¤šå¤´æ³¨æ„åŠ›çš„è¯ç”Ÿ | å®Œæ•´ä¼˜åŒ–ç‰ˆ</title>
    <meta name="description" content="ä»å•å¤´åˆ°å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶çš„å®Œæ•´å­¦ä¹ ä¹‹æ—…ï¼ŒåŒ…å«è¯¦ç»†æ•°å­¦æ¨å¯¼ã€ä»£ç å®ç°å’Œäº¤äº’å¼å¯è§†åŒ–">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <style>
        /* ===== CSSå˜é‡å®šä¹‰ ===== */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-dark: #0f172a;
            --bg-section: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --accent-red: #ef4444;
            --accent-green: #22c55e;
            --accent-blue: #06b6d4;
            --accent-yellow: #fbbf24;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.3);
            --animation-duration: 0.3s;
            --content-max-width: 1200px;
        }

        /* äº®è‰²ä¸»é¢˜ */
        [data-theme="light"] {
            --bg-dark: #ffffff;
            --bg-section: #f8fafc;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        /* ===== å…¨å±€æ ·å¼ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color var(--animation-duration) ease;
        }

        /* ===== å¸ƒå±€ç»„ä»¶ ===== */
        .container {
            max-width: var(--content-max-width);
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* ===== å¯¼èˆªæ  ===== */
        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
            transition: transform 0.3s ease;
        }

        .nav-header.hidden {
            transform: translateY(-100%);
        }

        .nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .nav-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-title h1 {
            font-size: 1.25rem;
            font-weight: 600;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn-control {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .btn-control:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .nav-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: var(--primary-gradient);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* ===== ä¾§è¾¹å¯¼èˆª ===== */
        .sidebar {
            position: fixed;
            left: -300px;
            top: 60px;
            bottom: 0;
            width: 300px;
            background: var(--bg-section);
            border-right: 1px solid var(--border-color);
            padding: 2rem;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 999;
        }

        .sidebar.open {
            transform: translateX(300px);
        }

        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 998;
        }

        .sidebar-overlay.active {
            display: block;
        }

        .toc-item {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            margin-bottom: 0.25rem;
        }

        .toc-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .toc-item.active {
            background: var(--primary-gradient);
            color: white;
        }

        /* ===== ä¸»å†…å®¹åŒº ===== */
        main {
            margin-top: 80px;
            padding-bottom: 4rem;
        }

        /* ===== ç« èŠ‚å¡ç‰‡ ===== */
        .chapter-hero {
            background: var(--primary-gradient);
            padding: 4rem 0;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .chapter-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: pulse 10s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        .chapter-hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
        }

        .chapter-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease;
        }

        .chapter-hero p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== å†…å®¹åŒºå— ===== */
        .section-card {
            background: var(--bg-section);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            transition: transform var(--animation-duration) ease;
        }

        .section-card:hover {
            transform: translateY(-2px);
        }

        /* ===== å­¦ä¹ å¾ªç¯æŒ‡ç¤ºå™¨ ===== */
        .learning-loop {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
            padding: 1.5rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 1rem;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .loop-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            position: relative;
        }

        .loop-step.active {
            background: rgba(139, 92, 246, 0.2);
            transform: scale(1.1);
        }

        .loop-step .icon {
            font-size: 2rem;
        }

        .loop-step .label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .loop-connector {
            position: absolute;
            top: 50%;
            right: -2rem;
            width: 2rem;
            height: 2px;
            background: rgba(139, 92, 246, 0.3);
        }

        /* ===== æ•…äº‹å¡ç‰‡ ===== */
        .story-card {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(245, 158, 11, 0.1));
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(251, 191, 36, 0.2);
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: 'ğŸŒ™';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 5rem;
            opacity: 0.1;
            transform: rotate(15deg);
        }

        /* ===== æ¦‚å¿µå¡ç‰‡ç½‘æ ¼ ===== */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .concept-card {
            padding: 1.5rem;
            border-radius: 0.75rem;
            transition: all var(--animation-duration) ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
            transform: scaleX(0);
            transition: transform var(--animation-duration) ease;
        }

        .concept-card:hover::before {
            transform: scaleX(1);
        }

        .concept-card.why {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .concept-card.what {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .concept-card.how {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .concept-card.pitfall {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        /* ===== æ•°å­¦å…¬å¼å®¹å™¨ ===== */
        .math-container {
            background: rgba(79, 70, 229, 0.1);
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .math-formula {
            text-align: center;
            font-size: 1.2rem;
            margin: 1rem 0;
        }

        .math-explanation {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        /* ===== ä»£ç å®¹å™¨ ===== */
        .code-container {
            margin: 2rem 0;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .code-header {
            background: #1a1a2e;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .code-header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .code-header-right {
            display: flex;
            gap: 0.5rem;
            margin-left: auto;
        }

        .code-tab {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
        }

        .code-tab.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .code-action {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-action:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .code-content {
            background: #0d1117;
            overflow-x: auto;
        }

        .code-content pre {
            margin: 0;
            padding: 1.5rem;
        }

        .code-content code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .code-output {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.875rem;
            display: none;
        }

        .code-output.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== äº¤äº’å¼å¯è§†åŒ– ===== */
        .visualization-container {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .viz-controls {
            display: flex;
            gap: 2rem;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .viz-control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .viz-control-group label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        input[type="range"] {
            width: 150px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary-gradient);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-value {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-family: monospace;
            min-width: 50px;
            text-align: center;
        }

        canvas {
            display: block;
            margin: 0 auto;
            border-radius: 0.5rem;
            background: rgba(0, 0, 0, 0.2);
        }

        /* ===== æµ‹éªŒç»„ä»¶ ===== */
        .quiz-container {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .quiz-question {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .quiz-options {
            display: grid;
            gap: 1rem;
        }

        .quiz-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            position: relative;
            overflow: hidden;
        }

        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .quiz-option.selected {
            border-color: var(--accent-blue);
        }

        .quiz-option.correct {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--accent-green);
        }

        .quiz-option.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--accent-red);
        }

        .quiz-feedback {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--accent-red);
        }

        /* ===== çŸ©é˜µå¯è§†åŒ– ===== */
        .matrix-visualization {
            display: grid;
            gap: 2rem;
            margin: 2rem 0;
        }

        .matrix-container {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .matrix-title {
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .matrix-grid {
            display: grid;
            gap: 2px;
            font-family: monospace;
            font-size: 0.875rem;
            max-width: fit-content;
            margin: 0 auto;
        }

        .matrix-cell {
            padding: 0.5rem;
            text-align: center;
            border-radius: 0.25rem;
            min-width: 60px;
            transition: all var(--animation-duration) ease;
        }

        .matrix-cell.header {
            font-weight: bold;
            background: rgba(139, 92, 246, 0.2);
        }

        .matrix-cell.value {
            background: rgba(255, 255, 255, 0.05);
        }

        .matrix-cell.highlight {
            background: rgba(251, 191, 36, 0.3);
            transform: scale(1.1);
        }

        /* ===== å¯æŠ˜å å†…å®¹ ===== */
        .collapsible {
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .collapsible-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: background var(--animation-duration) ease;
            user-select: none;
        }

        .collapsible-header:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .collapsible-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
        }

        .collapsible-icon {
            transition: transform var(--animation-duration) ease;
        }

        .collapsible.expanded .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--animation-duration) ease;
        }

        .collapsible.expanded .collapsible-content {
            max-height: 2000px;
        }

        .collapsible-inner {
            padding: 1.5rem;
        }

        /* ===== æ€ç»´å¯¼å›¾ ===== */
        .mindmap-container {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            overflow-x: auto;
        }

        .mindmap-svg {
            min-width: 800px;
            width: 100%;
            height: 500px;
        }

        /* ===== åŠ¨ä½œæ¸…å• ===== */
        .action-checklist {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
        }

        .checklist-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(4px);
        }

        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--accent-yellow);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checklist-checkbox.checked {
            background: var(--accent-yellow);
        }

        .checklist-checkbox.checked::after {
            content: 'âœ“';
            color: var(--bg-dark);
            font-weight: bold;
        }

        /* ===== æŒ‰é’®æ ·å¼ ===== */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* ===== æç¤ºæ¡† ===== */
        .tip {
            display: flex;
            gap: 1rem;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
        }

        .tip-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .tip-content {
            flex: 1;
        }

        .tip.info {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .tip.warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .tip.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .tip.success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        /* ===== å“åº”å¼è®¾è®¡ ===== */
        @media (max-width: 1024px) {
            .chapter-hero h1 {
                font-size: 2.5rem;
            }

            .concept-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .nav-title h1 {
                font-size: 1rem;
            }

            .section-card {
                padding: 1.5rem;
            }

            .chapter-hero {
                padding: 3rem 0;
            }

            .chapter-hero h1 {
                font-size: 2rem;
            }

            .chapter-hero p {
                font-size: 1rem;
            }

            .learning-loop {
                flex-direction: column;
                gap: 1rem;
            }

            .loop-connector {
                display: none;
            }

            .viz-controls {
                flex-direction: column;
                align-items: stretch;
            }

            input[type="range"] {
                width: 100%;
            }

            .matrix-grid {
                font-size: 0.75rem;
            }

            .matrix-cell {
                min-width: 45px;
                padding: 0.25rem;
            }
        }

        /* ===== æ‰“å°æ ·å¼ ===== */
        @media print {
            .nav-header,
            .sidebar,
            .btn,
            .viz-controls,
            .code-action {
                display: none;
            }

            .section-card {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }

            body {
                background: white;
                color: black;
            }
        }

        /* ===== åŠ¨ç”»ä¼˜åŒ– ===== */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ===== å·¥å…·ç±» ===== */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }

        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }

        /* ===== åŠ è½½åŠ¨ç”» ===== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-purple);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ===== æ‚¬æµ®æç¤º ===== */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip-content {
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-dark);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border-color);
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 1000;
        }

        .tooltip:hover .tooltip-content {
            opacity: 1;
        }

        .tooltip-content::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 5px solid transparent;
            border-top-color: var(--border-color);
        }
    </style>
</head>
<body>
<!-- å¯¼èˆªæ  -->
<nav class="nav-header" role="navigation" aria-label="ä¸»å¯¼èˆª">
    <div class="container">
        <div class="nav-content">
            <div class="nav-title">
                <button id="toggle-sidebar" class="btn-control" aria-label="åˆ‡æ¢ä¾§è¾¹æ ">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <h1>ç¬¬4ç« ï¼šå¤šå¤´æ³¨æ„åŠ›çš„è¯ç”Ÿ</h1>
            </div>
            <div class="nav-controls">
                <button id="toggle-animations" class="btn-control" aria-label="åˆ‡æ¢åŠ¨ç”»">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M10 8l6 4-6 4V8z"></path>
                    </svg>
                </button>
                <button id="toggle-theme" class="btn-control" aria-label="åˆ‡æ¢ä¸»é¢˜">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                    </svg>
                </button>
            </div>
        </div>
        <div class="nav-progress">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </div>
</nav>

<!-- ä¾§è¾¹æ  -->
<aside class="sidebar" id="sidebar">
    <h3 style="margin-bottom: 1.5rem; color: var(--accent-purple);">ç›®å½•å¯¼èˆª</h3>
    <nav>
        <a href="#intro" class="toc-item active">å¼•è¨€ï¼šæ·±å¤œçš„å›°æƒ‘</a>
        <a href="#problem" class="toc-item">å‘ç°é—®é¢˜ï¼šå•å¤´çš„å±€é™</a>
        <a href="#math-proof" class="toc-item">æ•°å­¦è¯æ˜ï¼šä¸ºä»€ä¹ˆä¸å¤Ÿ</a>
        <a href="#wrong-attempts" class="toc-item">é”™è¯¯å°è¯•ï¼šèµ°è¿‡çš„å¼¯è·¯</a>
        <a href="#breakthrough" class="toc-item">çªç ´ï¼šå¤šå¤´çš„çµæ„Ÿ</a>
        <a href="#implementation" class="toc-item">å®ç°ï¼šç»´åº¦åˆ†å‰²çš„è‰ºæœ¯</a>
        <a href="#code-walkthrough" class="toc-item">ä»£ç è¯¦è§£ï¼šä»ç†è®ºåˆ°å®è·µ</a>
        <a href="#visualization" class="toc-item">å¯è§†åŒ–ï¼šçœ‹è§å¤šå¤´çš„åŠ›é‡</a>
        <a href="#practice" class="toc-item">åŠ¨æ‰‹å®è·µï¼šæ„å»ºä½ çš„å¤šå¤´</a>
        <a href="#summary" class="toc-item">æ€»ç»“ï¼šæ„ä¹‰ä¸å±•æœ›</a>
    </nav>
</aside>

<!-- ä¾§è¾¹æ é®ç½© -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<!-- ä¸»å†…å®¹ -->
<main>
    <!-- ç« èŠ‚æ ‡é¢˜ -->
    <section class="chapter-hero">
        <div class="container">
            <div class="chapter-hero-content">
                <h1>æ·±å…¥åˆ†æï¼šå¤šå¤´æ³¨æ„åŠ›çš„è¯ç”Ÿ</h1>
                <p>ä»ç†æƒ³åˆ°ç°å®çš„è·ç¦» â€”â€” è®©æˆ‘ä»¬æ­£è§†é—®é¢˜ï¼Œå¯»æ‰¾çªç ´</p>
                <div class="mt-4">
                        <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                            ğŸ” æ·±åº¦å‰–æ
                        </span>
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                            â±ï¸ 90åˆ†é’Ÿ
                        </span>
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                            ğŸ¯ é—®é¢˜å®šä½
                        </span>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ“š æœ¬ç« å­¦ä¹ ç›®æ ‡</h2>
            <div class="concept-grid">
                <div class="concept-card what">
                    <h3 style="color: var(--accent-green); margin-bottom: 0.5rem;">âœ“ ç†è§£æ ¹æœ¬é—®é¢˜</h3>
                    <p>æ·±å…¥å‰–æå•å¤´æ³¨æ„åŠ›ä¸ºä»€ä¹ˆæ— æ³•å¤„ç†å¤æ‚è¯­ä¹‰å…³ç³»</p>
                </div>
                <div class="concept-card how">
                    <h3 style="color: var(--accent-blue); margin-bottom: 0.5rem;">âœ“ æŒæ¡è§£å†³æ€è·¯</h3>
                    <p>å­¦ä¹ å¦‚ä½•é€šè¿‡"ä¸“å®¶åˆ†å·¥"æ€æƒ³è®¾è®¡å¤šå¤´æ³¨æ„åŠ›</p>
                </div>
                <div class="concept-card why">
                    <h3 style="color: var(--accent-red); margin-bottom: 0.5rem;">âœ“ ç²¾é€šæ•°å­¦åŸç†</h3>
                    <p>ç†è§£ç»´åº¦åˆ†å‰²å’Œå‚æ•°å…±äº«çš„å·§å¦™è®¾è®¡</p>
                </div>
                <div class="concept-card pitfall">
                    <h3 style="color: var(--accent-yellow); margin-bottom: 0.5rem;">âœ“ å®ç°å®Œæ•´æ–¹æ¡ˆ</h3>
                    <p>ä»é›¶å¼€å§‹ç¼–å†™é«˜æ•ˆçš„å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶</p>
                </div>
            </div>
        </section>

        <!-- å­¦ä¹ å¾ªç¯1ï¼šå¼•è¨€æ•…äº‹ -->
        <section id="intro" class="section-card">

            <div class="story-card">
                <h2 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸŒ™ ç¬¬äºŒå¤©æ™šä¸Šï¼Œå®¿èˆé‡Œçš„å›°æƒ‘ä¸çªç ´</h2>

                <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center; margin-bottom: 2rem;">
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #fbbf24, #f59e0b); display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 1rem; box-shadow: 0 8px 25px rgba(251, 191, 36, 0.3);">
                            ğŸ¤”
                        </div>
                        <div style="color: var(--text-secondary); font-size: 1.1rem;">
                            <strong style="color: var(--accent-yellow);">æ·±æ€çš„ç ”ç©¶ç”Ÿ</strong><br>
                            "QKVå¾ˆå¥½ï¼Œä½†æ€»æ„Ÿè§‰è¿˜ç¼ºç‚¹ä»€ä¹ˆ..."
                        </div>
                    </div>

                    <div style="color: var(--accent-purple); font-size: 2rem;">ğŸ’­</div>

                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #06b6d4, #0891b2); display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 1rem; box-shadow: 0 8px 25px rgba(6, 182, 212, 0.3);">
                            ğŸ’¡
                        </div>
                        <div style="color: var(--text-secondary); font-size: 1.1rem;">
                            <strong style="color: var(--accent-blue);">å®¤å‹çš„æé†’</strong><br>
                            "ä½ æƒ³æƒ³äººè„‘æ˜¯æ€ä¹ˆç†è§£è¯­è¨€çš„ï¼Ÿ"
                        </div>
                    </div>
                </div>

                <div class="tip info">
                    <span class="tip-icon">ğŸ§ </span>
                    <div class="tip-content">
                        <strong>æ·±å¤œæ€è€ƒï¼šäººè„‘çš„å¤šç»´åº¦å¤„ç†</strong><br>
                        å½“æˆ‘è¯»"çº¢è‰²è‹¹æœå¾ˆç”œ"è¿™å¥è¯æ—¶ï¼š<br>
                        â€¢ æˆ‘çš„<span style="color: var(--accent-green);">è¯­æ³•è„‘åŒº</span>åœ¨åˆ†æä¸»è°“å®¾å…³ç³»<br>
                        â€¢ æˆ‘çš„<span style="color: var(--accent-red);">è¯­ä¹‰è„‘åŒº</span>åœ¨ç†è§£è¯æ±‡å«ä¹‰<br>
                        â€¢ æˆ‘çš„<span style="color: var(--accent-purple);">è§†è§‰è„‘åŒº</span>åœ¨æƒ³è±¡çº¢è‰²å’Œå½¢çŠ¶<br>
                        â€¢ æˆ‘çš„<span style="color: var(--accent-blue);">æƒ…æ„Ÿè„‘åŒº</span>åœ¨æ„Ÿå—"ç”œ"çš„æ„‰æ‚¦
                    </div>
                </div>

                <div class="tip error mt-3">
                    <span class="tip-icon">âš¡</span>
                    <div class="tip-content">
                        <strong>çªç„¶æ„è¯†åˆ°çš„é—®é¢˜</strong><br>
                        "æˆ‘ä»¬çš„QKVæ³¨æ„åŠ›æœºåˆ¶åªæœ‰<strong>ä¸€ä¸ªè§†è§’</strong>ï¼<br>
                        å®ƒæ€ä¹ˆèƒ½åŒæ—¶å¤„ç†è¯­æ³•ã€è¯­ä¹‰ã€è§†è§‰ã€æƒ…æ„Ÿè¿™ä¹ˆå¤šå±‚é¢çš„å…³ç³»ï¼Ÿ"
                    </div>
                </div>
            </div>
        </section>

        <!-- å­¦ä¹ å¾ªç¯2ï¼šæ·±å…¥åˆ†æé—®é¢˜ -->
        <section id="problem" class="section-card">

            <h2 style="color: var(--accent-red); margin-bottom: 1.5rem;">ğŸ”¬ æ·±å…¥åˆ†æï¼šç”¨æ•°å­¦è¯æ˜ä¸ºä»€ä¹ˆå•å¤´ä¸å¤Ÿ</h2>

            <!-- è¾“å…¥æ•°æ®å±•ç¤º -->
            <div class="matrix-visualization">
                <div class="matrix-container">
                    <h3 class="matrix-title" style="color: var(--accent-blue);">ğŸ“¥ è¾“å…¥æ•°æ®ï¼š"çº¢è‰² è‹¹æœ å¾ˆ ç”œ"çš„å‘é‡è¡¨ç¤º</h3>
                    <div style="text-align: center; margin-bottom: 1rem;">
                        <span style="color: var(--text-secondary);">è¾“å…¥çŸ©é˜µ X âˆˆ â„â´Ë£â¸</span>
                    </div>
                    <div class="matrix-grid" style="grid-template-columns: repeat(9, 1fr);">
                        <!-- è¡¨å¤´ -->
                        <div class="matrix-cell"></div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚</div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚‚</div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚ƒ</div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚„</div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚…</div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚†</div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚‡</div>
                        <div class="matrix-cell header" style="color: var(--accent-purple);">dâ‚ˆ</div>

                        <!-- çº¢è‰² -->
                        <div class="matrix-cell header" style="color: var(--accent-green);">çº¢è‰²</div>
                        <div class="matrix-cell value">0.10</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.20</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.30</div>
                        <div class="matrix-cell value">0.15</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.10</div>
                        <div class="matrix-cell value">0.25</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.40</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.15</div>

                        <!-- è‹¹æœ -->
                        <div class="matrix-cell header" style="color: var(--accent-green);">è‹¹æœ</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.30</div>
                        <div class="matrix-cell value">0.10</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.15</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.35</div>
                        <div class="matrix-cell value">0.20</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.25</div>
                        <div class="matrix-cell value">0.12</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.28</div>

                        <!-- å¾ˆ -->
                        <div class="matrix-cell header" style="color: var(--accent-green);">å¾ˆ</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.12</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.32</div>
                        <div class="matrix-cell value">0.18</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.08</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.38</div>
                        <div class="matrix-cell value">0.14</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.22</div>
                        <div class="matrix-cell value">0.26</div>

                        <!-- ç”œ -->
                        <div class="matrix-cell header" style="color: var(--accent-green);">ç”œ</div>
                        <div class="matrix-cell value">0.22</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.18</div>
                        <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.33</div>
                        <div class="matrix-cell value">0.19</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.16</div>
                        <div class="matrix-cell value" style="background: rgba(239, 68, 68, 0.2);">0.48</div>
                        <div class="matrix-cell value">0.11</div>
                        <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.13</div>
                    </div>

                    <div class="tip info mt-3">
                        <span class="tip-icon">ğŸ“</span>
                        <div class="tip-content">
                            <strong>è¿™äº›å‘é‡çš„å«ä¹‰ï¼š</strong><br>
                            â€¢ æ¯è¡Œæ˜¯ä¸€ä¸ªè¯çš„8ç»´åµŒå…¥å‘é‡<br>
                            â€¢ æ¯ä¸ªç»´åº¦æ•è·ä¸åŒçš„è¯­ä¹‰ç‰¹å¾ï¼ˆå¦‚é¢œè‰²ã€å½¢çŠ¶ã€æƒ…æ„Ÿç­‰ï¼‰<br>
                            â€¢ è¿™äº›æ˜¯å•å¤´æ³¨æ„åŠ›çš„è¾“å…¥ï¼Œå°†ç”¨äºQKVå˜æ¢
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ³¨æ„åŠ›è®¡ç®—å¯è§†åŒ– -->
            <div class="visualization-container">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸ¯ å•å¤´æ³¨æ„åŠ›çš„è®¡ç®—å›°å¢ƒ</h3>

                <div class="viz-controls">
                    <div class="viz-control-group">
                        <label>æŸ¥è¯¢è¯ï¼š</label>
                        <select id="query-word" style="padding: 0.5rem; border-radius: 0.5rem; background: rgba(255, 255, 255, 0.1); border: 1px solid var(--border-color); color: var(--text-primary);">
                            <option value="0">çº¢è‰²</option>
                            <option value="1" selected>è‹¹æœ</option>
                            <option value="2">å¾ˆ</option>
                            <option value="3">ç”œ</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="calculateAttention()">
                        è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°
                    </button>
                </div>

                <canvas id="attention-viz" width="800" height="400"></canvas>

                <div id="attention-analysis" class="tip error mt-3" style="display: none;">
                    <span class="tip-icon">ğŸ˜±</span>
                    <div class="tip-content">
                        <strong>å‘ç°é—®é¢˜äº†å—ï¼Ÿ</strong><br>
                        æ³¨æ„åŠ›åˆ†æ•°éå¸¸æ¥è¿‘ï¼<br>
                        â€¢ çº¢è‰²ï¼ˆé¢œè‰²ä¿®é¥°ï¼‰: <span id="score-red">0.287</span><br>
                        â€¢ ç”œï¼ˆä¸»è¦å±æ€§ï¼‰: <span id="score-sweet">0.306</span><br>
                        â€¢ å¾ˆï¼ˆç¨‹åº¦ä¿®é¥°ï¼‰: <span id="score-very">0.261</span><br><br>
                        æœ€å¤§å·®å¼‚åªæœ‰<span id="max-diff">0.045</span>ï¼æ¨¡å‹æ— æ³•åŒºåˆ†"é¢œè‰²ä¿®é¥°"ã€"å±æ€§æè¿°"å’Œ"ç¨‹åº¦ä¿®é¥°"çš„é‡è¦æ€§ï¼
                    </div>
                </div>
            </div>

            <!-- æµ‹éªŒç¯èŠ‚ -->
            <div class="quiz-container">
                <h3 style="color: var(--accent-green); margin-bottom: 1rem;">ğŸ¯ å¿«é€Ÿæ£€éªŒ</h3>
                <div class="quiz-question">
                    ä¸ºä»€ä¹ˆå•å¤´æ³¨æ„åŠ›åœ¨å¤„ç†"çº¢è‰²è‹¹æœå¾ˆç”œ"æ—¶ä¼šé‡åˆ°å›°éš¾ï¼Ÿ
                </div>
                <div class="quiz-options">
                    <button class="quiz-option" data-answer="a">
                        A. å› ä¸ºè¯æ±‡é‡å¤ªå¤§ï¼Œæ— æ³•è®°ä½æ‰€æœ‰è¯
                    </button>
                    <button class="quiz-option" data-answer="b">
                        B. å› ä¸ºåªæœ‰ä¸€ä¸ªQKVå˜æ¢ï¼Œæ— æ³•åŒæ—¶æ•æ‰å¤šç§è¯­ä¹‰å…³ç³»
                    </button>
                    <button class="quiz-option" data-answer="c">
                        C. å› ä¸º8ç»´å‘é‡å¤ªå°ï¼Œéœ€è¦æ›´å¤§çš„ç»´åº¦
                    </button>
                    <button class="quiz-option" data-answer="d">
                        D. å› ä¸ºsoftmaxå‡½æ•°çš„è®¡ç®—ç²¾åº¦ä¸å¤Ÿ
                    </button>
                </div>
                <div class="quiz-feedback" id="quiz-feedback-1"></div>
            </div>
        </section>

        <!-- æ•°å­¦è¯æ˜éƒ¨åˆ† -->
        <section id="math-proof" class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ§® æ•°å­¦è¯æ˜ï¼šå•å¤´çš„æ ¹æœ¬å±€é™</h2>

            <div class="collapsible expanded">
                <div class="collapsible-header">
                    <div class="collapsible-title">
                        <span>ğŸ“Š</span>
                        <span>è¯¦ç»†çš„çŸ©é˜µè®¡ç®—è¿‡ç¨‹</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <div class="math-container">
                            <h4 style="color: var(--accent-yellow); margin-bottom: 1rem;">ğŸ” ä»¥"è‹¹æœ"ä¸ºä¾‹ï¼šå•å¤´æ³¨æ„åŠ›çš„æ ¸å¿ƒå›°å¢ƒ</h4>

                            <div class="matrix-visualization">
                                <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; align-items: center;">
                                    <div class="matrix-container">
                                        <div class="matrix-title" style="color: var(--accent-yellow);">Q_è‹¹æœå‘é‡</div>
                                        <div class="matrix-grid" style="grid-template-columns: repeat(2, 1fr);">
                                            <div class="matrix-cell header">ç»´åº¦</div>
                                            <div class="matrix-cell header">å€¼</div>
                                            <div class="matrix-cell header">qâ‚</div>
                                            <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.312</div>
                                            <div class="matrix-cell header">qâ‚‚</div>
                                            <div class="matrix-cell value">0.195</div>
                                            <div class="matrix-cell header">qâ‚ƒ</div>
                                            <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.224</div>
                                            <div class="matrix-cell header">qâ‚„</div>
                                            <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.453</div>
                                            <div class="matrix-cell header">qâ‚…</div>
                                            <div class="matrix-cell value">0.138</div>
                                            <div class="matrix-cell header">qâ‚†</div>
                                            <div class="matrix-cell value" style="background: rgba(139, 92, 246, 0.2);">-0.085</div>
                                            <div class="matrix-cell header">qâ‚‡</div>
                                            <div class="matrix-cell value" style="background: rgba(251, 191, 36, 0.2);">0.296</div>
                                            <div class="matrix-cell header">qâ‚ˆ</div>
                                            <div class="matrix-cell value">0.178</div>
                                        </div>
                                    </div>

                                    <div>
                                        <h4 style="color: var(--accent-red); margin-bottom: 1rem;">è¿™8ä¸ªç»´åº¦éœ€è¦åŒæ—¶ç¼–ç å¤šç§æŸ¥è¯¢æ„å›¾ï¼š</h4>
                                        <ol style="line-height: 1.8;">
                                            <li><span style="color: var(--accent-yellow);">æŸ¥æ‰¾ä¿®é¥°è¯</span>ï¼š"è°åœ¨æè¿°æˆ‘çš„é¢œè‰²ï¼Ÿ"ï¼ˆçº¢è‰²ï¼‰</li>
                                            <li><span style="color: var(--accent-green);">æŸ¥æ‰¾å±æ€§è¯</span>ï¼š"æˆ‘æœ‰ä»€ä¹ˆå±æ€§ï¼Ÿ"ï¼ˆç”œï¼‰</li>
                                            <li><span style="color: var(--accent-purple);">æŸ¥æ‰¾ç¨‹åº¦è¯</span>ï¼š"ç¨‹åº¦å¦‚ä½•ï¼Ÿ"ï¼ˆå¾ˆï¼‰</li>
                                            <li><span style="color: var(--accent-blue);">è¯­æ³•å…³ç³»</span>ï¼š"æˆ‘æ˜¯ä¸»è¯­è¿˜æ˜¯å®¾è¯­ï¼Ÿ"</li>
                                            <li><span style="color: var(--accent-red);">è¯­ä¹‰ç±»åˆ«</span>ï¼š"æˆ‘å±äºå“ªä¸ªè¯­ä¹‰åœºï¼Ÿ"ï¼ˆæ°´æœï¼‰</li>
                                            <li><span style="color: var(--accent-yellow);">æƒ…æ„Ÿå€¾å‘</span>ï¼š"å¯¹æˆ‘çš„è¯„ä»·æ˜¯ä»€ä¹ˆï¼Ÿ"</li>
                                            <li><span style="color: var(--accent-green);">å…·ä½“æ€§</span>ï¼š"æˆ‘æ˜¯æŠ½è±¡è¿˜æ˜¯å…·ä½“ï¼Ÿ"</li>
                                            <li><span style="color: var(--accent-purple);">é‡è¦æ€§</span>ï¼š"æˆ‘åœ¨å¥å­ä¸­çš„é‡è¦ç¨‹åº¦ï¼Ÿ"</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>

                            <div class="tip warning mt-3">
                                <span class="tip-icon">ğŸ’”</span>
                                <div class="tip-content">
                                    <strong>æ•°å­¦å›°å¢ƒï¼š</strong><br>
                                    ä¸€ä¸ª8ç»´å‘é‡æ— æ³•æœ‰æ•ˆè¡¨è¾¾8ç§ä¸åŒçš„æŸ¥è¯¢éœ€æ±‚ï¼<br>
                                    ä¸åŒç±»å‹çš„ä¿¡æ¯ä¼šåœ¨åŒä¸€å‘é‡ç©ºé—´ä¸­ç›¸äº’å¹²æ‰°å’Œå†²çªã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ğŸ§® çŸ©é˜µè®¡ç®—éªŒè¯ï¼šå•å¤´æ³¨æ„åŠ›çš„å±€é™æ€§ -->
            <div style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(245, 158, 11, 0.1)); border-radius: 24px; padding: 3rem; margin-bottom: 4rem; border: 2px solid rgba(251, 191, 36, 0.2); position: relative; overflow: hidden;">
                <div style="position: absolute; top: -25px; right: -25px; font-size: 6rem; opacity: 0.08; transform: rotate(20deg);">ğŸ§®</div>

                <div style="text-align: center; margin-bottom: 3rem;">
                    <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(251, 191, 36, 0.4);">
                        <span style="font-size: 2rem;">ğŸ§®</span>
                        <h2 style="color: #fbbf24; margin: 0; font-size: 1.8rem; font-weight: bold;">ç”¨å…·ä½“æ•°å€¼è¯æ˜ï¼šå•å¤´çš„è®¡ç®—å›°å¢ƒ</h2>
                    </div>
                </div>

                <!-- è¯¦ç»†çš„è®¡ç®—è¿‡ç¨‹ -->
                <div style="background: rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 2rem; margin: 2rem 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="color: #06b6d4; font-weight: bold; font-size: 1.3rem; margin-bottom: 1.5rem; text-align: center; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">ğŸ”¢ å®é™…è®¡ç®—ï¼šçœ‹çœ‹æ³¨æ„åŠ›åˆ†æ•°çš„é—®é¢˜</div>

                    <div style="background: rgba(15, 23, 42, 0.8); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
                        <div style="color: #0ea5e9; font-weight: bold; margin-bottom: 1rem; text-align: center;">å½“"è‹¹æœ"æƒ³è¦åŒæ—¶å…³æ³¨å¤šä¸ªè¯æ—¶...</div>

                        <!-- ç‚¹ç§¯è®¡ç®—è¯¦è§£ -->
                        <div style="display: grid; gap: 2rem;">
                            <!-- ä¸"çº¢è‰²"çš„ç‚¹ç§¯ -->
                            <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; margin: 1rem 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                                <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem; font-size: 1.1rem;">Q_è‹¹æœ Â· K_çº¢è‰² = ?</div>

                                <div style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">ä½¿ç”¨ä¸Šé¢è®¡ç®—çš„å‘é‡å€¼ï¼š</div>
                                    <div style="color: #cbd5e1; font-size: 0.9rem;">
                                        Q_è‹¹æœ = [0.312, 0.195, -0.224, 0.453, 0.138, -0.085, 0.296, 0.178]<br>
                                        K_çº¢è‰² = [0.228, 0.336, 0.251, 0.198, 0.155, 0.218, 0.289, 0.164]
                                    </div>
                                </div>

                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">= (0.312Ã—0.228) + (0.195Ã—0.336) + (-0.224Ã—0.251) + (0.453Ã—0.198)</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">&nbsp;&nbsp;+ (0.138Ã—0.155) + (-0.085Ã—0.218) + (0.296Ã—0.289) + (0.178Ã—0.164)</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">= 0.071 + 0.066 - 0.056 + 0.090</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">&nbsp;&nbsp;+ 0.021 - 0.019 + 0.085 + 0.029</div>
                                <div style="background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); font-family: 'Courier New', monospace; font-size: 1rem;">= 0.287</div>
                            </div>

                            <!-- ä¸"ç”œ"çš„ç‚¹ç§¯ -->
                            <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; margin: 1rem 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                                <div style="color: #22c55e; font-weight: bold; margin-bottom: 1rem; font-size: 1.1rem;">Q_è‹¹æœ Â· K_ç”œ = ?</div>

                                <div style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ä½¿ç”¨ä¸Šé¢è®¡ç®—çš„å‘é‡å€¼ï¼š</div>
                                    <div style="color: #cbd5e1; font-size: 0.9rem;">
                                        Q_è‹¹æœ = [0.312, 0.195, -0.224, 0.453, 0.138, -0.085, 0.296, 0.178]<br>
                                        K_ç”œ = [0.418, 0.169, 0.227, 0.186, 0.254, 0.314, 0.278, 0.112]
                                    </div>
                                </div>

                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">= (0.312Ã—0.418) + (0.195Ã—0.169) + (-0.224Ã—0.227) + (0.453Ã—0.186)</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">&nbsp;&nbsp;+ (0.138Ã—0.254) + (-0.085Ã—0.314) + (0.296Ã—0.278) + (0.178Ã—0.112)</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">= 0.130 + 0.033 - 0.051 + 0.084</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">&nbsp;&nbsp;+ 0.035 - 0.027 + 0.082 + 0.020</div>
                                <div style="background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); font-family: 'Courier New', monospace; font-size: 1rem;">= 0.306</div>
                            </div>

                            <!-- ä¸"å¾ˆ"çš„ç‚¹ç§¯ -->
                            <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; margin: 1rem 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                                <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 1rem; font-size: 1.1rem;">Q_è‹¹æœ Â· K_å¾ˆ = ?</div>

                                <div style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                                    <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 0.5rem;">ä½¿ç”¨ä¸Šé¢è®¡ç®—çš„å‘é‡å€¼ï¼š</div>
                                    <div style="color: #cbd5e1; font-size: 0.9rem;">
                                        Q_è‹¹æœ = [0.312, 0.195, -0.224, 0.453, 0.138, -0.085, 0.296, 0.178]<br>
                                        K_å¾ˆ = [0.174, 0.294, 0.359, 0.142, 0.428, 0.185, 0.268, 0.248]
                                    </div>
                                </div>

                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">= (0.312Ã—0.174) + (0.195Ã—0.294) + (-0.224Ã—0.359) + (0.453Ã—0.142)</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">&nbsp;&nbsp;+ (0.138Ã—0.428) + (-0.085Ã—0.185) + (0.296Ã—0.268) + (0.178Ã—0.248)</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">= 0.054 + 0.057 - 0.080 + 0.064</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 1rem; color: #cbd5e1; margin: 0.5rem 0; padding: 0.5rem; background: rgba(15, 23, 42, 0.6); border-radius: 4px;">&nbsp;&nbsp;+ 0.059 - 0.016 + 0.079 + 0.044</div>
                                <div style="background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); font-family: 'Courier New', monospace; font-size: 1rem;">= 0.261</div>
                            </div>
                        </div>
                    </div>

                    <!-- é—®é¢˜åˆ†æ -->
                    <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1)); padding: 2.5rem; border-radius: 16px; border: 2px solid rgba(239, 68, 68, 0.3); margin: 2rem 0;">
                        <div style="color: #ef4444; font-weight: bold; font-size: 1.4rem; margin-bottom: 1.5rem; text-align: center;">ğŸ˜± å‘ç°é—®é¢˜äº†å—ï¼Ÿ</div>
                        <div style="color: #cbd5e1; font-size: 1.1rem; line-height: 1.8; text-align: center;">
                            æ³¨æ„åŠ›åˆ†æ•°éå¸¸æ¥è¿‘ï¼<br>
                            â€¢ <span style="color: #ef4444; font-weight: bold;">çº¢è‰²ï¼ˆé¢œè‰²ä¿®é¥°ï¼‰: 0.287</span><br>
                            â€¢ <span style="color: #22c55e; font-weight: bold;">ç”œï¼ˆä¸»è¦å±æ€§ï¼‰: 0.306</span><br>
                            â€¢ <span style="color: #8b5cf6; font-weight: bold;">å¾ˆï¼ˆç¨‹åº¦ä¿®é¥°ï¼‰: 0.261</span><br><br>
                            <div style="background: rgba(239, 68, 68, 0.2); padding: 1.5rem; border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.4); margin-top: 1rem;">
                                <strong style="color: #fbbf24;">è¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</strong><br>
                                æœ€å¤§å·®å¼‚åªæœ‰0.045ï¼æ¨¡å‹æ— æ³•åŒºåˆ†"é¢œè‰²ä¿®é¥°"ã€"å±æ€§æè¿°"å’Œ"ç¨‹åº¦ä¿®é¥°"çš„é‡è¦æ€§ï¼
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ­¥éª¤2ï¼šSoftmaxåçš„ç¾éš¾ -->
                <div style="background: rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 2rem; margin: 2rem 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <div style="color: #06b6d4; font-weight: bold; font-size: 1.3rem; margin-bottom: 1.5rem; text-align: center; display: flex; align-items: center; justify-content: center; gap: 0.5rem;">ğŸ“‰ Softmaxåçš„"å¹³å‡åŒ–ç¾éš¾"</div>

                    <div style="background: rgba(15, 23, 42, 0.8); padding: 2rem; border-radius: 12px;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ç»è¿‡Softmaxæ ‡å‡†åŒ–å...</div>

                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center;">
                            <!-- åŸå§‹åˆ†æ•° -->
                            <div style="text-align: center;">
                                <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">åŸå§‹åˆ†æ•°</div>
                                <div style="font-size: 1rem; color: #cbd5e1; line-height: 1.6;">
                                    çº¢è‰²: <span style="background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">0.287</span><br>
                                    è‹¹æœ: <span style="background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">0.295</span><br>
                                    å¾ˆ: <span style="background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">0.261</span><br>
                                    ç”œ: <span style="background: rgba(34, 197, 94, 0.2); color: #22c55e; font-weight: bold; padding: 0.8rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">0.306</span>
                                </div>
                            </div>

                            <div style="font-size: 2rem; color: #06b6d4;">â†’</div>

                            <!-- Softmaxå -->
                            <div style="text-align: center;">
                                <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">Softmaxå</div>
                                <div style="font-size: 1rem; color: #cbd5e1; line-height: 1.6;">
                                    çº¢è‰²: <span style="color: #ef4444; font-weight: bold;">0.247</span><br>
                                    è‹¹æœ: <span style="color: #ef4444; font-weight: bold;">0.251</span><br>
                                    å¾ˆ: <span style="color: #ef4444; font-weight: bold;">0.244</span><br>
                                    ç”œ: <span style="color: #ef4444; font-weight: bold;">0.258</span>
                                </div>
                            </div>
                        </div>

                        <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1)); padding: 2.5rem; border-radius: 16px; border: 2px solid rgba(239, 68, 68, 0.3); margin: 2rem 0;">
                            <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem; font-size: 1.2rem;">ğŸ’¥ ç¾éš¾æ€§ç»“æœï¼š</div>
                            <div style="color: #cbd5e1; font-size: 1rem; text-align: center;">
                                æ‰€æœ‰æ³¨æ„åŠ›æƒé‡éƒ½åœ¨<strong style="color: #fbbf24;">0.25å·¦å³</strong>ï¼å·®å¼‚ä»…æœ‰<strong style="color: #ef4444;">0.014</strong>ï¼<br><br>
                                è¿™ç›¸å½“äºæ¨¡å‹åœ¨è¯´ï¼š<span style="color: #ef4444; font-style: italic;">"æˆ‘è§‰å¾—æ‰€æœ‰è¯éƒ½ä¸€æ ·é‡è¦ï¼Œæˆ‘åˆ†ä¸æ¸…è°æ˜¯è°..."</span> ğŸ˜µ
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>

        <!-- é”™è¯¯å°è¯•éƒ¨åˆ† -->
        <section id="wrong-attempts" class="section-card">
            <h2 style="color: var(--accent-red); margin-bottom: 1.5rem;">ğŸ˜µ é™·å…¥å›°å¢ƒï¼šç¬¬ä¸€ååº”çš„é”™è¯¯å°è¯•</h2>

            <div class="tip error mb-3">
                <span class="tip-icon">ğŸ”¥</span>
                <div class="tip-content">
                    <strong>å†…å¿ƒçš„ç„¦è™‘</strong><br>
                    "å¤©å“ªï¼æˆ‘ä»¬èŠ±äº†é‚£ä¹ˆå¤šæ—¶é—´ç†è§£QKVï¼Œç°åœ¨å‘ç°å®ƒæ ¹æœ¬è§£å†³ä¸äº†å¤æ‚è¯­ä¹‰ï¼Ÿ<br>
                    é‚£æ‰€æœ‰çš„åŠªåŠ›éƒ½ç™½è´¹äº†å—ï¼Ÿéš¾é“æ³¨æ„åŠ›æœºåˆ¶å°±æ˜¯ä¸ªå¤±è´¥çš„è®¾è®¡ï¼Ÿ"
                </div>
            </div>

            <div class="concept-grid">
                <!-- é”™è¯¯å°è¯•1 -->
                <div class="concept-card why">
                    <h3 style="color: var(--accent-red); margin-bottom: 1rem;">âŒ é”™è¯¯å°è¯•1ï¼šç®€å•ç²—æš´åœ°å¢åŠ ç»´åº¦</h3>

                    <div class="mb-2">
                        <strong>ğŸ’¡ ç›´è§‰æƒ³æ³•ï¼š</strong><br>
                        "æ—¢ç„¶8ç»´ä¸å¤Ÿï¼Œé‚£æˆ‘ä»¬ç”¨64ç»´ã€128ç»´ï¼Œç”šè‡³1024ç»´ï¼<br>
                        è¿™æ ·å°±æœ‰è¶³å¤Ÿçš„ç»´åº¦æ¥ç¼–ç æ‰€æœ‰ç±»å‹çš„å…³ç³»äº†ï¼"
                    </div>

                    <div class="tip error">
                        <span class="tip-icon">ğŸ’¥</span>
                        <div class="tip-content">
                            <strong>ä¸ºä»€ä¹ˆè¿™ä¸è¡Œï¼Ÿ</strong><br>
                            1. <strong>å‚æ•°çˆ†ç‚¸</strong>ï¼šd_model=1024æ—¶ï¼Œå‚æ•°é‡å¢åŠ 128å€ï¼<br>
                            2. <strong>è¿‡æ‹Ÿåˆé£é™©</strong>ï¼šç»´åº¦å¤ªé«˜ï¼Œæ¨¡å‹å®¹æ˜“è®°ä½è®­ç»ƒæ•°æ®<br>
                            3. <strong>è®¡ç®—å¼€é”€</strong>ï¼šå†…å­˜å’Œè®¡ç®—é‡å‘ˆå¹³æ–¹å¢é•¿<br>
                            4. <strong>æ ¹æœ¬é—®é¢˜æ²¡è§£å†³</strong>ï¼šè¿˜æ˜¯åªæœ‰ä¸€ä¸ªè§†è§’ï¼
                        </div>
                    </div>
                </div>

                <!-- é”™è¯¯å°è¯•2 -->
                <div class="concept-card what">
                    <h3 style="color: var(--accent-yellow); margin-bottom: 1rem;">âŒ é”™è¯¯å°è¯•2ï¼šå †å å¤šä¸ªå•å¤´æ³¨æ„åŠ›å±‚</h3>

                    <div class="mb-2">
                        <strong>ğŸ’¡ ç›´è§‰æƒ³æ³•ï¼š</strong><br>
                        "æ—¢ç„¶ä¸€å±‚ä¸å¤Ÿï¼Œé‚£å°±ç”¨å¤šå±‚ï¼<br>
                        ç¬¬ä¸€å±‚å¤„ç†è¯­æ³•ï¼Œç¬¬äºŒå±‚å¤„ç†è¯­ä¹‰ï¼Œç¬¬ä¸‰å±‚å¤„ç†æƒ…æ„Ÿ..."
                    </div>

                    <div class="tip warning">
                        <span class="tip-icon">ğŸ’¥</span>
                        <div class="tip-content">
                            <strong>ä¸ºä»€ä¹ˆè¿™ä¹Ÿä¸è¡Œï¼Ÿ</strong><br>
                            1. <strong>ä¸²è¡Œå¤„ç†</strong>ï¼šå±‚ä¸å±‚ä¹‹é—´é¡ºåºæ‰§è¡Œï¼Œæ•ˆç‡ä½ä¸‹<br>
                            2. <strong>ä¿¡æ¯ä¸¢å¤±</strong>ï¼šæ¯å±‚éƒ½æ˜¯å‹ç¼©ï¼Œé‡è¦ä¿¡æ¯å¯èƒ½ä¸¢å¤±<br>
                            3. <strong>æ¢¯åº¦æ¶ˆå¤±</strong>ï¼šå±‚æ•°è¿‡å¤šå¯¼è‡´è®­ç»ƒå›°éš¾<br>
                            4. <strong>å»¶è¿Ÿé—®é¢˜</strong>ï¼šå¿…é¡»ç­‰å‰é¢çš„å±‚è®¡ç®—å®Œ
                        </div>
                    </div>
                </div>

                <!-- é”™è¯¯å°è¯•3 -->
                <div class="concept-card how">
                    <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">âŒ é”™è¯¯å°è¯•3ï¼šæ‰‹å·¥è®¾è®¡ä¸“é—¨çš„ç‰¹å¾ç»´åº¦</h3>

                    <div class="mb-2">
                        <strong>ğŸ’¡ ç›´è§‰æƒ³æ³•ï¼š</strong><br>
                        "é‚£æˆ‘ä»¬é¢„å…ˆå®šä¹‰å‘é‡çš„æ¯ä¸ªç»´åº¦çš„å«ä¹‰ï¼š<br>
                        â€¢ ç»´åº¦1-2ï¼šé¢œè‰²ä¿¡æ¯<br>
                        â€¢ ç»´åº¦3-4ï¼šå½¢çŠ¶ä¿¡æ¯<br>
                        â€¢ ç»´åº¦5-6ï¼šæƒ…æ„Ÿä¿¡æ¯<br>
                        â€¢ ç»´åº¦7-8ï¼šè¯­æ³•ä¿¡æ¯"
                    </div>

                    <div class="tip error">
                        <span class="tip-icon">ğŸ’¥</span>
                        <div class="tip-content">
                            <strong>ä¸ºä»€ä¹ˆè¿™è¿èƒŒäº†æ·±åº¦å­¦ä¹ ï¼Ÿ</strong><br>
                            1. <strong>å¤±å»çµæ´»æ€§</strong>ï¼šå›ºå®šçš„ç»´åº¦åˆ†é…æ— æ³•é€‚åº”ä¸åŒä»»åŠ¡<br>
                            2. <strong>äººå·¥åè§</strong>ï¼šäººç±»çš„ç†è§£å¯èƒ½æ˜¯é”™è¯¯çš„<br>
                            3. <strong>æ— æ³•å­¦ä¹ </strong>ï¼šæ¨¡å‹æ— æ³•è‡ªåŠ¨å‘ç°æ–°çš„è¡¨ç¤ºæ–¹å¼<br>
                            4. <strong>ç»´æŠ¤å™©æ¢¦</strong>ï¼šæ¯ç§è¯­è¨€éƒ½éœ€è¦é‡æ–°è®¾è®¡
                        </div>
                    </div>
                </div>
            </div>

            <div class="tip warning mt-4 text-center">
                <span class="tip-icon">ğŸ˜¤</span>
                <div class="tip-content">
                    <strong style="font-size: 1.2rem;">æŒ«è´¥æ„Ÿè¾¾åˆ°é¡¶å³°</strong><br>
                    "æ‰€æœ‰ç›´è§‰çš„è§£å†³æ–¹æ¡ˆéƒ½è¡Œä¸é€šï¼<br>
                    è¦ä¹ˆå‚æ•°çˆ†ç‚¸ï¼Œè¦ä¹ˆæ•ˆç‡ä½ä¸‹ï¼Œè¦ä¹ˆè¿èƒŒæ·±åº¦å­¦ä¹ åŸç†...<br>
                    éš¾é“çœŸçš„æ²¡æœ‰ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå—ï¼Ÿ"
                </div>
            </div>
        </section>


        <!-- çªç ´æ—¶åˆ» -->
        <section id="breakthrough" class="section-card">
            <h2 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸ’¡ é¡¿æ‚Ÿæ—¶åˆ»ï¼šé‡æ–°å®¡è§†é—®é¢˜æœ¬è´¨</h2>

            <div class="story-card">
                <div class="tip info mb-3">
                    <span class="tip-icon">ğŸ”„</span>
                    <div class="tip-content">
                        <strong>æ€ç»´è½¬æŠ˜ï¼šåœä¸‹æ¥ï¼Œé‡æ–°æ€è€ƒ</strong><br>
                        "ç­‰ç­‰...æˆ‘æ˜¯ä¸æ˜¯ä¸€å¼€å§‹å°±æƒ³é”™äº†æ–¹å‘ï¼Ÿ<br>
                        è®©æˆ‘é‡æ–°çœ‹çœ‹åˆ°åº•ä»€ä¹ˆæ˜¯æ ¸å¿ƒé—®é¢˜..."
                    </div>
                </div>

                <div class="tip warning">
                    <span class="tip-icon">ğŸ”</span>
                    <div class="tip-content">
                        <strong>é‡æ–°å®¡è§†æ ¸å¿ƒé—®é¢˜ï¼š</strong><br>
                        é—®é¢˜ä¸æ˜¯"ç»´åº¦ä¸å¤Ÿ"æˆ–"å±‚æ•°ä¸å¤Ÿ"ï¼Œ<br>
                        è€Œæ˜¯<strong style="color: var(--accent-yellow);">"ä¸€ä¸ªå˜æ¢çŸ©é˜µæ— æ³•åŒæ—¶ä¼˜åŒ–å¤šä¸ªç›¸äº’å†²çªçš„ç›®æ ‡"</strong>ï¼
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center; margin: 2rem 0; text-align: center;">
                    <div>
                        <div style="background: rgba(239, 68, 68, 0.2); padding: 1.5rem; border-radius: 12px;">
                            <div style="color: var(--accent-red); font-weight: bold; margin-bottom: 0.5rem;">ä¼ ç»Ÿæ€è·¯</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">å¢åŠ æ•°é‡<br>(ç»´åº¦/å±‚æ•°/å¤æ‚åº¦)</div>
                        </div>
                    </div>

                    <div style="font-size: 2rem; color: var(--accent-yellow);">VS</div>

                    <div>
                        <div style="background: rgba(34, 197, 94, 0.2); padding: 1.5rem; border-radius: 12px;">
                            <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 0.5rem;">æ–°æ€è·¯</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem;">æ”¹å˜ç»“æ„<br>(ä¸“é—¨åŒ–åˆ†å·¥)</div>
                        </div>
                    </div>
                </div>

                <div class="tip success">
                    <span class="tip-icon">ğŸ§ </span>
                    <div class="tip-content">
                        <strong>å›åˆ°æœ€åˆçš„çµæ„Ÿ</strong><br>
                        "å®¤å‹è¯´å¾—å¯¹ï¼äººè„‘å°±æ˜¯è¿™æ ·å·¥ä½œçš„...<br>
                        æˆ‘ä»¬ä¸æ˜¯ç”¨ä¸€ä¸ª'è¶…çº§å¤§è„‘åŒºåŸŸ'æ¥å¤„ç†æ‰€æœ‰ä¿¡æ¯ï¼Œ<br>
                        è€Œæ˜¯ç”¨<strong style="color: var(--accent-purple);">å¤šä¸ªä¸“é—¨çš„è„‘åŒºå¹¶è¡Œå·¥ä½œ</strong>ï¼"
                    </div>
                </div>

                <div class="concept-grid mt-3">
                    <div class="concept-card why">
                        <h4 style="color: var(--accent-red); margin-bottom: 0.5rem;">âŒ é”™è¯¯ç±»æ¯”</h4>
                        <p>"è®©ä¸€ä¸ªå¤§è„‘åŒºåŸŸå˜å¾—è¶…çº§å¤æ‚ï¼Œå¤„ç†è¯­æ³•ã€è¯­ä¹‰ã€è§†è§‰ã€æƒ…æ„Ÿ..."</p>
                        <p style="color: var(--text-muted); font-style: italic; margin-top: 1rem;">
                            å°±åƒè®©ä¸€ä¸ªäººåŒæ—¶åšåŒ»ç”Ÿã€å¾‹å¸ˆã€å·¥ç¨‹å¸ˆã€è‰ºæœ¯å®¶
                        </p>
                    </div>

                    <div class="concept-card what">
                        <h4 style="color: var(--accent-green); margin-bottom: 0.5rem;">âœ… æ­£ç¡®ç±»æ¯”</h4>
                        <p>"è®©å¤šä¸ªä¸“é—¨çš„è„‘åŒºåä½œï¼Œæ¯ä¸ªä¸“æ³¨è‡ªå·±æ“…é•¿çš„é¢†åŸŸ..."</p>
                        <p style="color: var(--text-muted); font-style: italic; margin-top: 1rem;">
                            å°±åƒä¸€ä¸ªä¸“ä¸šå›¢é˜Ÿï¼Œå„å¸å…¶èŒ
                        </p>
                    </div>
                </div>
            </div>

            <div class="math-container mt-4">
                <h3 style="color: var(--accent-green); margin-bottom: 1rem;">âœ¨ é—®é¢˜é‡æ–°å®šä¹‰</h3>

                <div style="text-align: center;">
                    <div style="margin-bottom: 1.5rem;">
                        <div style="color: var(--accent-red); font-weight: bold; font-size: 1.1rem;">åŸé—®é¢˜ï¼š</div>
                        <div style="color: var(--text-secondary); font-style: italic;">"å¦‚ä½•è®©ä¸€ä¸ªQKVä¸‰å…ƒç»„å¤„ç†å¤šç§å…³ç³»ï¼Ÿ"</div>
                    </div>

                    <div style="color: var(--accent-yellow); font-size: 2rem; margin: 1rem 0;">â†“</div>

                    <div>
                        <div style="color: var(--accent-green); font-weight: bold; font-size: 1.1rem;">æ–°é—®é¢˜ï¼š</div>
                        <div style="color: var(--text-secondary); font-style: italic;">"å¦‚ä½•è®©å¤šä¸ªQKVä¸‰å…ƒç»„ä¸“é—¨åŒ–åä½œï¼Ÿ"</div>
                    </div>
                </div>

                <div class="tip success mt-3">
                    <span class="tip-icon">ğŸ¯</span>
                    <div class="tip-content">
                        <strong>è¿™æ ·æ€è€ƒçš„å¥½å¤„ï¼š</strong><br>
                        1. <strong>ç¬¦åˆè‡ªç„¶è§„å¾‹</strong>ï¼šæ¨¡ä»¿äººè„‘çš„æˆåŠŸæ¨¡å¼<br>
                        2. <strong>é¿å…å‚æ•°çˆ†ç‚¸</strong>ï¼šä¸éœ€è¦å¢åŠ æ€»ä½“å¤æ‚åº¦<br>
                        3. <strong>æ”¯æŒå¹¶è¡Œ</strong>ï¼šå¤šä¸ªä¸“å®¶å¯ä»¥åŒæ—¶å·¥ä½œ<br>
                        4. <strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šæ¯ä¸ªä¸“å®¶ç‹¬ç«‹ä¼˜åŒ–ï¼Œäº’ä¸å¹²æ‰°
                    </div>
                </div>
            </div>
        </section>

        <!-- å®ç°æ–¹æ¡ˆ -->
        <section id="implementation" class="section-card">


            <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">ğŸš€ çªç ´æ€§æ€è€ƒï¼šç»´åº¦åˆ†å‰²çš„å·§å¦™è®¾è®¡</h2>

            <div class="story-card">
                <div class="tip info">
                    <span class="tip-icon">âš¡</span>
                    <div class="tip-content">
                        <strong>çµæ„Ÿçªç°çš„ç¬é—´</strong><br>
                        "ç­‰ç­‰ï¼æˆ‘ä¸ºä»€ä¹ˆè¦ç»™æ¯ä¸ªä¸“å®¶å®Œæ•´çš„8ç»´ï¼Ÿ<br>
                        ä¸ºä»€ä¹ˆä¸æŠŠ8ç»´<strong style="color: var(--accent-green);">åˆ†å‰²</strong>ç»™å¤šä¸ªä¸“å®¶å‘¢ï¼Ÿ<br><br>

                        å°±åƒä¸€ä¸ªæŠ«è¨ï¼Œ<br>
                        ä¸æ˜¯æ¯ä¸ªäººéƒ½è¦ä¸€ä¸ªå®Œæ•´çš„æŠ«è¨ï¼Œ<br>
                        è€Œæ˜¯æŠŠä¸€ä¸ªæŠ«è¨<strong style="color: var(--accent-green);">åˆ‡æˆå‡ å—</strong>ï¼Œæ¯ä¸ªäººè´Ÿè´£ä¸€å—ï¼"
                    </div>
                </div>

                <!-- ç»´åº¦åˆ†å‰²å¯è§†åŒ– -->
                <div class="visualization-container mt-4">
                    <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">ğŸ• "æŠ«è¨åˆ†å‰²"ç±»æ¯”</h3>

                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center;">
                        <!-- ä¼ ç»Ÿæ–¹å¼ -->
                        <div style="text-align: center;">
                            <h4 style="color: var(--accent-red); margin-bottom: 1rem;">âŒ ä¼ ç»Ÿæƒ³æ³•</h4>
                            <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px;">
                                <div style="color: var(--text-secondary); margin-bottom: 1rem;">æ¯ä¸ªä¸“å®¶éƒ½è¦å®Œæ•´çš„8ç»´</div>
                                <div>
                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; margin-bottom: 0.5rem;">
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚‚</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚ƒ</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚„</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚…</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚†</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚‡</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚ˆ</div>
                                    </div>
                                    <div style="color: var(--accent-red); font-size: 0.8rem;">ä¸“å®¶1ï¼ˆ8ç»´ï¼‰</div>

                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; margin-top: 0.5rem; margin-bottom: 0.5rem;">
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚‚</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚ƒ</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚„</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚…</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚†</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚‡</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚ˆ</div>
                                    </div>
                                    <div style="color: var(--accent-yellow); font-size: 0.8rem;">ä¸“å®¶2ï¼ˆ8ç»´ï¼‰</div>
                                </div>
                                <div style="color: var(--accent-red); font-size: 0.8rem; margin-top: 1rem;">æ€»ç»´åº¦ï¼š16ç»´ï¼</div>
                            </div>
                        </div>

                        <div style="font-size: 2rem; color: var(--accent-green);">â†’</div>

                        <!-- æ–°æ–¹å¼ -->
                        <div style="text-align: center;">
                            <h4 style="color: var(--accent-green); margin-bottom: 1rem;">âœ… ç»´åº¦åˆ†å‰²</h4>
                            <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 8px;">
                                <div style="color: var(--text-secondary); margin-bottom: 1rem;">æ¯ä¸ªä¸“å®¶è´Ÿè´£ä¸€éƒ¨åˆ†ç»´åº¦</div>
                                <div>
                                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px; margin-bottom: 0.5rem;">
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚</div>
                                        <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚‚</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚ƒ</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚„</div>
                                    </div>
                                    <div style="color: var(--text-secondary); font-size: 0.8rem;">ä¸“å®¶1ï¼ˆ2ç»´ï¼‰+ ä¸“å®¶2ï¼ˆ2ç»´ï¼‰</div>

                                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2px; margin-top: 0.5rem; margin-bottom: 0.5rem;">
                                        <div style="background: rgba(34, 197, 94, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚…</div>
                                        <div style="background: rgba(34, 197, 94, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚†</div>
                                        <div style="background: rgba(139, 92, 246, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚‡</div>
                                        <div style="background: rgba(139, 92, 246, 0.3); padding: 8px; border-radius: 4px; font-size: 0.7rem;">dâ‚ˆ</div>
                                    </div>
                                    <div style="color: var(--text-secondary); font-size: 0.8rem;">ä¸“å®¶3ï¼ˆ2ç»´ï¼‰+ ä¸“å®¶4ï¼ˆ2ç»´ï¼‰</div>
                                </div>
                                <div style="color: var(--accent-green); font-size: 0.8rem; margin-top: 1rem;">æ€»ç»´åº¦ï¼šè¿˜æ˜¯8ç»´ï¼</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å‚æ•°é‡éªŒè¯ -->
            <div class="collapsible">
                <div class="collapsible-header">
                    <div class="collapsible-title">
                        <span>ğŸ§®</span>
                        <span>å‚æ•°é‡çš„æ•°å­¦éªŒè¯</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>

            </div>

            <!-- äº¤äº’å¼ç»´åº¦åˆ†å‰²æ¼”ç¤º -->
            <div class="visualization-container mt-4">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ® äº’åŠ¨å®éªŒï¼šè°ƒæ•´å¤´æ•°çœ‹æ•ˆæœ</h3>

                <div class="viz-controls">
                    <div class="viz-control-group">
                        <label>æ¨¡å‹ç»´åº¦ (d_model):</label>
                        <div class="slider-container">
                            <input type="range" id="d-model-slider" min="8" max="64" value="8" step="8">
                            <span class="slider-value" id="d-model-value">8</span>
                        </div>
                    </div>

                    <div class="viz-control-group">
                        <label>å¤´æ•° (num_heads):</label>
                        <div class="slider-container">
                            <input type="range" id="num-heads-slider" min="1" max="8" value="4" step="1">
                            <span class="slider-value" id="num-heads-value">4</span>
                        </div>
                    </div>

                    <div class="viz-control-group">
                        <label>æ¯ä¸ªå¤´çš„ç»´åº¦ (d_k):</label>
                        <div class="slider-value" id="d-k-value" style="background: var(--accent-yellow); color: var(--bg-dark);">2</div>
                    </div>
                </div>

                <canvas id="dimension-split-viz" width="800" height="300"></canvas>

                <div id="dimension-warning" class="tip error mt-3" style="display: none;">
                    <span class="tip-icon">âš ï¸</span>
                    <div class="tip-content">
                        <strong>è­¦å‘Šï¼š</strong>d_modelå¿…é¡»èƒ½è¢«num_headsæ•´é™¤ï¼
                    </div>
                </div>

                <div id="dimension-insight" class="tip info mt-3">
                    <span class="tip-icon">ğŸ’¡</span>
                    <div class="tip-content">
                        <strong>å½“å‰é…ç½®ï¼š</strong>4ä¸ªå¤´ï¼Œæ¯ä¸ªå¤´å¤„ç†2ç»´ã€‚å‚æ•°æ€»é‡ä¿æŒä¸å˜ï¼
                    </div>
                </div>
            </div>
        </section>

        <!-- ğŸ§® ç­‰ä¸€ä¸‹ï¼è¿™ä¸ªæƒ³æ³•çœŸçš„å¯è¡Œå—ï¼Ÿ -->
        <div style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.15), rgba(14, 165, 233, 0.1)); border-radius: 24px; padding: 3rem; margin-bottom: 4rem; border: 2px solid rgba(6, 182, 212, 0.2); position: relative; overflow: hidden;">
            <div style="position: absolute; top: -25px; right: -25px; font-size: 6rem; opacity: 0.08; transform: rotate(15deg);">ğŸ§®</div>

            <!-- æ ‡é¢˜ -->
            <div style="text-align: center; margin-bottom: 3rem;">
                <h2 style="color: #06b6d4; margin: 0; font-size: 1.8rem; font-weight: bold; display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(6, 182, 212, 0.2), rgba(14, 165, 233, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(6, 182, 212, 0.4);">
                    <span style="font-size: 2rem;">ğŸ§®</span>
                    ç­‰ä¸€ä¸‹ï¼è¿™ä¸ªæƒ³æ³•çœŸçš„å¯è¡Œå—ï¼Ÿ
                </h2>
            </div>

            <!-- å†³å¿ƒéªŒè¯éƒ¨åˆ† -->
            <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(124, 58, 237, 0.1)); border-radius: 16px; padding: 2rem; margin: 2rem 0; border: 2px solid rgba(139, 92, 246, 0.2);">
                <h3 style="color: #8b5cf6; font-weight: bold; font-size: 1.1rem; text-align: center; margin-bottom: 2rem;">
                    <span style="font-size: 1.5rem;">ğŸ¯</span> å¥½å§ï¼Œè®©æˆ‘æ¥ä¸¥æ ¼éªŒè¯è¿™ä¸ªæƒ³æ³•ï¼
                </h3>

                <div style="background: rgba(255, 255, 255, 0.08); padding: 2rem; border-radius: 12px; text-align: center; color: #cbd5e1; font-size: 1rem; line-height: 1.8;">
                    <span style="color: #8b5cf6; font-weight: bold;">"ä½œä¸ºä¸€ä¸ªä¸¥è°¨çš„ç ”ç©¶è€…ï¼Œ</span><br>
                    æˆ‘ä¸èƒ½ä»…ä»…è¢«ä¸€ä¸ªç¾å¥½çš„æƒ³æ³•å†²æ˜å¤´è„‘ã€‚<br>
                    è®©æˆ‘ç”¨æ•°å­¦çš„è¯­è¨€æ¥è¯æ˜è¿™ä¸ªæ–¹æ¡ˆç¡®å®å¯è¡Œï¼"<br><br>

                    <!-- æ­¥éª¤ç½‘æ ¼ -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                        <div style="background: rgba(251, 191, 36, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3);">
                            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 0.5rem;">Step 1</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">å‚æ•°é‡è®¡ç®—</div>
                        </div>
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                            <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">Step 2</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">ç»´åº¦å˜æ¢éªŒè¯</div>
                        </div>
                        <div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">
                            <div style="color: #06b6d4; font-weight: bold; margin-bottom: 0.5rem;">Step 3</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">å¹¶è¡Œæ€§åˆ†æ</div>
                        </div>
                        <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                            <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">Step 4</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">æ•´åˆæœºåˆ¶è®¾è®¡</div>
                        </div>
                    </div>
                </div>
            </div>


            <div style="background: rgba(255, 255, 255, 0.05); border-radius: 16px; padding: 2rem; margin: 2rem 0; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 style="color: #fbbf24; font-weight: bold; font-size: 1.3rem; margin-bottom: 1.5rem; text-align: center;">
                    <span>ğŸ“Š</span> Step 1: å‚æ•°é‡éªŒè¯ - è¿™çœŸçš„ä¸ä¼šçˆ†ç‚¸å—ï¼Ÿ
                </h3>

                <!-- æ ¸å¿ƒæ€æƒ³ -->

                <!-- æ ¸å¿ƒæ€æƒ³é‡ç”³ -->
                <div style="background: rgba(6, 182, 212, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(6, 182, 212, 0.3); margin-bottom: 2rem;">
                    <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1rem; text-align: center;">ğŸ¯ æ ¸å¿ƒæ€æƒ³éªŒè¯ï¼š</div>
                    <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8; text-align: center;">
                        å¦‚æœåŸæ¥æ˜¯ä¸€ä¸ª d_model ç»´çš„ QKV å˜æ¢ï¼Œ<br>
                        ç°åœ¨å˜æˆ h ä¸ª d_k ç»´çš„ QKV å˜æ¢ï¼ˆå…¶ä¸­ d_k = d_model / hï¼‰ï¼Œ<br>
                        <strong style="color: #fbbf24;">æ€»å‚æ•°é‡æ˜¯å¦çœŸçš„ä¿æŒåˆç†ï¼Ÿ</strong>
                    </div>
                </div>



                <div style="color: #a78bfa; font-weight: bold; margin-bottom: 1.5rem;">å…·ä½“éªŒè¯è¿‡ç¨‹</div>
                <!-- Step 1: åˆ†æå•å¤´å‚æ•°é‡ -->
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
                    <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem;">ğŸ” Step 1: å•å¤´æ³¨æ„åŠ›éœ€è¦å‡ ä¸ªçŸ©é˜µï¼Ÿ</div>
                    <div style="color: #cbd5e1; font-size: 0.9rem; line-height: 1.8; text-align: left;">
                        å•å¤´æ³¨æ„åŠ›å¾ˆç®€å•ï¼Œæ˜¾ç„¶éœ€è¦3ä¸ªæƒé‡çŸ©é˜µï¼š<br>
                        â€¢ W_Q: è¾“å…¥d_modelç»´ â†’ è¾“å‡ºd_modelç»´ â†’ <span style="color: #fbbf24;">d_model Ã— d_model</span> ä¸ªå‚æ•°<br>
                        â€¢ W_K: è¾“å…¥d_modelç»´ â†’ è¾“å‡ºd_modelç»´ â†’ <span style="color: #fbbf24;">d_model Ã— d_model</span> ä¸ªå‚æ•°<br>
                        â€¢ W_V: è¾“å…¥d_modelç»´ â†’ è¾“å‡ºd_modelç»´ â†’ <span style="color: #fbbf24;">d_model Ã— d_model</span> ä¸ªå‚æ•°<br><br>

                        ä»¥d_model=8ä¸ºä¾‹ï¼š<br>
                        â€¢ W_Q: 8Ã—8 = <span style="color: #22c55e;">64</span> ä¸ªå‚æ•°<br>
                        â€¢ W_K: 8Ã—8 = <span style="color: #22c55e;">64</span> ä¸ªå‚æ•°<br>
                        â€¢ W_V: 8Ã—8 = <span style="color: #22c55e;">64</span> ä¸ªå‚æ•°<br>

                        <div style="background: rgba(34, 197, 94, 0.2); padding: 0.5rem; border-radius: 4px; margin-top: 1rem; text-align: center;">
                            <strong style="color: #22c55e;">å•å¤´æ€»å‚æ•°: 3 Ã— d_modelÂ² = 192</strong>
                        </div>
                    </div>
                </div>

                <!-- Step 2: æå‡ºå…³é”®é—®é¢˜ -->
                <div style="background: rgba(251, 191, 36, 0.1); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; border: 1px solid rgba(251, 191, 36, 0.3);">
                    <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem;">ğŸ¤” Step 2: é‚£ä¹ˆå¤šå¤´æ³¨æ„åŠ›éœ€è¦å‡ ä¸ªçŸ©é˜µå‘¢ï¼Ÿ</div>
                    <div style="color: #cbd5e1; font-size: 0.9rem; line-height: 1.8; text-align: left;">
                        <strong style="color: #06b6d4;">ç¬¬ä¸€ååº”ï¼š</strong>åº”è¯¥è¿˜æ˜¯3ä¸ªå§ï¼ŸW_Qã€W_Kã€W_V<br>
                        æ¯•ç«Ÿå¤šå¤´åªæ˜¯æŠŠè¿™3ä¸ªçŸ©é˜µçš„è¾“å‡ºåˆ†å‰²ç»™å¤šä¸ªå¤´å¤„ç†...<br><br>

                        <strong style="color: #ef4444;">ç­‰ç­‰ï¼Œè®©æˆ‘ä»”ç»†æƒ³æƒ³ï¼</strong><br><br>

                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1rem; border-radius: 8px;">
                            <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 0.5rem;">æ€è€ƒè¿‡ç¨‹ï¼š</div>
                            <div style="color: #cbd5e1; font-size: 0.8rem;">
                                å•å¤´ï¼šè¾“å…¥[8ç»´] â†’ QKVå˜æ¢ â†’ æ³¨æ„åŠ›è®¡ç®— â†’ è¾“å‡º[8ç»´]<br>
                                å¤šå¤´ï¼šè¾“å…¥[8ç»´] â†’ QKVå˜æ¢ â†’ åˆ†å‰²4ä¸ªå¤´ â†’ 4ä¸ªå¤´è®¡ç®— â†’ æ‹¼æ¥[8ç»´] â†’ ?<br><br>

                                <span style="color: #ef4444;">é—®é¢˜å‡ºç°äº†ï¼</span><br>
                                æ‹¼æ¥åçš„[8ç»´]å’Œè¾“å…¥çš„[8ç»´]æ˜¯ä¸€æ ·çš„å—ï¼Ÿ
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: æ·±å…¥åˆ†æé—®é¢˜ -->
                <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem;">ğŸ” Step 3: å¯è§†åŒ–å¤šå¤´çš„åˆ‡å‰²å’Œæ‹¼æ¥è¿‡ç¨‹</div>
                <div style="color: #cbd5e1; font-size: 0.9rem; line-height: 1.8; text-align: left;">

                    <!-- åŸå§‹è¾“å…¥çŸ©é˜µ -->
                    <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1rem;">ğŸ“¥ åŸå§‹è¾“å…¥çŸ©é˜µ X (4ä¸ªè¯ Ã— 8ç»´)</div>
                        <div style="text-align: center; font-family: monospace; font-size: 0.85rem;">
                            <div style="display: inline-block; background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px; border: 2px solid #06b6d4;">
                                <div style="color: #fbbf24; margin-bottom: 0.5rem;">åŸå§‹è¯­ä¹‰ç©ºé—´</div>
                                <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 3px; margin-bottom: 0.5rem;">
                                    <div style="background: #ef4444; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">é¢œè‰²</div>
                                    <div style="background: #f97316; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">å½¢çŠ¶</div>
                                    <div style="background: #eab308; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">æƒ…æ„Ÿ</div>
                                    <div style="background: #22c55e; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">è¯­æ³•</div>
                                    <div style="background: #06b6d4; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">æ—¶æ€</div>
                                    <div style="background: #3b82f6; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">è¯­ä¹‰</div>
                                    <div style="background: #8b5cf6; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">å…³ç³»</div>
                                    <div style="background: #ec4899; color: white; padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">é‡è¦æ€§</div>
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 3px;">
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚</div>
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚‚</div>
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚ƒ</div>
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚„</div>
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚…</div>
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚†</div>
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚‡</div>
                                    <div style="background: rgba(255,255,255,0.1); padding: 0.5rem; text-align: center; border-radius: 3px;">xâ‚â‚ˆ</div>
                                </div>
                                <div style="color: #64748b; font-size: 0.7rem; margin-top: 0.5rem;">è¯1çš„8ç»´è¡¨ç¤º</div>
                            </div>
                        </div>
                    </div>

                    <!-- åˆ‡å‰²è¿‡ç¨‹å¯è§†åŒ– -->
                    <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem;">ğŸ”ª Step 1: ç»è¿‡QKVå˜æ¢åï¼Œåˆ‡å‰²æˆ4ä¸ªå¤´</div>

                        <!-- åˆ‡å‰²ç¤ºæ„å›¾ -->
                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="color: #8b5cf6; font-size: 0.9rem; margin-bottom: 1rem;">åˆ‡å‰²è¿‡ç¨‹å¯è§†åŒ–ï¼ˆä»¥è¯1ä¸ºä¾‹ï¼‰</div>

                            <!-- åŸå§‹8ç»´ -->
                            <div style="margin-bottom: 1rem;">
                                <div style="display: inline-block; background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px;">
                                    <div style="color: #fbbf24; font-size: 0.8rem; margin-bottom: 0.5rem;">ç»è¿‡QKVå˜æ¢å</div>
                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
                                        <div style="background: rgba(239, 68, 68, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚</div>
                                        <div style="background: rgba(239, 68, 68, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚‚</div>
                                        <div style="background: rgba(34, 197, 94, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚ƒ</div>
                                        <div style="background: rgba(34, 197, 94, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚„</div>
                                        <div style="background: rgba(59, 130, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚…</div>
                                        <div style="background: rgba(59, 130, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚†</div>
                                        <div style="background: rgba(139, 92, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚‡</div>
                                        <div style="background: rgba(139, 92, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Qâ‚â‚ˆ</div>
                                    </div>
                                </div>
                            </div>

                            <!-- åˆ‡å‰²ç®­å¤´ -->
                            <div style="color: #fbbf24; font-size: 1.5rem; margin: 1rem 0;">â†“ åˆ‡å‰²æˆ4ä¸ªå¤´ â†“</div>

                            <!-- 4ä¸ªå¤´çš„è¾“å‡º -->
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                                <!-- Head 1 -->
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(239, 68, 68, 0.5);">
                                    <div style="color: #ef4444; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 1</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                        <div style="background: rgba(239, 68, 68, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚</div>
                                        <div style="background: rgba(239, 68, 68, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚‚</div>
                                    </div>
                                    <div style="color: #64748b; font-size: 0.6rem; margin-top: 0.3rem;">é¢œè‰²+å½¢çŠ¶</div>
                                </div>

                                <!-- Head 2 -->
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(34, 197, 94, 0.5);">
                                    <div style="color: #22c55e; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 2</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                        <div style="background: rgba(34, 197, 94, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚ƒ</div>
                                        <div style="background: rgba(34, 197, 94, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚„</div>
                                    </div>
                                    <div style="color: #64748b; font-size: 0.6rem; margin-top: 0.3rem;">æƒ…æ„Ÿ+è¯­æ³•</div>
                                </div>

                                <!-- Head 3 -->
                                <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(59, 130, 246, 0.5);">
                                    <div style="color: #3b82f6; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 3</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                        <div style="background: rgba(59, 130, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚…</div>
                                        <div style="background: rgba(59, 130, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚†</div>
                                    </div>
                                    <div style="color: #64748b; font-size: 0.6rem; margin-top: 0.3rem;">æ—¶æ€+è¯­ä¹‰</div>
                                </div>

                                <!-- Head 4 -->
                                <div style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(139, 92, 246, 0.5);">
                                    <div style="color: #8b5cf6; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 4</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                        <div style="background: rgba(139, 92, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚‡</div>
                                        <div style="background: rgba(139, 92, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Qâ‚â‚ˆ</div>
                                    </div>
                                    <div style="color: #64748b; font-size: 0.6rem; margin-top: 0.3rem;">å…³ç³»+é‡è¦æ€§</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å„å¤´è®¡ç®—åæ‹¼æ¥ -->
                    <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                        <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(124, 58, 237, 0.05)); border-radius: 16px; padding: 2rem; border: 2px solid rgba(139, 92, 246, 0.3); box-shadow: 0 8px 32px rgba(139, 92, 246, 0.2);">
                            <!-- æ ‡é¢˜ -->
                            <div style="text-align: center; margin-bottom: 2rem;">
                                <div style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; padding: 1rem 2rem; border-radius: 25px; display: inline-block; box-shadow: 0 4px 20px rgba(139, 92, 246, 0.4); font-weight: bold; font-size: 1.1rem;">
                                    âš¡ Step 2: å„å¤´ç‹¬ç«‹è®¡ç®—æ³¨æ„åŠ›
                                </div>
                            </div>

                            <!-- å„å¤´è®¡ç®—å…¬å¼ -->
                            <div style="display: grid; grid-template-columns: 1fr; gap: 1rem; margin-bottom: 2rem;">
                                <!-- Head 1 -->
                                <div style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.05)); border-radius: 12px; padding: 1.5rem; border: 2px solid rgba(239, 68, 68, 0.3); box-shadow: 0 4px 15px rgba(239, 68, 68, 0.2);">
                                    <div style="font-family: 'Times New Roman', serif; font-size: 1rem; color: #cbd5e1; display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: bold; min-width: 80px; text-align: center; box-shadow: 0 2px 10px rgba(239, 68, 68, 0.4);">
                                            Headâ‚
                                        </div>
                                        <div style="flex: 1;">
                                            <span style="color: #cbd5e1;">Attention(Qâ‚, Kâ‚, Vâ‚) = Softmax(Qâ‚Kâ‚áµ€/âˆšd_k)Vâ‚</span>
                                            <span style="color: #fbbf24; font-weight: bold; margin: 0 1rem;">â†’</span>
                                            <span style="background: rgba(239, 68, 68, 0.2); color: #ef4444; padding: 0.3rem 0.8rem; border-radius: 8px; font-weight: bold;">[Hâ‚â‚, Hâ‚â‚‚]</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Head 2 -->
                                <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.05)); border-radius: 12px; padding: 1.5rem; border: 2px solid rgba(34, 197, 94, 0.3); box-shadow: 0 4px 15px rgba(34, 197, 94, 0.2);">
                                    <div style="font-family: 'Times New Roman', serif; font-size: 1rem; color: #cbd5e1; display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: bold; min-width: 80px; text-align: center; box-shadow: 0 2px 10px rgba(34, 197, 94, 0.4);">
                                            Headâ‚‚
                                        </div>
                                        <div style="flex: 1;">
                                            <span style="color: #cbd5e1;">Attention(Qâ‚‚, Kâ‚‚, Vâ‚‚) = Softmax(Qâ‚‚Kâ‚‚áµ€/âˆšd_k)Vâ‚‚</span>
                                            <span style="color: #fbbf24; font-weight: bold; margin: 0 1rem;">â†’</span>
                                            <span style="background: rgba(34, 197, 94, 0.2); color: #22c55e; padding: 0.3rem 0.8rem; border-radius: 8px; font-weight: bold;">[Hâ‚‚â‚, Hâ‚‚â‚‚]</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Head 3 -->
                                <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.05)); border-radius: 12px; padding: 1.5rem; border: 2px solid rgba(59, 130, 246, 0.3); box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);">
                                    <div style="font-family: 'Times New Roman', serif; font-size: 1rem; color: #cbd5e1; display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: bold; min-width: 80px; text-align: center; box-shadow: 0 2px 10px rgba(59, 130, 246, 0.4);">
                                            Headâ‚ƒ
                                        </div>
                                        <div style="flex: 1;">
                                            <span style="color: #cbd5e1;">Attention(Qâ‚ƒ, Kâ‚ƒ, Vâ‚ƒ) = Softmax(Qâ‚ƒKâ‚ƒáµ€/âˆšd_k)Vâ‚ƒ</span>
                                            <span style="color: #fbbf24; font-weight: bold; margin: 0 1rem;">â†’</span>
                                            <span style="background: rgba(59, 130, 246, 0.2); color: #3b82f6; padding: 0.3rem 0.8rem; border-radius: 8px; font-weight: bold;">[Hâ‚ƒâ‚, Hâ‚ƒâ‚‚]</span>
                                        </div>
                                    </div>
                                </div>

                                <!-- Head 4 -->
                                <div style="background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(147, 51, 234, 0.05)); border-radius: 12px; padding: 1.5rem; border: 2px solid rgba(168, 85, 247, 0.3); box-shadow: 0 4px 15px rgba(168, 85, 247, 0.2);">
                                    <div style="font-family: 'Times New Roman', serif; font-size: 1rem; color: #cbd5e1; display: flex; align-items: center; gap: 1rem;">
                                        <div style="background: linear-gradient(135deg, #a855f7, #9333ea); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-weight: bold; min-width: 80px; text-align: center; box-shadow: 0 2px 10px rgba(168, 85, 247, 0.4);">
                                            Headâ‚„
                                        </div>
                                        <div style="flex: 1;">
                                            <span style="color: #cbd5e1;">Attention(Qâ‚„, Kâ‚„, Vâ‚„) = Softmax(Qâ‚„Kâ‚„áµ€/âˆšd_k)Vâ‚„</span>
                                            <span style="color: #fbbf24; font-weight: bold; margin: 0 1rem;">â†’</span>
                                            <span style="background: rgba(168, 85, 247, 0.2); color: #a855f7; padding: 0.3rem 0.8rem; border-radius: 8px; font-weight: bold;">[Hâ‚„â‚, Hâ‚„â‚‚]</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- æ‹¼æ¥éƒ¨åˆ† -->
                            <div style="text-align: center; margin-top: 2rem;">
                                <div style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.1)); border-radius: 16px; padding: 2rem; border: 2px solid rgba(251, 191, 36, 0.4); box-shadow: 0 6px 25px rgba(251, 191, 36, 0.3);">
                                    <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem; font-size: 1.1rem;">
                                        ğŸ”— ç„¶åæ‹¼æ¥
                                    </div>

                                    <div style="background: linear-gradient(135deg, rgba(15, 23, 42, 0.8), rgba(30, 41, 59, 0.6)); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(251, 191, 36, 0.3);">
                                        <div style="font-family: 'Times New Roman', serif; color: #cbd5e1; line-height: 2;">
                                            <div style="margin-bottom: 1rem; font-size: 1rem;">
                                                <strong style="color: #fbbf24;">MultiHead</strong> = Concat(Headâ‚, Headâ‚‚, Headâ‚ƒ, Headâ‚„)
                                            </div>
                                            <div style="font-size: 1.1rem; color: #fef3c7;">
                                                = [<span style="color: #ef4444;">Hâ‚â‚, Hâ‚â‚‚</span>, <span style="color: #22c55e;">Hâ‚‚â‚, Hâ‚‚â‚‚</span>, <span style="color: #3b82f6;">Hâ‚ƒâ‚, Hâ‚ƒâ‚‚</span>, <span style="color: #a855f7;">Hâ‚„â‚, Hâ‚„â‚‚</span>]
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; margin-bottom: 2rem;">
                            <!-- å„å¤´è®¡ç®—åçš„è¾“å‡º -->
                            <div style="margin-bottom: 1rem;">
                                <div style="color: #fbbf24; font-size: 0.9rem; margin-bottom: 1rem;">å„å¤´ç‹¬ç«‹è®¡ç®—åçš„è¾“å‡º</div>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem;">
                                    <!-- Head 1 è¾“å‡º -->
                                    <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(239, 68, 68, 0.5);">
                                        <div style="color: #ef4444; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 1 è¾“å‡º</div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                            <div style="background: rgba(239, 68, 68, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚â‚</div>
                                            <div style="background: rgba(239, 68, 68, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚â‚‚</div>
                                        </div>
                                    </div>

                                    <!-- Head 2 è¾“å‡º -->
                                    <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(34, 197, 94, 0.5);">
                                        <div style="color: #22c55e; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 2 è¾“å‡º</div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                            <div style="background: rgba(34, 197, 94, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚‚â‚</div>
                                            <div style="background: rgba(34, 197, 94, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚‚â‚‚</div>
                                        </div>
                                    </div>

                                    <!-- Head 3 è¾“å‡º -->
                                    <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(59, 130, 246, 0.5);">
                                        <div style="color: #3b82f6; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 3 è¾“å‡º</div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                            <div style="background: rgba(59, 130, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚ƒâ‚</div>
                                            <div style="background: rgba(59, 130, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚ƒâ‚‚</div>
                                        </div>
                                    </div>

                                    <!-- Head 4 è¾“å‡º -->
                                    <div style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px; border: 2px solid rgba(139, 92, 246, 0.5);">
                                        <div style="color: #8b5cf6; font-weight: bold; font-size: 0.8rem; margin-bottom: 0.5rem;">Head 4 è¾“å‡º</div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2px;">
                                            <div style="background: rgba(139, 92, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚„â‚</div>
                                            <div style="background: rgba(139, 92, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚„â‚‚</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- æ‹¼æ¥ç®­å¤´ -->
                            <div style="color: #ef4444; font-size: 1.5rem; margin: 1rem 0;">â†“ æŒ‰é¡ºåºæ‹¼æ¥ â†“</div>

                            <!-- æ‹¼æ¥ç»“æœ -->
                            <div style="display: inline-block; background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px; border: 2px solid #ef4444;">
                                <div style="color: #ef4444; font-size: 0.9rem; margin-bottom: 0.5rem;">æ‹¼æ¥åçš„è¾“å‡º</div>
                                <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
                                    <div style="background: rgba(239, 68, 68, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚â‚</div>
                                    <div style="background: rgba(239, 68, 68, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚â‚‚</div>
                                    <div style="background: rgba(34, 197, 94, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚‚â‚</div>
                                    <div style="background: rgba(34, 197, 94, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚‚â‚‚</div>
                                    <div style="background: rgba(59, 130, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚ƒâ‚</div>
                                    <div style="background: rgba(59, 130, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚ƒâ‚‚</div>
                                    <div style="background: rgba(139, 92, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚„â‚</div>
                                    <div style="background: rgba(139, 92, 246, 0.8); padding: 0.4rem; text-align: center; border-radius: 3px; font-size: 0.75rem; color: white;">Hâ‚„â‚‚</div>
                                </div>
                                <div style="color: #64748b; font-size: 0.7rem; margin-top: 0.5rem;">æ‹¼æ¥ç©ºé—´ï¼šä¸åŒå¤´çš„è¾“å‡ºæŒ‰é¡ºåºæ’åˆ—</div>
                            </div>
                        </div>
                    </div>

                    <!-- å…³é”®é—®é¢˜å¯¹æ¯” -->
                    <div style="background: rgba(251, 191, 36, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3); margin-bottom: 1.5rem;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem;">ğŸ¤” æ€è€ƒï¼šåŸå§‹è¾“å…¥ vs æ‹¼æ¥è¾“å‡º</div>

                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center;">
                            <!-- åŸå§‹è¾“å…¥ -->
                            <div style="text-align: center;">
                                <div style="color: #22c55e; font-weight: bold; margin-bottom: 1rem;">åŸå§‹è¾“å…¥ï¼ˆè¯1ï¼‰</div>
                                <div style="display: inline-block; background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px; border: 2px solid #22c55e;">
                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; margin-bottom: 0.5rem;">
                                        <div style="background: #ef4444; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">é¢œè‰²</div>
                                        <div style="background: #f97316; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">å½¢çŠ¶</div>
                                        <div style="background: #eab308; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">æƒ…æ„Ÿ</div>
                                        <div style="background: #22c55e; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">è¯­æ³•</div>
                                        <div style="background: #06b6d4; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">æ—¶æ€</div>
                                        <div style="background: #3b82f6; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">è¯­ä¹‰</div>
                                        <div style="background: #8b5cf6; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">å…³ç³»</div>
                                        <div style="background: #ec4899; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.6rem;">é‡è¦æ€§</div>
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚</div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚‚</div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚ƒ</div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚„</div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚…</div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚†</div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚‡</div>
                                        <div style="background: rgba(255,255,255,0.1); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem;">xâ‚â‚ˆ</div>
                                    </div>
                                </div>
                            </div>

                            <div style="color: #ef4444; font-size: 2rem;">â‰ </div>

                            <!-- æ‹¼æ¥è¾“å‡º -->
                            <div style="text-align: center;">
                                <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem;">æ‹¼æ¥è¾“å‡ºï¼ˆè¯1ï¼‰</div>
                                <div style="display: inline-block; background: rgba(255,255,255,0.05); padding: 1rem; border-radius: 8px; border: 2px solid #ef4444;">
                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px; margin-bottom: 0.5rem;">
                                        <div style="background: #ef4444; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´1è¾“å‡º1</div>
                                        <div style="background: #ef4444; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´1è¾“å‡º2</div>
                                        <div style="background: #22c55e; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´2è¾“å‡º1</div>
                                        <div style="background: #22c55e; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´2è¾“å‡º2</div>
                                        <div style="background: #3b82f6; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´3è¾“å‡º1</div>
                                        <div style="background: #3b82f6; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´3è¾“å‡º2</div>
                                        <div style="background: #8b5cf6; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´4è¾“å‡º1</div>
                                        <div style="background: #8b5cf6; color: white; padding: 0.2rem; text-align: center; border-radius: 2px; font-size: 0.55rem;">å¤´4è¾“å‡º2</div>
                                    </div>
                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 2px;">
                                        <div style="background: rgba(239, 68, 68, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚â‚</div>
                                        <div style="background: rgba(239, 68, 68, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚â‚‚</div>
                                        <div style="background: rgba(34, 197, 94, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚‚â‚</div>
                                        <div style="background: rgba(34, 197, 94, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚‚â‚‚</div>
                                        <div style="background: rgba(59, 130, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚ƒâ‚</div>
                                        <div style="background: rgba(59, 130, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚ƒâ‚‚</div>
                                        <div style="background: rgba(139, 92, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚„â‚</div>
                                        <div style="background: rgba(139, 92, 246, 0.8); padding: 0.3rem; text-align: center; border-radius: 3px; font-size: 0.7rem; color: white;">Hâ‚„â‚‚</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- å‘ç°é—®é¢˜ -->
                    <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                        <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem;">ğŸ’¥ å‘ç°å…³é”®é—®é¢˜ï¼</div>
                        <div style="color: #cbd5e1; font-size: 0.9rem; line-height: 1.8;">
                            <strong style="color: #ef4444;">ç»´åº¦è¯­ä¹‰å®Œå…¨æ”¹å˜äº†ï¼</strong><br><br>

                            â€¢ <strong>åŸå§‹ç¬¬1ç»´ (xâ‚â‚)</strong>ï¼šè¡¨ç¤º"é¢œè‰²ä¿¡æ¯"<br>
                            â€¢ <strong>æ‹¼æ¥ç¬¬1ç»´ (Hâ‚â‚)</strong>ï¼šè¡¨ç¤º"Head1çš„ç¬¬1ä¸ªè¾“å‡º"<br><br>

                            â€¢ <strong>åŸå§‹ç¬¬3ç»´ (xâ‚â‚ƒ)</strong>ï¼šè¡¨ç¤º"æƒ…æ„Ÿä¿¡æ¯"<br>
                            â€¢ <strong>æ‹¼æ¥ç¬¬3ç»´ (Hâ‚‚â‚)</strong>ï¼šè¡¨ç¤º"Head2çš„ç¬¬1ä¸ªè¾“å‡º"<br><br>

                            <div style="background: rgba(15, 23, 42, 0.8); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                                <span style="color: #fbbf24; font-weight: bold;">ä¸ºä»€ä¹ˆè¿™æ˜¯é—®é¢˜ï¼Ÿ</span><br>
                                å¦‚æœåç»­çš„ç½‘ç»œå±‚è¿˜æŒ‰ç…§åŸæ¥çš„ç†è§£æ¥å¤„ç†ï¼š<br>
                                â€¢ æŠŠç¬¬1ç»´å½“ä½œ"é¢œè‰²ä¿¡æ¯"å¤„ç†<br>
                                â€¢ æŠŠç¬¬3ç»´å½“ä½œ"æƒ…æ„Ÿä¿¡æ¯"å¤„ç†<br><br>
                                <strong style="color: #ef4444;">å°±ä¼šå®Œå…¨ç†è§£é”™è¯¯ï¼å› ä¸ºç°åœ¨å®ƒä»¬è¡¨ç¤ºçš„æ˜¯å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚</strong>
                            </div>

                            <!-- æ€è€ƒè¿‡ç¨‹ï¼šæ¢ç´¢è§£å†³æ–¹æ¡ˆ -->
                            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem;">ğŸ¤” æ€è€ƒï¼šæœ‰ä»€ä¹ˆè§£å†³æ–¹æ¡ˆï¼Ÿ</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem; line-height: 1.8;">
                                é¢å¯¹è¿™ä¸ª"è¯­ä¹‰ç©ºé—´ä¸åŒ¹é…"çš„é—®é¢˜ï¼Œæˆ‘ä»¬æœ‰å‡ ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š<br><br>

                                <!-- æ–¹æ¡ˆ1ï¼šé‡æ–°è®¾è®¡åˆ‡å‰²æ–¹å¼ -->
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3); margin: 1rem 0;">
                                    <span style="color: #ef4444; font-weight: bold;">ğŸ’¡ æ–¹æ¡ˆ1ï¼šé‡æ–°è®¾è®¡åˆ‡å‰²æ–¹å¼</span><br>
                                    <span style="color: #cbd5e1; font-size: 0.85rem;">
                                        æ€è·¯ï¼šä¸æŒ‰ä½ç½®åˆ‡å‰²ï¼Œè€Œæ˜¯è®©æ¯ä¸ªå¤´å­¦ä¹ ä¸åŒçš„"å…¨å±€å˜æ¢"<br><br>
                                        <strong style="color: #ef4444;">éªŒè¯ç»“æœï¼šâŒ ä¸å¯è¡Œ</strong><br>
                                        â€¢ è¿™æ ·æ¯ä¸ªå¤´éƒ½éœ€è¦å¤„ç†å®Œæ•´çš„8ç»´ï¼Œå¤±å»äº†"ä¸“é—¨åŒ–"çš„ä¼˜åŠ¿<br>
                                        â€¢ è®¡ç®—å¤æ‚åº¦å¤§å¤§å¢åŠ ï¼Œè¿èƒŒäº†å¤šå¤´è®¾è®¡çš„åˆè¡·<br>
                                        â€¢ å¤´ä¹‹é—´çš„å·®å¼‚ä¸å¤Ÿæ˜ç¡®ï¼Œå¯èƒ½å­¦åˆ°ç›¸ä¼¼çš„è¡¨ç¤º
                                    </span>
                                </div>

                                <!-- æ–¹æ¡ˆ2ï¼šæ”¹å˜æ‹¼æ¥ç­–ç•¥ -->
                                <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3); margin: 1rem 0;">
                                    <span style="color: #3b82f6; font-weight: bold;">ğŸ’¡ æ–¹æ¡ˆ2ï¼šæ”¹å˜æ‹¼æ¥ç­–ç•¥</span><br>
                                    <span style="color: #cbd5e1; font-size: 0.85rem;">
                                        æ€è·¯ï¼šä¸æŒ‰[Hâ‚â‚,Hâ‚â‚‚,Hâ‚‚â‚,Hâ‚‚â‚‚,...]æ‹¼æ¥ï¼Œè€Œæ˜¯æŒ‰[Hâ‚â‚,Hâ‚‚â‚,Hâ‚ƒâ‚,Hâ‚„â‚,Hâ‚â‚‚,Hâ‚‚â‚‚,Hâ‚ƒâ‚‚,Hâ‚„â‚‚]æ‹¼æ¥<br><br>
                                        <strong style="color: #3b82f6;">éªŒè¯ç»“æœï¼šâš ï¸ ä»ç„¶æœ‰é—®é¢˜</strong><br>
                                        â€¢ è™½ç„¶ç¬¬1ç»´ç°åœ¨æ˜¯"æ‰€æœ‰å¤´çš„ç¬¬1ä¸ªè¾“å‡º"ï¼Œä½†è¿™ä»ç„¶ä¸æ˜¯"é¢œè‰²ä¿¡æ¯"<br>
                                        â€¢ åªæ˜¯æ¢äº†ä¸€ç§æ‹¼æ¥æ–¹å¼ï¼Œè¯­ä¹‰ä¸åŒ¹é…çš„æœ¬è´¨é—®é¢˜æ²¡è§£å†³<br>
                                        â€¢ è¾“å‡ºç»´åº¦çš„å«ä¹‰ä¾ç„¶ä¸åŸå§‹è¾“å…¥ä¸åŒ
                                    </span>
                                </div>

                                <!-- æ–¹æ¡ˆ3ï¼šæ·»åŠ æ˜ å°„å˜æ¢ -->
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); margin: 1rem 0;">
                                    <span style="color: #22c55e; font-weight: bold;">ğŸ’¡ æ–¹æ¡ˆ3ï¼šæ·»åŠ ä¸€ä¸ªæ˜ å°„å˜æ¢</span><br>
                                    <span style="color: #cbd5e1; font-size: 0.85rem;">
                                        æ€è·¯ï¼šä¿æŒç°æœ‰çš„åˆ‡å‰²å’Œæ‹¼æ¥æ–¹å¼ï¼Œä½†åœ¨æœ€ååŠ ä¸€ä¸ªå˜æ¢çŸ©é˜µï¼ŒæŠŠæ‹¼æ¥ç©ºé—´æ˜ å°„å›åŸå§‹è¯­ä¹‰ç©ºé—´<br><br>

                                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1rem; border-radius: 8px; margin: 0.5rem 0;">
                                            <span style="color: #8b5cf6; font-weight: bold;">å…·ä½“éªŒè¯ï¼š</span><br>
                                            éœ€è¦ä¸€ä¸ªçŸ©é˜µW_Oï¼Œå®ç°ï¼š<br><br>
                                            <div style="font-family: monospace; font-size: 0.8rem;">
                                                æ‹¼æ¥è¾“å‡º [B,L,8] Ã— W_O [8Ã—8] = æœ€ç»ˆè¾“å‡º [B,L,8]<br><br>
                                                [Hâ‚â‚,Hâ‚â‚‚,Hâ‚‚â‚,Hâ‚‚â‚‚,Hâ‚ƒâ‚,Hâ‚ƒâ‚‚,Hâ‚„â‚,Hâ‚„â‚‚] Ã— W_O<br>
                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;â†“<br>
                                                [é¢œè‰²', å½¢çŠ¶', æƒ…æ„Ÿ', è¯­æ³•', æ—¶æ€', è¯­ä¹‰', å…³ç³»', é‡è¦æ€§']
                                            </div>
                                        </div>

                                        <strong style="color: #22c55e;">éªŒè¯ç»“æœï¼šâœ… å®Œå…¨å¯è¡Œï¼</strong><br>
                                        â€¢ ä¿æŒäº†å¤šå¤´çš„ä¸“é—¨åŒ–ä¼˜åŠ¿ï¼ˆæ¯ä¸ªå¤´å¤„ç†ä¸åŒçš„è¯­ä¹‰ç»´åº¦ï¼‰<br>
                                        â€¢ é€šè¿‡å­¦ä¹ W_Oï¼Œå¯ä»¥çµæ´»åœ°ç»„åˆå„å¤´çš„ä¿¡æ¯<br>
                                        â€¢ è¾“å‡ºç»´åº¦æ¢å¤äº†åŸå§‹çš„è¯­ä¹‰å«ä¹‰<br>
                                        â€¢ å®ç°ç®€å•ï¼Œåªéœ€è¦å¢åŠ ä¸€ä¸ªçº¿æ€§å˜æ¢å±‚
                                    </span>
                                </div>

                                <!-- ç»“è®º -->
                                <div style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(139, 92, 246, 0.3);">
                                    <span style="color: #8b5cf6; font-weight: bold;">ğŸ¯ ç»“è®ºï¼šå¿…é¡»é€‰æ‹©æ–¹æ¡ˆ3</span><br>
                                    <span style="color: #cbd5e1; font-size: 0.85rem;">
                                        ç»è¿‡éªŒè¯ï¼Œåªæœ‰æ·»åŠ æ˜ å°„å˜æ¢W_Oè¿™ä¸ªæ–¹æ¡ˆèƒ½å®Œç¾è§£å†³é—®é¢˜ã€‚<br><br>
                                        <strong style="color: #8b5cf6;">æ‰€ä»¥å¤šå¤´æ³¨æ„åŠ›å¿…é¡»è¦ç¬¬4ä¸ªå‚æ•°çŸ©é˜µ W_Oï¼</strong><br>
                                        å®ƒçš„ä½œç”¨å°±æ˜¯ï¼šæ‹¼æ¥ç©ºé—´ â†’ åŸå§‹è¯­ä¹‰ç©ºé—´ çš„æ˜ å°„å˜æ¢ã€‚
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- ç»´åº¦åˆ†é…å¯è§†åŒ– -->
                <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center; margin: 2rem 0;">
                    <!-- åŸå§‹8ç»´ -->
                    <div style="text-align: center;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem;">åŸå§‹å‘é‡ (8ç»´)</div>
                        <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 4px; margin: 1rem auto; font-family: 'Courier New', monospace; font-size: 11px; background: rgba(15, 23, 42, 0.8); padding: 1rem; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); justify-content: center;">
                            <div style="background: rgba(239, 68, 68, 0.2); color: #ef4444; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚</div>
                            <div style="background: rgba(239, 68, 68, 0.2); color: #ef4444; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚‚</div>
                            <div style="background: rgba(251, 191, 36, 0.2); color: #fbbf24; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚ƒ</div>
                            <div style="background: rgba(251, 191, 36, 0.2); color: #fbbf24; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚„</div>
                            <div style="background: rgba(34, 197, 94, 0.2); color: #22c55e; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚…</div>
                            <div style="background: rgba(34, 197, 94, 0.2); color: #22c55e; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚†</div>
                            <div style="background: rgba(139, 92, 246, 0.2); color: #8b5cf6; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚‡</div>
                            <div style="background: rgba(139, 92, 246, 0.2); color: #8b5cf6; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚ˆ</div>
                        </div>
                    </div>

                    <!-- åˆ†å‰²ç®­å¤´ -->
                    <div style="font-size: 3rem; color: #06b6d4;">â†’</div>

                    <!-- åˆ†å‰²åçš„4ä¸ªå¤´ -->
                    <div style="text-align: center;">
                        <div style="color: #22c55e; font-weight: bold; margin-bottom: 1rem;">åˆ†å‰²ç»™4ä¸ªä¸“å®¶</div>
                        <div style="display: grid; gap: 0.5rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: #ef4444; font-size: 0.9rem;">Head1:</span>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px; margin: 1rem auto; font-family: 'Courier New', monospace; font-size: 11px; background: rgba(15, 23, 42, 0.8); padding: 8px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); justify-content: center;">
                                    <div style="background: rgba(239, 68, 68, 0.2); color: #ef4444; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚</div>
                                    <div style="background: rgba(239, 68, 68, 0.2); color: #ef4444; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚‚</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: #22c55e; font-size: 0.9rem;">Head2:</span>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px; margin: 1rem auto; font-family: 'Courier New', monospace; font-size: 11px; background: rgba(15, 23, 42, 0.8); padding: 8px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); justify-content: center;">
                                    <div style="background: rgba(251, 191, 36, 0.2); color: #fbbf24; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚ƒ</div>
                                    <div style="background: rgba(251, 191, 36, 0.2); color: #fbbf24; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚„</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: #8b5cf6; font-size: 0.9rem;">Head3:</span>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px; margin: 1rem auto; font-family: 'Courier New', monospace; font-size: 11px; background: rgba(15, 23, 42, 0.8); padding: 8px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); justify-content: center;">
                                    <div style="background: rgba(34, 197, 94, 0.2); color: #22c55e; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚…</div>
                                    <div style="background: rgba(34, 197, 94, 0.2); color: #22c55e; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚†</div>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: #06b6d4; font-size: 0.9rem;">Head4:</span>
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px; margin: 1rem auto; font-family: 'Courier New', monospace; font-size: 11px; background: rgba(15, 23, 42, 0.8); padding: 8px; border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1); justify-content: center;">
                                    <div style="background: rgba(139, 92, 246, 0.2); color: #8b5cf6; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚‡</div>
                                    <div style="background: rgba(139, 92, 246, 0.2); color: #8b5cf6; padding: 8px; text-align: center; border-radius: 4px; font-weight: 500;">dâ‚ˆ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-bottom: 3rem;">
                    <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(34, 197, 94, 0.4);">
                        <span style="font-size: 2rem;">ğŸ¯</span>
                        <h2 style="color: #22c55e; margin: 0; font-size: 1.8rem; font-weight: bold;">æœ€ç»ˆçªç ´ï¼šå¤šå¤´æ³¨æ„åŠ›çš„å®Œæ•´æ•°å­¦æ–¹æ¡ˆ</h2>
                    </div>
                </div>

                <!-- æ•°å­¦å…¬å¼æ€»ç»“ -->
                <div style="background: rgba(15, 23, 42, 0.8); padding: 2rem; border-radius: 12px; text-align: center; margin: 2rem 0; border: 1px solid rgba(79, 70, 229, 0.3);">
                    <div style="font-size: 18px; color: #a78bfa; font-family: 'Times New Roman', serif; line-height: 2.5;">
                        <div style="color: #ef4444; margin-bottom: 1rem;">å•å¤´æ³¨æ„åŠ›ï¼ˆå±€é™ç‰ˆï¼‰ï¼š</div>
                        Attention(Q, K, V) = softmax(QK<sup>T</sup>/âˆšd<sub>k</sub>)V<br><br>

                        <div style="color: #22c55e; margin-bottom: 1rem;">å¤šå¤´æ³¨æ„åŠ›ï¼ˆçªç ´ç‰ˆï¼‰ï¼š</div>
                        MultiHead(Q, K, V) = Concat(head<sub>1</sub>, ..., head<sub>h</sub>)W<sup>O</sup><br>
                        where head<sub>i</sub> = Attention(QW<sub>i</sub><sup>Q</sup>, KW<sub>i</sub><sup>K</sup>, VW<sub>i</sub><sup>V</sup>)
                    </div>
                </div>

            </div>

            <!-- ä»£ç å®ç°è¯¦è§£ -->
            <section id="code-walkthrough" class="section-card">
                <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ’» ä»£ç å®ç°ï¼šä»ç†è®ºåˆ°å®è·µçš„å®Œç¾è½åœ°</h2>

                <!-- å•å¤´vså¤šå¤´å¯¹æ¯”å¼•å…¥ -->
                <div class="story-card mb-4">
                    <div class="tip info">
                        <span class="tip-icon">ğŸ’¡</span>
                        <div class="tip-content">
                            <strong>æ ¸å¿ƒæ€æƒ³</strong><br>
                            ä»å•å¤´åˆ°å¤šå¤´çš„æ¼”è¿›ä¸æ˜¯ç®€å•çš„å¤åˆ¶ï¼Œè€Œæ˜¯é€šè¿‡å·§å¦™çš„ç»´åº¦åˆ†å‰²å®ç°å¹¶è¡Œä¸“é—¨åŒ–ï¼
                        </div>
                    </div>
                </div>
                <!-- Step 1: å‚æ•°è®¾è®¡å¯¹æ¯” -->
                <div class="code-container">
                    <style>
                        /* å¢å¼ºä»£ç å¯¹æ¯”æ•ˆæœçš„æ ·å¼ */
                        .code-comparison-grid {
                            display: grid;
                            grid-template-columns: 1fr 1fr;
                            gap: 2rem;
                            padding: 1.5rem;
                            position: relative;
                        }

                        .code-comparison-grid::before {
                            content: 'VS';
                            position: absolute;
                            left: 50%;
                            top: 50%;
                            transform: translate(-50%, -50%);
                            font-size: 2rem;
                            font-weight: bold;
                            color: var(--accent-purple);
                            background: var(--bg-section);
                            padding: 0.5rem 1rem;
                            border-radius: 50%;
                            border: 3px solid var(--accent-purple);
                            z-index: 10;
                        }

                        .code-highlight-add {
                            background: rgba(34, 197, 94, 0.3) !important;
                            color: var(--accent-green) !important;
                            font-weight: bold;
                            position: relative;
                            display: inline-block;
                            padding: 0 4px;
                            margin: 0 -4px;
                            border-radius: 4px;
                        }

                        .code-highlight-add::before {
                            content: 'âœ¨ æ–°å¢';
                            position: absolute;
                            top: -25px;
                            left: 0;
                            background: var(--accent-green);
                            color: white;
                            padding: 2px 8px;
                            border-radius: 12px;
                            font-size: 0.75rem;
                            font-weight: bold;
                            white-space: nowrap;
                        }

                        .code-highlight-change {
                            background: rgba(251, 191, 36, 0.3) !important;
                            color: var(--accent-yellow) !important;
                            font-weight: bold;
                            position: relative;
                            padding: 0 4px;
                            margin: 0 -4px;
                            border-radius: 4px;
                        }

                        .code-highlight-key {
                            background: rgba(139, 92, 246, 0.2);
                            border: 2px solid var(--accent-purple);
                            padding: 2px 6px;
                            border-radius: 4px;
                            font-weight: bold;
                        }

                        .code-section-divider {
                            position: relative;
                            margin: 1.5rem 0;
                            text-align: center;
                        }

                        .code-section-divider::before {
                            content: '';
                            position: absolute;
                            top: 50%;
                            left: 0;
                            right: 0;
                            height: 1px;
                            background: rgba(255, 255, 255, 0.1);
                        }

                        .code-section-divider span {
                            background: var(--bg-section);
                            padding: 0 1rem;
                            position: relative;
                            color: var(--accent-purple);
                            font-weight: bold;
                        }

                        .diff-indicator {
                            position: absolute;
                            left: -30px;
                            font-size: 1.2rem;
                            font-weight: bold;
                        }

                        .diff-indicator.add { color: var(--accent-green); }
                        .diff-indicator.remove { color: var(--accent-red); }
                        .diff-indicator.change { color: var(--accent-yellow); }

                        .code-annotations {
                            position: absolute;
                            right: -250px;
                            top: 0;
                            width: 230px;
                            font-size: 0.85rem;
                            color: var(--text-secondary);
                            padding: 1rem;
                            background: rgba(15, 23, 42, 0.9);
                            border-radius: 8px;
                            border: 1px solid var(--accent-purple);
                        }

                        @media (max-width: 1400px) {
                            .code-annotations {
                                position: static;
                                width: 100%;
                                margin-top: 1rem;
                            }
                        }
                    </style>

                    <div class="code-header">
                        <div class="code-header-left">
                            <span style="color: var(--text-secondary);">Step 1: ä»å•å¤´åˆ°å¤šå¤´çš„å‚æ•°è®¾è®¡æ¼”è¿›</span>
                        </div>
                    </div>

                    <div class="code-content">
                        <div class="code-comparison-grid">
                            <!-- å•å¤´æ³¨æ„åŠ› -->
                            <div style="position: relative;">
                                <h4 style="color: var(--accent-red); margin-bottom: 1rem; text-align: center;">
                                    <span style="font-size: 1.5rem;">âŒ</span> å•å¤´æ³¨æ„åŠ›
                                </h4>
                                <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; border: 2px solid rgba(239, 68, 68, 0.3); position: relative;"><code class="language-python">class SingleHeadAttention(nn.Module):
    def __init__(self, d_model):
        super().__init__()
        self.d_model = d_model

        # åªæœ‰3ä¸ªå˜æ¢çŸ©é˜µ
        self.W_q = nn.Linear(d_model, d_model)
        self.W_k = nn.Linear(d_model, d_model)
        self.W_v = nn.Linear(d_model, d_model)

        <span style="color: #ef4444; opacity: 0.7;"># æ²¡æœ‰è¾“å‡ºå˜æ¢ï¼</span>
        self.scale = d_model ** -0.5</code></pre>
                                <div style="position: absolute; bottom: -40px; left: 0; right: 0; text-align: center; color: var(--accent-red); font-size: 0.9rem;">
                                    âš ï¸ ç¼ºå°‘è¾“å‡ºå˜æ¢å±‚
                                </div>
                            </div>

                            <!-- å¤šå¤´æ³¨æ„åŠ› -->
                            <div style="position: relative;">
                                <h4 style="color: var(--accent-green); margin-bottom: 1rem; text-align: center;">
                                    <span style="font-size: 1.5rem;">âœ…</span> å¤šå¤´æ³¨æ„åŠ›
                                </h4>
                                <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; border: 2px solid rgba(34, 197, 94, 0.3); position: relative; overflow: visible;"><code class="language-python">class MultiHeadAttention(nn.Module):
    def __init__(self, d_model, num_heads):
        super().__init__()
        <span class="code-highlight-key">assert d_model % num_heads == 0</span>  <span style="color: #64748b;">â† ç¡®ä¿å¯ä»¥æ•´é™¤</span>

        self.d_model = d_model
        <span class="code-highlight-add">self.num_heads = num_heads</span>
        <span class="code-highlight-add">self.d_k = d_model // num_heads</span>  <span style="color: #64748b;">â† æ¯ä¸ªå¤´çš„ç»´åº¦</span>

        # è¿˜æ˜¯3ä¸ªå˜æ¢çŸ©é˜µï¼ˆå·§å¦™ï¼ï¼‰
        self.W_q = nn.Linear(d_model, d_model)
        self.W_k = nn.Linear(d_model, d_model)
        self.W_v = nn.Linear(d_model, d_model)

        # å…³é”®ï¼šå¢åŠ è¾“å‡ºå˜æ¢ï¼
        <span class="code-highlight-add" style="display: inline-block; position: relative;">self.W_o = nn.Linear(d_model, d_model)</span>

        self.scale = <span class="code-highlight-change">self.d_k</span> ** -0.5  <span style="color: #64748b;">â† æ³¨æ„æ˜¯d_kä¸æ˜¯d_model</span></code></pre>
                                <div style="position: absolute; bottom: -40px; left: 0; right: 0; text-align: center; color: var(--accent-green); font-size: 0.9rem;">
                                    âœ¨ å¢åŠ äº†W_oå®ç°å¤šå¤´ä¿¡æ¯èåˆ
                                </div>
                            </div>
                        </div>

                        <div class="tip warning mt-3" style="margin-top: 4rem !important;">
                            <span class="tip-icon">âš¡</span>
                            <div class="tip-content">
                                <strong>å…³é”®æ´å¯Ÿï¼š</strong>å‚æ•°é‡ä¿æŒä¸å˜ï¼è™½ç„¶æœ‰å¤šä¸ªå¤´ï¼Œä½†æ€»å‚æ•°é‡ = 3Ã—(d_modelÃ—d_model) + 1Ã—(d_modelÃ—d_model) = 4Ã—d_modelÂ²
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: æ ¸å¿ƒè®¡ç®—å¯¹æ¯” -->
                <div class="code-container mt-3">
                    <div class="code-header">
                        <div class="code-header-left">
                            <span style="color: var(--text-secondary);">Step 2: æ ¸å¿ƒå‰å‘ä¼ æ’­å¯¹æ¯”</span>
                        </div>
                    </div>

                    <div class="code-content">
                        <div class="code-comparison-grid">
                            <!-- å•å¤´ -->
                            <div>
                                <h4 style="color: var(--accent-red); margin-bottom: 1rem; text-align: center;">
                                    <span style="font-size: 1.5rem;">âŒ</span> å•å¤´ï¼šç›´æ¥è®¡ç®—
                                </h4>
                                <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; overflow-x: auto; border: 2px solid rgba(239, 68, 68, 0.3);"><code class="language-python">def forward(self, x):
    batch_size, seq_len, _ = x.size()

    # çº¿æ€§å˜æ¢
    Q = self.W_q(x)  # [B, L, D]
    K = self.W_k(x)  # [B, L, D]
    V = self.W_v(x)  # [B, L, D]

    <span style="opacity: 0.5;"># ç›´æ¥è®¡ç®—ï¼Œæ²¡æœ‰åˆ†å¤´ï¼</span>
    # è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°
    scores = torch.matmul(Q, K.transpose(-2, -1))
    scores = scores * self.scale

    # åº”ç”¨softmax
    attn_weights = F.softmax(scores, dim=-1)

    # åŠ æƒæ±‚å’Œ
    output = torch.matmul(attn_weights, V)

    return output  # [B, L, D]</code></pre>
                            </div>

                            <!-- å¤šå¤´ -->
                            <div style="position: relative;">
                                <h4 style="color: var(--accent-green); margin-bottom: 1rem; text-align: center;">
                                    <span style="font-size: 1.5rem;">âœ…</span> å¤šå¤´ï¼šåˆ†å¤´å¹¶è¡Œè®¡ç®—
                                </h4>
                                <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; overflow-x: auto; border: 2px solid rgba(34, 197, 94, 0.3);"><code class="language-python">def forward(self, x):
    batch_size, seq_len, _ = x.size()

    # çº¿æ€§å˜æ¢
    Q = self.W_q(x)  # [B, L, D]
    K = self.W_k(x)  # [B, L, D]
    V = self.W_v(x)  # [B, L, D]

    <div class="code-section-divider"><span>ğŸ”‘ å…³é”®å·®å¼‚å¼€å§‹</span></div>

    <span class="code-highlight-add"># ğŸ”‘ é‡å¡‘ä¸ºå¤šå¤´ [B, L, H, d_k]
    Q = Q.view(batch_size, seq_len, self.num_heads, self.d_k)
    K = K.view(batch_size, seq_len, self.num_heads, self.d_k)
    V = V.view(batch_size, seq_len, self.num_heads, self.d_k)</span>

    <span class="code-highlight-add"># ğŸ”„ è½¬ç½®ä»¥ä¾¿å¹¶è¡Œè®¡ç®— [B, H, L, d_k]
    Q = Q.transpose(1, 2)
    K = K.transpose(1, 2)
    V = V.transpose(1, 2)</span>

    # è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°ï¼ˆæ¯ä¸ªå¤´ç‹¬ç«‹ï¼‰
    scores = torch.matmul(Q, K.transpose(-2, -1))
    scores = scores * self.scale

    # åº”ç”¨softmax
    attn_weights = F.softmax(scores, dim=-1)

    # åŠ æƒæ±‚å’Œ
    context = torch.matmul(attn_weights, V)

    <span class="code-highlight-add"># ğŸ”— é‡æ–°æ‹¼æ¥ [B, L, D]
    context = context.transpose(1, 2).contiguous()
    context = context.view(batch_size, seq_len, self.d_model)</span>

    <span class="code-highlight-add"># ğŸ’« è¾“å‡ºå˜æ¢
    output = self.W_o(context)</span>

    return output  # [B, L, D]</code></pre>

                                <!-- å…³é”®æ­¥éª¤æ ‡æ³¨ -->
                                <div style="position: absolute; right: -280px; top: 180px; width: 250px;">
                                    <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); margin-bottom: 1rem;">
                                        <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 0.5rem;">ğŸ”‘ ç»´åº¦å˜æ¢</div>
                                        <div style="color: var(--text-secondary); font-size: 0.85rem;">
                                            å°† [B,L,D] é‡å¡‘ä¸º [B,L,H,d_k]<br>
                                            ä½¿æ¯ä¸ªå¤´å¤„ç† D/H ç»´
                                        </div>
                                    </div>

                                    <div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3); margin-bottom: 1rem;">
                                        <div style="color: var(--accent-blue); font-weight: bold; margin-bottom: 0.5rem;">ğŸ”„ è½¬ç½®ä¼˜åŒ–</div>
                                        <div style="color: var(--text-secondary); font-size: 0.85rem;">
                                            è½¬ç½®ä¸º [B,H,L,d_k]<br>
                                            å®ç° GPU å¹¶è¡Œè®¡ç®—
                                        </div>
                                    </div>

                                    <div style="background: rgba(251, 191, 36, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3);">
                                        <div style="color: var(--accent-yellow); font-weight: bold; margin-bottom: 0.5rem;">ğŸ’« ä¿¡æ¯èåˆ</div>
                                        <div style="color: var(--text-secondary); font-size: 0.85rem;">
                                            W_o ä¸åªæ˜¯ç»´åº¦å˜æ¢<br>
                                            è€Œæ˜¯æ™ºèƒ½èåˆå¤šå¤´ä¿¡æ¯
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ç§»åŠ¨ç«¯æ˜¾ç¤ºçš„æ ‡æ³¨ -->
                        <div class="mobile-annotations" style="display: none;">
                            <div style="display: grid; gap: 1rem; margin-top: 2rem;">
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                                    <div style="color: var(--accent-green); font-weight: bold;">ğŸ”‘ å…³é”®æ”¹è¿›1ï¼šç»´åº¦åˆ†å‰²</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                        é€šè¿‡view()å°†å‘é‡åˆ†å‰²ç»™å¤šä¸ªå¤´ï¼Œæ¯ä¸ªå¤´ç‹¬ç«‹å¤„ç†ä¸€éƒ¨åˆ†ç»´åº¦
                                    </div>
                                </div>

                                <div style="background: rgba(6, 182, 212, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">
                                    <div style="color: var(--accent-blue); font-weight: bold;">ğŸ”„ å…³é”®æ”¹è¿›2ï¼šå¹¶è¡Œè®¡ç®—</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                        transpose()è®©æ‰€æœ‰å¤´å¯ä»¥åŒæ—¶è®¡ç®—ï¼Œå……åˆ†åˆ©ç”¨GPUå¹¶è¡Œæ€§
                                    </div>
                                </div>

                                <div style="background: rgba(251, 191, 36, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3);">
                                    <div style="color: var(--accent-yellow); font-weight: bold;">ğŸ’« å…³é”®æ”¹è¿›3ï¼šæ™ºèƒ½èåˆ</div>
                                    <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                        W_oå­¦ä¹ å¦‚ä½•æœ€ä¼˜åœ°ç»„åˆå„ä¸ªå¤´çš„ä¿¡æ¯ï¼Œäº§ç”Ÿæ›´ä¸°å¯Œçš„è¡¨ç¤º
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <style>
                    @media (max-width: 1400px) {
                        .code-annotations {
                            display: none;
                        }
                        .mobile-annotations {
                            display: block !important;
                        }
                    }
                </style>

                <!-- Step 3: å…³é”®æ“ä½œå›¾è§£ -->
                <div class="math-container mt-4">
                    <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">ğŸ” å…³é”®æ“ä½œæ·±åº¦è§£æ</h3>

                    <!-- view()æ“ä½œè§£æ -->
                    <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
                        <h4 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸ“ ç¬¬ä¸€æ­¥ï¼šä¸ºä»€ä¹ˆè¦ view() é‡å¡‘ï¼Ÿ</h4>

                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center; margin-bottom: 2rem;">
                            <!-- é‡å¡‘å‰ -->
                            <div style="text-align: center;">
                                <div style="color: var(--accent-red); font-weight: bold; margin-bottom: 1rem;">é‡å¡‘å‰ï¼š[2, 4, 8]</div>
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">æ¯ä¸ªè¯çš„å®Œæ•´8ç»´å‘é‡</div>
                                    <div style="display: grid; grid-template-columns: repeat(8, 1fr); gap: 4px;">
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚‚</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚ƒ</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚„</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚…</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚†</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚‡</div>
                                        <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚ˆ</div>
                                    </div>
                                </div>
                            </div>

                            <div style="font-size: 2rem; color: var(--accent-green);">â†’</div>

                            <!-- é‡å¡‘å -->
                            <div style="text-align: center;">
                                <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 1rem;">é‡å¡‘åï¼š[2, 4, 4, 2]</div>
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">åˆ†ç»™4ä¸ªå¤´ï¼Œæ¯ä¸ªå¤´2ç»´</div>
                                    <div style="display: grid; gap: 0.5rem;">
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px;">
                                            <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚</div>
                                            <div style="background: rgba(239, 68, 68, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚‚</div>
                                        </div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px;">
                                            <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚ƒ</div>
                                            <div style="background: rgba(251, 191, 36, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚„</div>
                                        </div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px;">
                                            <div style="background: rgba(34, 197, 94, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚…</div>
                                            <div style="background: rgba(34, 197, 94, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚†</div>
                                        </div>
                                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 4px;">
                                            <div style="background: rgba(139, 92, 246, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚‡</div>
                                            <div style="background: rgba(139, 92, 246, 0.3); padding: 8px; text-align: center; border-radius: 4px; font-size: 0.8rem;">dâ‚ˆ</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="background: rgba(251, 191, 36, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3);">
                            <code style="color: var(--accent-yellow); font-weight: bold;">Q = Q.view(batch_size, seq_len, self.num_heads, self.d_k)</code>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                <strong>ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ</strong> æŠŠæ¯ä¸ªè¯çš„8ç»´å‘é‡"åˆ‡æˆ"4ä»½ï¼Œæ¯ä»½2ç»´ï¼Œåˆ†é…ç»™4ä¸ªä¸“å®¶ï¼
                            </div>
                        </div>
                    </div>

                    <!-- transpose()æ“ä½œè§£æ -->
                    <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
                        <h4 style="color: var(--accent-blue); margin-bottom: 1.5rem;">ğŸ”„ ç¬¬äºŒæ­¥ï¼šä¸ºä»€ä¹ˆè¦ transpose() è½¬ç½®ï¼Ÿ</h4>

                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center; margin-bottom: 2rem;">
                            <!-- è½¬ç½®å‰ -->
                            <div style="text-align: center;">
                                <div style="color: var(--accent-red); font-weight: bold; margin-bottom: 1rem;">è½¬ç½®å‰ï¼š[B, L, H, d_k]</div>
                                <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3);">
                                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">æŒ‰åºåˆ—ç»„ç»‡</div>
                                    <div style="text-align: left; font-family: monospace; font-size: 0.8rem; color: var(--text-secondary);">
                                        Batch 1:<br>
                                        &nbsp;&nbsp;è¯1: [H1éƒ¨åˆ†][H2éƒ¨åˆ†][H3éƒ¨åˆ†][H4éƒ¨åˆ†]<br>
                                        &nbsp;&nbsp;è¯2: [H1éƒ¨åˆ†][H2éƒ¨åˆ†][H3éƒ¨åˆ†][H4éƒ¨åˆ†]<br>
                                        &nbsp;&nbsp;è¯3: [H1éƒ¨åˆ†][H2éƒ¨åˆ†][H3éƒ¨åˆ†][H4éƒ¨åˆ†]<br>
                                        &nbsp;&nbsp;è¯4: [H1éƒ¨åˆ†][H2éƒ¨åˆ†][H3éƒ¨åˆ†][H4éƒ¨åˆ†]
                                    </div>
                                </div>
                            </div>

                            <div style="font-size: 2rem; color: var(--accent-blue);">â†’</div>

                            <!-- è½¬ç½®å -->
                            <div style="text-align: center;">
                                <div style="color: var(--accent-green); font-weight: bold; margin-bottom: 1rem;">è½¬ç½®åï¼š[B, H, L, d_k]</div>
                                <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.5rem;">æŒ‰å¤´ç»„ç»‡</div>
                                    <div style="text-align: left; font-family: monospace; font-size: 0.8rem; color: var(--text-secondary);">
                                        Batch 1:<br>
                                        &nbsp;&nbsp;Head1: [è¯1çš„2ç»´][è¯2çš„2ç»´][è¯3çš„2ç»´][è¯4çš„2ç»´]<br>
                                        &nbsp;&nbsp;Head2: [è¯1çš„2ç»´][è¯2çš„2ç»´][è¯3çš„2ç»´][è¯4çš„2ç»´]<br>
                                        &nbsp;&nbsp;Head3: [è¯1çš„2ç»´][è¯2çš„2ç»´][è¯3çš„2ç»´][è¯4çš„2ç»´]<br>
                                        &nbsp;&nbsp;Head4: [è¯1çš„2ç»´][è¯2çš„2ç»´][è¯3çš„2ç»´][è¯4çš„2ç»´]
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="background: rgba(6, 182, 212, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(6, 182, 212, 0.3);">
                            <code style="color: var(--accent-blue); font-weight: bold;">Q = Q.transpose(1, 2)</code>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                <strong>ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ</strong> è®©æ¯ä¸ªå¤´èƒ½ç‹¬ç«‹çœ‹åˆ°æ‰€æœ‰è¯ï¼Œå®ç°å¹¶è¡Œè®¡ç®—ï¼GPUå¯ä»¥åŒæ—¶å¤„ç†4ä¸ªå¤´çš„è®¡ç®—ã€‚
                            </div>
                        </div>
                    </div>

                    <!-- W_oçš„ä½œç”¨ -->
                    <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px;">
                        <h4 style="color: var(--accent-green); margin-bottom: 1.5rem;">âœ¨ ç¬¬ä¸‰æ­¥ï¼šä¸ºä»€ä¹ˆè¦æ‹¼æ¥åå†å˜æ¢ï¼Ÿ</h4>

                        <div style="text-align: center; margin-bottom: 2rem;">
                            <div style="display: inline-block; background: rgba(139, 92, 246, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(139, 92, 246, 0.3);">
                                <div style="color: var(--accent-purple); font-weight: bold; margin-bottom: 1rem;">4ä¸ªå¤´çš„è¾“å‡ºæ‹¼æ¥</div>
                                <div style="display: flex; gap: 1rem; align-items: center; justify-content: center;">
                                    <div style="background: rgba(239, 68, 68, 0.2); padding: 1rem; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: var(--accent-red);">Head1</div>
                                        <div style="font-size: 0.7rem; color: var(--text-secondary);">è¯­æ³•å…³ç³»</div>
                                    </div>
                                    <div style="color: var(--accent-yellow);">+</div>
                                    <div style="background: rgba(251, 191, 36, 0.2); padding: 1rem; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: var(--accent-yellow);">Head2</div>
                                        <div style="font-size: 0.7rem; color: var(--text-secondary);">ä¿®é¥°å…³ç³»</div>
                                    </div>
                                    <div style="color: var(--accent-yellow);">+</div>
                                    <div style="background: rgba(34, 197, 94, 0.2); padding: 1rem; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: var(--accent-green);">Head3</div>
                                        <div style="font-size: 0.7rem; color: var(--text-secondary);">è¯­ä¹‰å…³ç³»</div>
                                    </div>
                                    <div style="color: var(--accent-yellow);">+</div>
                                    <div style="background: rgba(139, 92, 246, 0.2); padding: 1rem; border-radius: 8px; text-align: center;">
                                        <div style="font-size: 0.8rem; color: var(--accent-purple);">Head4</div>
                                        <div style="font-size: 0.7rem; color: var(--text-secondary);">å…¨å±€å…³ç³»</div>
                                    </div>
                                </div>
                                <div style="margin-top: 1.5rem; color: var(--accent-purple);">â†“</div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                                    <code style="color: var(--accent-green);">W_o</code> çº¿æ€§å˜æ¢
                                </div>
                                <div style="margin-top: 0.5rem; color: var(--accent-green);">â†“</div>
                                <div style="font-weight: bold; color: var(--accent-green); margin-top: 0.5rem;">èåˆåçš„ä¸°å¯Œè¡¨ç¤º</div>
                            </div>
                        </div>

                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                            <code style="color: var(--accent-green); font-weight: bold;">output = self.W_o(context)</code>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">
                                <strong>ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ</strong> W_oä¸æ˜¯ç®€å•æ‹¼æ¥ï¼å®ƒå­¦ä¹ å¦‚ä½•æ™ºèƒ½èåˆ4ä¸ªä¸“å®¶çš„æ„è§ï¼Œäº§ç”Ÿæ¯”ä»»ä½•å•ä¸ªä¸“å®¶æ›´å¼ºå¤§çš„ç†è§£ã€‚
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: å®Œæ•´å®ç° -->
                <div class="code-container mt-4">
                    <div class="code-header">
                        <div class="code-header-left">
                            <span style="color: var(--text-secondary);">Step 3: å®Œæ•´çš„å¤šå¤´æ³¨æ„åŠ›å®ç°</span>
                        </div>
                        <div class="code-header-right">
                            <button class="code-action" onclick="copyCode(this)">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                    <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                </svg>
                                å¤åˆ¶
                            </button>
                        </div>
                    </div>
                    <div class="code-content">
            <pre><code class="language-python">import torch
import torch.nn as nn
import torch.nn.functional as F

class MultiHeadAttention(nn.Module):
    """å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶çš„å®Œæ•´å®ç°"""

    def __init__(self, d_model, num_heads, dropout=0.1):
        super(MultiHeadAttention, self).__init__()
        assert d_model % num_heads == 0, "d_modelå¿…é¡»èƒ½è¢«num_headsæ•´é™¤"

        self.d_model = d_model
        self.num_heads = num_heads
        self.d_k = d_model // num_heads

        # å®šä¹‰çº¿æ€§å˜æ¢å±‚
        self.W_q = nn.Linear(d_model, d_model)
        self.W_k = nn.Linear(d_model, d_model)
        self.W_v = nn.Linear(d_model, d_model)
        self.W_o = nn.Linear(d_model, d_model)

        self.dropout = nn.Dropout(dropout)
        self.scale = self.d_k ** -0.5

    def forward(self, query, key, value, mask=None):
        """
        Args:
            query: [batch_size, seq_len, d_model]
            key:   [batch_size, seq_len, d_model]
            value: [batch_size, seq_len, d_model]
            mask:  [batch_size, seq_len, seq_len] or None

        Returns:
            output:            [batch_size, seq_len, d_model]
            attention_weights: [batch_size, num_heads, seq_len, seq_len]
        """
        batch_size = query.size(0)
        seq_len = query.size(1)

        # 1. çº¿æ€§å˜æ¢å¹¶åˆ†å¤´
        # [B, L, D] -> [B, L, H, D/H] -> [B, H, L, D/H]
        Q = self.W_q(query).view(batch_size, seq_len, self.num_heads, self.d_k).transpose(1, 2)
        K = self.W_k(key).view(batch_size, seq_len, self.num_heads, self.d_k).transpose(1, 2)
        V = self.W_v(value).view(batch_size, seq_len, self.num_heads, self.d_k).transpose(1, 2)

        # 2. è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°
        # [B, H, L, D/H] @ [B, H, D/H, L] -> [B, H, L, L]
        scores = torch.matmul(Q, K.transpose(-2, -1)) * self.scale

        # 3. åº”ç”¨maskï¼ˆå¦‚æœæœ‰ï¼‰
        if mask is not None:
            # æ‰©å±•maskç»´åº¦ä»¥åŒ¹é…å¤šå¤´: [B, 1, L, L]
            mask = mask.unsqueeze(1).repeat(1, self.num_heads, 1, 1)
            scores = scores.masked_fill(mask == 0, -1e9)

        # 4. Softmaxæ ‡å‡†åŒ–
        attention_weights = F.softmax(scores, dim=-1)
        attention_weights = self.dropout(attention_weights)

        # 5. åŠ æƒæ±‚å’Œ
        # [B, H, L, L] @ [B, H, L, D/H] -> [B, H, L, D/H]
        context = torch.matmul(attention_weights, V)

        # 6. æ‹¼æ¥å¤šå¤´
        # [B, H, L, D/H] -> [B, L, H, D/H] -> [B, L, D]
        context = context.transpose(1, 2).contiguous().view(batch_size, seq_len, self.d_model)

        # 7. æœ€ç»ˆçº¿æ€§å˜æ¢
        output = self.W_o(context)

        return output, attention_weights


# ä½¿ç”¨ç¤ºä¾‹
if __name__ == "__main__":
    # æ¨¡å‹å‚æ•°
    d_model = 512
    num_heads = 8
    seq_len = 10
    batch_size = 2

    # åˆå§‹åŒ–å¤šå¤´æ³¨æ„åŠ›å±‚
    mha = MultiHeadAttention(d_model, num_heads)

    # åˆ›å»ºè¾“å…¥
    x = torch.randn(batch_size, seq_len, d_model)

    # å‰å‘ä¼ æ’­ï¼ˆè‡ªæ³¨æ„åŠ›ï¼‰
    output, attention = mha(x, x, x)

    print(f"è¾“å…¥å½¢çŠ¶: {x.shape}")
    print(f"è¾“å‡ºå½¢çŠ¶: {output.shape}")
    print(f"æ³¨æ„åŠ›æƒé‡å½¢çŠ¶: {attention.shape}")

    # å‚æ•°é‡ç»Ÿè®¡
    total_params = sum(p.numel() for p in mha.parameters())
    print(f"\næ€»å‚æ•°é‡: {total_params:,}")
    print(f"ç†è®ºå‚æ•°é‡: 4 Ã— {d_model}Â² = {4 * d_model * d_model:,}")

    # å„å¤´æ³¨æ„åŠ›æ¨¡å¼åˆ†æ
    print("\nå„å¤´å…³æ³¨æ¨¡å¼ï¼ˆç¬¬ä¸€ä¸ªæ ·æœ¬ï¼Œç¬¬ä¸€ä¸ªè¯ï¼‰:")
    for head in range(num_heads):
        attn_pattern = attention[0, head, 0, :].detach()
        max_idx = attn_pattern.argmax().item()
        max_val = attn_pattern[max_idx].item()
        print(f"Head {head+1}: æœ€å…³æ³¨ä½ç½®{max_idx+1}ï¼Œæƒé‡{max_val:.3f}")</code></pre>
                    </div>
                </div>

                <!-- ç»´åº¦å˜åŒ–å¯è§†åŒ– -->
                <div class="visualization-container mt-4">
                    <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ¨ ç»´åº¦å˜åŒ–å…¨æµç¨‹å¯è§†åŒ–</h3>

                    <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px;">
            <pre style="color: var(--text-primary); font-size: 0.95rem; line-height: 1.8;"><code><span style="color: var(--accent-yellow);">è¾“å…¥ x:</span> [batch_size, seq_len, d_model]
         ä¾‹å¦‚: [2, 4, 8]  # 2ä¸ªæ ·æœ¬ï¼Œ4ä¸ªè¯ï¼Œ8ç»´å‘é‡

<span style="color: var(--accent-green);">ç»è¿‡ QKV å˜æ¢:</span>
Q, K, V: [2, 4, 8]  # ä¿æŒåŸå§‹ç»´åº¦

<span style="color: var(--accent-purple);">é‡å¡‘ä¸ºå¤šå¤´ (num_heads=4):</span>
Q, K, V: [2, 4, 8] â†’ [2, 4, <span style="background: rgba(139, 92, 246, 0.3); color: var(--accent-purple); font-weight: bold;">4, 2</span>]
                      â””â”€â”´â”€â”´â”€â”€â”´â”€â”€â”˜
                       B  L  H  d_k

<span style="color: var(--accent-blue);">è½¬ç½®ç”¨äºå¹¶è¡Œè®¡ç®—:</span>
Q, K, V: [2, 4, 4, 2] â†’ [2, <span style="background: rgba(6, 182, 212, 0.3); color: var(--accent-blue); font-weight: bold;">4</span>, 4, <span style="background: rgba(6, 182, 212, 0.3); color: var(--accent-blue); font-weight: bold;">2</span>]
                          â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜
                           B  H  L  d_k

<span style="color: var(--accent-red);">æ³¨æ„åŠ›è®¡ç®— (æ¯ä¸ªå¤´ç‹¬ç«‹):</span>
scores: Q @ K^T = [2, 4, 4, 2] @ [2, 4, 2, 4] = [2, 4, <span style="background: rgba(239, 68, 68, 0.3); color: var(--accent-red); font-weight: bold;">4, 4</span>]
                                                        â””â”€æ³¨æ„åŠ›çŸ©é˜µ

<span style="color: var(--accent-yellow);">æœ€ç»ˆè¾“å‡º:</span>
context: [2, 4, 4, 2] â†’ [2, 4, 4, 2] â†’ [2, 4, 8]
         â””â”€å„å¤´ç»“æœâ”€â”˜    â””â”€è½¬ç½®å›æ¥â”€â”˜    â””â”€æ‹¼æ¥â”€â”˜

output: [2, 4, 8] @ W_o â†’ [2, 4, 8]
        â””â”€èåˆå¤šå¤´ä¿¡æ¯â”€â”˜</code></pre>
                    </div>
                </div>

                <!-- æ€§èƒ½å¯¹æ¯” -->
                <div class="matrix-visualization mt-4">
                    <h3 style="color: var(--accent-red); margin-bottom: 1.5rem;">ğŸ“Š æ€§èƒ½å¯¹æ¯”ï¼šä¸ºä»€ä¹ˆå¤šå¤´æ›´å¼ºï¼Ÿ</h3>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                        <div style="background: rgba(239, 68, 68, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.3); text-align: center;">
                            <div style="color: var(--accent-red); font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">1x</div>
                            <div style="color: var(--text-primary); font-weight: bold;">å•å¤´è¡¨è¾¾èƒ½åŠ›</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">åªèƒ½å­¦ä¹ ä¸€ç§å…³ç³»æ¨¡å¼</div>
                        </div>

                        <div style="background: rgba(34, 197, 94, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(34, 197, 94, 0.3); text-align: center;">
                            <div style="color: var(--accent-green); font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">8x</div>
                            <div style="color: var(--text-primary); font-weight: bold;">å¤šå¤´è¡¨è¾¾èƒ½åŠ›</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">åŒæ—¶å­¦ä¹ 8ç§ä¸åŒæ¨¡å¼</div>
                        </div>

                        <div style="background: rgba(251, 191, 36, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(251, 191, 36, 0.3); text-align: center;">
                            <div style="color: var(--accent-yellow); font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">1.0x</div>
                            <div style="color: var(--text-primary); font-weight: bold;">å‚æ•°é‡</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">å·§å¦™è®¾è®¡ï¼Œå‚æ•°é‡ä¸å˜</div>
                        </div>

                        <div style="background: rgba(139, 92, 246, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(139, 92, 246, 0.3); text-align: center;">
                            <div style="color: var(--accent-purple); font-size: 2.5rem; font-weight: bold; margin-bottom: 0.5rem;">100%</div>
                            <div style="color: var(--text-primary); font-weight: bold;">å¹¶è¡Œæ•ˆç‡</div>
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem;">æ‰€æœ‰å¤´åŒæ—¶è®¡ç®—</div>
                        </div>
                    </div>
                </div>

                <!-- å®ç°è¦ç‚¹æ€»ç»“ -->
                <div class="tip success mt-4">
                    <span class="tip-icon">ğŸ¯</span>
                    <div class="tip-content">
                        <strong>å®ç°è¦ç‚¹æ€»ç»“ï¼š</strong><br>
                        âœ“ <strong>ç»´åº¦åˆ†å‰²æ˜¯æ ¸å¿ƒ</strong> - é€šè¿‡ view() å’Œ transpose() å®ç°ç»´åº¦åˆ†å‰²ï¼Œè®©æ¯ä¸ªå¤´å¤„ç† d_model/num_heads ç»´<br>
                        âœ“ <strong>å¹¶è¡Œè®¡ç®—ææ•ˆç‡</strong> - çŸ©é˜µè¿ç®—å¤©ç„¶æ”¯æŒæ‰¹é‡æ“ä½œï¼Œå¤šå¤´åœ¨ GPU ä¸Šå‡ ä¹æ— é¢å¤–å¼€é”€<br>
                        âœ“ <strong>è¾“å‡ºå˜æ¢å¾ˆé‡è¦</strong> - W_o ä¸ä»…ä»…æ˜¯ç»´åº¦å˜æ¢ï¼Œæ›´æ˜¯å¤šå¤´ä¿¡æ¯çš„æ™ºèƒ½èåˆå™¨<br>
                        âœ“ <strong>mask å¤„ç†è¦ç»†å¿ƒ</strong> - éœ€è¦æ‰©å±• mask ç»´åº¦ä»¥é€‚é…å¤šå¤´ç»“æ„ï¼Œç¡®ä¿æ¯ä¸ªå¤´éƒ½æ­£ç¡®å±è”½
                    </div>
                </div>

            </section>



            <!-- åŠ¨æ‰‹å®è·µ -->
            <section id="practice" class="section-card">

                <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">ğŸ› ï¸ åŠ¨æ‰‹å®è·µï¼šæ„å»ºä½ è‡ªå·±çš„å¤šå¤´æ³¨æ„åŠ›</h2>

                <!-- ç»ƒä¹ 1ï¼šè°ƒè¯•å¤šå¤´æ³¨æ„åŠ› -->
                <div class="quiz-container">
                    <h3 style="color: var(--accent-yellow); margin-bottom: 1rem;">ğŸ› ç»ƒä¹ 1ï¼šè°ƒè¯•é”™è¯¯çš„å®ç°</h3>
                    <p>ä¸‹é¢çš„ä»£ç æœ‰ä¸€ä¸ªå¸¸è§é”™è¯¯ï¼Œä½ èƒ½æ‰¾å‡ºæ¥å—ï¼Ÿ</p>

                    <div class="code-container">
                        <div class="code-content">
                            <pre><code class="language-python">def forward(self, x):
    batch_size, seq_len, d_model = x.size()

    # çº¿æ€§å˜æ¢
    Q = self.W_q(x)
    K = self.W_k(x)
    V = self.W_v(x)

    # é”™è¯¯ï¼šç›´æ¥è®¡ç®—æ³¨æ„åŠ›ï¼Œæ²¡æœ‰reshapeï¼
    scores = torch.matmul(Q, K.transpose(-2, -1))  # è¿™ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿ

    # ... åç»­ä»£ç </code></pre>
                        </div>
                    </div>

                    <div class="quiz-options">
                        <button class="quiz-option" data-answer="a">
                            A. æ²¡æœ‰é—®é¢˜ï¼Œè¿™æ ·å†™æ˜¯å¯¹çš„
                        </button>
                        <button class="quiz-option" data-answer="b">
                            B. æ²¡æœ‰è¿›è¡Œç»´åº¦åˆ†å‰²ï¼Œæ‰€æœ‰å¤´çœ‹åˆ°çš„æ˜¯ç›¸åŒçš„ä¿¡æ¯
                        </button>
                        <button class="quiz-option" data-answer="c">
                            C. å¿˜è®°äº†ç¼©æ”¾å› å­
                        </button>
                        <button class="quiz-option" data-answer="d">
                            D. æ²¡æœ‰åº”ç”¨dropout
                        </button>
                    </div>
                    <div class="quiz-feedback" id="quiz-feedback-2"></div>
                </div>

                <!-- ç»ƒä¹ 2ï¼šå®ç°ç®€åŒ–ç‰ˆ -->
                <div class="code-container mt-4">
                    <div class="code-header">
                        <div class="code-header-left">
                            <span style="color: var(--text-secondary);">ç»ƒä¹ 2ï¼šå®ç°ç®€åŒ–ç‰ˆå¤šå¤´æ³¨æ„åŠ›ï¼ˆå¡«ç©ºï¼‰</span>
                        </div>
                        <div class="code-header-right">
                            <button class="code-action" onclick="checkAnswer()">
                                æ£€æŸ¥ç­”æ¡ˆ
                            </button>
                        </div>
                    </div>
                    <div class="code-content">
                        <pre><code class="language-python">class SimpleMultiHeadAttention(nn.Module):
    def __init__(self, d_model=8, num_heads=4):
        super().__init__()
        self.d_model = d_model
        self.num_heads = num_heads
        self.d_k = ______  # å¡«ç©º1ï¼šæ¯ä¸ªå¤´çš„ç»´åº¦æ€ä¹ˆè®¡ç®—ï¼Ÿ

        # å®šä¹‰æƒé‡çŸ©é˜µ
        self.W_q = nn.Linear(d_model, ______)  # å¡«ç©º2ï¼šè¾“å‡ºç»´åº¦æ˜¯å¤šå°‘ï¼Ÿ
        self.W_k = nn.Linear(d_model, d_model)
        self.W_v = nn.Linear(d_model, d_model)
        self.W_o = nn.Linear(______, d_model)  # å¡«ç©º3ï¼šè¾“å…¥ç»´åº¦æ˜¯å¤šå°‘ï¼Ÿ

    def forward(self, x):
        B, L, D = x.size()

        # QKVå˜æ¢
        Q = self.W_q(x)
        K = self.W_k(x)
        V = self.W_v(x)

        # é‡å¡‘ä¸ºå¤šå¤´
        Q = Q.view(B, L, self.num_heads, ______).transpose(1, 2)  # å¡«ç©º4
        K = K.view(B, L, ______, self.d_k).transpose(1, 2)  # å¡«ç©º5
        V = V.view(B, L, self.num_heads, self.d_k).transpose(______)  # å¡«ç©º6

        # æ³¨æ„åŠ›è®¡ç®—
        scores = torch.matmul(Q, K.transpose(-2, -1)) / ______  # å¡«ç©º7ï¼šç¼©æ”¾å› å­
        attn = F.softmax(scores, dim=______)  # å¡«ç©º8ï¼šåœ¨å“ªä¸ªç»´åº¦softmaxï¼Ÿ

        # åŠ æƒæ±‚å’Œ
        context = torch.matmul(attn, V)

        # é‡æ–°æ‹¼æ¥
        context = context.transpose(1, 2).contiguous().view(B, L, ______)  # å¡«ç©º9

        # è¾“å‡ºå˜æ¢
        output = self.W_o(context)

        return output</code></pre>
                    </div>
                    <div id="answer-feedback" class="code-output mt-2">
                        <pre>ç‚¹å‡»"æ£€æŸ¥ç­”æ¡ˆ"æŸ¥çœ‹æ­£ç¡®ç­”æ¡ˆå’Œè§£é‡Š...</pre>
                    </div>
                </div>

                <!-- ç»ƒä¹ 3ï¼šæ€§èƒ½å¯¹æ¯”å®éªŒ -->
                <div class="visualization-container mt-4">
                    <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">ğŸ”¬ ç»ƒä¹ 3ï¼šæ€§èƒ½å¯¹æ¯”å®éªŒ</h3>
                    <p>é€šè¿‡å®éªŒå¯¹æ¯”å•å¤´å’Œå¤šå¤´æ³¨æ„åŠ›åœ¨ä¸åŒä»»åŠ¡ä¸Šçš„è¡¨ç°ï¼š</p>

                    <div class="viz-controls">
                        <div class="viz-control-group">
                            <label>é€‰æ‹©ä»»åŠ¡ï¼š</label>
                            <select id="task-selector" style="padding: 0.5rem; border-radius: 0.5rem; background: rgba(255, 255, 255, 0.1); border: 1px solid var(--border-color); color: var(--text-primary);">
                                <option value="syntax">è¯­æ³•åˆ†æ</option>
                                <option value="semantic">è¯­ä¹‰ç†è§£</option>
                                <option value="sentiment">æƒ…æ„Ÿåˆ†æ</option>
                                <option value="overall">ç»¼åˆä»»åŠ¡</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="runPerformanceTest()">
                            è¿è¡Œå¯¹æ¯”å®éªŒ
                        </button>
                    </div>

                    <canvas id="performance-chart" width="800" height="400"></canvas>

                    <div id="performance-insight" class="tip info mt-3" style="display: none;">
                        <span class="tip-icon">ğŸ“Š</span>
                        <div class="tip-content">
                            <strong>å®éªŒç»“æœï¼š</strong><br>
                            <span id="performance-summary"></span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- æ€»ç»“ä¸å±•æœ› -->
            <section id="summary" class="section-card">
                <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">ğŸ‰ æˆåŠŸï¼æˆ‘ä»¬è§£å†³äº†å•å¤´æ³¨æ„åŠ›çš„æ ¹æœ¬é—®é¢˜</h2>

                <div class="story-card">
                    <div class="text-center mb-4">
                        <h3 style="color: var(--accent-yellow);">ä»æ­¤ï¼Œæœºå™¨ä¹Ÿæœ‰äº†"å¤šç»´å¤§è„‘"ï¼</h3>
                    </div>

                    <div class="concept-grid">
                        <div class="concept-card what">
                            <h4 style="color: var(--accent-green); margin-bottom: 1rem;">ğŸ§  è®¤çŸ¥çªç ´</h4>
                            <p>å¤šå¤´æ³¨æ„åŠ›è®©ç¥ç»ç½‘ç»œå…·å¤‡äº†ç±»ä¼¼äººç±»å¤§è„‘çš„<strong>å¹¶è¡Œè®¤çŸ¥èƒ½åŠ›</strong>ï¼Œä¸å†å—é™äºå•ä¸€è§†è§’çš„ä¿¡æ¯å¤„ç†ç“¶é¢ˆã€‚</p>
                        </div>

                        <div class="concept-card how">
                            <h4 style="color: var(--accent-purple); margin-bottom: 1rem;">âš¡ æŠ€æœ¯é©æ–°</h4>
                            <p>è¿™ä¸€åˆ›æ–°ä¸ºåç»­çš„Transformeræ¶æ„å¥ å®šäº†åŸºç¡€ï¼Œæˆä¸ºç°ä»£å¤§è¯­è¨€æ¨¡å‹çš„<strong>æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€</strong>ã€‚</p>
                        </div>

                        <div class="concept-card why">
                            <h4 style="color: var(--accent-blue); margin-bottom: 1rem;">ğŸ¯ å®è·µä»·å€¼</h4>
                            <p>ä»GPTåˆ°BERTï¼Œä»æœºå™¨ç¿»è¯‘åˆ°å¯¹è¯ç³»ç»Ÿï¼Œå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶åœ¨<strong>æ— æ•°AIåº”ç”¨</strong>ä¸­å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚</p>
                        </div>
                    </div>
                </div>

                <!-- æ€ç»´å¯¼å›¾ -->
                <div class="mindmap-container">
                    <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ—ºï¸ çŸ¥è¯†åœ°å›¾ï¼šå¤šå¤´æ³¨æ„åŠ›å…¨æ™¯</h3>
                    <svg class="mindmap-svg" viewBox="0 0 800 500">
                        <!-- ä¸­å¿ƒèŠ‚ç‚¹ -->
                        <g transform="translate(400, 250)">
                            <circle r="60" fill="url(#gradient-center)" stroke="#8b5cf6" stroke-width="3"/>
                            <text text-anchor="middle" dy="5" fill="white" font-size="14" font-weight="bold">å¤šå¤´æ³¨æ„åŠ›</text>
                        </g>

                        <!-- é—®é¢˜åˆ†æ”¯ -->
                        <g transform="translate(200, 150)">
                            <circle r="40" fill="#ef4444" opacity="0.8"/>
                            <text text-anchor="middle" dy="5" fill="white" font-size="12">å•å¤´å±€é™</text>
                            <line x1="40" y1="0" x2="160" y2="85" stroke="#ef4444" stroke-width="2"/>
                        </g>

                        <!-- çµæ„Ÿåˆ†æ”¯ -->
                        <g transform="translate(600, 150)">
                            <circle r="40" fill="#fbbf24" opacity="0.8"/>
                            <text text-anchor="middle" dy="5" fill="white" font-size="12">äººè„‘å¯å‘</text>
                            <line x1="-40" y1="0" x2="-160" y2="85" stroke="#fbbf24" stroke-width="2"/>
                        </g>

                        <!-- æ–¹æ¡ˆåˆ†æ”¯ -->
                        <g transform="translate(200, 350)">
                            <circle r="40" fill="#22c55e" opacity="0.8"/>
                            <text text-anchor="middle" dy="5" fill="white" font-size="12">ç»´åº¦åˆ†å‰²</text>
                            <line x1="40" y1="0" x2="160" y2="-85" stroke="#22c55e" stroke-width="2"/>
                        </g>

                        <!-- ä»·å€¼åˆ†æ”¯ -->
                        <g transform="translate(600, 350)">
                            <circle r="40" fill="#06b6d4" opacity="0.8"/>
                            <text text-anchor="middle" dy="5" fill="white" font-size="12">å¹¶è¡Œè®¡ç®—</text>
                            <line x1="-40" y1="0" x2="-160" y2="-85" stroke="#06b6d4" stroke-width="2"/>
                        </g>

                        <!-- æ¸å˜å®šä¹‰ -->
                        <defs>
                            <radialGradient id="gradient-center">
                                <stop offset="0%" stop-color="#a78bfa"/>
                                <stop offset="100%" stop-color="#7c3aed"/>
                            </radialGradient>
                        </defs>
                    </svg>
                </div>

                <!-- è¡ŒåŠ¨æ¸…å• -->
                <div class="action-checklist">
                    <h3 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸ“‹ å­¦ä¹ è¡ŒåŠ¨æ¸…å•</h3>
                    <div class="checklist-item">
                        <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                        <span>å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆå¤šå¤´æ³¨æ„åŠ›ï¼ˆ30åˆ†é’Ÿï¼‰</span>
                    </div>
                    <div class="checklist-item">
                        <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                        <span>å¯è§†åŒ–ä¸åŒå¤´çš„æ³¨æ„åŠ›æ¨¡å¼ï¼ˆ20åˆ†é’Ÿï¼‰</span>
                    </div>
                    <div class="checklist-item">
                        <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                        <span>å¯¹æ¯”å•å¤´å’Œå¤šå¤´åœ¨å®é™…ä»»åŠ¡ä¸Šçš„æ•ˆæœï¼ˆ40åˆ†é’Ÿï¼‰</span>
                    </div>
                    <div class="checklist-item">
                        <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                        <span>é˜…è¯»Transformerè®ºæ–‡çš„Multi-Head Attentionç« èŠ‚ï¼ˆé€‰åšï¼‰</span>
                    </div>
                    <div class="mt-3">
                        <button class="btn btn-primary" onclick="downloadChecklist()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            ä¸‹è½½æ¸…å•
                        </button>
                        <button class="btn btn-secondary" onclick="shareToNotion()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                            </svg>
                            å¯¼å‡ºåˆ° Notion
                        </button>
                    </div>
                </div>

                <!-- ä¸‹ä¸€ç« é¢„å‘Š -->
                <div style="background: var(--primary-gradient); padding: 3rem; border-radius: 1rem; margin-top: 3rem; text-align: center; color: white;">
                    <h3 style="margin-bottom: 1rem;">ğŸš€ ä¸‹ä¸€ç« é¢„å‘Š</h3>
                    <h2 style="margin-bottom: 1rem;">ç¬¬5ç« ï¼šä½ç½®ç¼–ç  - è®©æ¨¡å‹ç†è§£è¯åº</h2>
                    <p style="opacity: 0.9; max-width: 600px; margin: 0 auto;">
                        å¤šå¤´æ³¨æ„åŠ›è§£å†³äº†"æ€ä¹ˆçœ‹"çš„é—®é¢˜ï¼Œä½†æ¨¡å‹è¿˜ä¸çŸ¥é“è¯çš„é¡ºåº...<br>
                        ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†æ¢ç´¢å¦‚ä½•è®©Transformerç†è§£"çº¢è‰²è‹¹æœ"å’Œ"è‹¹æœçº¢è‰²"çš„åŒºåˆ«ï¼
                    </p>
                    <button class="btn" style="background: white; color: var(--bg-dark); margin-top: 2rem;">
                        å¼€å§‹ä¸‹ä¸€ç« 
                    </button>
                </div>
            </section>

            <!-- åé¦ˆåŒºåŸŸ -->
            <section class="section-card">
                <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">ğŸ’¬ å­¦ä¹ åé¦ˆ</h3>
                <div class="text-center">
                    <p>è¿™ä¸€ç« å¯¹ä½ æœ‰å¸®åŠ©å—ï¼Ÿ</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem;">
                        <button class="btn btn-secondary" onclick="submitFeedback('helpful')">
                            ğŸ‘ å¾ˆæœ‰å¸®åŠ©
                        </button>
                        <button class="btn btn-secondary" onclick="submitFeedback('ok')">
                            ğŸ˜ è¿˜å¯ä»¥
                        </button>
                        <button class="btn btn-secondary" onclick="submitFeedback('confusing')">
                            ğŸ˜• æœ‰ç‚¹å›°æƒ‘
                        </button>
                    </div>
                    <div class="mt-3">
                        <a href="https://github.com/yourusername/transformer-tutorial/discussions" target="_blank" rel="noopener">
                            <button class="btn btn-secondary">
                                ğŸ’¬ åŠ å…¥è®¨è®º
                            </button>
                        </a>
                    </div>
                </div>
            </section>
        </div>

</main>
<!-- JavaScriptä»£ç  -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>

<script>
    // åˆå§‹åŒ–è¯­æ³•é«˜äº®
    hljs.highlightAll();

    // åˆå§‹åŒ–æ•°å­¦å…¬å¼æ¸²æŸ“
    renderMathInElement(document.body, {
        delimiters: [
            {left: '$', right: '$', display: true},
            {left: ', right: ', display: false}
        ]
    });

    // å…¨å±€çŠ¶æ€ç®¡ç†
    let animationsEnabled = true;
    let currentTheme = 'dark';
    let sidebarOpen = false;

    // å¯¼èˆªåŠŸèƒ½
    document.getElementById('toggle-sidebar').addEventListener('click', () => {
        sidebarOpen = !sidebarOpen;
        document.getElementById('sidebar').classList.toggle('open', sidebarOpen);
        document.getElementById('sidebar-overlay').classList.toggle('active', sidebarOpen);
    });

    document.getElementById('sidebar-overlay').addEventListener('click', () => {
        sidebarOpen = false;
        document.getElementById('sidebar').classList.remove('open');
        document.getElementById('sidebar-overlay').classList.remove('active');
    });

    // ä¸»é¢˜åˆ‡æ¢
    document.getElementById('toggle-theme').addEventListener('click', () => {
        currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', currentTheme);
    });

    // åŠ¨ç”»æ§åˆ¶
    document.getElementById('toggle-animations').addEventListener('click', () => {
        animationsEnabled = !animationsEnabled;
        document.documentElement.style.setProperty('--animation-duration', animationsEnabled ? '0.3s' : '0s');
    });

    // è¿›åº¦æ¡æ›´æ–°
    function updateProgressBar() {
        const scrolled = window.scrollY;
        const height = document.documentElement.scrollHeight - window.innerHeight;
        const progress = (scrolled / height) * 100;
        document.getElementById('progress-bar').style.width = progress + '%';
    }

    window.addEventListener('scroll', () => {
        updateProgressBar();

        // éšè—/æ˜¾ç¤ºå¯¼èˆªæ 
        const nav = document.querySelector('.nav-header');
        if (window.scrollY > 100) {
            nav.classList.add('scrolled');
        } else {
            nav.classList.remove('scrolled');
        }
    });

    // ç›®å½•é«˜äº®
    const sections = document.querySelectorAll('section[id]');
    const tocItems = document.querySelectorAll('.toc-item');

    function updateTOC() {
        let current = '';
        sections.forEach(section => {
            const rect = section.getBoundingClientRect();
            if (rect.top <= 100 && rect.bottom >= 100) {
                current = section.getAttribute('id');
            }
        });

        tocItems.forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('href') === '#' + current) {
                item.classList.add('active');
            }
        });
    }

    window.addEventListener('scroll', updateTOC);

    // æŠ˜å ç»„ä»¶åŠŸèƒ½
    document.querySelectorAll('.collapsible-header').forEach(header => {
        header.addEventListener('click', () => {
            const collapsible = header.parentElement;
            collapsible.classList.toggle('expanded');
        });
    });

    // æµ‹éªŒåŠŸèƒ½
    document.querySelectorAll('.quiz-option').forEach(option => {
        option.addEventListener('click', function() {
            const container = this.closest('.quiz-container');
            const options = container.querySelectorAll('.quiz-option');
            const feedbackId = container.querySelector('.quiz-feedback').id;
            const feedback = document.getElementById(feedbackId);

            // é‡ç½®æ‰€æœ‰é€‰é¡¹
            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            this.classList.add('selected');

            // æ£€æŸ¥ç­”æ¡ˆ
            let isCorrect = false;
            let message = '';

            if (feedbackId === 'quiz-feedback-1') {
                isCorrect = this.dataset.answer === 'b';
                if (isCorrect) {
                    message = 'âœ… æ­£ç¡®ï¼å•å¤´æ³¨æ„åŠ›ç¡®å®åªèƒ½ä»å•ä¸€è§†è§’ç†è§£å…³ç³»ï¼Œè¿™æ˜¯å®ƒçš„æ ¹æœ¬å±€é™ã€‚';
                } else {
                    message = 'âŒ å†æƒ³æƒ³ã€‚æç¤ºï¼šé—®é¢˜çš„å…³é”®åœ¨äº"è§†è§’"çš„æ•°é‡ã€‚';
                }
            } else if (feedbackId === 'quiz-feedback-2') {
                isCorrect = this.dataset.answer === 'b';
                if (isCorrect) {
                    message = 'âœ… æ­£ç¡®ï¼æ²¡æœ‰reshapeæˆå¤šå¤´ï¼Œæ‰€æœ‰å¤´çœ‹åˆ°çš„æ˜¯ç›¸åŒçš„8ç»´å‘é‡ï¼Œå¤±å»äº†å¤šå¤´çš„æ„ä¹‰ã€‚';
                } else {
                    message = 'âŒ ä¸å¯¹ã€‚çœ‹çœ‹reshapeé‚£ä¸€æ­¥ï¼Œå®ƒçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ';
                }
            }

            this.classList.add(isCorrect ? 'correct' : 'incorrect');
            feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');
            feedback.classList.remove(isCorrect ? 'incorrect' : 'correct');
            feedback.innerHTML = message;
        });
    });

    // ä»£ç æ ‡ç­¾åˆ‡æ¢
    document.querySelectorAll('.code-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const container = this.closest('.code-container');
            const tabs = container.querySelectorAll('.code-tab');
            const contents = container.querySelectorAll('.code-content');

            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            contents.forEach(content => {
                content.style.display = 'none';
            });

            const targetContent = container.querySelector(`[data-tab-content="${this.dataset.tab}"]`);
            if (targetContent) {
                targetContent.style.display = 'block';
            }
        });
    });

    // ä»£ç å¤åˆ¶åŠŸèƒ½
    function copyCode(button) {
        const codeBlock = button.closest('.code-container').querySelector('code');
        const text = codeBlock.textContent;

        navigator.clipboard.writeText(text).then(() => {
            const originalText = button.innerHTML;
            button.innerHTML = 'âœ… å·²å¤åˆ¶';
            setTimeout(() => {
                button.innerHTML = originalText;
            }, 2000);
        });
    }

    // ä»£ç è¿è¡Œæ¨¡æ‹Ÿ
    function runCode(button, outputId) {
        const output = document.getElementById(outputId);
        output.classList.add('show');

        // æ¨¡æ‹Ÿè¿è¡Œæ•ˆæœ
        const originalText = button.innerHTML;
        button.innerHTML = '<span class="loading"></span> è¿è¡Œä¸­...';
        button.disabled = true;

        setTimeout(() => {
            button.innerHTML = 'âœ… è¿è¡Œå®Œæˆ';
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
            }, 1500);
        }, 1500);
    }

    // Canvas å¯è§†åŒ– - æ³¨æ„åŠ›æƒé‡
    function drawAttentionVisualization() {
        const canvas = document.getElementById('attention-viz');
        const ctx = canvas.getContext('2d');

        // è®¾ç½®ç”»å¸ƒå°ºå¯¸
        canvas.width = 800;
        canvas.height = 400;

        // æ¸…ç©ºç”»å¸ƒ
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶èƒŒæ™¯
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // æ•°æ®
        const words = ['çº¢è‰²', 'è‹¹æœ', 'å¾ˆ', 'ç”œ'];
        const weights = [0.247, 0.251, 0.244, 0.258];

        // ç»˜åˆ¶å‚æ•°
        const barWidth = 120;
        const gap = 40;
        const startX = (canvas.width - (barWidth * 4 + gap * 3)) / 2;
        const maxHeight = 250;
        const baseY = 320;

        // ç»˜åˆ¶æŸ±çŠ¶å›¾
        words.forEach((word, i) => {
            const x = startX + i * (barWidth + gap);
            const height = weights[i] * maxHeight * 4; // æ”¾å¤§æ˜¾ç¤ºå·®å¼‚

            // æŸ±çŠ¶å›¾æ¸å˜
            const gradient = ctx.createLinearGradient(x, baseY, x, baseY - height);
            gradient.addColorStop(0, 'rgba(239, 68, 68, 0.8)');
            gradient.addColorStop(1, 'rgba(239, 68, 68, 0.3)');

            // ç»˜åˆ¶æŸ±å­
            ctx.fillStyle = gradient;
            ctx.fillRect(x, baseY - height, barWidth, height);

            // ç»˜åˆ¶æ ‡ç­¾
            ctx.fillStyle = '#f1f5f9';
            ctx.font = '16px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(word, x + barWidth / 2, baseY + 25);

            // ç»˜åˆ¶æ•°å€¼
            ctx.fillStyle = '#fbbf24';
            ctx.font = 'bold 14px sans-serif';
            ctx.fillText(weights[i].toFixed(3), x + barWidth / 2, baseY - height - 10);
        });

        // ç»˜åˆ¶å¹³å‡çº¿
        ctx.strokeStyle = '#fbbf24';
        ctx.lineWidth = 2;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        ctx.moveTo(startX - 20, baseY - 250);
        ctx.lineTo(startX + 4 * barWidth + 3 * gap + 20, baseY - 250);
        ctx.stroke();

        ctx.fillStyle = '#fbbf24';
        ctx.font = '14px sans-serif';
        ctx.fillText('ç†æƒ³åŒºåˆ†çº¿ (0.25)', canvas.width / 2, baseY - 260);

        // ç»˜åˆ¶æ ‡é¢˜
        ctx.fillStyle = '#f1f5f9';
        ctx.font = 'bold 18px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('å•å¤´æ³¨æ„åŠ›ï¼šæ‰€æœ‰æƒé‡è¶‹äºå¹³å‡', canvas.width / 2, 30);
    }

    // è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°
    function calculateAttention() {
        drawAttentionVisualization();
        document.getElementById('attention-analysis').style.display = 'block';
    }

    // Canvas å¯è§†åŒ– - ç»´åº¦åˆ†å‰²
    function drawDimensionSplit() {
        const canvas = document.getElementById('dimension-split-viz');
        const ctx = canvas.getContext('2d');

        const dModel = parseInt(document.getElementById('d-model-slider').value);
        const numHeads = parseInt(document.getElementById('num-heads-slider').value);

        // è®¾ç½®ç”»å¸ƒå°ºå¯¸
        canvas.width = 800;
        canvas.height = 300;

        // æ¸…ç©ºç”»å¸ƒ
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // æ£€æŸ¥æ˜¯å¦å¯ä»¥æ•´é™¤
        if (dModel % numHeads !== 0) {
            document.getElementById('dimension-warning').style.display = 'block';
            document.getElementById('dimension-insight').style.display = 'none';
            return;
        } else {
            document.getElementById('dimension-warning').style.display = 'none';
            document.getElementById('dimension-insight').style.display = 'block';
        }

        const dK = dModel / numHeads;
        document.getElementById('d-k-value').textContent = dK;
        document.getElementById('dimension-insight').querySelector('.tip-content').innerHTML =
            `<strong>å½“å‰é…ç½®ï¼š</strong>${numHeads}ä¸ªå¤´ï¼Œæ¯ä¸ªå¤´å¤„ç†${dK}ç»´ã€‚å‚æ•°æ€»é‡ä¿æŒä¸å˜ï¼`;

        // ç»˜åˆ¶èƒŒæ™¯
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶ç»´åº¦å—
        const blockWidth = 600 / dModel;
        const startX = 100;
        const y = 100;
        const height = 100;

        // é¢œè‰²æ•°ç»„
        const colors = [
            '#ef4444', '#f97316', '#fbbf24', '#22c55e',
            '#06b6d4', '#3b82f6', '#8b5cf6', '#ec4899'
        ];

        // ç»˜åˆ¶æ¯ä¸ªç»´åº¦
        for (let i = 0; i < dModel; i++) {
            const headIndex = Math.floor(i / dK) % colors.length;
            const x = startX + i * blockWidth;

            // ç»˜åˆ¶ç»´åº¦å—
            ctx.fillStyle = colors[headIndex] + '60';
            ctx.fillRect(x, y, blockWidth - 2, height);

            // ç»˜åˆ¶è¾¹æ¡†
            ctx.strokeStyle = colors[headIndex];
            ctx.lineWidth = 2;
            ctx.strokeRect(x, y, blockWidth - 2, height);

            // æ¯ä¸ªå¤´çš„ç¬¬ä¸€ä¸ªç»´åº¦æ·»åŠ æ ‡ç­¾
            if (i % dK === 0 && i / dK < numHeads) {
                ctx.fillStyle = colors[headIndex];
                ctx.font = 'bold 14px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText(`Head ${Math.floor(i / dK) + 1}`, x + (dK * blockWidth) / 2, y - 10);
            }
        }

        // ç»˜åˆ¶æ ‡é¢˜
        ctx.fillStyle = '#f1f5f9';
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`ç»´åº¦åˆ†å‰²ç¤ºæ„ï¼š${dModel}ç»´ â†’ ${numHeads}ä¸ªå¤´ Ã— ${dK}ç»´/å¤´`, canvas.width / 2, 40);
    }

    // æ»‘å—äº‹ä»¶ç›‘å¬
    document.getElementById('d-model-slider').addEventListener('input', (e) => {
        document.getElementById('d-model-value').textContent = e.target.value;
        drawDimensionSplit();
    });

    document.getElementById('num-heads-slider').addEventListener('input', (e) => {
        document.getElementById('num-heads-value').textContent = e.target.value;
        drawDimensionSplit();
    });

    // Canvas å¯è§†åŒ– - å¹¶è¡Œè®¡ç®—åŠ¨ç”»
    function drawParallelComputation() {
        const canvas = document.getElementById('parallel-computation-viz');
        const ctx = canvas.getContext('2d');

        canvas.width = 800;
        canvas.height = 600;

        // æ¸…ç©ºç”»å¸ƒ
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶èƒŒæ™¯
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶è¾“å…¥
        ctx.fillStyle = '#f1f5f9';
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('è¾“å…¥åºåˆ—ï¼š"çº¢è‰² è‹¹æœ å¾ˆ ç”œ"', canvas.width / 2, 50);

        // ç»˜åˆ¶QKVå˜æ¢
        const startY = 100;
        ctx.fillStyle = 'rgba(139, 92, 246, 0.2)';
        ctx.fillRect(300, startY, 200, 60);
        ctx.strokeStyle = '#8b5cf6';
        ctx.strokeRect(300, startY, 200, 60);
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '14px sans-serif';
        ctx.fillText('QKV Linear', 400, startY + 35);

        // ç»˜åˆ¶åˆ†å‰²
        const heads = ['Head 1', 'Head 2', 'Head 3', 'Head 4'];
        const colors = ['#ef4444', '#fbbf24', '#22c55e', '#06b6d4'];
        const headY = startY + 120;

        heads.forEach((head, i) => {
            const x = 150 + i * 150;

            // ç»˜åˆ¶å¤´éƒ¨æ¡†
            ctx.fillStyle = colors[i] + '30';
            ctx.fillRect(x, headY, 120, 200);
            ctx.strokeStyle = colors[i];
            ctx.lineWidth = 2;
            ctx.strokeRect(x, headY, 120, 200);

            // ç»˜åˆ¶æ ‡é¢˜
            ctx.fillStyle = colors[i];
            ctx.font = 'bold 14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(head, x + 60, headY + 25);

            // ç»˜åˆ¶æ³¨æ„åŠ›è®¡ç®—æ­¥éª¤
            const steps = ['QÃ—K^T', 'Softmax', 'AttnÃ—V'];
            steps.forEach((step, j) => {
                ctx.fillStyle = colors[i] + '20';
                ctx.fillRect(x + 10, headY + 50 + j * 50, 100, 35);
                ctx.fillStyle = '#f1f5f9';
                ctx.font = '12px sans-serif';
                ctx.fillText(step, x + 60, headY + 70 + j * 50);
            });

            // ç»˜åˆ¶ç®­å¤´
            ctx.strokeStyle = colors[i];
            ctx.beginPath();
            ctx.moveTo(400, startY + 60);
            ctx.lineTo(x + 60, headY);
            ctx.stroke();
        });

        // ç»˜åˆ¶åˆå¹¶
        const mergeY = headY + 250;
        ctx.fillStyle = 'rgba(251, 191, 36, 0.2)';
        ctx.fillRect(300, mergeY, 200, 60);
        ctx.strokeStyle = '#fbbf24';
        ctx.strokeRect(300, mergeY, 200, 60);
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '14px sans-serif';
        ctx.fillText('Concat + W_O', 400, mergeY + 35);

        // ç»˜åˆ¶ä»å„å¤´åˆ°åˆå¹¶çš„ç®­å¤´
        heads.forEach((head, i) => {
            const x = 150 + i * 150 + 60;
            ctx.strokeStyle = colors[i];
            ctx.beginPath();
            ctx.moveTo(x, headY + 200);
            ctx.lineTo(400, mergeY);
            ctx.stroke();
        });

        // ç»˜åˆ¶è¾“å‡º
        ctx.fillStyle = '#f1f5f9';
        ctx.font = 'bold 16px sans-serif';
        ctx.fillText('è¾“å‡ºï¼šä¸°å¯Œçš„å¤šç»´è¡¨ç¤º', canvas.width / 2, mergeY + 100);
    }

    // åŠ¨ç”»æ§åˆ¶
    let animationFrame = null;
    function animateParallelComputation() {
        // ç®€å•çš„é‡ç»˜åŠ¨ç”»
        drawParallelComputation();

        // æ·»åŠ åŠ¨ç”»æ•ˆæœï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼‰
        const button = event.target;
        button.disabled = true;
        button.textContent = 'åŠ¨ç”»æ’­æ”¾ä¸­...';

        setTimeout(() => {
            button.disabled = false;
            button.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg> æ’­æ”¾åŠ¨ç”»';
        }, 2000);
    }

    function resetVisualization() {
        drawParallelComputation();
    }

    // æ€§èƒ½å¯¹æ¯”å®éªŒ
    function drawPerformanceChart() {
        const canvas = document.getElementById('performance-chart');
        const ctx = canvas.getContext('2d');

        canvas.width = 800;
        canvas.height = 400;

        // æ¸…ç©ºç”»å¸ƒ
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ç»˜åˆ¶èƒŒæ™¯
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // æ¨¡æ‹Ÿæ•°æ®
        const task = document.getElementById('task-selector').value;
        const data = {
            'syntax': { single: 0.65, multi: 0.92 },
            'semantic': { single: 0.70, multi: 0.88 },
            'sentiment': { single: 0.68, multi: 0.90 },
            'overall': { single: 0.67, multi: 0.90 }
        };

        const scores = data[task];

        // ç»˜åˆ¶å›¾è¡¨
        const barWidth = 150;
        const gap = 100;
        const startX = (canvas.width - (barWidth * 2 + gap)) / 2;
        const maxHeight = 250;
        const baseY = 320;

        // å•å¤´æ³¨æ„åŠ›
        const singleHeight = scores.single * maxHeight;
        ctx.fillStyle = 'rgba(239, 68, 68, 0.8)';
        ctx.fillRect(startX, baseY - singleHeight, barWidth, singleHeight);

        ctx.fillStyle = '#f1f5f9';
        ctx.font = '16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('å•å¤´æ³¨æ„åŠ›', startX + barWidth / 2, baseY + 25);
        ctx.fillText((scores.single * 100).toFixed(1) + '%', startX + barWidth / 2, baseY - singleHeight - 10);

        // å¤šå¤´æ³¨æ„åŠ›
        const multiHeight = scores.multi * maxHeight;
        ctx.fillStyle = 'rgba(34, 197, 94, 0.8)';
        ctx.fillRect(startX + barWidth + gap, baseY - multiHeight, barWidth, multiHeight);

        ctx.fillText('å¤šå¤´æ³¨æ„åŠ›', startX + barWidth + gap + barWidth / 2, baseY + 25);
        ctx.fillText((scores.multi * 100).toFixed(1) + '%', startX + barWidth + gap + barWidth / 2, baseY - multiHeight - 10);

        // ç»˜åˆ¶æ ‡é¢˜
        ctx.font = 'bold 18px sans-serif';
        ctx.fillText(`${task === 'syntax' ? 'è¯­æ³•åˆ†æ' : task === 'semantic' ? 'è¯­ä¹‰ç†è§£' : task === 'sentiment' ? 'æƒ…æ„Ÿåˆ†æ' : 'ç»¼åˆä»»åŠ¡'}æ€§èƒ½å¯¹æ¯”`, canvas.width / 2, 30);

        // æ˜¾ç¤ºæ´å¯Ÿ
        const improvement = ((scores.multi - scores.single) / scores.single * 100).toFixed(1);
        document.getElementById('performance-summary').textContent =
            `å¤šå¤´æ³¨æ„åŠ›åœ¨${task === 'syntax' ? 'è¯­æ³•åˆ†æ' : task === 'semantic' ? 'è¯­ä¹‰ç†è§£' : task === 'sentiment' ? 'æƒ…æ„Ÿåˆ†æ' : 'ç»¼åˆä»»åŠ¡'}ä»»åŠ¡ä¸Šçš„æ€§èƒ½æå‡äº†${improvement}%ï¼è¿™è¯æ˜äº†å¤šå¤´æœºåˆ¶èƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰ä¸åŒç±»å‹çš„è¯­è¨€ç‰¹å¾ã€‚`;
        document.getElementById('performance-insight').style.display = 'block';
    }

    function runPerformanceTest() {
        drawPerformanceChart();
    }

    // æ£€æŸ¥ç­”æ¡ˆåŠŸèƒ½
    function checkAnswer() {
        const answers = [
            'd_model // num_heads',
            'd_model',
            'd_model',
            'self.d_k',
            'self.num_heads',
            '1, 2',
            'math.sqrt(self.d_k)',
            '-1',
            'd_model'
        ];

        const feedback = document.getElementById('answer-feedback');
        feedback.innerHTML = `<strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong><br>
1. d_model // num_heads - æ¯ä¸ªå¤´çš„ç»´åº¦æ˜¯æ€»ç»´åº¦é™¤ä»¥å¤´æ•°<br>
2. d_model - W_qçš„è¾“å‡ºè¿˜æ˜¯d_modelç»´ï¼ˆä¹‹åæ‰åˆ†å‰²ï¼‰<br>
3. d_model - W_oçš„è¾“å…¥æ˜¯æ‹¼æ¥åçš„d_modelç»´<br>
4. self.d_k - æ¯ä¸ªå¤´å¤„ç†d_kç»´<br>
5. self.num_heads - å¤´æ•°<br>
6. 1, 2 - äº¤æ¢ç¬¬1å’Œç¬¬2ç»´åº¦<br>
7. math.sqrt(self.d_k) - ç¼©æ”¾å› å­æ˜¯âˆšd_k<br>
8. -1 - åœ¨æœ€åä¸€ä¸ªç»´åº¦ï¼ˆé”®çš„ç»´åº¦ï¼‰åšsoftmax<br>
9. d_model - æ‹¼æ¥åæ¢å¤åˆ°d_modelç»´`;
        feedback.classList.add('show');
    }

    // æ¸…å•åŠŸèƒ½
    function toggleCheck(checkbox) {
        checkbox.classList.toggle('checked');
    }

    function downloadChecklist() {
        // è¿™é‡Œå¯ä»¥ç”ŸæˆPDFæˆ–å…¶ä»–æ ¼å¼
        alert('ä¸‹è½½åŠŸèƒ½å¼€å‘ä¸­...\n\næ‚¨å¯ä»¥å…ˆæˆªå›¾ä¿å­˜æ¸…å•ï¼Œæˆ–å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š\n\n' +
            'â–¡ å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆå¤šå¤´æ³¨æ„åŠ›ï¼ˆ30åˆ†é’Ÿï¼‰\n' +
            'â–¡ å¯è§†åŒ–ä¸åŒå¤´çš„æ³¨æ„åŠ›æ¨¡å¼ï¼ˆ20åˆ†é’Ÿï¼‰\n' +
            'â–¡ å¯¹æ¯”å•å¤´å’Œå¤šå¤´åœ¨å®é™…ä»»åŠ¡ä¸Šçš„æ•ˆæœï¼ˆ40åˆ†é’Ÿï¼‰\n' +
            'â–¡ é˜…è¯»Transformerè®ºæ–‡çš„Multi-Head Attentionç« èŠ‚ï¼ˆé€‰åšï¼‰');
    }

    function shareToNotion() {
        // è¿™é‡Œå¯ä»¥å®ç°å¯¼å‡ºåˆ°Notionçš„åŠŸèƒ½
        alert('Notionå¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­...\n\næ‚¨å¯ä»¥å°†æœ¬é¡µé¢çš„URLä¿å­˜åˆ°Notionä¸­ã€‚');
    }

    // åé¦ˆåŠŸèƒ½
    function submitFeedback(type) {
        // è¿™é‡Œå¯ä»¥å‘é€åˆ°åˆ†ææœåŠ¡
        console.log('Feedback:', type);
        alert('æ„Ÿè°¢æ‚¨çš„åé¦ˆï¼æˆ‘ä»¬ä¼šç»§ç»­æ”¹è¿›æ•™ç¨‹ã€‚');
    }

    // åˆå§‹åŒ–æ‰€æœ‰å¯è§†åŒ–
    window.addEventListener('load', () => {
        drawAttentionVisualization();
        drawDimensionSplit();
        drawParallelComputation();
        updateProgressBar();
    });

    // å¤„ç†æ‰“å°
    window.addEventListener('beforeprint', () => {
        document.body.classList.add('printing');
    });

    window.addEventListener('afterprint', () => {
        document.body.classList.remove('printing');
    });
</script>

</body>
</html>