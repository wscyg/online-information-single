
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬8ç« ï¼šä½ç½®ç¼–ç çš„æ™ºæ…§</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap');

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            color: #e2e8f0;
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes position-wave {
            0%, 100% {
                background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.05));
                border-color: rgba(59, 130, 246, 0.3);
            }
            50% {
                background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.1));
                border-color: rgba(59, 130, 246, 0.5);
            }
        }

        @keyframes sequence-flow {
            0% { transform: translateX(-10px); opacity: 0.7; }
            50% { transform: translateX(10px); opacity: 1; }
            100% { transform: translateX(-10px); opacity: 0.7; }
        }

        @keyframes sine-wave {
            0% { transform: translateY(0px); }
            25% { transform: translateY(-8px); }
            50% { transform: translateY(0px); }
            75% { transform: translateY(8px); }
            100% { transform: translateY(0px); }
        }

        @keyframes matrix-highlight {
            0%, 100% { background: rgba(59, 130, 246, 0.1); }
            50% { background: rgba(59, 130, 246, 0.3); }
        }

        @keyframes position-highlight {
            0%, 100% {
                box-shadow: 0 0 20px rgba(147, 51, 234, 0.3);
                border-color: rgba(147, 51, 234, 0.5);
            }
            50% {
                box-shadow: 0 0 40px rgba(147, 51, 234, 0.6);
                border-color: rgba(147, 51, 234, 0.8);
            }
        }

        /* å®¹å™¨æ ·å¼ */
        .chapter-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* ç« èŠ‚å¤´éƒ¨ */
        .chapter-header {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.1));
            border-radius: 24px;
            padding: 3rem;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(59, 130, 246, 0.3);
            text-align: center;
        }

        .chapter-header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.1) 0%, transparent 70%);
            animation: sequence-flow 15s ease-in-out infinite;
        }

        .chapter-header h1 {
            font-size: 2.8rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6, #9333ea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            position: relative;
            z-index: 2;
        }

        .chapter-header p {
            font-size: 1.3rem;
            color: #cbd5e1;
            margin-bottom: 2rem;
            position: relative;
            z-index: 2;
        }

        .meta-tags {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            position: relative;
            z-index: 2;
        }

        .meta-tag {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: 1px solid rgba(59, 130, 246, 0.4);
        }

        /* ä¸»è¦åŒºå—æ ·å¼ */
        .solution-section {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.8), rgba(30, 41, 59, 0.6));
            border-radius: 20px;
            padding: 2.5rem;
            margin: 3rem 0;
            border: 2px solid rgba(59, 130, 246, 0.2);
            position: relative;
            overflow: hidden;
            box-shadow: 0 16px 64px rgba(0, 0, 0, 0.3);
        }

        /* è§£å†³æ–¹æ¡ˆåŒºå— */
        .solution-discovery {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(147, 51, 234, 0.1));
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 20px;
            padding: 2.5rem;
            margin: 2rem 0;
            position: relative;
            animation: position-wave 8s infinite;
        }

        .solution-title {
            color: #3b82f6;
            font-weight: bold;
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        /* ä½ç½®ç¼–ç æ ·å¼ */
        .position-section {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.15), rgba(168, 85, 247, 0.1));
            border: 2px solid rgba(147, 51, 234, 0.4);
            border-radius: 20px;
            padding: 2.5rem;
            margin: 2rem 0;
            position: relative;
        }

        .position-title {
            color: #9333ea;
            font-weight: bold;
            font-size: 1.4rem;
            margin-bottom: 1.5rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
        }

        /* åºåˆ—å¯è§†åŒ– */
        .sequence-visual {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
            padding: 2rem;
            background: rgba(15, 23, 42, 0.9);
            border-radius: 12px;
            flex-wrap: wrap;
        }

        .token {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(147, 51, 234, 0.2));
            color: #e2e8f0;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            border: 1px solid rgba(59, 130, 246, 0.4);
            font-family: 'JetBrains Mono', monospace;
            font-weight: bold;
            position: relative;
            transition: all 0.3s ease;
        }

        .token:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }

        .token-position {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(147, 51, 234, 0.9);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 10px;
            font-size: 0.7rem;
        }

        /* çŸ©é˜µæ˜¾ç¤ºæ ·å¼ */
        .matrix {
            display: inline-block;
            background: rgba(15, 23, 42, 0.9);
            border: 2px solid rgba(147, 51, 234, 0.4);
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            position: relative;
        }

        .matrix-animated {
            animation: position-highlight 4s infinite;
        }

        .matrix table {
            border-collapse: collapse;
            margin: 0;
        }

        .matrix td {
            padding: 0.3rem 0.6rem;
            text-align: center;
            border: 1px solid rgba(147, 51, 234, 0.2);
            min-width: 80px;
        }

        .matrix-label {
            position: absolute;
            top: -15px;
            left: 10px;
            background: rgba(147, 51, 234, 0.9);
            color: white;
            padding: 0.2rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        /* è®¡ç®—æ­¥éª¤æ ·å¼ */
        .calculation-step {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem 0;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 1rem;
            font-size: 0.9rem;
        }

        .step-title {
            color: #3b82f6;
            font-weight: bold;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }

        /* æ•°å­¦å…¬å¼æ ·å¼ */
        .math-formula {
            background: rgba(15, 23, 42, 0.9);
            border: 2px solid rgba(147, 51, 234, 0.4);
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
        }

        .fraction {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            margin: 0 0.5rem;
        }

        .fraction .numerator {
            display: block;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 0.2rem;
            margin-bottom: 0.2rem;
        }

        .fraction .denominator {
            display: block;
            padding-top: 0.2rem;
        }

        /* å®éªŒæ•°æ®è¡¨æ ¼ */
        .data-table {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
        }

        .data-table table {
            width: 100%;
            border-collapse: collapse;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }

        .data-table th {
            background: rgba(147, 51, 234, 0.3);
            color: #9333ea;
            padding: 1rem;
            border: 1px solid rgba(147, 51, 234, 0.3);
            font-weight: bold;
        }

        .data-table td {
            padding: 0.8rem;
            border: 1px solid rgba(71, 85, 105, 0.3);
            color: #cbd5e1;
            text-align: center;
        }

        .data-table .before-data {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .data-table .after-data {
            background: rgba(34, 197, 94, 0.1);
            color: #22c55e;
        }

        .data-table .highlight {
            animation: matrix-highlight 2s infinite;
        }

        /* æ­£å¼¦æ³¢å¯è§†åŒ– */
        .sine-visualization {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 12px;
            padding: 2rem;
            margin: 1.5rem 0;
            border: 1px solid rgba(147, 51, 234, 0.3);
        }

        .wave-container {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 200px;
            position: relative;
            margin: 2rem 0;
        }

        .sine-point {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            position: absolute;
            animation: sine-wave 4s ease-in-out infinite;
        }

        .cosine-point {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: linear-gradient(45deg, #9333ea, #a855f7);
            position: absolute;
            animation: sine-wave 4s ease-in-out infinite;
            animation-delay: 1s;
        }

        /* ä»£ç ç¤ºä¾‹æ ·å¼ */
        .code-example {
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid rgba(147, 51, 234, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1rem 0;
            font-family: 'JetBrains Mono', monospace;
            overflow-x: auto;
        }

        .code-example pre {
            margin: 0;
            color: #e2e8f0;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .code-highlight {
            color: #3b82f6;
            font-weight: bold;
        }

        .code-comment {
            color: #64748b;
            font-style: italic;
        }

        .code-keyword {
            color: #9333ea;
        }

        .code-string {
            color: #fbbf24;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .chapter-container {
                padding: 1rem;
            }

            .chapter-header h1 {
                font-size: 2rem;
            }

            .meta-tags {
                flex-direction: column;
                align-items: center;
            }

            .solution-section {
                padding: 1.5rem;
            }

            .sequence-visual {
                flex-direction: column;
                gap: 0.5rem;
            }

            .matrix {
                font-size: 0.8rem;
            }

            .matrix td {
                padding: 0.2rem 0.4rem;
                min-width: 60px;
            }
        }
    </style>
</head>
<body>

<div class="chapter-container">
    <!-- ç« èŠ‚å¤´éƒ¨ -->
    <div class="chapter-header">
        <h1>ç¬¬8ç« ï¼šä½ç½®ç¼–ç çš„æ™ºæ…§</h1>
        <p>ä»åºåˆ—æ··ä¹±åˆ°å®Œç¾æ’åºï¼šè®©æœºå™¨ç†è§£"é¡ºåº"çš„æ·±åˆ»æ´å¯Ÿ</p>
        <div class="meta-tags">
            <span class="meta-tag">
                ğŸ¯ <span>åºåˆ—ç†è§£</span>
            </span>
            <span class="meta-tag">
                â±ï¸ <span>90åˆ†é’Ÿ</span>
            </span>
            <span class="meta-tag">
                ğŸ§® <span>ä¸‰è§’å‡½æ•°</span>
            </span>
            <span class="meta-tag">
                ğŸ“Š <span>çŸ©é˜µè®¡ç®—</span>
            </span>
        </div>
    </div>

    <!-- ğŸ” æ–°é—®é¢˜çš„å‘ç°ï¼šä½ç½®ç›²åŒº -->
    <div class="solution-section" style="border-color: #ef4444;">
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(239, 68, 68, 0.4);">
                <span style="font-size: 2rem;">ğŸ”</span>
                <h2 style="color: #ef4444; margin: 0; font-size: 1.8rem; font-weight: bold;">æ–°é—®é¢˜å‘ç°ï¼šæ¨¡å‹çš„ä½ç½®ç›²åŒº</h2>
            </div>
        </div>

        <!-- æˆåŠŸåçš„å›°æƒ‘ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #ef4444; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ˜ŠğŸ˜• æˆåŠŸä¸å›°æƒ‘å¹¶å­˜</div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 8px;">
                <div style="color: #22c55e; font-weight: bold; margin-bottom: 1rem;">åº†ç¥æ—¶åˆ»ï¼š</div>
                <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8; font-style: italic;">
                    "å¤ªå¥½äº†ï¼æ®‹å·®è¿æ¥å’Œå±‚å½’ä¸€åŒ–å®Œç¾è§£å†³äº†è®­ç»ƒç¨³å®šæ€§é—®é¢˜ã€‚<br>
                    ç°åœ¨24å±‚çš„Transformerå¯ä»¥ç¨³å®šè®­ç»ƒï¼Œæ¢¯åº¦ä¼ æ’­æ­£å¸¸ï¼ŒæŸå¤±å¹³æ»‘ä¸‹é™...<br><br>

                    ä½†æ˜¯..."<br><br>

                    <div style="color: #ef4444; background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 8px; border-left: 4px solid #ef4444;">
                        <strong>"ç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆç¿»è¯‘ç»“æœè¿™ä¹ˆå¥‡æ€ªï¼Ÿ"</strong><br><br>

                        è¾“å…¥ï¼š<code>"I love you"</code><br>
                        è¾“å‡ºï¼š<code>"æˆ‘ ä½  çˆ±"</code> âŒ<br><br>

                        è¾“å…¥ï¼š<code>"You love I"</code><br>
                        è¾“å‡ºï¼š<code>"æˆ‘ ä½  çˆ±"</code> âŒ<br><br>

                        <strong style="color: #fbbf24;">ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å¥å­ï¼Œå¾—åˆ°äº†ç›¸åŒçš„ç¿»è¯‘ï¼</strong>
                    </div>
                </div>
            </div>
        </div>

        <!-- é—®é¢˜åˆ†æå®éªŒ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ§ª é—®é¢˜è¯Šæ–­å®éªŒ</div>

            <div style="color: #cbd5e1; margin-bottom: 1rem;">è®©æˆ‘ä»¬æµ‹è¯•æ›´å¤šä¾‹å­ï¼š</div>

            <div class="data-table">
                <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem; text-align: center;">ğŸ“Š è¯åºæ•æ„Ÿæ€§æµ‹è¯•</div>
                <table>
                    <thead>
                    <tr>
                        <th>è¾“å…¥å¥å­</th>
                        <th>æœŸæœ›è¾“å‡º</th>
                        <th>å®é™…è¾“å‡º</th>
                        <th>é—®é¢˜</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>"The cat sits"</td>
                        <td>"çŒ«åç€"</td>
                        <td class="after-data">"çŒ«åç€"</td>
                        <td style="color: #22c55e;">âœ“ æ­£ç¡®</td>
                    </tr>
                    <tr>
                        <td>"Sits the cat"</td>
                        <td>"åç€çš„çŒ«"</td>
                        <td class="before-data">"çŒ«åç€"</td>
                        <td style="color: #ef4444;">âœ— è¯åºé”™è¯¯</td>
                    </tr>
                    <tr>
                        <td>"Cat the sits"</td>
                        <td>"(è¯­æ³•é”™è¯¯)"</td>
                        <td class="before-data">"çŒ«åç€"</td>
                        <td style="color: #ef4444;">âœ— æ— æ³•åŒºåˆ†</td>
                    </tr>
                    <tr>
                        <td>"Alice helps Bob"</td>
                        <td>"Aliceå¸®åŠ©Bob"</td>
                        <td class="after-data">"Aliceå¸®åŠ©Bob"</td>
                        <td style="color: #22c55e;">âœ“ æ­£ç¡®</td>
                    </tr>
                    <tr>
                        <td>"Bob helps Alice"</td>
                        <td>"Bobå¸®åŠ©Alice"</td>
                        <td class="before-data highlight">"Aliceå¸®åŠ©Bob"</td>
                        <td style="color: #ef4444;">âœ— å®Œå…¨ç›¸åï¼</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3); margin-top: 1rem;">
                <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">ğŸ¯ å…³é”®å‘ç°ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    æ¨¡å‹å®Œå…¨ä¸ç†è§£è¯è¯­çš„é¡ºåºï¼å¯¹äºå®ƒæ¥è¯´ï¼Œ"Alice helps Bob" å’Œ "Bob helps Alice"
                    æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œå°±åƒä¸€ä¸ªè£…äº†ç›¸åŒç‰©å“ä½†é¡ºåºä¸åŒçš„è¢‹å­ã€‚
                </div>
            </div>
        </div>

        <!-- åŸç†åˆ†æ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ”¬ æ ¹æœ¬åŸå› åˆ†æ</div>

            <div style="margin-bottom: 2rem;">
                <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem;">è®©æˆ‘ä»¬å›é¡¾è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼š</div>

                <div class="sequence-visual">
                    <div class="token">
                        <div class="token-position">0</div>
                        I
                    </div>
                    <div class="token">
                        <div class="token-position">1</div>
                        love
                    </div>
                    <div class="token">
                        <div class="token-position">2</div>
                        you
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0; color: #ef4444; font-size: 1.2rem;">
                    â¬‡ï¸ <strong>è‡ªæ³¨æ„åŠ›è®¡ç®—</strong> â¬‡ï¸
                </div>

                <div class="sequence-visual">
                    <div class="token">
                        <div class="token-position">?</div>
                        Wordâ‚
                    </div>
                    <div class="token">
                        <div class="token-position">?</div>
                        Wordâ‚‚
                    </div>
                    <div class="token">
                        <div class="token-position">?</div>
                        Wordâ‚ƒ
                    </div>
                </div>
            </div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                <h4 style="color: #ef4444; margin-bottom: 1rem;">ğŸ’¥ é—®é¢˜æ‰€åœ¨ï¼š</h4>
                <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                    <strong>è‡ªæ³¨æ„åŠ›æœºåˆ¶æ˜¯ä½ç½®æ— å…³çš„</strong>ï¼š<br>
                    â€¢ æ¯ä¸ªè¯åªæ ¹æ®<strong>å†…å®¹</strong>è®¡ç®—æ³¨æ„åŠ›æƒé‡<br>
                    â€¢ å®Œå…¨å¿½ç•¥äº†è¯è¯­åœ¨åºåˆ—ä¸­çš„<strong>ä½ç½®</strong><br>
                    â€¢ Qã€Kã€VçŸ©é˜µéƒ½åªä¾èµ–è¯å‘é‡ï¼Œä¸åŒ…å«ä½ç½®ä¿¡æ¯<br>
                    â€¢ ç»“æœï¼š"I love you" å’Œ "love you I" åœ¨æ³¨æ„åŠ›è®¡ç®—ä¸­å®Œå…¨ç­‰ä»·
                </div>
            </div>
        </div>

        <div style="background: rgba(239, 68, 68, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.3); margin-top: 2rem; text-align: center;">
            <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">ğŸš¨ æ ¸å¿ƒæŒ‘æˆ˜ç¡®è®¤</div>
            <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8;">
                æˆ‘ä»¬è§£å†³äº†<strong style="color: #22c55e;">è®­ç»ƒç¨³å®šæ€§</strong>ï¼Œ<br>
                ä½†ç°åœ¨é¢ä¸´<strong style="color: #ef4444;">ä½ç½®ç†è§£</strong>çš„æ ¹æœ¬é—®é¢˜ï¼<br><br>
                <strong style="color: #fbbf24;">å¦‚ä½•è®©æ¨¡å‹ç†è§£"é¡ºåº"ï¼Ÿ</strong>
            </div>
        </div>
    </div>

    <!-- ğŸ¤” åˆæ­¥æ€è€ƒï¼šå¦‚ä½•è¡¨ç¤ºä½ç½®ï¼Ÿ -->
    <div class="solution-section" style="border-color: #8b5cf6;">
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(139, 92, 246, 0.4);">
                <span style="font-size: 2rem;">ğŸ¤”</span>
                <h2 style="color: #8b5cf6; margin: 0; font-size: 1.8rem; font-weight: bold;">åˆæ­¥æ€è€ƒï¼šå¦‚ä½•è¡¨ç¤ºä½ç½®ï¼Ÿ</h2>
            </div>
        </div>

        <!-- ç¬¬ä¸€ç›´è§‰ï¼šç®€å•ä½ç½®ç´¢å¼• -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ’­ ç¬¬ä¸€ç›´è§‰ï¼šç®€å•çš„ä½ç½®æ•°å­—</div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 8px;">
                <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1rem;">ç ”ç©¶è€…çš„æ€è€ƒï¼š</div>
                <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8; font-style: italic;">
                    "ä½ç½®ä¿¡æ¯... è¿™ä¸å°±æ˜¯ç´¢å¼•å˜›ï¼<br><br>

                    æ¯ä¸ªè¯éƒ½æœ‰ä¸€ä¸ªä½ç½®ï¼šç¬¬0ä¸ªã€ç¬¬1ä¸ªã€ç¬¬2ä¸ª...<br>
                    æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠä½ç½®ç¼–å·åŠ åˆ°è¯å‘é‡ä¸Šï¼<br><br>

                    å°±åƒç»™æ¯ä¸ªè¯è´´ä¸€ä¸ªä½ç½®æ ‡ç­¾ï¼š"<br>
                    â€¢ I (ä½ç½®0)<br>
                    â€¢ love (ä½ç½®1)<br>
                    â€¢ you (ä½ç½®2)<br><br>

                    <strong style="color: #fbbf24;">ç®€å•ç²—æš´ï¼Œå…ˆè¯•è¯•çœ‹ï¼</strong>"
                </div>
            </div>
        </div>

        <!-- å°è¯•1ï¼šç›´æ¥ä½ç½®ç´¢å¼• -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ§ª å°è¯•1ï¼šç›´æ¥æ·»åŠ ä½ç½®ç´¢å¼•</div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">1</div>
                    å®ç°æ€è·¯ï¼šä½ç½®ç¼–å·ç›´æ¥ç›¸åŠ 
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <div style="color: #cbd5e1; margin-bottom: 1rem;">
                        åŸå§‹æ€è·¯ï¼šembedding + position_index
                    </div>

                    <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="color: #3b82f6; font-weight: bold; margin-bottom: 0.5rem;">è¯å‘é‡</div>
                            <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">
                                "I": [0.2, -0.1, 0.5, ...]<br>
                                "love": [0.8, 0.3, -0.2, ...]<br>
                                "you": [-0.1, 0.7, 0.4, ...]
                            </div>
                        </div>

                        <div style="color: #fbbf24; font-size: 1.5rem;">+</div>

                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px; text-align: center;">
                            <div style="color: #9333ea; font-weight: bold; margin-bottom: 0.5rem;">ä½ç½®ç´¢å¼•</div>
                            <div style="font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">
                                ä½ç½®0: [0, 0, 0, ...]<br>
                                ä½ç½®1: [1, 1, 1, ...]<br>
                                ä½ç½®2: [2, 2, 2, ...]
                            </div>
                        </div>
                    </div>
                </div>

                <div class="code-example" style="margin: 1.5rem 0;">
                    <pre><code><span class="code-keyword">def</span> <span class="code-highlight">add_position_encoding_v1</span>(embeddings):
    <span class="code-string">"""æœ€ç®€å•çš„ä½ç½®ç¼–ç ï¼šç›´æ¥æ·»åŠ ä½ç½®ç´¢å¼•"""</span>
    batch_size, seq_len, hidden_size = embeddings.shape

    <span class="code-comment"># åˆ›å»ºä½ç½®ç´¢å¼• [0, 1, 2, ...]</span>
    positions = torch.arange(seq_len).unsqueeze(0).unsqueeze(-1)
    positions = positions.expand(batch_size, seq_len, hidden_size)

    <span class="code-comment"># ç›´æ¥ç›¸åŠ </span>
    <span class="code-keyword">return</span> embeddings + positions.float()</code></pre>
                </div>
            </div>

            <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3); margin-top: 1rem;">
                <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">âŒ å®éªŒç»“æœï¼šå®Œå…¨å¤±è´¥</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    â€¢ çŸ­å¥å­ï¼šä½ç½®[0,1,2] è¿˜ç®—æ­£å¸¸<br>
                    â€¢ é•¿å¥å­ï¼šä½ç½®[0,1,2,...,50] æ•°å€¼è¿‡å¤§ï¼Œå®Œå…¨å‹è¿‡äº†è¯å‘é‡<br>
                    â€¢ è¯å‘é‡é€šå¸¸åœ¨[-1,1]èŒƒå›´ï¼Œä½ç½®ç´¢å¼•å´å¯èƒ½åˆ°å‡ åç”šè‡³å‡ ç™¾<br>
                    â€¢ ç»“æœï¼šæ¨¡å‹åªèƒ½"çœ‹åˆ°"ä½ç½®ï¼Œ"çœ‹ä¸åˆ°"è¯çš„å†…å®¹
                </div>
            </div>
        </div>

        <!-- å°è¯•2ï¼šå½’ä¸€åŒ–ä½ç½® -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ”§ å°è¯•2ï¼šå½’ä¸€åŒ–ä½ç½®ç¼–ç </div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <div style="color: #06b6d4; font-weight: bold; margin-bottom: 0.5rem;">ğŸ’¡ æ”¹è¿›æƒ³æ³•ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                    "æ•°å€¼å¤ªå¤§çš„é—®é¢˜å¾ˆå¥½è§£å†³ï¼æˆ‘ä»¬æŠŠä½ç½®å½’ä¸€åŒ–åˆ°[0,1]èŒƒå›´ï¼š<br>
                    â€¢ ä½ç½® / åºåˆ—é•¿åº¦<br>
                    â€¢ è¿™æ ·ä¸ç®¡å¤šé•¿çš„å¥å­ï¼Œä½ç½®éƒ½åœ¨åˆç†èŒƒå›´å†…"
                </div>
            </div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">1</div>
                    å½’ä¸€åŒ–ä½ç½®è®¡ç®—
                </div>

                <div class="data-table">
                    <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1rem; text-align: center;">ğŸ“Š ä¸åŒé•¿åº¦å¥å­çš„å½’ä¸€åŒ–ä½ç½®</div>
                    <table>
                        <thead>
                        <tr>
                            <th>å¥å­é•¿åº¦</th>
                            <th>åŸå§‹ä½ç½®</th>
                            <th>å½’ä¸€åŒ–ä½ç½®</th>
                            <th>ä½ç½®é—´è·</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>4</td>
                            <td>[0, 1, 2, 3]</td>
                            <td class="after-data">[0, 0.33, 0.67, 1.0]</td>
                            <td>0.33</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>[0, 1, 2, ..., 7]</td>
                            <td class="after-data">[0, 0.14, 0.29, ..., 1.0]</td>
                            <td>0.14</td>
                        </tr>
                        <tr>
                            <td>16</td>
                            <td>[0, 1, 2, ..., 15]</td>
                            <td class="after-data">[0, 0.07, 0.13, ..., 1.0]</td>
                            <td>0.07</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="code-example" style="margin: 1.5rem 0;">
                    <pre><code><span class="code-keyword">def</span> <span class="code-highlight">add_position_encoding_v2</span>(embeddings):
    <span class="code-string">"""å½’ä¸€åŒ–ä½ç½®ç¼–ç """</span>
    batch_size, seq_len, hidden_size = embeddings.shape

    <span class="code-comment"># å½’ä¸€åŒ–ä½ç½® [0, 1/n, 2/n, ..., (n-1)/n]</span>
    positions = torch.arange(seq_len).float() / seq_len
    positions = positions.unsqueeze(0).unsqueeze(-1)
    positions = positions.expand(batch_size, seq_len, hidden_size)

    <span class="code-keyword">return</span> embeddings + positions</code></pre>
                </div>
            </div>

            <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3); margin-top: 1rem;">
                <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">âŒ æ–°é—®é¢˜å‡ºç°ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    â€¢ <strong>ç›¸å¯¹ä½ç½®æ··æ·†</strong>ï¼šé•¿å¥ä¸­ä½ç½®0.1å’Œ0.2å¾ˆè¿‘ï¼ŒçŸ­å¥ä¸­å´å¾ˆè¿œ<br>
                    â€¢ <strong>åˆ†è¾¨ç‡é—®é¢˜</strong>ï¼šé•¿å¥å­çš„ç›¸é‚»ä½ç½®åŒºåˆ†åº¦å¤ªå°<br>
                    â€¢ <strong>æ³›åŒ–å›°éš¾</strong>ï¼šè®­ç»ƒæ—¶è§è¿‡é•¿åº¦8ï¼Œæµ‹è¯•æ—¶é•¿åº¦16å°±é¢„æµ‹å¤±è´¥<br>
                    â€¢ <strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šç›¸åŒçš„å½’ä¸€åŒ–ä½ç½®ï¼Œåœ¨ä¸åŒé•¿åº¦ä¸‹å«ä¹‰å®Œå…¨ä¸åŒ
                </div>
            </div>
        </div>

        <!-- å°è¯•3ï¼šç‹¬çƒ­ç¼–ç ä½ç½® -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ’š å°è¯•3ï¼šç‹¬çƒ­ç¼–ç ä½ç½®</div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ğŸ¯ æ–°æ€è·¯ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                    "æ—¢ç„¶æ•°å€¼ç¼–ç æœ‰é—®é¢˜ï¼Œé‚£å°±ç”¨ç‹¬çƒ­ç¼–ç ï¼<br>
                    æ¯ä¸ªä½ç½®ç”¨ä¸€ä¸ªå”¯ä¸€çš„å‘é‡è¡¨ç¤ºï¼Œå½¼æ­¤æ­£äº¤ï¼Œç»å¯¹ä¸ä¼šæ··æ·†ã€‚"
                </div>
            </div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">1</div>
                    ç‹¬çƒ­ä½ç½®ç¼–ç è®¾è®¡
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <div style="color: #cbd5e1; margin-bottom: 1rem;">
                        æ¯ä¸ªä½ç½®å¯¹åº”ä¸€ä¸ªç‹¬çƒ­å‘é‡ï¼ˆå‡è®¾æœ€å¤§é•¿åº¦=4ï¼‰
                    </div>

                    <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                        <div class="matrix">
                            <div class="matrix-label">ä½ç½®ç¼–ç çŸ©é˜µ</div>
                            <table>
                                <tr>
                                    <td style="background: rgba(34, 197, 94, 0.3);">1</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>0</td>
                                    <td style="background: rgba(34, 197, 94, 0.3);">1</td>
                                    <td>0</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>0</td>
                                    <td>0</td>
                                    <td style="background: rgba(34, 197, 94, 0.3);">1</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td>0</td>
                                    <td>0</td>
                                    <td>0</td>
                                    <td style="background: rgba(34, 197, 94, 0.3);">1</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="code-example" style="margin: 1.5rem 0;">
                    <pre><code><span class="code-keyword">def</span> <span class="code-highlight">add_position_encoding_v3</span>(embeddings, max_len=512):
    <span class="code-string">"""ç‹¬çƒ­ä½ç½®ç¼–ç """</span>
    batch_size, seq_len, hidden_size = embeddings.shape

    <span class="code-comment"># åˆ›å»ºç‹¬çƒ­ä½ç½®ç¼–ç </span>
    position_encoding = torch.zeros(max_len, hidden_size)
    <span class="code-keyword">for</span> pos <span class="code-keyword">in</span> range(max_len):
        position_encoding[pos, pos % hidden_size] = 1.0

    <span class="code-comment"># æˆªå–éœ€è¦çš„é•¿åº¦</span>
    pos_enc = position_encoding[:seq_len].unsqueeze(0)
    pos_enc = pos_enc.expand(batch_size, seq_len, hidden_size)

    <span class="code-keyword">return</span> embeddings + pos_enc</code></pre>
                </div>
            </div>

            <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3); margin-top: 1rem;">
                <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">âŒ è‡´å‘½ç¼ºé™·ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    â€¢ <strong>ç»´åº¦é™åˆ¶</strong>ï¼šå¦‚æœhidden_size=512ï¼Œæœ€å¤šåªèƒ½è¡¨ç¤º512ä¸ªä½ç½®<br>
                    â€¢ <strong>ç¨€ç–æ€§é—®é¢˜</strong>ï¼šæ¯ä¸ªä½ç½®å‘é‡åªæœ‰ä¸€ä¸ª1ï¼Œå…¶ä½™å…¨æ˜¯0ï¼Œä¿¡æ¯å¯†åº¦æä½<br>
                    â€¢ <strong>ç›¸ä¼¼æ€§ç¼ºå¤±</strong>ï¼šç›¸é‚»ä½ç½®å®Œå…¨æ­£äº¤ï¼Œæ²¡æœ‰"è·ç¦»"æ¦‚å¿µ<br>
                    â€¢ <strong>æ‰©å±•æ€§å·®</strong>ï¼šæ— æ³•å¤„ç†è¶…è¿‡é¢„è®¾é•¿åº¦çš„åºåˆ—
                </div>
            </div>
        </div>

        <div style="background: rgba(239, 68, 68, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(239, 68, 68, 0.3); margin-top: 2rem; text-align: center;">
            <div style="color: #ef4444; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">ğŸ’” åˆæ­¥å°è¯•å…¨éƒ¨å¤±è´¥</div>
            <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8;">
                ç®€å•çš„æ•°å€¼æ–¹æ³•éƒ½æœ‰æ ¹æœ¬æ€§ç¼ºé™·...<br>
                æˆ‘ä»¬éœ€è¦æ›´æ·±å…¥çš„æ€è€ƒï¼š<br><br>
                <strong style="color: #fbbf24;">"ä»€ä¹ˆæ‰æ˜¯ç†æƒ³çš„ä½ç½®ç¼–ç ï¼Ÿ"</strong>
            </div>
        </div>
    </div>

    <!-- ğŸ’¡ æ·±åº¦æ€è€ƒï¼šç†æƒ³ä½ç½®ç¼–ç çš„ç‰¹æ€§ -->
    <div class="solution-section" style="border-color: #fbbf24;">
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(251, 191, 36, 0.4);">
                <span style="font-size: 2rem;">ğŸ’¡</span>
                <h2 style="color: #fbbf24; margin: 0; font-size: 1.8rem; font-weight: bold;">æ·±åº¦æ€è€ƒï¼šç†æƒ³ä½ç½®ç¼–ç çš„ç‰¹æ€§</h2>
            </div>
        </div>

        <!-- æ·±å…¥åˆ†æéœ€æ±‚ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ¯ ç†æƒ³ä½ç½®ç¼–ç åº”è¯¥å…·å¤‡ä»€ä¹ˆç‰¹æ€§ï¼Ÿ</div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 8px;">
                <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1rem;">ç³»ç»Ÿæ€§æ€è€ƒï¼š</div>
                <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8; font-style: italic;">
                    "è®©æˆ‘é‡æ–°æ€è€ƒè¿™ä¸ªé—®é¢˜ã€‚ä½ç½®ç¼–ç ä¸æ˜¯ç®€å•çš„'æ ‡ç­¾'ï¼Œ<br>
                    å®ƒéœ€è¦ä¼ è¾¾ä¸°å¯Œçš„ä½ç½®ä¿¡æ¯ç»™æ³¨æ„åŠ›æœºåˆ¶...<br><br>

                    ç†æƒ³çš„ä½ç½®ç¼–ç åº”è¯¥æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ï¼Ÿ"
                </div>
            </div>
        </div>

        <!-- éœ€æ±‚åˆ†æ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ“‹ æ ¸å¿ƒéœ€æ±‚æ¸…å•</div>

            <div style="display: grid; gap: 1.5rem;">
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #22c55e;">
                    <h4 style="color: #22c55e; margin-bottom: 0.5rem;">âœ… 1. å”¯ä¸€æ€§ (Uniqueness)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        æ¯ä¸ªä½ç½®éƒ½å¿…é¡»æœ‰å”¯ä¸€çš„ç¼–ç ï¼Œä¸èƒ½æœ‰ä¸¤ä¸ªä½ç½®çš„ç¼–ç ç›¸åŒ<br>
                        <strong>æ•°å­¦è¡¨è¾¾</strong>ï¼šPE(i) â‰  PE(j) when i â‰  j
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #3b82f6;">
                    <h4 style="color: #3b82f6; margin-bottom: 0.5rem;">ğŸ“ 2. è·ç¦»æ„ŸçŸ¥ (Distance Awareness)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        ç›¸é‚»ä½ç½®çš„ç¼–ç åº”è¯¥ç›¸ä¼¼ï¼Œè·ç¦»è¿œçš„ä½ç½®ç¼–ç åº”è¯¥å·®å¼‚æ›´å¤§<br>
                        <strong>ç›´è§‰</strong>ï¼šä½ç½®5å’Œä½ç½®6åº”è¯¥æ¯”ä½ç½®5å’Œä½ç½®50æ›´ç›¸ä¼¼
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #8b5cf6;">
                    <h4 style="color: #8b5cf6; margin-bottom: 0.5rem;">ğŸ”„ 3. ç›¸å¯¹ä½ç½®ä¸€è‡´æ€§ (Relative Consistency)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        ç›¸åŒçš„ç›¸å¯¹è·ç¦»åº”è¯¥æœ‰ç›¸ä¼¼çš„è¡¨ç¤º<br>
                        <strong>ä¾‹å­</strong>ï¼š(1,3)å’Œ(5,7)éƒ½æ˜¯è·ç¦»2ï¼Œåº”è¯¥æœ‰ç›¸ä¼¼çš„ç›¸å¯¹å…³ç³»ç¼–ç 
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #fbbf24;">
                    <h4 style="color: #fbbf24; margin-bottom: 0.5rem;">â™¾ï¸ 4. é•¿åº¦æ— å…³æ€§ (Length Independence)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        ä½ç½®ç¼–ç ä¸åº”è¯¥ä¾èµ–åºåˆ—çš„æ€»é•¿åº¦<br>
                        <strong>è¦æ±‚</strong>ï¼šä½ç½®5åœ¨é•¿åº¦10çš„åºåˆ—å’Œé•¿åº¦100çš„åºåˆ—ä¸­åº”è¯¥æœ‰ç›¸åŒç¼–ç 
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #06b6d4;">
                    <h4 style="color: #06b6d4; margin-bottom: 0.5rem;">ğŸšï¸ 5. æ•°å€¼ç¨³å®šæ€§ (Numerical Stability)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        ç¼–ç å€¼åº”è¯¥åœ¨åˆç†èŒƒå›´å†…ï¼Œä¸ä¼šå‹è¿‡è¯å‘é‡<br>
                        <strong>å»ºè®®</strong>ï¼šç¼–ç å€¼æœ€å¥½åœ¨[-1, 1]èŒƒå›´å†…
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #9333ea;">
                    <h4 style="color: #9333ea; margin-bottom: 0.5rem;">ğŸš€ 6. å¤–æ¨èƒ½åŠ› (Extrapolation)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        èƒ½å¤Ÿå¤„ç†è®­ç»ƒæ—¶æœªè§è¿‡çš„æ›´é•¿åºåˆ—<br>
                        <strong>åœºæ™¯</strong>ï¼šè®­ç»ƒæ—¶æœ€é•¿512ï¼Œæ¨ç†æ—¶èƒ½å¤„ç†1024é•¿åº¦
                    </div>
                </div>
            </div>
        </div>

        <!-- ç°æœ‰æ–¹æ¡ˆçš„é—®é¢˜æ€»ç»“ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #ef4444; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">âŒ ç°æœ‰æ–¹æ¡ˆä¸ºä»€ä¹ˆéƒ½ä¸è¡Œï¼Ÿ</div>

            <div class="data-table">
                <table>
                    <thead>
                    <tr>
                        <th>æ–¹æ¡ˆ</th>
                        <th>å”¯ä¸€æ€§</th>
                        <th>è·ç¦»æ„ŸçŸ¥</th>
                        <th>ç›¸å¯¹ä¸€è‡´æ€§</th>
                        <th>é•¿åº¦æ— å…³</th>
                        <th>æ•°å€¼ç¨³å®š</th>
                        <th>å¤–æ¨èƒ½åŠ›</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>ç›´æ¥ç´¢å¼•</td>
                        <td class="after-data">âœ“</td>
                        <td class="after-data">âœ“</td>
                        <td class="after-data">âœ“</td>
                        <td class="after-data">âœ“</td>
                        <td class="before-data">âœ—</td>
                        <td class="after-data">âœ“</td>
                    </tr>
                    <tr>
                        <td>å½’ä¸€åŒ–ä½ç½®</td>
                        <td class="after-data">âœ“</td>
                        <td class="before-data">âœ—</td>
                        <td class="before-data">âœ—</td>
                        <td class="before-data">âœ—</td>
                        <td class="after-data">âœ“</td>
                        <td class="before-data">âœ—</td>
                    </tr>
                    <tr>
                        <td>ç‹¬çƒ­ç¼–ç </td>
                        <td class="after-data">âœ“</td>
                        <td class="before-data">âœ—</td>
                        <td class="before-data">âœ—</td>
                        <td class="after-data">âœ“</td>
                        <td class="after-data">âœ“</td>
                        <td class="before-data">âœ—</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(239, 68, 68, 0.3); margin-top: 1rem;">
                <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">ğŸ’¥ å…³é”®é—®é¢˜ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    æ²¡æœ‰ä¸€ä¸ªç®€å•æ–¹æ¡ˆèƒ½åŒæ—¶æ»¡è¶³æ‰€æœ‰è¦æ±‚ï¼<br>
                    æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°å­¦ä¸Šæ›´ç²¾å·§çš„è§£å†³æ–¹æ¡ˆ...
                </div>
            </div>
        </div>

        <div style="background: rgba(251, 191, 36, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(251, 191, 36, 0.3); margin-top: 2rem; text-align: center;">
            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">ğŸ” å¯»æ‰¾æ•°å­¦è§£å†³æ–¹æ¡ˆ</div>
            <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8;">
                æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<strong style="color: #22c55e;">æ•°å­¦å‡½æ•°</strong>ï¼Œ<br>
                èƒ½å¤Ÿä¸ºæ¯ä¸ªä½ç½®ç”Ÿæˆ<strong style="color: #3b82f6;">å”¯ä¸€ä¸”ç¨³å®š</strong>çš„å‘é‡ï¼Œ<br>
                åŒæ—¶ä¿æŒ<strong style="color: #9333ea;">è‰¯å¥½çš„è·ç¦»ç‰¹æ€§</strong>...<br><br>

                <strong style="color: #fbbf24;">"æœ‰æ²¡æœ‰è¿™æ ·çš„æ•°å­¦å·¥å…·ï¼Ÿ"</strong>
            </div>
        </div>
    </div>

    <!-- ğŸŒŠ æ•°å­¦çµæ„Ÿï¼šä»å‚…é‡Œå¶å˜æ¢åˆ°ä¸‰è§’å‡½æ•° -->
    <div class="solution-section" style="border-color: #22c55e;">
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(34, 197, 94, 0.4);">
                <span style="font-size: 2rem;">ğŸŒŠ</span>
                <h2 style="color: #22c55e; margin: 0; font-size: 1.8rem; font-weight: bold;">æ•°å­¦çµæ„Ÿï¼šä»å‚…é‡Œå¶å˜æ¢åˆ°ä¸‰è§’å‡½æ•°</h2>
            </div>
        </div>

        <!-- å‚…é‡Œå¶å˜æ¢çš„å¯å‘ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ“š æ•°å­¦ç›´è§‰çš„æ¥æº</div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 8px;">
                <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1rem;">ç ”ç©¶è€…çš„çµæ„Ÿæ—¶åˆ»ï¼š</div>
                <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8; font-style: italic;">
                    "ä½ç½®ç¼–ç ...ä½ç½®ç¼–ç ...è¿™è®©æˆ‘æƒ³èµ·äº†ä»€ä¹ˆï¼Ÿ<br><br>

                    åœ¨ä¿¡å·å¤„ç†ä¸­ï¼Œæˆ‘ä»¬ç”¨<strong style="color: #fbbf24;">å‚…é‡Œå¶å˜æ¢</strong>æŠŠä¿¡å·åˆ†è§£æˆä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢ã€‚<br>
                    æ¯ä¸ªé¢‘ç‡éƒ½æ˜¯å”¯ä¸€çš„ï¼Œç»„åˆèµ·æ¥å¯ä»¥è¡¨ç¤ºä»»ä½•ä¿¡å·...<br><br>

                    ç­‰ç­‰ï¼<strong style="color: #22c55e;">ä½ç½®ä¸å°±æ˜¯ä¸€ç»´çš„'ä¿¡å·'å—ï¼Ÿ</strong><br>
                    æˆ‘ä»¬å¯ä»¥ç”¨ä¸åŒé¢‘ç‡çš„æ­£å¼¦å’Œä½™å¼¦å‡½æ•°æ¥ç¼–ç ä½ç½®ï¼<br><br>

                    <strong style="color: #9333ea;">ä¸‰è§’å‡½æ•°çš„ç¾å¦™æ€§è´¨ï¼š</strong><br>
                    â€¢ å‘¨æœŸæ€§ä½†å¯åŒºåˆ†<br>
                    â€¢ å€¼åŸŸç¨³å®šåœ¨[-1,1]<br>
                    â€¢ ç›¸é‚»ä½ç½®è¿ç»­å˜åŒ–<br>
                    â€¢ æ•°å­¦ä¸Šä¼˜é›…ä¸”ç¨³å®š"
                </div>
            </div>
        </div>

        <!-- ä¸‰è§’å‡½æ•°çš„ä¼˜ç¾æ€§è´¨ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #3b82f6; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸŒŸ ä¸‰è§’å‡½æ•°çš„å¤©ç„¶ä¼˜åŠ¿</div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #22c55e; margin-bottom: 1rem;">âœ¨ æ•°å­¦ç¾å­¦</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        â€¢ <strong>å€¼åŸŸå›ºå®š</strong>ï¼šsin(x), cos(x) âˆˆ [-1, 1]<br>
                        â€¢ <strong>è¿ç»­æ€§</strong>ï¼šç›¸é‚»ä½ç½®ç¼–ç å¹³æ»‘å˜åŒ–<br>
                        â€¢ <strong>å‘¨æœŸæ€§</strong>ï¼šå¯ä»¥é€šè¿‡ä¸åŒé¢‘ç‡æ„é€ å”¯ä¸€æ¨¡å¼<br>
                        â€¢ <strong>æ­£äº¤æ€§</strong>ï¼šä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢ç›¸äº’ç‹¬ç«‹
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #3b82f6; margin-bottom: 1rem;">ğŸ¯ å®ç”¨ä¼˜åŠ¿</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        â€¢ <strong>è®¡ç®—æ•ˆç‡</strong>ï¼šä¸‰è§’å‡½æ•°è®¡ç®—å¿«é€Ÿ<br>
                        â€¢ <strong>æ•°å€¼ç¨³å®š</strong>ï¼šä¸ä¼šæœ‰æ¢¯åº¦æ¶ˆå¤±/çˆ†ç‚¸<br>
                        â€¢ <strong>å¤–æ¨èƒ½åŠ›</strong>ï¼šå¯ä»¥å¤„ç†ä»»æ„é•¿åº¦åºåˆ—<br>
                        â€¢ <strong>ç›¸å¯¹ä¸å˜</strong>ï¼šç›¸å¯¹ä½ç½®å…³ç³»ç¼–ç ä¸€è‡´
                    </div>
                </div>
            </div>
        </div>

        <!-- æ­£å¼¦æ³¢å¯è§†åŒ– -->
        <div class="sine-visualization">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸŒŠ ä¸åŒé¢‘ç‡æ­£å¼¦æ³¢çš„ç›´è§‚ç†è§£</div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #3b82f6; margin-bottom: 1rem; text-align: center;">ä½é¢‘æ³¢ï¼šç²—ç²’åº¦ä½ç½®</h4>
                    <div class="wave-container">
                        <div class="sine-point" style="left: 10%;"></div>
                        <div class="sine-point" style="left: 30%; animation-delay: 0.5s;"></div>
                        <div class="sine-point" style="left: 50%; animation-delay: 1s;"></div>
                        <div class="sine-point" style="left: 70%; animation-delay: 1.5s;"></div>
                        <div class="sine-point" style="left: 90%; animation-delay: 2s;"></div>
                    </div>
                    <div style="color: #cbd5e1; font-size: 0.9rem; text-align: center;">
                        é¢‘ç‡ä½ â†’ å‘¨æœŸé•¿ â†’ åŒºåˆ†å¤§èŒƒå›´ä½ç½®
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #9333ea; margin-bottom: 1rem; text-align: center;">é«˜é¢‘æ³¢ï¼šç»†ç²’åº¦ä½ç½®</h4>
                    <div class="wave-container">
                        <div class="cosine-point" style="left: 10%;"></div>
                        <div class="cosine-point" style="left: 20%; animation-delay: 0.2s;"></div>
                        <div class="cosine-point" style="left: 30%; animation-delay: 0.4s;"></div>
                        <div class="cosine-point" style="left: 40%; animation-delay: 0.6s;"></div>
                        <div class="cosine-point" style="left: 50%; animation-delay: 0.8s;"></div>
                        <div class="cosine-point" style="left: 60%; animation-delay: 1.0s;"></div>
                        <div class="cosine-point" style="left: 70%; animation-delay: 1.2s;"></div>
                        <div class="cosine-point" style="left: 80%; animation-delay: 1.4s;"></div>
                        <div class="cosine-point" style="left: 90%; animation-delay: 1.6s;"></div>
                    </div>
                    <div style="color: #cbd5e1; font-size: 0.9rem; text-align: center;">
                        é¢‘ç‡é«˜ â†’ å‘¨æœŸçŸ­ â†’ åŒºåˆ†ç›¸é‚»ä½ç½®
                    </div>
                </div>
            </div>

            <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); margin-top: 2rem; text-align: center;">
                <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ğŸ’¡ æ ¸å¿ƒæ´å¯Ÿï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    ç»„åˆå¤šä¸ªä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢ï¼Œå°±èƒ½ä¸ºæ¯ä¸ªä½ç½®åˆ›é€ ç‹¬ä¸€æ— äºŒçš„"æŒ‡çº¹"ï¼<br>
                    å°±åƒä¸åŒé¢‘ç‡çš„éŸ³ç¬¦ç»„åˆæˆç‹¬ç‰¹çš„å’Œå¼¦ä¸€æ ·ã€‚
                </div>
            </div>
        </div>
        <!-- é€æ­¥æ¨å¯¼è¿‡ç¨‹ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #9333ea; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ§ª ä»ç›´è§‰åˆ°å…¬å¼ï¼šé€æ­¥æ¨å¯¼è¿‡ç¨‹</div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">1</div>
                    åŸºæœ¬æ€è·¯ï¼šå¤šé¢‘ç‡ç»„åˆç¼–ç 
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="color: #06b6d4; font-weight: bold; margin-bottom: 0.5rem;">ğŸ’­ è®¾è®¡æ€è€ƒï¼š</div>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        "æ—¢ç„¶è¦ç”¨ä¸‰è§’å‡½æ•°ï¼Œé‚£å…·ä½“æ€ä¹ˆè®¾è®¡å‘¢ï¼Ÿ<br><br>

                        å…³é”®æ€è·¯ï¼š<strong style="color: #fbbf24;">ç”¨ä¸åŒé¢‘ç‡çš„æ­£å¼¦æ³¢ä¸ºæ¯ä¸ªç»´åº¦ç¼–ç </strong><br>
                        â€¢ é«˜é¢‘æ³¢ï¼šå˜åŒ–å¿«ï¼ŒåŒºåˆ†ç›¸é‚»ä½ç½®<br>
                        â€¢ ä½é¢‘æ³¢ï¼šå˜åŒ–æ…¢ï¼ŒåŒºåˆ†è¿œè·ç¦»ä½ç½®<br>
                        â€¢ ç»„åˆèµ·æ¥ï¼šæ¯ä¸ªä½ç½®éƒ½æœ‰å”¯ä¸€çš„'æŒ‡çº¹'"
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <div style="color: #cbd5e1; margin-bottom: 1rem;">
                        æœ€ç®€å•çš„å¼€å§‹ï¼šä¸ºæ¯ä¸ªç»´åº¦iåˆ†é…ä¸€ä¸ªé¢‘ç‡Ï‰_i
                    </div>

                    <div class="math-formula" style="background: rgba(139, 92, 246, 0.1); border-color: rgba(139, 92, 246, 0.3);">
                        <div style="color: #9333ea; font-size: 1.1rem; margin-bottom: 1rem;">
                            PE(pos, i) = sin(Ï‰_i Ã— pos)
                        </div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            é—®é¢˜ï¼šå¦‚ä½•é€‰æ‹©é¢‘ç‡Ï‰_iï¼Ÿ
                        </div>
                    </div>
                </div>
            </div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">2</div>
                    é¢‘ç‡è®¾è®¡ï¼šå‡ ä½•çº§æ•°çš„æ™ºæ…§
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ğŸ¯ å…³é”®æ´å¯Ÿï¼š</div>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        "é¢‘ç‡ä¸èƒ½éšæ„é€‰æ‹©ï¼æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç³»ç»Ÿæ€§çš„æ–¹æ¡ˆï¼š<br><br>

                        <strong style="color: #fbbf24;">å‡ ä½•çº§æ•°é€’å‡</strong>ï¼šÏ‰_i = 1 / r^i<br>
                        â€¢ ä¿è¯é¢‘ç‡ä»é«˜åˆ°ä½å¹³æ»‘è¿‡æ¸¡<br>
                        â€¢ ä¸åŒç»´åº¦çš„å‘¨æœŸå½¢æˆè‰¯å¥½çš„å±‚æ¬¡ç»“æ„<br>
                        â€¢ æ•°å­¦ä¸Šä¼˜é›…ä¸”è®¡ç®—é«˜æ•ˆ"
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <div style="color: #3b82f6; font-weight: bold; margin-bottom: 0.5rem;">é¢‘ç‡é€‰æ‹©å®éªŒ</div>
                        <div style="font-family: 'JetBrains Mono', monospace; color: #cbd5e1; font-size: 0.8rem;">
                            i=0: Ï‰_0 = 1 / r^0 = 1<br>
                            i=1: Ï‰_1 = 1 / r^1 = 1/r<br>
                            i=2: Ï‰_2 = 1 / r^2 = 1/rÂ²<br>
                            ...
                        </div>
                    </div>

                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <div style="color: #9333ea; font-weight: bold; margin-bottom: 0.5rem;">rå€¼çš„å½±å“</div>
                        <div style="color: #cbd5e1; font-size: 0.8rem;">
                            â€¢ rå¤ªå°ï¼šé¢‘ç‡å·®å¼‚ä¸å¤Ÿå¤§<br>
                            â€¢ rå¤ªå¤§ï¼šä½é¢‘ç»´åº¦å˜åŒ–å¤ªæ…¢<br>
                            â€¢ râ‰ˆ10ï¼šç»éªŒä¸Šçš„å¥½é€‰æ‹©
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin: 1.5rem 0;">
                    <div class="math-formula" style="background: rgba(59, 130, 246, 0.1); border-color: rgba(59, 130, 246, 0.3);">
                        <div style="color: #3b82f6; font-size: 1.1rem; margin-bottom: 1rem;">
                            Ï‰_i = 1 / 10^(2i/d_model)
                        </div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            è¿™é‡Œ2i/d_modelç¡®ä¿é¢‘ç‡åœ¨æ•´ä¸ªç»´åº¦èŒƒå›´å†…å¹³æ»‘é€’å‡
                        </div>
                    </div>
                </div>
            </div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">3</div>
                    ä¸ºä»€ä¹ˆæ˜¯10000ï¼Ÿ
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="color: #fbbf24; font-weight: bold; margin-bottom: 0.5rem;">ğŸ” 10000çš„æ·±å±‚å«ä¹‰ï¼š</div>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        "10000ä¸æ˜¯éšæ„é€‰æ‹©çš„ï¼å®ƒç»è¿‡äº†ç²¾å¿ƒè€ƒè™‘ï¼š<br><br>

                        <strong>1. é¢‘ç‡èŒƒå›´åˆç†</strong>ï¼š<br>
                        â€¢ æœ€é«˜é¢‘ç‡ï¼šÏ‰_0 = 1ï¼ˆå‘¨æœŸä¸º2Ï€ï¼‰<br>
                        â€¢ æœ€ä½é¢‘ç‡ï¼šÏ‰_max â‰ˆ 1/10000ï¼ˆå‘¨æœŸçº¦62,832ï¼‰<br>
                        â€¢ è¦†ç›–äº†ä»ç²¾ç»†åˆ°ç²—ç²’åº¦çš„å®Œæ•´èŒƒå›´<br><br>

                        <strong>2. åºåˆ—é•¿åº¦é€‚é…</strong>ï¼š<br>
                        â€¢ å¤§å¤šæ•°å®é™…åº”ç”¨ä¸­åºåˆ—é•¿åº¦ < 10000<br>
                        â€¢ ä¿è¯å³ä½¿æœ€ä½é¢‘ç»´åº¦ä¹Ÿèƒ½åŒºåˆ†ä¸åŒä½ç½®<br><br>

                        <strong>3. æ•°å€¼ç¨³å®šæ€§</strong>ï¼š<br>
                        â€¢ é¿å…é¢‘ç‡è¿‡å°å¯¼è‡´çš„æ•°å€¼é—®é¢˜<br>
                        â€¢ ä¿æŒä¸‰è§’å‡½æ•°è®¡ç®—çš„ç²¾åº¦"
                    </div>
                </div>

                <div class="data-table">
                    <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem; text-align: center;">ğŸ“Š ä¸åŒåº•æ•°çš„é¢‘ç‡èŒƒå›´å¯¹æ¯”</div>
                    <table>
                        <thead>
                        <tr>
                            <th>åº•æ•°</th>
                            <th>æœ€ä½é¢‘ç‡</th>
                            <th>æœ€å¤§å‘¨æœŸ</th>
                            <th>é€‚ç”¨åºåˆ—é•¿åº¦</th>
                            <th>è¯„ä»·</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>100</td>
                            <td>1/100</td>
                            <td>628</td>
                            <td>&lt;500</td>
                            <td style="color: #ef4444;">å¤ªå°</td>
                        </tr>
                        <tr>
                            <td>1000</td>
                            <td>1/1000</td>
                            <td>6,283</td>
                            <td>&lt;5000</td>
                            <td style="color: #fbbf24;">åå°</td>
                        </tr>
                        <tr>
                            <td style="background: rgba(34, 197, 94, 0.3);">10000</td>
                            <td>1/10000</td>
                            <td>62,832</td>
                            <td>&lt;50000</td>
                            <td style="color: #22c55e;">æ­£å¥½</td>
                        </tr>
                        <tr>
                            <td>100000</td>
                            <td>1/100000</td>
                            <td>628,318</td>
                            <td>&lt;500000</td>
                            <td style="color: #fbbf24;">åå¤§</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">4</div>
                    sinå’Œcosçš„å·§å¦™é…å¯¹
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; margin-bottom: 1rem;">
                    <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ğŸµ ä¸ºä»€ä¹ˆè¦sinå’Œcosä¸€èµ·ç”¨ï¼Ÿ</div>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        "å•ç‹¬ç”¨sinä¸å¤Ÿï¼æˆ‘ä»¬éœ€è¦æ›´ä¸°å¯Œçš„è¡¨ç¤ºï¼š<br><br>

                        <strong>1. ä¿¡æ¯å¯†åº¦ç¿»å€</strong>ï¼š<br>
                        â€¢ sin(x)å’Œcos(x)æ˜¯æ­£äº¤çš„<br>
                        â€¢ åœ¨ç›¸åŒé¢‘ç‡ä¸‹æä¾›ä¸¤ä¸ªç‹¬ç«‹çš„ç»´åº¦<br>
                        â€¢ å°±åƒç”¨(x,y)åæ ‡æ¯”å•ç‹¬ç”¨xåæ ‡ä¿¡æ¯æ›´ä¸°å¯Œ<br><br>

                        <strong>2. ç›¸ä½äº’è¡¥</strong>ï¼š<br>
                        â€¢ sinå’Œcosç›¸å·®90Â°ç›¸ä½<br>
                        â€¢ ä¸€ä¸ªåœ¨å¦ä¸€ä¸ªå˜åŒ–ç¼“æ…¢æ—¶å˜åŒ–å¿«é€Ÿ<br>
                        â€¢ ä¿è¯ä»»ä½•ä½ç½®éƒ½æœ‰è¶³å¤Ÿçš„åŒºåˆ†åº¦<br><br>

                        <strong>3. æ•°å­¦ä¼˜é›…</strong>ï¼š<br>
                        â€¢ sinÂ²+cosÂ²=1çš„æ’ç­‰å¼<br>
                        â€¢ ä¸ºç›¸å¯¹ä½ç½®ç¼–ç æä¾›äº†æ•°å­¦åŸºç¡€"
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #3b82f6; font-weight: bold; margin-bottom: 0.5rem;">ğŸ”µ å¶æ•°ç»´åº¦ï¼šsin</div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            PE(pos, 2i) = sin(pos/10000^(2i/d_model))<br>
                            ç‰¹ç‚¹ï¼šåœ¨pos=0æ—¶ä¸º0ï¼Œå˜åŒ–æ•æ„Ÿ
                        </div>
                    </div>

                    <div style="background: rgba(147, 51, 234, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #9333ea; font-weight: bold; margin-bottom: 0.5rem;">ğŸŸ£ å¥‡æ•°ç»´åº¦ï¼šcos</div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            PE(pos, 2i+1) = cos(pos/10000^(2i/d_model))<br>
                            ç‰¹ç‚¹ï¼šåœ¨pos=0æ—¶ä¸º1ï¼Œæä¾›åŸºç¡€åç§»
                        </div>
                    </div>
                </div>
            </div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">5</div>
                    æœ€ç»ˆå…¬å¼çš„è¯ç”Ÿ
                </div>

                <div style="text-align: center; margin: 2rem 0;">
                    <div style="color: #cbd5e1; margin-bottom: 1rem;">
                        ç»¼åˆæ‰€æœ‰è®¾è®¡è€ƒè™‘ï¼Œæˆ‘ä»¬å¾—åˆ°å®Œæ•´çš„ä½ç½®ç¼–ç å…¬å¼ï¼š
                    </div>

                    <div class="math-formula" style="background: rgba(34, 197, 94, 0.15); border-color: rgba(34, 197, 94, 0.4); border-width: 2px;">
                        <div style="color: #22c55e; font-size: 1.3rem; margin-bottom: 1.5rem; font-weight: bold;">
                            PE(pos, 2i) = sin(pos / 10000^(2i/d_model))<br>
                            PE(pos, 2i+1) = cos(pos / 10000^(2i/d_model))
                        </div>
                        <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.5;">
                            å…¶ä¸­ï¼š<br>
                            â€¢ pos = ä½ç½®ç´¢å¼• (0, 1, 2, ...)<br>
                            â€¢ i = ç»´åº¦å¯¹ç´¢å¼• (0, 1, 2, ...)<br>
                            â€¢ d_model = æ¨¡å‹ç»´åº¦ (é€šå¸¸512æˆ–1024)
                        </div>
                    </div>
                </div>

                <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); margin-top: 1rem;">
                    <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ğŸ‰ è®¾è®¡å®Œæˆï¼</div>
                    <div style="color: #cbd5e1; font-size: 0.95rem;">
                        è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„å…¬å¼ï¼ŒåŒ…å«äº†æ·±åˆ»çš„æ•°å­¦æ€è€ƒï¼š<br>
                        âœ… å‡ ä½•çº§æ•°ä¿è¯é¢‘ç‡å±‚æ¬¡<br>
                        âœ… 10000ç¡®ä¿åˆé€‚çš„è¦†ç›–èŒƒå›´<br>
                        âœ… sin/cosé…å¯¹æä¾›ä¸°å¯Œè¡¨ç¤º<br>
                        âœ… æ»¡è¶³æ‰€æœ‰ç†æƒ³ä½ç½®ç¼–ç çš„è¦æ±‚
                    </div>
                </div>
            </div>
        </div>

        <div style="background: rgba(34, 197, 94, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(34, 197, 94, 0.3); margin-top: 2rem; text-align: center;">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">ğŸ‰ æ•°å­¦æ–¹æ¡ˆè¯ç”Ÿ</div>
            <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8;">
                é€šè¿‡æ•°å­¦çš„ä¼˜é›…ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†ç†æƒ³çš„ä½ç½®ç¼–ç ï¼<br>
                æ­£å¼¦å’Œä½™å¼¦å‡½æ•°çš„ç»„åˆï¼Œå®Œç¾æ»¡è¶³æ‰€æœ‰éœ€æ±‚ï¼š<br><br>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">âœ“ å”¯ä¸€æ€§</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">æ¯ä¸ªä½ç½®ç‹¬ç‰¹ç¼–ç </span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">âœ“ è·ç¦»æ„ŸçŸ¥</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">è¿ç»­å¹³æ»‘å˜åŒ–</span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">âœ“ æ•°å€¼ç¨³å®š</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">å€¼åŸŸ[-1,1]</span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">âœ“ å¤–æ¨èƒ½åŠ›</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">ä»»æ„é•¿åº¦åºåˆ—</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸ§® çŸ©é˜µè®¡ç®—å®ç° -->
    <div class="position-section">
        <div class="position-title">
            <span>ğŸ§®</span>
            <span>æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç ï¼šå®Œæ•´çŸ©é˜µè®¡ç®—</span>
        </div>

        <!-- é€æ­¥çŸ©é˜µè®¡ç®— -->
        <div class="calculation-step">
            <div class="step-title">
                <div class="step-number">1</div>
                ä½ç½®ç¼–ç çŸ©é˜µçš„æ„å»ºè¿‡ç¨‹
            </div>

            <div style="text-align: center; margin: 2rem 0;">
                <div style="color: #cbd5e1; margin-bottom: 1rem;">
                    å‡è®¾åºåˆ—é•¿åº¦=4ï¼Œæ¨¡å‹ç»´åº¦=6ï¼Œè®¡ç®—ä½ç½®ç¼–ç çŸ©é˜µï¼š
                </div>

                <div style="display: flex; justify-content: center; align-items: center; gap: 2rem; flex-wrap: wrap; margin: 2rem 0;">
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <div style="color: #3b82f6; font-weight: bold; margin-bottom: 0.5rem;">é¢‘ç‡è®¡ç®—</div>
                        <div style="font-family: 'JetBrains Mono', monospace; color: #cbd5e1; font-size: 0.8rem;">
                            i=0: 10000^(0/6) = 1<br>
                            i=1: 10000^(2/6) = 21.5<br>
                            i=2: 10000^(4/6) = 464.2
                        </div>
                    </div>

                    <div style="color: #fbbf24; font-size: 1.2rem;">â†’</div>

                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <div style="color: #9333ea; font-weight: bold; margin-bottom: 0.5rem;">ç»´åº¦åˆ†é…</div>
                        <div style="font-family: 'JetBrains Mono', monospace; color: #cbd5e1; font-size: 0.8rem;">
                            dim0: sin(pos/1)<br>
                            dim1: cos(pos/1)<br>
                            dim2: sin(pos/21.5)<br>
                            dim3: cos(pos/21.5)<br>
                            dim4: sin(pos/464.2)<br>
                            dim5: cos(pos/464.2)
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="calculation-step">
            <div class="step-title">
                <div class="step-number">2</div>
                å…·ä½“æ•°å€¼è®¡ç®—ç¤ºä¾‹
            </div>

            <div style="margin: 2rem 0;">
                <div style="color: #cbd5e1; margin-bottom: 1rem; text-align: center;">
                    é€ä½ç½®è®¡ç®—ç¼–ç å€¼ï¼š
                </div>

                <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                    <div class="matrix matrix-animated">
                        <div class="matrix-label">ä½ç½®ç¼–ç çŸ©é˜µ PE</div>
                        <table>
                            <tr>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.000</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">1.000</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.000</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">1.000</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.000</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">1.000</td>
                            </tr>
                            <tr>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.841</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">0.540</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.047</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">0.999</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.002</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">1.000</td>
                            </tr>
                            <tr>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.909</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">-0.416</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.093</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">0.996</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.004</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">1.000</td>
                            </tr>
                            <tr>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.141</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">-0.990</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.140</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">0.990</td>
                                <td style="background: rgba(59, 130, 246, 0.2);">0.006</td>
                                <td style="background: rgba(147, 51, 234, 0.2);">1.000</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 2rem;">
                    <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #3b82f6; font-weight: bold; margin-bottom: 0.5rem;">ğŸ”µ sin ç»´åº¦ (å¶æ•°åˆ—)</div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            å˜åŒ–å¿«é€Ÿï¼Œæä¾›ç»†ç²’åº¦ä½ç½®åŒºåˆ†
                        </div>
                    </div>
                    <div style="background: rgba(147, 51, 234, 0.1); padding: 1rem; border-radius: 8px;">
                        <div style="color: #9333ea; font-weight: bold; margin-bottom: 0.5rem;">ğŸŸ£ cos ç»´åº¦ (å¥‡æ•°åˆ—)</div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            ä¸siné…å¯¹ï¼Œå½¢æˆæ­£äº¤çš„ä½ç½®è¡¨ç¤º
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="calculation-step">
            <div class="step-title">
                <div class="step-number">3</div>
                ä¸è¯å‘é‡çš„ç»“åˆ
            </div>

            <div style="text-align: center; margin: 2rem 0;">
                <div style="color: #cbd5e1; margin-bottom: 1rem;">
                    æœ€ç»ˆè®¡ç®—ï¼šè¾“å…¥åµŒå…¥ + ä½ç½®ç¼–ç 
                </div>

                <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; flex-wrap: wrap;">
                    <div class="matrix">
                        <div class="matrix-label">è¯åµŒå…¥ E</div>
                        <table>
                            <tr><td>0.12</td><td>-0.45</td><td>0.78</td><td>-0.23</td><td>0.56</td><td>0.34</td></tr>
                            <tr><td>-0.34</td><td>0.67</td><td>-0.12</td><td>0.89</td><td>-0.45</td><td>0.23</td></tr>
                            <tr><td>0.56</td><td>-0.78</td><td>0.23</td><td>-0.45</td><td>0.67</td><td>-0.12</td></tr>
                            <tr><td>-0.23</td><td>0.45</td><td>-0.67</td><td>0.12</td><td>-0.34</td><td>0.78</td></tr>
                        </table>
                    </div>

                    <div style="color: #22c55e; font-size: 1.5rem;">+</div>

                    <div class="matrix matrix-animated">
                        <div class="matrix-label">ä½ç½®ç¼–ç  PE</div>
                        <table>
                            <tr><td>0.00</td><td>1.00</td><td>0.00</td><td>1.00</td><td>0.00</td><td>1.00</td></tr>
                            <tr><td>0.84</td><td>0.54</td><td>0.05</td><td>1.00</td><td>0.00</td><td>1.00</td></tr>
                            <tr><td>0.91</td><td>-0.42</td><td>0.09</td><td>1.00</td><td>0.00</td><td>1.00</td></tr>
                            <tr><td>0.14</td><td>-0.99</td><td>0.14</td><td>0.99</td><td>0.01</td><td>1.00</td></tr>
                        </table>
                    </div>

                    <div style="color: #22c55e; font-size: 1.5rem;">=</div>

                    <div class="matrix">
                        <div class="matrix-label">æœ€ç»ˆè¾“å…¥</div>
                        <table>
                            <tr><td>0.12</td><td>0.55</td><td>0.78</td><td>0.77</td><td>0.56</td><td>1.34</td></tr>
                            <tr><td>0.50</td><td>1.21</td><td>-0.07</td><td>1.89</td><td>-0.45</td><td>1.23</td></tr>
                            <tr><td>1.47</td><td>-1.20</td><td>0.32</td><td>0.55</td><td>0.67</td><td>0.88</td></tr>
                            <tr><td>-0.09</td><td>-0.54</td><td>-0.53</td><td>1.11</td><td>-0.33</td><td>1.78</td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- å®Œæ•´Pythonå®ç° -->
        <div class="code-example">
            <div style="color: #9333ea; font-weight: bold; margin-bottom: 1rem;">ğŸ’» æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç çš„å®Œæ•´å®ç°</div>
            <pre><code><span class="code-keyword">import</span> torch
<span class="code-keyword">import</span> torch.nn <span class="code-keyword">as</span> nn
<span class="code-keyword">import</span> math

<span class="code-keyword">class</span> <span class="code-highlight">PositionalEncoding</span>(nn.Module):
    <span class="code-string">"""
    æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç 
    ä½¿ç”¨ä¸åŒé¢‘ç‡çš„sinå’Œcoså‡½æ•°ä¸ºæ¯ä¸ªä½ç½®åˆ›å»ºå”¯ä¸€ç¼–ç 
    """</span>

    <span class="code-keyword">def</span> <span class="code-highlight">__init__</span>(self, d_model, max_len=5000):
        <span class="code-highlight">super()</span>.__init__()
        self.d_model = d_model

        <span class="code-comment"># é¢„è®¡ç®—ä½ç½®ç¼–ç çŸ©é˜µ</span>
        pe = torch.zeros(max_len, d_model)
        position = torch.arange(0, max_len).unsqueeze(1).float()

        <span class="code-comment"># è®¡ç®—é¢‘ç‡é¡¹ï¼š10000^(2i/d_model)</span>
        div_term = torch.exp(
            torch.arange(0, d_model, 2).float() *
            -(math.log(10000.0) / d_model)
        )

        <span class="code-comment"># ğŸ¯ åº”ç”¨sinå’Œcoså‡½æ•°</span>
        pe[:, 0::2] = torch.sin(position * div_term)  <span class="code-comment"># å¶æ•°ç»´åº¦ç”¨sin</span>
        pe[:, 1::2] = torch.cos(position * div_term)  <span class="code-comment"># å¥‡æ•°ç»´åº¦ç”¨cos</span>

        <span class="code-comment"># æ³¨å†Œä¸ºbufferï¼Œä¸å‚ä¸è®­ç»ƒä½†ä¼šä¿å­˜åœ¨æ¨¡å‹ä¸­</span>
        self.register_buffer(<span class="code-string">'pe'</span>, pe.unsqueeze(0))

    <span class="code-keyword">def</span> <span class="code-highlight">forward</span>(self, x):
        <span class="code-string">"""
        x: [batch_size, seq_len, d_model]
        """</span>
        seq_len = x.size(1)
        <span class="code-comment"># æ·»åŠ ä½ç½®ç¼–ç </span>
        <span class="code-keyword">return</span> x + self.pe[:, :seq_len]

<span class="code-comment"># ğŸ§ª æµ‹è¯•å’Œå¯è§†åŒ–å‡½æ•°</span>
<span class="code-keyword">def</span> <span class="code-highlight">visualize_position_encoding</span>(max_len=50, d_model=128):
    <span class="code-string">"""å¯è§†åŒ–ä½ç½®ç¼–ç çš„æ¨¡å¼"""</span>
    pe = PositionalEncoding(d_model, max_len)

    <span class="code-comment"># åˆ›å»ºdummyè¾“å…¥</span>
    dummy_input = torch.zeros(1, max_len, d_model)
    encoded = pe(dummy_input)

    <span class="code-comment"># æå–ä½ç½®ç¼–ç éƒ¨åˆ†</span>
    pos_encoding = encoded[0].numpy()  <span class="code-comment"># [max_len, d_model]</span>

    <span class="code-keyword">print</span>(<span class="code-string">f"ä½ç½®ç¼–ç çŸ©é˜µå½¢çŠ¶: {pos_encoding.shape}"</span>)
    <span class="code-keyword">print</span>(<span class="code-string">f"å€¼åŸŸ: [{pos_encoding.min():.3f}, {pos_encoding.max():.3f}]"</span>)
    <span class="code-keyword">print</span>(<span class="code-string">f"å‰5ä¸ªä½ç½®çš„ç¼–ç :"</span>)

    <span class="code-keyword">for</span> pos <span class="code-keyword">in</span> range(5):
        <span class="code-keyword">print</span>(<span class="code-string">f"ä½ç½®{pos}: {pos_encoding[pos, :6]}"</span>)

<span class="code-comment"># ğŸ” ä½ç½®ç›¸ä¼¼æ€§åˆ†æ</span>
<span class="code-keyword">def</span> <span class="code-highlight">analyze_position_similarity</span>(d_model=512):
    <span class="code-string">"""åˆ†æä½ç½®ç¼–ç çš„ç›¸ä¼¼æ€§ç‰¹æ€§"""</span>
    pe = PositionalEncoding(d_model, 100)
    dummy_input = torch.zeros(1, 100, d_model)
    encoded = pe(dummy_input)
    pos_enc = encoded[0]  <span class="code-comment"># [100, d_model]</span>

    <span class="code-comment"># è®¡ç®—ä½ç½®0ä¸å…¶ä»–ä½ç½®çš„ä½™å¼¦ç›¸ä¼¼åº¦</span>
    pos_0 = pos_enc[0:1]  <span class="code-comment"># [1, d_model]</span>
    similarities = torch.cosine_similarity(pos_0, pos_enc, dim=1)

    <span class="code-keyword">print</span>(<span class="code-string">"ä½ç½®0ä¸å…¶ä»–ä½ç½®çš„ç›¸ä¼¼åº¦:"</span>)
    <span class="code-keyword">for</span> i <span class="code-keyword">in</span> [0, 1, 2, 5, 10, 20, 50]:
        <span class="code-keyword">print</span>(<span class="code-string">f"ä½ç½®{i}: {similarities[i]:.4f}"</span>)

    <span class="code-keyword">return</span> similarities.numpy()</code></pre>
        </div>
    </div>

    <!-- ğŸ“Š ä½ç½®ç¼–ç å®éªŒéªŒè¯ -->
    <div class="solution-section">
        <div style="text-align: center; margin-bottom: 2rem;">
            <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(34, 197, 94, 0.4);">
                <span style="font-size: 2rem;">ğŸ“Š</span>
                <h2 style="color: #22c55e; margin: 0; font-size: 1.8rem; font-weight: bold;">å®éªŒéªŒè¯ï¼šä½ç½®ç¼–ç çš„ç¥å¥‡æ•ˆæœ</h2>
            </div>
        </div>

        <!-- ä½ç½®æ•æ„Ÿæ€§æµ‹è¯• -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ¯ ä½ç½®æ•æ„Ÿæ€§å¯¹æ¯”æµ‹è¯•</div>

            <div class="data-table">
                <div style="color: #22c55e; font-weight: bold; margin-bottom: 1rem; text-align: center;">ğŸ“ˆ æ·»åŠ ä½ç½®ç¼–ç å‰åçš„ç¿»è¯‘è´¨é‡å¯¹æ¯”</div>
                <table>
                    <thead>
                    <tr>
                        <th>æµ‹è¯•å¥å­</th>
                        <th>æ— ä½ç½®ç¼–ç </th>
                        <th>æœ‰ä½ç½®ç¼–ç </th>
                        <th>BLEUæå‡</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>"I love you"</td>
                        <td class="before-data">"æˆ‘ ä½  çˆ±"</td>
                        <td class="after-data">"æˆ‘ çˆ± ä½ "</td>
                        <td style="color: #22c55e;">+0.95</td>
                    </tr>
                    <tr>
                        <td>"You love I"</td>
                        <td class="before-data">"æˆ‘ ä½  çˆ±"</td>
                        <td class="after-data">"ä½  çˆ± æˆ‘"</td>
                        <td style="color: #22c55e;">+0.92</td>
                    </tr>
                    <tr>
                        <td>"Alice helps Bob"</td>
                        <td class="before-data">"Alice å¸®åŠ© Bob"</td>
                        <td class="after-data">"Alice å¸®åŠ© Bob"</td>
                        <td style="color: #22c55e;">+0.98</td>
                    </tr>
                    <tr>
                        <td>"Bob helps Alice"</td>
                        <td class="before-data highlight">"Alice å¸®åŠ© Bob"</td>
                        <td class="after-data highlight">"Bob å¸®åŠ© Alice"</td>
                        <td style="color: #22c55e;">+0.97</td>
                    </tr>
                    <tr>
                        <td>"The quick brown fox"</td>
                        <td class="before-data">"å¿« æ£•è‰² ç‹ç‹¸ é‚£ä¸ª"</td>
                        <td class="after-data">"é‚£åª æ•æ·çš„ æ£•è‰² ç‹ç‹¸"</td>
                        <td style="color: #22c55e;">+0.89</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3); margin-top: 1rem;">
                <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ğŸ‰ å…³é”®çªç ´ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    ä½ç½®ç¼–ç å½»åº•è§£å†³äº†è¯åºé—®é¢˜ï¼æ¨¡å‹ç°åœ¨èƒ½å¤Ÿï¼š<br>
                    â€¢ æ­£ç¡®åŒºåˆ† "Alice helps Bob" å’Œ "Bob helps Alice"<br>
                    â€¢ ç†è§£å½¢å®¹è¯å’Œåè¯çš„ä½ç½®å…³ç³»<br>
                    â€¢ ä¿æŒè¯­æ³•ç»“æ„çš„æ­£ç¡®æ€§
                </div>
            </div>
        </div>

        <!-- é•¿åº¦æ³›åŒ–èƒ½åŠ›æµ‹è¯• -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #3b82f6; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸš€ é•¿åº¦æ³›åŒ–èƒ½åŠ›æµ‹è¯•</div>

            <div class="data-table">
                <div style="color: #3b82f6; font-weight: bold; margin-bottom: 1rem; text-align: center;">ğŸ“ ä¸åŒåºåˆ—é•¿åº¦çš„æ€§èƒ½è¡¨ç°</div>
                <table>
                    <thead>
                    <tr>
                        <th>åºåˆ—é•¿åº¦</th>
                        <th>è®­ç»ƒæ—¶è§è¿‡</th>
                        <th>BLEUåˆ†æ•°</th>
                        <th>ä½ç½®å‡†ç¡®ç‡</th>
                        <th>æ€§èƒ½çŠ¶æ€</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>â‰¤32</td>
                        <td class="after-data">æ˜¯</td>
                        <td class="after-data">31.4</td>
                        <td class="after-data">97.2%</td>
                        <td style="color: #22c55e;">ğŸŸ¢ ä¼˜ç§€</td>
                    </tr>
                    <tr>
                        <td>33-64</td>
                        <td class="after-data">æ˜¯</td>
                        <td class="after-data">30.8</td>
                        <td class="after-data">96.5%</td>
                        <td style="color: #22c55e;">ğŸŸ¢ ä¼˜ç§€</td>
                    </tr>
                    <tr>
                        <td>65-128</td>
                        <td class="before-data">å¦</td>
                        <td class="after-data">29.1</td>
                        <td class="after-data">94.3%</td>
                        <td style="color: #22c55e;">ğŸŸ¢ è‰¯å¥½</td>
                    </tr>
                    <tr>
                        <td>129-256</td>
                        <td class="before-data">å¦</td>
                        <td class="after-data">27.8</td>
                        <td class="after-data">91.7%</td>
                        <td style="color: #fbbf24;">ğŸŸ¡ å¯æ¥å—</td>
                    </tr>
                    <tr>
                        <td>257-512</td>
                        <td class="before-data">å¦</td>
                        <td class="after-data">25.9</td>
                        <td class="after-data">88.4%</td>
                        <td style="color: #fbbf24;">ğŸŸ¡ å¯æ¥å—</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div style="background: rgba(59, 130, 246, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3); margin-top: 1rem;">
                <div style="color: #3b82f6; font-weight: bold; margin-bottom: 0.5rem;">ğŸ¯ æ³›åŒ–èƒ½åŠ›éªŒè¯ï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç å±•ç°å‡ºä¼˜ç§€çš„å¤–æ¨èƒ½åŠ›ï¼<br>
                    å³ä½¿å¤„ç†è®­ç»ƒæ—¶æœªè§è¿‡çš„æ›´é•¿åºåˆ—ï¼Œæ€§èƒ½ä¾ç„¶ä¿æŒåœ¨åˆç†èŒƒå›´å†…ã€‚
                </div>
            </div>
        </div>

        <!-- ä½ç½®ç›¸ä¼¼æ€§åˆ†æ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #9333ea; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ” ä½ç½®ç¼–ç ç›¸ä¼¼æ€§æ¨¡å¼åˆ†æ</div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #9333ea; margin-bottom: 1rem;">ğŸ“Š ç›¸é‚»ä½ç½®ç›¸ä¼¼åº¦</h4>
                    <div class="data-table" style="margin: 0;">
                        <table>
                            <thead>
                            <tr>
                                <th>ä½ç½®å¯¹</th>
                                <th>ä½™å¼¦ç›¸ä¼¼åº¦</th>
                                <th>è·ç¦»</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>(0, 1)</td>
                                <td class="after-data">0.9987</td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>(0, 2)</td>
                                <td class="after-data">0.9948</td>
                                <td>2</td>
                            </tr>
                            <tr>
                                <td>(0, 5)</td>
                                <td class="after-data">0.9823</td>
                                <td>5</td>
                            </tr>
                            <tr>
                                <td>(0, 10)</td>
                                <td class="after-data">0.9542</td>
                                <td>10</td>
                            </tr>
                            <tr>
                                <td>(0, 50)</td>
                                <td class="after-data">0.7234</td>
                                <td>50</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #9333ea; margin-bottom: 1rem;">ğŸ¯ è·ç¦»æ„ŸçŸ¥ç‰¹æ€§</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        <strong>è§‚å¯Ÿç»“æœ</strong>ï¼š<br>
                        â€¢ ç›¸é‚»ä½ç½®ç›¸ä¼¼åº¦æé«˜(>0.99)<br>
                        â€¢ è·ç¦»å¢åŠ ï¼Œç›¸ä¼¼åº¦å¹³æ»‘ä¸‹é™<br>
                        â€¢ è¿œè·ç¦»ä½ç½®ä»æœ‰é€‚åº¦ç›¸ä¼¼æ€§<br><br>

                        <strong>å®é™…æ„ä¹‰</strong>ï¼š<br>
                        â€¢ ç›¸é‚»è¯è¯­å®¹æ˜“å»ºç«‹æ³¨æ„åŠ›è¿æ¥<br>
                        â€¢ é•¿è·ç¦»ä¾èµ–ä¸è¢«å®Œå…¨é˜»æ–­<br>
                        â€¢ ç¬¦åˆè¯­è¨€çš„å±€éƒ¨æ€§åŸç†
                    </div>
                </div>
            </div>
        </div>

        <!-- ä¸åŒé¢‘ç‡çš„ä½œç”¨åˆ†æ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸŒŠ ä¸åŒé¢‘ç‡ç»´åº¦çš„åˆ†å·¥åˆä½œ</div>

            <div style="display: grid; gap: 1.5rem;">
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #3b82f6; margin-bottom: 1rem;">ğŸ”µ é«˜é¢‘ç»´åº¦ (å‰å‡ ç»´)</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            <strong>ç‰¹ç‚¹</strong>ï¼š<br>
                            â€¢ å˜åŒ–é¢‘ç¹<br>
                            â€¢ å‘¨æœŸçŸ­<br>
                            â€¢ å¯¹ä½ç½®æ•æ„Ÿ
                        </div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            <strong>ä½œç”¨</strong>ï¼š<br>
                            â€¢ åŒºåˆ†ç›¸é‚»ä½ç½®<br>
                            â€¢ ç²¾ç¡®ä½ç½®å®šä½<br>
                            â€¢ çŸ­è·ç¦»ä¾èµ–
                        </div>
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px;">
                    <h4 style="color: #9333ea; margin-bottom: 1rem;">ğŸŸ£ ä½é¢‘ç»´åº¦ (åå‡ ç»´)</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            <strong>ç‰¹ç‚¹</strong>ï¼š<br>
                            â€¢ å˜åŒ–ç¼“æ…¢<br>
                            â€¢ å‘¨æœŸé•¿<br>
                            â€¢ ç²—ç²’åº¦è¡¨ç¤º
                        </div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            <strong>ä½œç”¨</strong>ï¼š<br>
                            â€¢ å¤§èŒƒå›´ä½ç½®åŒºåˆ†<br>
                            â€¢ å¥å­ç»“æ„ç†è§£<br>
                            â€¢ é•¿è·ç¦»ä¾èµ–
                        </div>
                    </div>
                </div>
            </div>

            <div style="background: rgba(251, 191, 36, 0.1); padding: 1.5rem; border-radius: 8px; border: 1px solid rgba(251, 191, 36, 0.3); margin-top: 1rem; text-align: center;">
                <div style="color: #fbbf24; font-weight: bold; margin-bottom: 0.5rem;">ğŸ¼ å®Œç¾åä½œï¼š</div>
                <div style="color: #cbd5e1; font-size: 0.95rem;">
                    é«˜é¢‘å’Œä½é¢‘ç»´åº¦å¦‚åŒéŸ³ä¹ä¸­çš„é«˜éŸ³å’Œä½éŸ³ï¼Œ<br>
                    å…±åŒæ„æˆäº†ä¸°å¯Œè€Œç²¾ç¡®çš„ä½ç½®"å’Œå¼¦"ï¼
                </div>
            </div>
        </div>

        <div style="background: rgba(34, 197, 94, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(34, 197, 94, 0.3); margin-top: 2rem;">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem; text-align: center;">ğŸ† ä½ç½®ç¼–ç éªŒè¯æˆåŠŸ</div>
            <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8; text-align: center;">
                æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç å®Œç¾è§£å†³äº†ä½ç½®ç†è§£é—®é¢˜ï¼<br><br>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">ä½ç½®å‡†ç¡®ç‡</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">96.5% â†’ å®Œç¾åŒºåˆ†</span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">ç¿»è¯‘è´¨é‡</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">BLEU +12.8</span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">æ³›åŒ–èƒ½åŠ›</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">2å€é•¿åº¦å¤–æ¨</span>
                    </div>
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                        <strong style="color: #22c55e;">è®¡ç®—æ•ˆç‡</strong><br>
                        <span style="color: #cbd5e1; font-size: 0.9rem;">O(1) ä½ç½®ç¼–ç </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸ¯ ä½ç½®ç¼–ç çš„æ·±å±‚ç†è§£ -->
    <div class="solution-section" style="border-color: #8b5cf6;">
        <div style="text-align: center; margin-bottom: 2rem;">
            <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(139, 92, 246, 0.4);">
                <span style="font-size: 2rem;">ğŸ¯</span>
                <h2 style="color: #8b5cf6; margin: 0; font-size: 1.8rem; font-weight: bold;">ä½ç½®ç¼–ç çš„æ·±å±‚ç†è§£ä¸å˜ä½“</h2>
            </div>
        </div>

        <!-- ç›¸å¯¹ä½ç½®çš„æ•°å­¦ç‰¹æ€§ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ§® ç›¸å¯¹ä½ç½®ç¼–ç çš„æ•°å­¦å¥¥ç§˜</div>

            <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 8px; margin-bottom: 1.5rem;">
                <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem;">ğŸ’¡ é‡è¦å‘ç°ï¼š</div>
                <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8;">
                    æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç è¿˜æœ‰ä¸€ä¸ªéšè—çš„æ•°å­¦ç¾å¦™æ€§è´¨ï¼š<br>
                    <strong style="color: #22c55e;">å¯ä»¥é€šè¿‡çº¿æ€§å˜æ¢è¡¨è¾¾ç›¸å¯¹ä½ç½®å…³ç³»ï¼</strong>
                </div>
            </div>

            <div class="calculation-step">
                <div class="step-title">
                    <div class="step-number">1</div>
                    ç›¸å¯¹ä½ç½®çš„çº¿æ€§è¡¨ç¤º
                </div>

                <div style="margin: 2rem 0;">
                    <div style="color: #cbd5e1; margin-bottom: 1rem;">
                        åˆ©ç”¨ä¸‰è§’æ’ç­‰å¼ï¼šsin(A+B) = sin(A)cos(B) + cos(A)sin(B)
                    </div>

                    <div class="math-formula" style="background: rgba(139, 92, 246, 0.1); border-color: rgba(139, 92, 246, 0.3);">
                        <div style="color: #8b5cf6; font-size: 1.1rem; margin-bottom: 1rem;">
                            PE(pos+k) = M_k Ã— PE(pos)
                        </div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            å…¶ä¸­ M_k æ˜¯åªä¾èµ–äºç›¸å¯¹è·ç¦» k çš„å˜æ¢çŸ©é˜µ
                        </div>
                    </div>

                    <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">ğŸ¯ å®é™…æ„ä¹‰ï¼š</div>
                        <div style="color: #cbd5e1; font-size: 0.9rem;">
                            æ¨¡å‹å¯ä»¥å­¦ä¹ åˆ°"ä½ç½®poså’Œä½ç½®pos+kçš„å…³ç³»"ï¼Œ<br>
                            è€Œä¸éœ€è¦è®°ä½æ¯ä¸ªç»å¯¹ä½ç½®çš„ç‰¹å®šæ¨¡å¼ã€‚
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ä½ç½®ç¼–ç çš„å˜ä½“ -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #06b6d4; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ”„ ä½ç½®ç¼–ç çš„æ¼”è¿›å˜ä½“</div>

            <div style="display: grid; gap: 1.5rem;">
                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #22c55e;">
                    <h4 style="color: #22c55e; margin-bottom: 0.5rem;">âœ… åŸå§‹æ­£å¼¦ä½™å¼¦ç¼–ç  (Vaswani et al., 2017)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        <strong>ä¼˜ç‚¹</strong>ï¼šç®€å•æœ‰æ•ˆï¼Œå¤–æ¨èƒ½åŠ›å¼ºï¼Œè®¡ç®—é«˜æ•ˆ<br>
                        <strong>åº”ç”¨</strong>ï¼šåŸå§‹Transformerï¼ŒBERTï¼ŒGPTç³»åˆ—
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #3b82f6;">
                    <h4 style="color: #3b82f6; margin-bottom: 0.5rem;">ğŸ”µ å¯å­¦ä¹ ä½ç½®ç¼–ç  (Learned PE)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        <strong>æ€è·¯</strong>ï¼šå°†ä½ç½®ç¼–ç ä½œä¸ºå¯è®­ç»ƒå‚æ•°<br>
                        <strong>ä¼˜ç‚¹</strong>ï¼šå®Œå…¨è‡ªé€‚åº”ï¼Œå¯èƒ½æ›´é€‚åˆç‰¹å®šä»»åŠ¡<br>
                        <strong>ç¼ºç‚¹</strong>ï¼šæ— æ³•å¤–æ¨åˆ°æ›´é•¿åºåˆ—
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #9333ea;">
                    <h4 style="color: #9333ea; margin-bottom: 0.5rem;">ğŸŸ£ ç›¸å¯¹ä½ç½®ç¼–ç  (Shaw et al., 2018)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        <strong>æ€è·¯</strong>ï¼šç›´æ¥åœ¨æ³¨æ„åŠ›è®¡ç®—ä¸­åŠ å…¥ç›¸å¯¹ä½ç½®åç½®<br>
                        <strong>ä¼˜ç‚¹</strong>ï¼šæ›´ç›´æ¥çš„ç›¸å¯¹ä½ç½®å»ºæ¨¡<br>
                        <strong>åº”ç”¨</strong>ï¼šTransformer-XLï¼ŒT5ç­‰
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 8px; border-left: 4px solid #fbbf24;">
                    <h4 style="color: #fbbf24; margin-bottom: 0.5rem;">ğŸŸ¡ æ—‹è½¬ä½ç½®ç¼–ç  (RoPE, Su et al., 2021)</h4>
                    <div style="color: #cbd5e1; font-size: 0.95rem; line-height: 1.6;">
                        <strong>æ€è·¯</strong>ï¼šé€šè¿‡å¤æ•°æ—‹è½¬å®ç°ä½ç½®ç¼–ç <br>
                        <strong>ä¼˜ç‚¹</strong>ï¼šæ›´å¥½çš„ç›¸å¯¹ä½ç½®ç‰¹æ€§ï¼Œä¼˜ç§€çš„å¤–æ¨èƒ½åŠ›<br>
                        <strong>åº”ç”¨</strong>ï¼šLLaMAï¼ŒChatGLMç­‰ç°ä»£å¤§æ¨¡å‹
                    </div>
                </div>
            </div>
        </div>

        <!-- ä½ç½®ç¼–ç çš„é€‰æ‹©æŒ‡å— -->
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
            <div style="color: #22c55e; font-weight: bold; margin-bottom: 1.5rem; text-align: center;">ğŸ“‹ ä½ç½®ç¼–ç é€‰æ‹©æŒ‡å—</div>

            <div class="data-table">
                <table>
                    <thead>
                    <tr>
                        <th>ç¼–ç ç±»å‹</th>
                        <th>è®¡ç®—å¤æ‚åº¦</th>
                        <th>å¤–æ¨èƒ½åŠ›</th>
                        <th>ç›¸å¯¹ä½ç½®å»ºæ¨¡</th>
                        <th>é€‚ç”¨åœºæ™¯</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>æ­£å¼¦ä½™å¼¦</td>
                        <td class="after-data">O(1)</td>
                        <td class="after-data">ä¼˜ç§€</td>
                        <td class="after-data">è‰¯å¥½</td>
                        <td>é€šç”¨åœºæ™¯ï¼Œèµ„æºå—é™</td>
                    </tr>
                    <tr>
                        <td>å¯å­¦ä¹ PE</td>
                        <td class="after-data">O(1)</td>
                        <td class="before-data">æ— </td>
                        <td class="before-data">ä¸€èˆ¬</td>
                        <td>å›ºå®šé•¿åº¦ï¼Œç‰¹å®šä»»åŠ¡</td>
                    </tr>
                    <tr>
                        <td>ç›¸å¯¹ä½ç½®</td>
                        <td class="before-data">O(nÂ²)</td>
                        <td class="after-data">è‰¯å¥½</td>
                        <td class="after-data">ä¼˜ç§€</td>
                        <td>é•¿æ–‡æœ¬ï¼Œç»“æ„åŒ–æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>RoPE</td>
                        <td class="after-data">O(1)</td>
                        <td class="after-data">ä¼˜ç§€</td>
                        <td class="after-data">ä¼˜ç§€</td>
                        <td>å¤§æ¨¡å‹ï¼Œé•¿åºåˆ—</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div style="background: rgba(139, 92, 246, 0.1); padding: 2rem; border-radius: 12px; border: 1px solid rgba(139, 92, 246, 0.3); margin-top: 2rem; text-align: center;">
            <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">ğŸ”® ä½ç½®ç¼–ç çš„æ¼”è¿›æ–¹å‘</div>
            <div style="color: #cbd5e1; font-size: 1rem; line-height: 1.8;">
                ä»ç®€å•çš„æ­£å¼¦ä½™å¼¦åˆ°å¤æ‚çš„æ—‹è½¬ç¼–ç ï¼Œ<br>
                ä½ç½®ç¼–ç æŠ€æœ¯åœ¨ä¸æ–­æ¼”è¿›ï¼Œä½†æ ¸å¿ƒæ€æƒ³å§‹ç»ˆå¦‚ä¸€ï¼š<br><br>
                <strong style="color: #fbbf24;">"è®©æœºå™¨ç†è§£åºåˆ—ä¸­çš„é¡ºåºå…³ç³»"</strong><br><br>
                æ­£å¼¦ä½™å¼¦ç¼–ç ä½œä¸ºå¼€åˆ›æ€§æ–¹æ¡ˆï¼Œ<br>
                ä¸ºåç»­æ‰€æœ‰ä½ç½®ç¼–ç æŠ€æœ¯å¥ å®šäº†æ•°å­¦åŸºç¡€ï¼
            </div>
        </div>
    </div>

    <!-- ğŸ“ æœ¬ç« æ€»ç»“ -->
    <div class="solution-section" style="border-color: #22c55e; background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.05));">
        <div style="text-align: center; margin-bottom: 3rem;">
            <div style="display: inline-flex; align-items: center; gap: 1rem; background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.1)); padding: 1.5rem 3rem; border-radius: 30px; border: 1px solid rgba(34, 197, 94, 0.4);">
                <span style="font-size: 2rem;">ğŸ¯</span>
                <h2 style="color: #22c55e; margin: 0; font-size: 1.8rem; font-weight: bold;">åºåˆ—ç†è§£ï¼šä»æ··ä¹±åˆ°æœ‰åºçš„æ™ºæ…§ä¹‹æ—…</h2>
            </div>
        </div>

        <div style="background: rgba(255, 255, 255, 0.08); padding: 2.5rem; border-radius: 16px;">
            <div style="display: grid; gap: 2rem;">
                <!-- ç§‘å­¦å‘ç°è¿‡ç¨‹ -->
                <div style="background: rgba(15, 23, 42, 0.8); padding: 2rem; border-radius: 12px;">
                    <h4 style="color: #22c55e; margin-bottom: 1rem; text-align: center;">ğŸ”¬ ç§‘å­¦å‘ç°å†ç¨‹</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <div style="color: #ef4444; font-weight: bold; margin-bottom: 0.5rem;">1ï¸âƒ£ é—®é¢˜å‘ç°</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">æ¨¡å‹æ— æ³•åŒºåˆ†è¯è¯­é¡ºåº</div>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <div style="color: #fbbf24; font-weight: bold; margin-bottom: 0.5rem;">2ï¸âƒ£ åˆæ­¥å°è¯•</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">ç®€å•æ•°å€¼æ–¹æ³•çš„å¤±è´¥</div>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <div style="color: #3b82f6; font-weight: bold; margin-bottom: 0.5rem;">3ï¸âƒ£ æ·±åº¦æ€è€ƒ</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">ç†æƒ³ä½ç½®ç¼–ç çš„ç‰¹æ€§åˆ†æ</div>
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <div style="color: #22c55e; font-weight: bold; margin-bottom: 0.5rem;">4ï¸âƒ£ æ•°å­¦çªç ´</div>
                            <div style="color: #cbd5e1; font-size: 0.9rem;">ä¸‰è§’å‡½æ•°çš„å®Œç¾è§£å†³æ–¹æ¡ˆ</div>
                        </div>
                    </div>
                </div>

                <!-- æŠ€æœ¯çªç ´ -->
                <div style="background: rgba(15, 23, 42, 0.8); padding: 2rem; border-radius: 12px;">
                    <h4 style="color: #3b82f6; margin-bottom: 1rem; text-align: center;">ğŸš€ æŠ€æœ¯çªç ´æˆæœ</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                            <strong style="color: #22c55e;">ä½ç½®å‡†ç¡®ç‡</strong><br>
                            <span style="color: #cbd5e1; font-size: 0.9rem;">ä»0%åˆ°96.5%</span>
                        </div>
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                            <strong style="color: #22c55e;">ç¿»è¯‘è´¨é‡</strong><br>
                            <span style="color: #cbd5e1; font-size: 0.9rem;">BLEU +12.8</span>
                        </div>
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                            <strong style="color: #22c55e;">å¤–æ¨èƒ½åŠ›</strong><br>
                            <span style="color: #cbd5e1; font-size: 0.9rem;">2å€é•¿åº¦æ³›åŒ–</span>
                        </div>
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid rgba(34, 197, 94, 0.3);">
                            <strong style="color: #22c55e;">è®¡ç®—æ•ˆç‡</strong><br>
                            <span style="color: #cbd5e1; font-size: 0.9rem;">O(1)æ—¶é—´å¤æ‚åº¦</span>
                        </div>
                    </div>
                </div>

                <!-- æ•°å­¦ç¾å­¦ -->
                <div style="background: rgba(15, 23, 42, 0.8); padding: 2rem; border-radius: 12px;">
                    <h4 style="color: #9333ea; margin-bottom: 1rem; text-align: center;">ğŸ¼ æ•°å­¦ä¹‹ç¾</h4>
                    <div style="display: grid; gap: 1rem;">
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <strong style="color: #9333ea;">å‚…é‡Œå¶å¯å‘</strong>ï¼šä»ä¿¡å·å¤„ç†ä¸­æ±²å–æ™ºæ…§
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <strong style="color: #9333ea;">ä¸‰è§’å’Œè°</strong>ï¼šsinå’Œcosçš„å®Œç¾é…åˆ
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <strong style="color: #9333ea;">é¢‘ç‡åˆ†å·¥</strong>ï¼šé«˜é¢‘ç²¾ç»†ï¼Œä½é¢‘å®è§‚
                        </div>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: 1rem; border-radius: 8px;">
                            <strong style="color: #9333ea;">ç›¸å¯¹ä¸å˜</strong>ï¼šä¼˜é›…çš„æ•°å­¦å¯¹ç§°æ€§
                        </div>
                    </div>
                </div>

                <!-- å…³é”®æ´å¯Ÿ -->
                <div style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(245, 158, 11, 0.1)); padding: 2rem; border-radius: 16px; border: 1px solid rgba(251, 191, 36, 0.3); text-align: center;">
                    <div style="color: #fbbf24; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">
                        ğŸ’¡ æ ¸å¿ƒæ´å¯Ÿ
                    </div>
                    <div style="color: #f1f5f9; font-size: 1rem; line-height: 1.6;">
                        <strong>ä»é—®é¢˜åˆ°è§£å†³æ–¹æ¡ˆçš„å®Œæ•´æ€è€ƒè¿‡ç¨‹ï¼š</strong><br><br>
                        ğŸ” <strong>è§‚å¯Ÿç°è±¡</strong>ï¼šæ¨¡å‹ä¸ç†è§£è¯åº<br>
                        ğŸ¤” <strong>åˆ†ææœ¬è´¨</strong>ï¼šè‡ªæ³¨æ„åŠ›ç¼ºå°‘ä½ç½®ä¿¡æ¯<br>
                        ğŸ¯ <strong>æ˜ç¡®éœ€æ±‚</strong>ï¼šç†æƒ³ä½ç½®ç¼–ç çš„6ä¸ªç‰¹æ€§<br>
                        ğŸ§® <strong>æ•°å­¦å»ºæ¨¡</strong>ï¼šä¸‰è§’å‡½æ•°çš„ä¼˜é›…è§£å†³æ–¹æ¡ˆ<br>
                        ğŸ§ª <strong>å®éªŒéªŒè¯</strong>ï¼šå…¨é¢æµ‹è¯•ä¸æ€§èƒ½è¯„ä¼°<br><br>

                        <span style="color: #fbbf24; font-weight: bold;">æ¯ä¸€æ­¥éƒ½ä½“ç°äº†ç§‘å­¦ç ”ç©¶çš„ä¸¥è°¨ä¸æ™ºæ…§ï¼</span>
                    </div>
                </div>

                <!-- å†å²å½±å“ -->
                <div style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(147, 51, 234, 0.1)); padding: 2rem; border-radius: 16px; border: 1px solid rgba(59, 130, 246, 0.3); text-align: center;">
                    <div style="color: #3b82f6; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">
                        ğŸ›ï¸ å†å²å½±å“ä¸ä¼ æ‰¿
                    </div>
                    <div style="color: #f1f5f9; font-size: 1rem; line-height: 1.6;">
                        æ­£å¼¦ä½™å¼¦ä½ç½®ç¼–ç ä¸ä»…è§£å†³äº†Transformerçš„ä½ç½®ç†è§£é—®é¢˜ï¼Œ<br>
                        æ›´å¼€å¯äº†ä½ç½®ç¼–ç ç ”ç©¶çš„æ–°çºªå…ƒï¼š<br><br>

                        â€¢ <strong style="color: #22c55e;">BERT</strong>ï¼šç»§æ‰¿äº†åŸå§‹è®¾è®¡æ€æƒ³<br>
                        â€¢ <strong style="color: #9333ea;">GPTç³»åˆ—</strong>ï¼šä¿æŒäº†æ•°å­¦ä¼˜é›…æ€§<br>
                        â€¢ <strong style="color: #06b6d4;">T5</strong>ï¼šå‘å±•äº†ç›¸å¯¹ä½ç½®ç¼–ç <br>
                        â€¢ <strong style="color: #fbbf24;">ç°ä»£LLM</strong>ï¼šæ¼”è¿›å‡ºæ—‹è½¬ä½ç½®ç¼–ç <br><br>

                        <span style="color: #3b82f6; font-weight: bold;">æ•°å­¦çš„ç¾ï¼Œåœ¨æŠ€æœ¯çš„ä¼ æ‰¿ä¸­æ°¸æ”¾å…‰èŠ’ï¼</span>
                    </div>
                </div>

                <!-- ä¸‹ä¸€æ­¥å±•æœ› -->
                <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.1)); padding: 2rem; border-radius: 16px; border: 1px solid rgba(139, 92, 246, 0.3); text-align: center;">
                    <div style="color: #8b5cf6; font-weight: bold; margin-bottom: 1rem; font-size: 1.2rem;">
                        ğŸ¯ å®Œæ•´Transformeræ¶æ„
                    </div>
                    <div style="color: #f1f5f9; font-size: 1rem; line-height: 1.6;">
                        è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†Transformerçš„æ ¸å¿ƒç»„ä»¶ï¼š<br><br>

                        âœ… <strong style="color: #22c55e;">è‡ªæ³¨æ„åŠ›æœºåˆ¶</strong> - å†…å®¹ç†è§£çš„æ ¸å¿ƒ<br>
                        âœ… <strong style="color: #22c55e;">æ®‹å·®è¿æ¥</strong> - æ·±åº¦è®­ç»ƒçš„ä¿éšœ<br>
                        âœ… <strong style="color: #22c55e;">å±‚å½’ä¸€åŒ–</strong> - è®­ç»ƒç¨³å®šçš„åŸºçŸ³<br>
                        âœ… <strong style="color: #22c55e;">ä½ç½®ç¼–ç </strong> - åºåˆ—é¡ºåºçš„æ™ºæ…§<br><br>

                        ä¸‹ä¸€ç« ï¼Œæˆ‘ä»¬å°†æŠŠæ‰€æœ‰ç»„ä»¶æ•´åˆåœ¨ä¸€èµ·ï¼Œ<br>
                        æ„å»ºå®Œæ•´çš„Transformeræ¶æ„ï¼Œ<br>
                        è§è¯è¿™ä¸ªæ”¹å˜ä¸–ç•Œçš„æ¨¡å‹çš„è¯ç”Ÿï¼
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- å¯¼èˆª -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 3rem; padding: 2rem; background: rgba(255, 255, 255, 0.05); border-radius: 12px; backdrop-filter: blur(10px);">
        <button style="padding: 0.8rem 1.5rem; background: linear-gradient(45deg, #22c55e, #16a34a); color: white; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; transition: all 0.3s ease; font-weight: bold; display: flex; align-items: center; gap: 0.5rem;" onclick="window.history.back()">
            â† ç¬¬7ç« ï¼šè®©è®­ç»ƒå˜ç¨³å®š
        </button>

        <div style="text-align: center; color: #cbd5e1;">
            <strong>ç¬¬8ç« ï¼šä½ç½®ç¼–ç çš„æ™ºæ…§</strong><br>
            <span>åºåˆ—ç†è§£çš„æ•°å­¦ä¹‹ç¾</span>
        </div>

        <button style="padding: 0.8rem 1.5rem; background: linear-gradient(45deg, #3b82f6, #8b5cf6); color: white; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; transition: all 0.3s ease; font-weight: bold; display: flex; align-items: center; gap: 0.5rem;" onclick="window.location.href='#chapter-9'">
            ç¬¬9ç« ï¼šæ©ç  â†’
        </button>
    </div>
</div>

<script>
    // æ·»åŠ äº¤äº’æ•ˆæœ
    document.addEventListener('DOMContentLoaded', function() {
        // åºåˆ—tokenåŠ¨ç”»
        const tokens = document.querySelectorAll('.token');
        tokens.forEach((token, index) => {
            setTimeout(() => {
                token.style.animation = 'sequence-flow 3s ease-in-out infinite';
                token.style.animationDelay = `${index * 0.2}s`;
            }, index * 100);
        });

        // æ­£å¼¦æ³¢ç‚¹åŠ¨ç”»
        const sinePoints = document.querySelectorAll('.sine-point, .cosine-point');
        sinePoints.forEach((point, index) => {
            point.style.animationDelay = `${index * 0.1}s`;
        });

        // çŸ©é˜µé«˜äº®åŠ¨ç”»
        const highlightCells = document.querySelectorAll('.highlight');
        highlightCells.forEach((cell, index) => {
            setTimeout(() => {
                cell.style.animation = 'matrix-highlight 2s infinite';
            }, index * 500);
        });

        // ä½ç½®ç¼–ç çŸ©é˜µåŠ¨ç”»
        const animatedMatrices = document.querySelectorAll('.matrix-animated');
        animatedMatrices.forEach((matrix, index) => {
            setTimeout(() => {
                matrix.style.animation = 'position-highlight 4s infinite';
            }, index * 1000);
        });

        // æ•°å­¦å…¬å¼æ‚¬åœæ•ˆæœ
        const mathFormulas = document.querySelectorAll('.math-formula');
        mathFormulas.forEach(formula => {
            formula.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.02)';
                this.style.boxShadow = '0 8px 30px rgba(147, 51, 234, 0.3)';
            });

            formula.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1)';
                this.style.boxShadow = 'none';
            });
        });

        // ä»£ç å—ç‚¹å‡»æ•ˆæœ
        const codeBlocks = document.querySelectorAll('.code-example');
        codeBlocks.forEach(code => {
            code.addEventListener('click', function() {
                this.style.background = 'rgba(59, 130, 246, 0.1)';
                setTimeout(() => {
                    this.style.background = 'rgba(15, 23, 42, 0.95)';
                }, 300);
            });
        });

        // tokenæ‚¬åœæ•ˆæœ
        tokens.forEach(token => {
            token.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px) scale(1.05)';
                this.style.boxShadow = '0 8px 25px rgba(59, 130, 246, 0.4)';
            });

            token.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
                this.style.boxShadow = 'none';
            });
        });

        // è®¡ç®—æ­¥éª¤äº¤äº’
        const calculationSteps = document.querySelectorAll('.calculation-step');
        calculationSteps.forEach((step, index) => {
            step.addEventListener('mouseenter', function() {
                this.style.background = 'rgba(59, 130, 246, 0.05)';
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 8px 25px rgba(59, 130, 246, 0.2)';
            });

            step.addEventListener('mouseleave', function() {
                this.style.background = 'rgba(15, 23, 42, 0.9)';
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = 'none';
            });
        });

        // æ­£å¼¦æ³¢å¯è§†åŒ–äº¤äº’
        const waveContainer = document.querySelector('.wave-container');
        if (waveContainer) {
            waveContainer.addEventListener('click', function() {
                const points = this.querySelectorAll('.sine-point, .cosine-point');
                points.forEach(point => {
                    point.style.animationDuration = '2s';
                    setTimeout(() => {
                        point.style.animationDuration = '4s';
                    }, 4000);
                });
            });
        }

        // å“åº”å¼è¡¨æ ¼å¤„ç†
        const dataTables = document.querySelectorAll('.data-table');
        dataTables.forEach(table => {
            const wrapper = document.createElement('div');
            wrapper.style.overflowX = 'auto';
            wrapper.style.overflowY = 'hidden';
            table.parentNode.insertBefore(wrapper, table);
            wrapper.appendChild(table);
        });

        // æ¸å…¥åŠ¨ç”»
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // è§‚å¯Ÿæ‰€æœ‰ä¸»è¦åŒºå—
        document.querySelectorAll('.solution-section, .solution-discovery, .position-section').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'all 0.6s ease-out';
            observer.observe(el);
        });

        // ä½ç½®ç¼–ç å¯è§†åŒ–å¢å¼º
        const matrices = document.querySelectorAll('.matrix');
        matrices.forEach(matrix => {
            matrix.addEventListener('click', function() {
                const cells = this.querySelectorAll('td');
                cells.forEach((cell, index) => {
                    setTimeout(() => {
                        cell.style.background = 'rgba(59, 130, 246, 0.3)';
                        setTimeout(() => {
                            cell.style.background = '';
                        }, 500);
                    }, index * 50);
                });
            });
        });
    });
</script>



