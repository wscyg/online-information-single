<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬2.5-2.7ç« ï¼šæ¨¡å‹è¯„ä¼°ä¸é€‰æ‹© - ä¼˜åŒ–å¢å¼ºç‰ˆ</title>
    <style>
        /* CSSå˜é‡å®šä¹‰ */
        :root {
            /* æ·±è‰²ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰ */
            --bg-primary: #0f0f23;
            --bg-secondary: #1a1a3e;
            --bg-card: rgba(26, 26, 62, 0.8);
            --bg-card-solid: rgba(26, 26, 62, 0.95);
            --bg-code: #16162d;

            --text-primary: #e2e8f0;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --text-dim: #64748b;

            --border-primary: rgba(124, 58, 237, 0.3);
            --border-secondary: rgba(124, 58, 237, 0.2);
            --border-muted: rgba(148, 163, 184, 0.1);

            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-md: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px rgba(0, 0, 0, 0.15);

            /* ä¸»é¢˜è‰²å½©ç³»ç»Ÿ */
            --primary-purple: #7c3aed;
            --primary-blue: #667eea;
            --primary-pink: #ec4899;
            --primary-teal: #14b8a6;
            --primary-orange: #f97316;
            --primary-green: #10b981;
            --primary-red: #ef4444;
            --primary-yellow: #fbbf24;

            /* åŠ¨ç”»æ—¶é•¿ */
            --animation-fast: 0.2s;
            --animation-normal: 0.3s;
            --animation-slow: 0.6s;
        }

        /* æµ…è‰²ä¸»é¢˜ */
        body.light-theme {
            --bg-primary: #f8fafc;
            --bg-secondary: #e2e8f0;
            --bg-card: rgba(255, 255, 255, 0.9);
            --bg-card-solid: rgba(255, 255, 255, 0.95);
            --bg-code: #f3f4f6;

            --text-primary: #1e293b;
            --text-secondary: #334155;
            --text-muted: #475569;
            --text-dim: #64748b;

            --border-primary: rgba(124, 58, 237, 0.4);
            --border-secondary: rgba(124, 58, 237, 0.3);
            --border-muted: rgba(203, 213, 225, 0.5);

            --shadow-sm: 0 4px 6px rgba(0, 0, 0, 0.04);
            --shadow-md: 0 10px 15px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 20px 25px rgba(0, 0, 0, 0.12);
        }

        /* å…¨å±€æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color var(--animation-normal) ease,
            color var(--animation-normal) ease;
            overflow-x: hidden;
        }

        /* æ»šåŠ¨æ¡ä¼˜åŒ– */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
        }

        /* å®¹å™¨å¸ƒå±€ */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            transition: margin-left var(--animation-normal) cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.nav-open .container {
            margin-left: 280px;
        }

        /* æ™ºèƒ½å¯¼èˆªç³»ç»Ÿ */
        .smart-nav {
            position: fixed;
            left: -280px;
            top: 0;
            width: 280px;
            height: 100vh;
            background: var(--bg-card-solid);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-primary);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transition: left var(--animation-normal) cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow-y: auto;
        }

        body.nav-open .smart-nav {
            left: 0;
        }

        /* å¯¼èˆªè§¦å‘æŒ‰é’® */
        .nav-trigger {
            position: fixed;
            left: 20px;
            top: 20px;
            width: 48px;
            height: 48px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 2px solid var(--border-primary);
            border-radius: 12px;
            cursor: pointer;
            z-index: 1001;
            transition: all var(--animation-normal) ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        body.nav-open .nav-trigger {
            left: 300px;
        }

        .nav-trigger:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.3);
        }

        /* æ±‰å ¡èœå•åŠ¨ç”» */
        .nav-icon {
            width: 24px;
            height: 20px;
            position: relative;
        }

        .nav-icon span {
            display: block;
            position: absolute;
            height: 2px;
            width: 100%;
            background: var(--primary-purple);
            border-radius: 2px;
            opacity: 1;
            left: 0;
            transition: var(--animation-fast) ease-in-out;
        }

        .nav-icon span:nth-child(1) {
            top: 0;
        }

        .nav-icon span:nth-child(2) {
            top: 9px;
        }

        .nav-icon span:nth-child(3) {
            top: 18px;
        }

        body.nav-open .nav-icon span:nth-child(1) {
            top: 9px;
            transform: rotate(135deg);
        }

        body.nav-open .nav-icon span:nth-child(2) {
            opacity: 0;
            left: -60px;
        }

        body.nav-open .nav-icon span:nth-child(3) {
            top: 9px;
            transform: rotate(-135deg);
        }

        /* å¯¼èˆªå†…å®¹ */
        .nav-header {
            padding: 30px 25px;
            border-bottom: 1px solid var(--border-secondary);
        }

        .nav-title {
            font-size: 1.4rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 5px;
        }

        .nav-subtitle {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* ç« èŠ‚è¿›åº¦ */
        .chapter-progress {
            margin: 20px 25px;
            padding: 20px;
            background: rgba(124, 58, 237, 0.05);
            border-radius: 12px;
            border: 1px solid var(--border-secondary);
        }

        .progress-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-purple);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .progress-bar {
            height: 6px;
            background: rgba(124, 58, 237, 0.1);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-purple), var(--primary-blue));
            border-radius: 3px;
            transition: width var(--animation-slow) ease;
        }

        /* å¯¼èˆªåˆ—è¡¨ */
        .nav-list {
            list-style: none;
            padding: 20px 0;
        }

        .nav-item {
            margin: 8px 15px;
            border-radius: 10px;
            overflow: hidden;
            transition: all var(--animation-normal) ease;
        }

        .nav-item a {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            color: var(--text-muted);
            text-decoration: none;
            transition: all var(--animation-normal) ease;
            position: relative;
        }

        .nav-item:hover a {
            color: var(--text-primary);
            background: rgba(124, 58, 237, 0.05);
            padding-left: 24px;
        }

        .nav-item.active a {
            color: var(--text-primary);
            background: rgba(124, 58, 237, 0.1);
            padding-left: 24px;
            font-weight: 600;
        }

        .nav-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, var(--primary-purple), var(--primary-blue));
        }

        .nav-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: rgba(124, 58, 237, 0.1);
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 12px;
            color: var(--primary-purple);
        }

        .nav-item.completed .nav-number {
            background: var(--primary-green);
            color: white;
        }

        /* å¯¼èˆªåº•éƒ¨ */
        .nav-footer {
            padding: 20px;
            border-top: 1px solid var(--border-secondary);
            margin-top: auto;
        }

        /* ä¸»æ ‡é¢˜åŒºåŸŸ */
        .hero-section {
            min-height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-primary) 100%);
            margin-bottom: 60px;
        }

        .hero-content {
            text-align: center;
            z-index: 10;
            animation: fadeInUp 1s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary-purple) 0%, var(--primary-blue) 50%, var(--primary-pink) 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientFlow 4s ease infinite;
            margin-bottom: 20px;
        }

        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .hero-subtitle {
            font-size: 1.4rem;
            color: var(--text-secondary);
            margin-bottom: 40px;
        }

        /* å¿«é€Ÿå¯¼èˆªæŒ‰é’® */
        .quick-nav {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all var(--animation-normal) ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(124, 58, 237, 0.3);
        }

        .btn.btn-secondary {
            background: transparent;
            border: 2px solid var(--primary-purple);
            color: var(--primary-purple);
        }

        .btn.btn-secondary:hover {
            background: var(--primary-purple);
            color: white;
        }

        /* ç« èŠ‚å¡ç‰‡ */
        .section {
            padding: 80px 0;
            position: relative;
        }

        .section-anchor {
            scroll-margin-top: 80px;
        }

        .section-card {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            border: 1px solid var(--border-secondary);
            box-shadow: var(--shadow-md);
            transition: all var(--animation-normal) ease;
            position: relative;
            overflow: hidden;
        }

        .section-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .section-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* å†…å®¹æ¡†æ ·å¼ */
        .content-box {
            border-radius: 16px;
            padding: 25px;
            margin: 25px 0;
            position: relative;
        }

        .thinking-box {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(102, 126, 234, 0.05));
            border: 2px solid rgba(124, 58, 237, 0.3);
        }

        .thinking-box::before {
            content: 'ğŸ¤”';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 0 10px;
        }

        .story-box {
            background: linear-gradient(135deg, rgba(240, 147, 251, 0.1), rgba(102, 126, 234, 0.05));
            border: 2px solid rgba(240, 147, 251, 0.3);
        }

        .story-box::before {
            content: 'ğŸ“–';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 0 10px;
        }

        .insight-box {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(244, 114, 182, 0.05));
            border: 2px solid rgba(236, 72, 153, 0.3);
        }

        .insight-box::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 0 10px;
        }

        .warning-box {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
            border: 2px solid rgba(239, 68, 68, 0.3);
        }

        .warning-box::before {
            content: 'âš ï¸';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 0 10px;
        }

        /* å…¬å¼æ ·å¼ */
        .math-formula {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(26, 26, 62, 0.7));
            border: 2px solid rgba(102, 126, 234, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            font-family: 'Georgia', serif;
            font-size: 1.3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .math-symbol {
            color: #f093fb;
            font-weight: bold;
        }

        .math-fraction {
            display: inline-block;
            text-align: center;
            vertical-align: middle;
            margin: 0 8px;
        }

        .math-numerator {
            display: block;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }

        .math-denominator {
            display: block;
            padding-top: 5px;
        }

        /* æ­¥éª¤å¡ç‰‡ */
        .steps-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .step-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            transition: all var(--animation-normal) ease;
            position: relative;
        }

        .step-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-purple);
            box-shadow: 0 15px 30px rgba(124, 58, 237, 0.2);
        }

        .step-number {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            color: white;
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.3);
        }

        /* é«˜äº®æ–‡æœ¬ */
        .highlight-primary {
            color: var(--primary-purple);
            font-weight: 600;
            padding: 2px 6px;
            background: rgba(124, 58, 237, 0.1);
            border-radius: 4px;
        }

        .highlight-success {
            color: var(--primary-green);
            font-weight: 600;
            padding: 2px 6px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 4px;
        }

        .highlight-warning {
            color: var(--primary-orange);
            font-weight: 600;
            padding: 2px 6px;
            background: rgba(249, 115, 22, 0.1);
            border-radius: 4px;
        }

        .highlight-danger {
            color: var(--primary-red);
            font-weight: 600;
            padding: 2px 6px;
            background: rgba(239, 68, 68, 0.1);
            border-radius: 4px;
        }

        /* äº¤äº’å¼æ¼”ç¤º */
        .demo-container {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .demo-canvas {
            background: #0f0f23;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        /* ä»£ç å— */
        .code-block {
            background: var(--bg-code);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            overflow-x: auto;
            border: 1px solid var(--border-secondary);
            position: relative;
        }

        .code-block::before {
            content: 'Python';
            position: absolute;
            top: -12px;
            right: 20px;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .code-block pre {
            color: #f8f8f2;
            font-family: 'Fira Code', 'Consolas', monospace;
            line-height: 1.6;
            margin: 0;
        }

        /* è¯­æ³•é«˜äº® */
        .keyword { color: #ff79c6; font-weight: bold; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; font-style: italic; }
        .number { color: #bd93f9; }
        .function { color: #50fa7b; }

        /* æ•°æ®è¡¨æ ¼ */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--bg-card);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .data-table th {
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            color: white;
            padding: 12px 20px;
            font-weight: 600;
            text-align: left;
        }

        .data-table td {
            padding: 10px 20px;
            border-bottom: 1px solid var(--border-muted);
            color: var(--text-primary);
        }

        .data-table tr:hover td {
            background: rgba(124, 58, 237, 0.05);
        }

        /* è¿›åº¦æŒ‡ç¤ºå™¨ */
        .progress-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: 25px;
            border: 1px solid var(--border-primary);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 999;
            box-shadow: var(--shadow-md);
        }

        /* æµ®åŠ¨å·¥å…·æ  */
        .floating-toolbar {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 999;
        }

        .toolbar-btn {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-primary);
            color: var(--primary-purple);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            transition: all var(--animation-normal) ease;
            box-shadow: var(--shadow-sm);
        }

        .toolbar-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-md);
        }

        /* æ»‘å—æ ·å¼ */
        .slider-container {
            margin: 20px 0;
            text-align: center;
        }

        .slider {
            -webkit-appearance: none;
            width: 80%;
            height: 6px;
            border-radius: 3px;
            background: rgba(124, 58, 237, 0.2);
            outline: none;
            opacity: 0.8;
            transition: opacity var(--animation-fast);
        }

        .slider:hover {
            opacity: 1;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }

        /* ç½‘æ ¼å¸ƒå±€ */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        /* æ€»ç»“å¡ç‰‡ */
        .summary-card {
            background: linear-gradient(135deg, var(--primary-purple), var(--primary-blue));
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin: 40px 0;
            text-align: center;
            box-shadow: 0 20px 40px rgba(124, 58, 237, 0.3);
        }

        /* ç»ƒä¹ æ¡† */
        .exercise-box {
            background: linear-gradient(135deg, rgba(20, 184, 166, 0.1), rgba(6, 182, 212, 0.05));
            border-radius: 16px;
            padding: 25px;
            margin: 25px 0;
            border: 2px solid rgba(20, 184, 166, 0.3);
            position: relative;
        }

        .exercise-box::before {
            content: 'âœï¸';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 0 10px;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1024px) {
            body.nav-open .container {
                margin-left: 0;
                padding-left: 300px;
            }
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .section-card {
                padding: 25px;
            }

            .smart-nav {
                width: 100%;
                left: -100%;
            }

            body.nav-open .smart-nav {
                left: 0;
            }

            body.nav-open .container {
                margin-left: 0;
                padding-left: 20px;
            }

            body.nav-open .nav-trigger {
                left: auto;
                right: 20px;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity var(--animation-slow) ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(124, 58, 237, 0.3);
            border-top: 3px solid var(--primary-purple);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* æ¸å…¥åŠ¨ç”» */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 0.6s ease forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* å»¶è¿ŸåŠ¨ç”» */
        .fade-in-delay-1 { animation-delay: 0.1s; }
        .fade-in-delay-2 { animation-delay: 0.2s; }
        .fade-in-delay-3 { animation-delay: 0.3s; }

        /* æ‰“å°æ ·å¼ */
        @media print {
            .smart-nav,
            .nav-trigger,
            .floating-toolbar,
            .progress-indicator,
            .demo-controls {
                display: none !important;
            }

            body {
                background: white;
                color: black;
            }

            .section-card {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
<!-- åŠ è½½åŠ¨ç”» -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loader"></div>
</div>

<!-- å¯¼èˆªè§¦å‘æŒ‰é’® -->
<button class="nav-trigger" onclick="toggleNav()" aria-label="åˆ‡æ¢å¯¼èˆª">
    <div class="nav-icon">
        <span></span>
        <span></span>
        <span></span>
    </div>
</button>

<!-- æ™ºèƒ½å¯¼èˆªç³»ç»Ÿ -->
<nav class="smart-nav">
    <div class="nav-header">
        <h3 class="nav-title">ğŸ¯ æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©</h3>
        <p class="nav-subtitle">æ„å»ºå¯é çš„æœºå™¨å­¦ä¹ æ¨¡å‹</p>
    </div>

    <div class="chapter-progress">
        <div class="progress-stats">
            <div class="stat-item">
                <div class="stat-value" id="progressPercent">0%</div>
                <div class="stat-label">å®Œæˆè¿›åº¦</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="timeSpent">0åˆ†</div>
                <div class="stat-label">å­¦ä¹ æ—¶é•¿</div>
            </div>
        </div>
        <div class="progress-bar">
            <div class="progress-fill" id="navProgressFill" style="width: 0%"></div>
        </div>
    </div>

    <ul class="nav-list">
        <li class="nav-item active" data-section="intro">
            <a href="#intro">
                <span class="nav-number">1</span>
                <span>å¼•è¨€ï¼šæ¨¡å‹è¯„ä¼°çš„é‡è¦æ€§</span>
            </a>
        </li>
        <li class="nav-item" data-section="loss-functions">
            <a href="#loss-functions">
                <span class="nav-number">2</span>
                <span>æŸå¤±å‡½æ•°</span>
            </a>
        </li>
        <li class="nav-item" data-section="fitting">
            <a href="#fitting">
                <span class="nav-number">3</span>
                <span>æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ</span>
            </a>
        </li>
        <li class="nav-item" data-section="regularization">
            <a href="#regularization">
                <span class="nav-number">4</span>
                <span>æ­£åˆ™åŒ–æŠ€æœ¯</span>
            </a>
        </li>
        <li class="nav-item" data-section="cross-validation">
            <a href="#cross-validation">
                <span class="nav-number">5</span>
                <span>äº¤å‰éªŒè¯</span>
            </a>
        </li>
        <li class="nav-item" data-section="optimization">
            <a href="#optimization">
                <span class="nav-number">6</span>
                <span>ä¼˜åŒ–ç®—æ³•</span>
            </a>
        </li>
        <li class="nav-item" data-section="metrics">
            <a href="#metrics">
                <span class="nav-number">7</span>
                <span>è¯„ä»·æŒ‡æ ‡</span>
            </a>
        </li>
        <li class="nav-item" data-section="summary">
            <a href="#summary">
                <span class="nav-number">8</span>
                <span>æ€»ç»“ä¸å®è·µ</span>
            </a>
        </li>
    </ul>

    <div class="nav-footer">
        <div style="text-align: center;">
            <kbd style="background: rgba(124, 58, 237, 0.1); padding: 4px 8px; border-radius: 4px;">Alt</kbd> +
            <kbd style="background: rgba(124, 58, 237, 0.1); padding: 4px 8px; border-radius: 4px;">N</kbd>
            <span style="color: var(--text-muted); font-size: 0.8rem;">åˆ‡æ¢å¯¼èˆª</span>
        </div>
    </div>
</nav>

<!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
<div class="progress-indicator">
    <span>å­¦ä¹ è¿›åº¦</span>
    <div class="progress-bar" style="width: 100px;">
        <div class="progress-fill" id="topProgressFill" style="width: 0%"></div>
    </div>
    <span id="topProgressText">0%</span>
</div>

<!-- ä¸»å†…å®¹åŒºåŸŸ -->
<div class="container">
    <!-- è‹±é›„åŒºåŸŸ -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©</h1>
            <p class="hero-subtitle">ğŸ¯ å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªæ¨¡å‹æ˜¯å¦ä¼˜ç§€ï¼Ÿ</p>
            <div class="quick-nav">
                <a href="#intro" class="btn">å¼€å§‹å­¦ä¹ </a>
                <a href="#summary" class="btn btn-secondary">æŸ¥çœ‹æ€»ç»“</a>
            </div>
        </div>
    </section>

    <!-- å¼•è¨€ -->
    <section id="intro" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">ğŸ¯ ä¸ºä»€ä¹ˆæ¨¡å‹è¯„ä¼°å¦‚æ­¤é‡è¦ï¼Ÿ</h2>

            <div class="story-box">
                <h3>ä¸€ä¸ªä»¤äººæ·±æ€çš„æ•…äº‹</h3>
                <p>æƒ³è±¡ä½ æ˜¯ä¸€ä½åŒ»ç”Ÿï¼Œæ­£åœ¨å¼€å‘ä¸€ä¸ªAIç³»ç»Ÿæ¥è¯Šæ–­ç–¾ç—…ã€‚ä½ çš„æ¨¡å‹åœ¨è®­ç»ƒæ•°æ®ä¸Šè¾¾åˆ°äº†98%çš„å‡†ç¡®ç‡ï¼Œ
                    ä½ å…´å¥‹åœ°å°†å®ƒéƒ¨ç½²åˆ°åŒ»é™¢ã€‚ç„¶è€Œï¼Œç¬¬äºŒå¤©ä½ å‘ç°å®ƒåœ¨çœŸå®ç—…äººèº«ä¸Šçš„å‡†ç¡®ç‡åªæœ‰55%...</p>
                <br>
                <p>è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>ä¸€ä¸ªçœ‹ä¼¼å®Œç¾çš„æ¨¡å‹å¯èƒ½åªæ˜¯åœ¨"èƒŒç­”æ¡ˆ"</strong>ï¼Œ
                    è€Œä¸æ˜¯çœŸæ­£ç†è§£äº†é—®é¢˜çš„æœ¬è´¨ã€‚</p>
            </div>

            <div class="thinking-box">
                <h3>ğŸ¤” æ€è€ƒæ—¶åˆ»</h3>
                <p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Ÿè®©æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>æ¨¡å‹æ˜¯å¦çœŸçš„å­¦åˆ°äº†<span class="highlight-primary">è§„å¾‹</span>ï¼Ÿ</li>
                    <li>è¿˜æ˜¯åªæ˜¯è®°ä½äº†<span class="highlight-warning">è®­ç»ƒæ•°æ®</span>ï¼Ÿ</li>
                    <li>å¦‚ä½•ç¡®ä¿æ¨¡å‹å…·æœ‰<span class="highlight-success">æ³›åŒ–èƒ½åŠ›</span>ï¼Ÿ</li>
                </ul>
            </div>

            <div class="grid-3">
                <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.1); border-radius: 12px;">
                    <div style="font-size: 2.5rem; color: #4caf50;">98%</div>
                    <div>è®­ç»ƒé›†å‡†ç¡®ç‡</div>
                </div>
                <div style="text-align: center; padding: 20px; background: rgba(255, 107, 107, 0.1); border-radius: 12px;">
                    <div style="font-size: 2.5rem; color: #ff6b6b;">55%</div>
                    <div>æµ‹è¯•é›†å‡†ç¡®ç‡</div>
                </div>
                <div style="text-align: center; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 12px;">
                    <div style="font-size: 2.5rem; color: #667eea;">è¿‡æ‹Ÿåˆ</div>
                    <div>å…¸å‹é—®é¢˜</div>
                </div>
            </div>

            <div class="insight-box">
                <h3>ğŸ’¡ æ ¸å¿ƒæ´å¯Ÿ</h3>
                <p>æ¨¡å‹è¯„ä¼°ä¸ä»…ä»…æ˜¯è®¡ç®—å‡†ç¡®ç‡è¿™ä¹ˆç®€å•ã€‚å®ƒæ¶‰åŠåˆ°ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><span class="highlight-primary">é€‰æ‹©åˆé€‚çš„æŸå¤±å‡½æ•°</span>æ¥åº¦é‡é¢„æµ‹è¯¯å·®</li>
                    <li><span class="highlight-success">ç†è§£åå·®-æ–¹å·®æƒè¡¡</span>çš„æœ¬è´¨</li>
                    <li><span class="highlight-warning">ä½¿ç”¨æ­£åˆ™åŒ–</span>é˜²æ­¢è¿‡æ‹Ÿåˆ</li>
                    <li><span class="highlight-danger">æŒæ¡ä¼˜åŒ–ç®—æ³•</span>æ‰¾åˆ°æœ€ä¼˜å‚æ•°</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- æŸå¤±å‡½æ•° -->
    <section id="loss-functions" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">ğŸ“‰ æŸå¤±å‡½æ•°ï¼šåº¦é‡é¢„æµ‹è¯¯å·®çš„æ ‡å°º</h2>

            <div class="story-box">
                <h3>ä¸€ä¸ªç”ŸåŠ¨çš„ç±»æ¯”</h3>
                <p>å‡è®¾ä½ åœ¨ç©æŠ•é£é•–æ¸¸æˆã€‚æ¯æ¬¡æŠ•æ·åï¼Œä½ éœ€è¦çŸ¥é“è‡ªå·±ç¦»é¶å¿ƒæœ‰å¤šè¿œã€‚ä¸åŒçš„è®¡åˆ†æ–¹å¼ä¼šå½±å“ä½ çš„æŠ•æ·ç­–ç•¥ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>å¦‚æœåªçœ‹"ä¸­é¶/æ²¡ä¸­é¶"ï¼ˆ<span class="highlight-primary">0-1æŸå¤±</span>ï¼‰</li>
                    <li>å¦‚æœè®¡ç®—ç¦»é¶å¿ƒçš„è·ç¦»ï¼ˆ<span class="highlight-success">ç»å¯¹æŸå¤±</span>ï¼‰</li>
                    <li>å¦‚æœè·ç¦»è¶Šè¿œæƒ©ç½šè¶Šé‡ï¼ˆ<span class="highlight-warning">å¹³æ–¹æŸå¤±</span>ï¼‰</li>
                </ul>
                <p>è¿™å°±æ˜¯ä¸åŒæŸå¤±å‡½æ•°çš„ç›´è§‚ç†è§£ï¼</p>
            </div>

            <div class="demo-container">
                <h3>ğŸ“Š æŸå¤±å‡½æ•°å¯è§†åŒ–</h3>
                <canvas id="lossFunctionsChart" class="demo-canvas" width="800" height="400"></canvas>
                <div class="demo-controls">
                    <label>
                        <input type="checkbox" id="show01Loss" checked> 0-1æŸå¤±
                    </label>
                    <label>
                        <input type="checkbox" id="showMSE" checked> å¹³æ–¹æŸå¤±
                    </label>
                    <label>
                        <input type="checkbox" id="showMAE" checked> ç»å¯¹æŸå¤±
                    </label>
                    <label>
                        <input type="checkbox" id="showLog" checked> å¯¹æ•°æŸå¤±
                    </label>
                </div>
            </div>

            <div class="steps-container">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h4 style="color: var(--primary-purple); margin: 25px 0 15px;">0-1æŸå¤±å‡½æ•°</h4>
                    <div class="math-formula">
                        L(Y, f(X)) =
                        <span style="font-size: 1.5rem;">{</span>
                        <span style="margin: 0 10px;">
                                1, if Y â‰  f(X)<br>
                                0, if Y = f(X)
                            </span>
                        <span style="font-size: 1.5rem;">}</span>
                    </div>
                    <p>éå‡¸ã€ä¸è¿ç»­ã€ä¸å¯å¯¼</p>
                    <p style="color: var(--primary-red); font-size: 0.9rem;">ğŸ’¡ ä¼˜åŒ–å›°éš¾ï¼Œå®é™…ä¸­å¾ˆå°‘ç›´æ¥ä½¿ç”¨</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <h4 style="color: var(--primary-pink); margin: 25px 0 15px;">å¹³æ–¹æŸå¤±å‡½æ•°</h4>
                    <div class="math-formula">
                        L(Y, f(X)) = (Y <span class="math-symbol">âˆ’</span> f(X))<sup>2</sup>
                    </div>
                    <p>å‡¸å‡½æ•°ã€è¿ç»­ã€å¯å¯¼</p>
                    <p style="color: var(--primary-green); font-size: 0.9rem;">ğŸ’¡ å¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œä½†ä¼˜åŒ–å®¹æ˜“</p>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <h4 style="color: var(--primary-blue); margin: 25px 0 15px;">ç»å¯¹æŸå¤±å‡½æ•°</h4>
                    <div class="math-formula">
                        L(Y, f(X)) = |Y <span class="math-symbol">âˆ’</span> f(X)|
                    </div>
                    <p>å¯¹å¼‚å¸¸å€¼é²æ£’</p>
                    <p style="color: var(--primary-orange); font-size: 0.9rem;">ğŸ’¡ åœ¨0ç‚¹ä¸å¯å¯¼ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†</p>
                </div>

                <div class="step-card">
                    <div class="step-number">4</div>
                    <h4 style="color: var(--primary-green); margin: 25px 0 15px;">å¯¹æ•°æŸå¤±å‡½æ•°</h4>
                    <div class="math-formula">
                        L(Y, P(Y|X)) = <span class="math-symbol">âˆ’</span>log P(Y|X)
                    </div>
                    <p>æ¦‚ç‡è§£é‡Šæ¸…æ™°</p>
                    <p style="color: var(--primary-purple); font-size: 0.9rem;">ğŸ’¡ é€‚åˆæ¦‚ç‡è¾“å‡ºçš„æ¨¡å‹</p>
                </div>
            </div>

            <div class="insight-box">
                <h3>ğŸ’¡ å¦‚ä½•é€‰æ‹©æŸå¤±å‡½æ•°ï¼Ÿ</h3>
                <table class="data-table">
                    <thead>
                    <tr>
                        <th>é—®é¢˜ç±»å‹</th>
                        <th>æ¨èæŸå¤±å‡½æ•°</th>
                        <th>åŸå› </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>å›å½’é—®é¢˜</td>
                        <td>MSE / MAE</td>
                        <td>ç›´æ¥åº¦é‡é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„å·®å¼‚</td>
                    </tr>
                    <tr>
                        <td>äºŒåˆ†ç±»</td>
                        <td>äº¤å‰ç†µ</td>
                        <td>æ¦‚ç‡è§£é‡Šæ¸…æ™°ï¼Œæ¢¯åº¦æ€§è´¨å¥½</td>
                    </tr>
                    <tr>
                        <td>å¤šåˆ†ç±»</td>
                        <td>å¤šç±»äº¤å‰ç†µ</td>
                        <td>è‡ªç„¶æ‰©å±•åˆ°å¤šä¸ªç±»åˆ«</td>
                    </tr>
                    <tr>
                        <td>å­˜åœ¨å¼‚å¸¸å€¼</td>
                        <td>HuberæŸå¤±</td>
                        <td>ç»“åˆMSEå’ŒMAEçš„ä¼˜ç‚¹</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ -->
    <section id="fitting" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">ğŸ“Š æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ</h2>

            <div class="story-box">
                <h3>ä¸‰ä¸ªå­¦ç”Ÿçš„æ•…äº‹</h3>
                <p>ä¸‰ä¸ªå­¦ç”Ÿå‡†å¤‡è€ƒè¯•ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>å°æ˜åªçœ‹äº†æ•™æç›®å½•ï¼ˆ<span class="highlight-danger">æ¬ æ‹Ÿåˆ</span>ï¼‰- è€ƒè¯•ä¸åŠæ ¼</li>
                    <li>å°çº¢ç†è§£äº†æ ¸å¿ƒæ¦‚å¿µï¼ˆ<span class="highlight-success">é€‚åº¦æ‹Ÿåˆ</span>ï¼‰- è€ƒè¯•ä¼˜ç§€</li>
                    <li>å°åˆšèƒŒä¸‹äº†æ‰€æœ‰ä¹ é¢˜ç­”æ¡ˆï¼ˆ<span class="highlight-warning">è¿‡æ‹Ÿåˆ</span>ï¼‰- é‡åˆ°æ–°é¢˜å°±æ‡µäº†</li>
                </ul>
                <p>æœºå™¨å­¦ä¹ æ¨¡å‹ä¹Ÿä¼šé¢ä¸´åŒæ ·çš„é—®é¢˜ï¼</p>
            </div>

            <div class="demo-container">
                <h3>ğŸ® æ‹Ÿåˆç¨‹åº¦æ¼”ç¤º</h3>
                <canvas id="fittingCanvas" class="demo-canvas" width="800" height="400"></canvas>
                <div class="slider-container">
                    <label>å¤šé¡¹å¼é˜¶æ•°: <span id="polynomialDegree">1</span></label><br>
                    <input type="range" min="1" max="20" value="1" class="slider" id="degreeSlider">
                    <div style="margin-top: 20px;">
                        <button class="btn" onclick="generateNewData()">ç”Ÿæˆæ–°æ•°æ®</button>
                    </div>
                </div>
            </div>

            <div class="grid-3">
                <div class="content-box" style="background: rgba(255, 107, 107, 0.05); border: 2px solid rgba(255, 107, 107, 0.3);">
                    <h4 style="color: var(--primary-red);">ğŸ”» æ¬ æ‹Ÿåˆ (Underfitting)</h4>
                    <p><strong>ç‰¹å¾ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>è®­ç»ƒè¯¯å·®é«˜ âŒ</li>
                        <li>æµ‹è¯•è¯¯å·®é«˜ âŒ</li>
                        <li>æ¨¡å‹è¿‡äºç®€å•</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>å¢åŠ æ¨¡å‹å¤æ‚åº¦</li>
                        <li>æ·»åŠ æ›´å¤šç‰¹å¾</li>
                        <li>å‡å°‘æ­£åˆ™åŒ–</li>
                    </ul>
                </div>

                <div class="content-box" style="background: rgba(76, 175, 80, 0.05); border: 2px solid rgba(76, 175, 80, 0.3);">
                    <h4 style="color: var(--primary-green);">âœ… é€‚åº¦æ‹Ÿåˆ (Good Fit)</h4>
                    <p><strong>ç‰¹å¾ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>è®­ç»ƒè¯¯å·®ä½ âœ…</li>
                        <li>æµ‹è¯•è¯¯å·®ä½ âœ…</li>
                        <li>è‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>è¿™æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ï¼</strong></p>
                    <p>æ¨¡å‹æ—¢èƒ½æ•æ‰æ•°æ®çš„ä¸»è¦æ¨¡å¼ï¼Œåˆä¸ä¼šè¿‡åº¦è®°å¿†è®­ç»ƒæ•°æ®çš„ç»†èŠ‚ã€‚</p>
                </div>

                <div class="content-box" style="background: rgba(102, 126, 234, 0.05); border: 2px solid rgba(102, 126, 234, 0.3);">
                    <h4 style="color: var(--primary-purple);">ğŸ”º è¿‡æ‹Ÿåˆ (Overfitting)</h4>
                    <p><strong>ç‰¹å¾ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>è®­ç»ƒè¯¯å·®ä½ âœ…</li>
                        <li>æµ‹è¯•è¯¯å·®é«˜ âŒ</li>
                        <li>æ¨¡å‹è¿‡äºå¤æ‚</li>
                    </ul>
                    <p style="margin-top: 15px;"><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>æ­£åˆ™åŒ–</li>
                        <li>å¢åŠ è®­ç»ƒæ•°æ®</li>
                        <li>æ—©åœæ³•</li>
                    </ul>
                </div>
            </div>

            <div class="thinking-box">
                <h3>ğŸ¤” åå·®-æ–¹å·®æƒè¡¡</h3>
                <div class="math-formula">
                    æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + ä¸å¯çº¦è¯¯å·®
                </div>
                <p style="margin-top: 20px;">è¿™ä¸ªå…¬å¼å‘Šè¯‰æˆ‘ä»¬ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><span class="highlight-primary">åå·®</span>ï¼šæ¨¡å‹çš„é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„ç³»ç»Ÿæ€§åå·®ï¼ˆæ¬ æ‹Ÿåˆï¼‰</li>
                    <li><span class="highlight-success">æ–¹å·®</span>ï¼šæ¨¡å‹åœ¨ä¸åŒè®­ç»ƒé›†ä¸Šçš„å˜åŒ–ç¨‹åº¦ï¼ˆè¿‡æ‹Ÿåˆï¼‰</li>
                    <li><span class="highlight-warning">ä¸å¯çº¦è¯¯å·®</span>ï¼šæ•°æ®æœ¬èº«çš„å™ªå£°</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- æ­£åˆ™åŒ– -->
    <section id="regularization" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">ğŸ›¡ï¸ æ­£åˆ™åŒ–ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆçš„åˆ©å™¨</h2>

            <div class="story-box">
                <h3>å¤§è„‘çš„å¯å‘</h3>
                <p>æƒ³è±¡ä½ çš„å¤§è„‘åœ¨å­¦ä¹ ä¸€é¡¹æ–°æŠ€èƒ½ã€‚åˆšå¼€å§‹æ—¶ï¼Œå¤§è„‘ä¼šæ¿€æ´»å¾ˆå¤šç¥ç»å…ƒï¼Œå½¢æˆå¤æ‚çš„è¿æ¥ç½‘ç»œã€‚
                    ä½†éšç€ç»ƒä¹ ï¼Œå¤§è„‘ä¼š"å‰ªæ"ï¼Œä¿ç•™æœ€é‡è¦çš„è¿æ¥ï¼Œè®©å…¶ä»–ä¸å¿…è¦çš„è¿æ¥é€æ¸å‡å¼±æˆ–æ¶ˆå¤±ã€‚</p>
                <br>
                <p>æ­£åˆ™åŒ–å°±åƒå¤§è„‘çš„è‡ªç„¶å‰ªææœºåˆ¶ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><span class="highlight-primary">L1æ­£åˆ™åŒ–</span>ï¼šåƒå®Œå…¨å‰ªæ–­ä¸é‡è¦çš„è¿æ¥ï¼ˆå‚æ•°å˜ä¸º0ï¼‰</li>
                    <li><span class="highlight-success">L2æ­£åˆ™åŒ–</span>ï¼šåƒå‡å¼±æ‰€æœ‰è¿æ¥çš„å¼ºåº¦ï¼Œä½†ä¿æŒè¿æ¥å­˜åœ¨</li>
                </ul>
            </div>

            <div class="math-formula">
                Loss<sub>total</sub> = Loss<sub>original</sub> <span class="math-symbol">+</span> Î» <span class="math-symbol">Ã—</span> Regularization<sub>term</sub>
            </div>

            <div class="demo-container">
                <h3>ğŸ® æ­£åˆ™åŒ–æ•ˆæœæ¼”ç¤º</h3>
                <canvas id="regularizationCanvas" class="demo-canvas" width="800" height="400"></canvas>
                <div class="slider-container">
                    <label>æ­£åˆ™åŒ–å¼ºåº¦ Î»: <span id="lambdaValue">0</span></label><br>
                    <input type="range" min="0" max="100" value="0" class="slider" id="lambdaSlider">
                    <div style="margin-top: 10px;">
                        <label>
                            <input type="radio" name="regType" value="none" checked> æ— æ­£åˆ™åŒ–
                        </label>
                        <label>
                            <input type="radio" name="regType" value="l1"> L1æ­£åˆ™åŒ–
                        </label>
                        <label>
                            <input type="radio" name="regType" value="l2"> L2æ­£åˆ™åŒ–
                        </label>
                    </div>
                </div>
            </div>

            <div class="grid-2">
                <div class="content-box" style="background: rgba(240, 147, 251, 0.05); border: 2px solid rgba(240, 147, 251, 0.3);">
                    <h4 style="color: var(--primary-pink);">L1æ­£åˆ™åŒ– (Lasso)</h4>
                    <div class="math-formula">
                        R(w) = Î» <span class="math-symbol">âˆ‘</span> |w<sub>i</sub>|
                    </div>
                    <p><strong>ç‰¹ç‚¹ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>äº§ç”Ÿç¨€ç–è§£ï¼ˆå¾ˆå¤šå‚æ•°å˜ä¸º0ï¼‰</li>
                        <li>è‡ªåŠ¨ç‰¹å¾é€‰æ‹©</li>
                        <li>é€‚åˆé«˜ç»´æ•°æ®</li>
                    </ul>
                </div>

                <div class="content-box" style="background: rgba(79, 172, 254, 0.05); border: 2px solid rgba(79, 172, 254, 0.3);">
                    <h4 style="color: #4facfe;">L2æ­£åˆ™åŒ– (Ridge)</h4>
                    <div class="math-formula">
                        R(w) = Î» <span class="math-symbol">âˆ‘</span> w<sub>i</sub><sup>2</sup>
                    </div>
                    <p><strong>ç‰¹ç‚¹ï¼š</strong></p>
                    <ul style="margin-left: 20px;">
                        <li>å‚æ•°è¶‹å‘äºå°ä½†ä¸ä¸º0</li>
                        <li>æƒé‡è¡°å‡æ•ˆæœ</li>
                        <li>è®¡ç®—æ•ˆç‡é«˜</li>
                    </ul>
                </div>
            </div>

            <div class="code-block">
                    <pre><code><span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Ridge, Lasso, ElasticNet

<span class="comment"># L2æ­£åˆ™åŒ–ï¼ˆRidgeï¼‰</span>
ridge = Ridge(alpha=<span class="number">1.0</span>)
ridge.fit(X_train, y_train)

<span class="comment"># L1æ­£åˆ™åŒ–ï¼ˆLassoï¼‰</span>
lasso = Lasso(alpha=<span class="number">1.0</span>)
lasso.fit(X_train, y_train)

<span class="comment"># Elastic Netï¼ˆL1 + L2ï¼‰</span>
elastic = ElasticNet(alpha=<span class="number">1.0</span>, l1_ratio=<span class="number">0.5</span>)
elastic.fit(X_train, y_train)

<span class="comment"># æŸ¥çœ‹ç³»æ•°ç¨€ç–æ€§</span>
<span class="keyword">print</span>(<span class="string">f"Ridgeéé›¶ç³»æ•°: {np.sum(ridge.coef_ != 0)}/{len(ridge.coef_)}"</span>)
<span class="keyword">print</span>(<span class="string">f"Lassoéé›¶ç³»æ•°: {np.sum(lasso.coef_ != 0)}/{len(lasso.coef_)}"</span>)</code></pre>
            </div>
        </div>
    </section>

    <!-- äº¤å‰éªŒè¯ -->
    <section id="cross-validation" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">ğŸ”„ äº¤å‰éªŒè¯ï¼šæ›´å¯é çš„æ¨¡å‹è¯„ä¼°</h2>

            <div class="story-box">
                <h3>è¯„å§”æ‰“åˆ†çš„æ™ºæ…§</h3>
                <p>äº”ä¸ªè¯„å§”ç»™é€‰æ‰‹æ‰“åˆ†ã€‚å¦‚æœåªæœ‰ä¸€ä¸ªè¯„å§”ï¼Œå¯èƒ½ä¼šæœ‰åè§ã€‚
                    ä½†å¦‚æœè®©æ¯ä¸ªè¯„å§”è½®æµå½“ä¸»è¯„å§”ï¼Œå…¶ä»–äººå½“é™ªå®¡å›¢ï¼Œæœ€åå–å¹³å‡åˆ†ï¼Œ
                    ç»“æœä¼šæ›´åŠ å…¬æ­£å¯é ã€‚è¿™å°±æ˜¯KæŠ˜äº¤å‰éªŒè¯çš„æ€æƒ³ï¼</p>
            </div>

            <div class="demo-container">
                <h3>ğŸ® KæŠ˜äº¤å‰éªŒè¯åŠ¨æ€æ¼”ç¤º</h3>
                <canvas id="cvDemoCanvas" class="demo-canvas" width="800" height="300"></canvas>
                <div class="demo-controls">
                    <button class="btn" onclick="startCVAnimation()">å¼€å§‹æ¼”ç¤º</button>
                    <label style="margin-left: 20px;">
                        Kå€¼:
                        <select id="kValue" style="padding: 5px; background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border-primary); border-radius: 5px;">
                            <option value="3">3</option>
                            <option value="5" selected>5</option>
                            <option value="10">10</option>
                        </select>
                    </label>
                </div>
            </div>

            <div class="grid-3">
                <div class="step-card">
                    <h4 style="color: var(--primary-purple);">ğŸ“Š ç®€å•äº¤å‰éªŒè¯</h4>
                    <p>æ•°æ®åˆ†ä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†</p>
                    <p>ä¼˜ç‚¹ï¼šç®€å•å¿«é€Ÿ</p>
                    <p>ç¼ºç‚¹ï¼šç»“æœä¸ç¨³å®š</p>
                </div>

                <div class="step-card">
                    <h4 style="color: var(--primary-pink);">ğŸ”¢ KæŠ˜äº¤å‰éªŒè¯</h4>
                    <p>æ•°æ®åˆ†æˆKä»½ï¼Œè½®æµéªŒè¯</p>
                    <p>ä¼˜ç‚¹ï¼šç»“æœç¨³å®šå¯é </p>
                    <p>ç¼ºç‚¹ï¼šè®¡ç®—é‡å¢åŠ Kå€</p>
                </div>

                <div class="step-card">
                    <h4 style="color: var(--primary-green);">ğŸ¯ ç•™ä¸€äº¤å‰éªŒè¯</h4>
                    <p>æ¯æ¬¡åªç•™ä¸€ä¸ªæ ·æœ¬éªŒè¯</p>
                    <p>ä¼˜ç‚¹ï¼šå……åˆ†åˆ©ç”¨æ•°æ®</p>
                    <p>ç¼ºç‚¹ï¼šè®¡ç®—æˆæœ¬é«˜</p>
                </div>
            </div>

            <div class="insight-box">
                <h3>ğŸ’¡ Kå€¼çš„é€‰æ‹©</h3>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>Kè¶Šå¤§ï¼Œè®­ç»ƒé›†è¶Šå¤§ï¼Œåå·®è¶Šå°ï¼Œä½†æ–¹å·®è¶Šå¤§ï¼Œè®¡ç®—æ—¶é—´è¶Šé•¿</li>
                    <li>Kè¶Šå°ï¼Œè®¡ç®—æ•ˆç‡é«˜ï¼Œä½†å¯èƒ½è¯„ä¼°ä¸å¤Ÿç¨³å®š</li>
                    <li>å¸¸ç”¨çš„Kå€¼ï¼š5æˆ–10ï¼ˆå¹³è¡¡äº†åå·®ã€æ–¹å·®å’Œè®¡ç®—æ•ˆç‡ï¼‰</li>
                    <li>æ•°æ®é‡å¾ˆå°æ—¶ï¼Œè€ƒè™‘ç•™ä¸€äº¤å‰éªŒè¯</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- ä¼˜åŒ–ç®—æ³• -->
    <section id="optimization" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">âš™ï¸ ä¼˜åŒ–ç®—æ³•ï¼šå¯»æ‰¾æœ€ä¼˜å‚æ•°</h2>

            <div class="story-box">
                <h3>ä¸‹å±±çš„ä¸‰ç§æ–¹æ³•</h3>
                <p>æƒ³è±¡ä½ åœ¨ä¸€ä¸ªç¢—å½¢å±±è°·ä¸­ï¼Œè¦æ‰¾åˆ°æœ€ä½ç‚¹ã€‚ä½ æœ‰ä¸‰ç§æ–¹æ³•ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><span class="highlight-primary">è§£ææ³•</span>ï¼šå¦‚æœåœ°å½¢æ˜¯å®Œç¾çš„æŠ›ç‰©çº¿ï¼Œä½ å¯ä»¥ç”¨æ•°å­¦å…¬å¼ç›´æ¥ç®—å‡ºæœ€ä½ç‚¹</li>
                    <li><span class="highlight-success">æ¢¯åº¦ä¸‹é™</span>ï¼šé—­ç€çœ¼ç›ï¼Œç”¨è„šæ„Ÿå—å¡åº¦ï¼Œå§‹ç»ˆå¾€æœ€é™¡çš„ä¸‹å¡æ–¹å‘èµ°</li>
                    <li><span class="highlight-warning">ç‰›é¡¿æ³•</span>ï¼šä¸ä»…æ„Ÿå—å¡åº¦ï¼Œè¿˜æ„Ÿå—åœ°å½¢çš„å¼¯æ›²ç¨‹åº¦ï¼Œæ›´èªæ˜åœ°é€‰æ‹©è·¯å¾„</li>
                </ul>
            </div>

            <div class="thinking-box">
                <h3>ğŸ¤” æ¢¯åº¦ä¸‹é™çš„æ ¸å¿ƒæ€æƒ³</h3>
                <div class="math-formula">
                    Î¸<sub>t+1</sub> = Î¸<sub>t</sub> - Î± Â· âˆ‡J(Î¸<sub>t</sub>)
                </div>
                <p style="margin-top: 20px;">è¿™ä¸ªç®€å•çš„å…¬å¼èƒŒåè•´å«ç€æ·±åˆ»çš„æ™ºæ…§ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li><span class="highlight-primary">Î¸</span>ï¼šæ¨¡å‹å‚æ•°</li>
                    <li><span class="highlight-success">Î±</span>ï¼šå­¦ä¹ ç‡ï¼ˆæ­¥é•¿ï¼‰</li>
                    <li><span class="highlight-warning">âˆ‡J</span>ï¼šæŸå¤±å‡½æ•°çš„æ¢¯åº¦ï¼ˆå¡åº¦ï¼‰</li>
                </ul>
            </div>

            <div class="demo-container">
                <h3>ğŸ® æ¢¯åº¦ä¸‹é™å¯è§†åŒ–</h3>
                <canvas id="gradientDescentCanvas" class="demo-canvas" width="800" height="400"></canvas>
                <div class="demo-controls">
                    <button class="btn" onclick="startGradientDescent()">å¼€å§‹ä¸‹é™</button>
                    <button class="btn" onclick="resetGradientDescent()">é‡ç½®</button>
                    <label style="margin-left: 20px;">
                        å­¦ä¹ ç‡:
                        <select id="learningRate" style="padding: 5px; background: var(--bg-card); color: var(--text-primary); border: 1px solid var(--border-primary); border-radius: 5px;">
                            <option value="0.01">0.01 (æ…¢)</option>
                            <option value="0.1" selected>0.1 (é€‚ä¸­)</option>
                            <option value="0.5">0.5 (å¿«)</option>
                            <option value="2.0">2.0 (è¿‡å¤§)</option>
                        </select>
                    </label>
                </div>
            </div>

            <div class="grid-3">
                <div class="content-box" style="background: rgba(102, 126, 234, 0.05); border: 2px solid rgba(102, 126, 234, 0.3);">
                    <h4 style="color: var(--primary-purple);">æ‰¹é‡æ¢¯åº¦ä¸‹é™ (BGD)</h4>
                    <p>ä½¿ç”¨<strong>å…¨éƒ¨</strong>è®­ç»ƒæ•°æ®è®¡ç®—æ¢¯åº¦</p>
                    <p>âœ… ç¨³å®šæ”¶æ•›</p>
                    <p>âŒ æ•°æ®é‡å¤§æ—¶å¾ˆæ…¢</p>
                </div>

                <div class="content-box" style="background: rgba(240, 147, 251, 0.05); border: 2px solid rgba(240, 147, 251, 0.3);">
                    <h4 style="color: var(--primary-pink);">éšæœºæ¢¯åº¦ä¸‹é™ (SGD)</h4>
                    <p>æ¯æ¬¡ä½¿ç”¨<strong>ä¸€ä¸ª</strong>æ ·æœ¬è®¡ç®—æ¢¯åº¦</p>
                    <p>âœ… é€Ÿåº¦å¿«ï¼Œèƒ½è·³å‡ºå±€éƒ¨æœ€ä¼˜</p>
                    <p>âŒ éœ‡è¡å¤§ï¼Œå¯èƒ½ä¸æ”¶æ•›</p>
                </div>

                <div class="content-box" style="background: rgba(76, 175, 80, 0.05); border: 2px solid rgba(76, 175, 80, 0.3);">
                    <h4 style="color: var(--primary-green);">å°æ‰¹é‡æ¢¯åº¦ä¸‹é™</h4>
                    <p>æ¯æ¬¡ä½¿ç”¨<strong>ä¸€å°æ‰¹</strong>æ ·æœ¬</p>
                    <p>âœ… å¹³è¡¡é€Ÿåº¦å’Œç¨³å®šæ€§</p>
                    <p>âœ… å……åˆ†åˆ©ç”¨ç¡¬ä»¶å¹¶è¡Œ</p>
                </div>
            </div>

            <div class="code-block">
                    <pre><code><span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="keyword">def</span> <span class="function">gradient_descent</span>(X, y, learning_rate=<span class="number">0.01</span>, epochs=<span class="number">1000</span>):
    <span class="string">"""æ¢¯åº¦ä¸‹é™å®ç°"""</span>
    m, n = X.shape
    theta = np.zeros(n)
    costs = []

    <span class="keyword">for</span> epoch <span class="keyword">in</span> range(epochs):
        <span class="comment"># è®¡ç®—é¢„æµ‹å€¼</span>
        predictions = X.dot(theta)

        <span class="comment"># è®¡ç®—è¯¯å·®</span>
        errors = predictions - y

        <span class="comment"># è®¡ç®—æ¢¯åº¦</span>
        gradient = (X.T.dot(errors)) / m

        <span class="comment"># æ›´æ–°å‚æ•°</span>
        theta -= learning_rate * gradient

        <span class="comment"># è®°å½•æŸå¤±</span>
        cost = np.mean(errors ** <span class="number">2</span>)
        costs.append(cost)

        <span class="keyword">if</span> epoch % <span class="number">100</span> == <span class="number">0</span>:
            <span class="keyword">print</span>(<span class="string">f"Epoch {epoch}, Cost: {cost:.4f}"</span>)

    <span class="keyword">return</span> theta, costs

<span class="comment"># é«˜çº§ä¼˜åŒ–å™¨</span>
<span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> SGDRegressor

<span class="comment"># ä½¿ç”¨ä¸åŒçš„ä¼˜åŒ–ç®—æ³•</span>
sgd = SGDRegressor(
    learning_rate=<span class="string">'adaptive'</span>,  <span class="comment"># è‡ªé€‚åº”å­¦ä¹ ç‡</span>
    eta0=<span class="number">0.01</span>,                  <span class="comment"># åˆå§‹å­¦ä¹ ç‡</span>
    max_iter=<span class="number">1000</span>,              <span class="comment"># æœ€å¤§è¿­ä»£æ¬¡æ•°</span>
    early_stopping=<span class="keyword">True</span>,        <span class="comment"># æ—©åœæ³•</span>
    validation_fraction=<span class="number">0.1</span>     <span class="comment"># éªŒè¯é›†æ¯”ä¾‹</span>
)</code></pre>
            </div>

            <div class="insight-box">
                <h3>ğŸ’¡ å­¦ä¹ ç‡çš„è‰ºæœ¯</h3>
                <div class="grid-2">
                    <div>
                        <h4 style="color: var(--primary-red);">å­¦ä¹ ç‡è¿‡å°</h4>
                        <ul style="margin-left: 20px;">
                            <li>æ”¶æ•›é€Ÿåº¦æ…¢</li>
                            <li>å¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜</li>
                            <li>è®­ç»ƒæ—¶é—´é•¿</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: var(--primary-purple);">å­¦ä¹ ç‡è¿‡å¤§</h4>
                        <ul style="margin-left: 20px;">
                            <li>å¯èƒ½å‘æ•£</li>
                            <li>é”™è¿‡æœ€ä¼˜ç‚¹</li>
                            <li>æŸå¤±éœ‡è¡</li>
                        </ul>
                    </div>
                </div>
                <p style="margin-top: 20px;"><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>å­¦ä¹ ç‡è¡°å‡ã€è‡ªé€‚åº”å­¦ä¹ ç‡ï¼ˆAdamã€RMSpropï¼‰</p>
            </div>
        </div>
    </section>

    <!-- è¯„ä»·æŒ‡æ ‡ -->
    <section id="metrics" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">ğŸ“ æ¨¡å‹è¯„ä»·æŒ‡æ ‡</h2>

            <div class="story-box">
                <h3>åŒ»é™¢çš„ç™Œç—‡æ£€æµ‹ç³»ç»Ÿ</h3>
                <p>åŒ»é™¢çš„ç™Œç—‡æ£€æµ‹ç³»ç»Ÿï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>å¦‚æœç³»ç»Ÿè¯´"æ‰€æœ‰äººéƒ½å¥åº·"ï¼Œå‡†ç¡®ç‡å¯èƒ½é«˜è¾¾99%ï¼ˆå› ä¸ºç™Œç—‡æ‚£è€…å¾ˆå°‘ï¼‰</li>
                    <li>ä½†è¿™æ ·çš„ç³»ç»Ÿæ¯«æ— ä»·å€¼ï¼Œå› ä¸ºå®ƒä¼šæ¼æ‰æ‰€æœ‰çœŸæ­£çš„æ‚£è€…ï¼</li>
                </ul>
                <p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ç²¾ç¡®ç‡ã€å¬å›ç‡ç­‰æ›´ç»†è‡´çš„æŒ‡æ ‡ã€‚</p>
            </div>

            <div class="thinking-box">
                <h3>ğŸ¤” æ··æ·†çŸ©é˜µ</h3>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; max-width: 400px; margin: 20px auto;">
                    <div></div>
                    <div style="text-align: center; font-weight: bold;">é¢„æµ‹ï¼šæ­£</div>
                    <div style="text-align: center; font-weight: bold;">é¢„æµ‹ï¼šè´Ÿ</div>
                    <div style="text-align: center; font-weight: bold;">å®é™…ï¼šæ­£</div>
                    <div style="background: rgba(76, 175, 80, 0.2); padding: 20px; text-align: center; border-radius: 8px;">
                        <strong>TP</strong><br>çœŸæ­£ä¾‹
                    </div>
                    <div style="background: rgba(255, 107, 107, 0.2); padding: 20px; text-align: center; border-radius: 8px;">
                        <strong>FN</strong><br>å‡è´Ÿä¾‹
                    </div>
                    <div style="text-align: center; font-weight: bold;">å®é™…ï¼šè´Ÿ</div>
                    <div style="background: rgba(255, 152, 0, 0.2); padding: 20px; text-align: center; border-radius: 8px;">
                        <strong>FP</strong><br>å‡æ­£ä¾‹
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.2); padding: 20px; text-align: center; border-radius: 8px;">
                        <strong>TN</strong><br>çœŸè´Ÿä¾‹
                    </div>
                </div>
            </div>

            <div class="steps-container">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h4>å‡†ç¡®ç‡ (Accuracy)</h4>
                    <div class="math-formula">
                            <span class="math-fraction">
                                <span class="math-numerator">TP + TN</span>
                                <span class="math-denominator">Total</span>
                            </span>
                    </div>
                    <p>æ•´ä½“æ­£ç¡®ç‡</p>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <h4>ç²¾ç¡®ç‡ (Precision)</h4>
                    <div class="math-formula">
                            <span class="math-fraction">
                                <span class="math-numerator">TP</span>
                                <span class="math-denominator">TP + FP</span>
                            </span>
                    </div>
                    <p>æŸ¥å‡†ç‡</p>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <h4>å¬å›ç‡ (Recall)</h4>
                    <div class="math-formula">
                            <span class="math-fraction">
                                <span class="math-numerator">TP</span>
                                <span class="math-denominator">TP + FN</span>
                            </span>
                    </div>
                    <p>æŸ¥å…¨ç‡</p>
                </div>

                <div class="step-card">
                    <div class="step-number">4</div>
                    <h4>F1åˆ†æ•°</h4>
                    <div class="math-formula">
                            <span class="math-fraction">
                                <span class="math-numerator">2 Ã— P Ã— R</span>
                                <span class="math-denominator">P + R</span>
                            </span>
                    </div>
                    <p>è°ƒå’Œå¹³å‡</p>
                </div>
            </div>

            <div class="demo-container">
                <h3>ğŸ® ROCæ›²çº¿ä¸AUC</h3>
                <canvas id="rocCanvas" class="demo-canvas" width="600" height="600"></canvas>
                <div style="text-align: center; margin-top: 15px;">
                    <span style="font-size: 1.1rem;">AUC: <span id="aucValue" style="color: var(--primary-purple); font-weight: bold;">0.85</span></span>
                </div>
            </div>

            <div class="insight-box">
                <h3>ğŸ’¡ é€‰æ‹©åˆé€‚çš„è¯„ä»·æŒ‡æ ‡</h3>
                <table class="data-table">
                    <thead>
                    <tr>
                        <th>åœºæ™¯</th>
                        <th>æ¨èæŒ‡æ ‡</th>
                        <th>åŸå› </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>ç±»åˆ«å¹³è¡¡</td>
                        <td>å‡†ç¡®ç‡</td>
                        <td>ç®€å•ç›´è§‚ï¼Œæ˜“äºç†è§£</td>
                    </tr>
                    <tr>
                        <td>ç±»åˆ«ä¸å¹³è¡¡</td>
                        <td>F1åˆ†æ•°ã€AUC</td>
                        <td>ç»¼åˆè€ƒè™‘ç²¾ç¡®ç‡å’Œå¬å›ç‡</td>
                    </tr>
                    <tr>
                        <td>é‡è§†å‡é˜³æ€§</td>
                        <td>ç²¾ç¡®ç‡</td>
                        <td>å¦‚åƒåœ¾é‚®ä»¶è¿‡æ»¤</td>
                    </tr>
                    <tr>
                        <td>é‡è§†å‡é˜´æ€§</td>
                        <td>å¬å›ç‡</td>
                        <td>å¦‚ç–¾ç—…è¯Šæ–­</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- æ€»ç»“ä¸å®è·µ -->
    <section id="summary" class="section section-anchor">
        <div class="section-card fade-in">
            <h2 class="section-title">ğŸ“ æ€»ç»“ä¸å®è·µ</h2>

            <div class="summary-card">
                <h3 style="font-size: 2rem; margin-bottom: 30px;">ğŸ¯ æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
                <div class="grid-2" style="text-align: left;">
                    <div>
                        <h4 style="color: #fbbf24; margin-bottom: 15px;">ç†è®ºåŸºç¡€</h4>
                        <ul style="margin-left: 20px; line-height: 2;">
                            <li>æŸå¤±å‡½æ•°åº¦é‡é¢„æµ‹è¯¯å·®</li>
                            <li>åå·®-æ–¹å·®æƒè¡¡</li>
                            <li>è¿‡æ‹Ÿåˆä¸æ¬ æ‹Ÿåˆ</li>
                            <li>æ­£åˆ™åŒ–é˜²æ­¢è¿‡æ‹Ÿåˆ</li>
                        </ul>
                    </div>
                    <div>
                        <h4 style="color: #10b981; margin-bottom: 15px;">å®è·µæŠ€å·§</h4>
                        <ul style="margin-left: 20px; line-height: 2;">
                            <li>äº¤å‰éªŒè¯é€‰æ‹©å‚æ•°</li>
                            <li>æ¢¯åº¦ä¸‹é™ä¼˜åŒ–</li>
                            <li>é€‰æ‹©åˆé€‚çš„è¯„ä»·æŒ‡æ ‡</li>
                            <li>æ—©åœæ³•é˜²æ­¢è¿‡æ‹Ÿåˆ</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="exercise-box">
                <h3>âœï¸ åŠ¨æ‰‹å®è·µ</h3>
                <ol style="margin-left: 20px; line-height: 2.5;">
                    <li>ä½¿ç”¨ä¸åŒçš„æŸå¤±å‡½æ•°è®­ç»ƒåŒä¸€ä¸ªæ¨¡å‹ï¼Œæ¯”è¾ƒæ•ˆæœå·®å¼‚</li>
                    <li>é€šè¿‡æ”¹å˜æ¨¡å‹å¤æ‚åº¦ï¼Œè§‚å¯Ÿè®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®çš„å˜åŒ–</li>
                    <li>å®ç°L1å’ŒL2æ­£åˆ™åŒ–ï¼Œè§‚å¯Ÿå‚æ•°çš„ç¨€ç–æ€§</li>
                    <li>ä½¿ç”¨5æŠ˜äº¤å‰éªŒè¯é€‰æ‹©æœ€ä¼˜çš„æ­£åˆ™åŒ–å‚æ•°Î»</li>
                    <li>å®ç°æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œå°è¯•ä¸åŒçš„å­¦ä¹ ç‡</li>
                    <li>åœ¨ä¸å¹³è¡¡æ•°æ®é›†ä¸Šæ¯”è¾ƒä¸åŒè¯„ä»·æŒ‡æ ‡çš„è¡¨ç°</li>
                </ol>
            </div>

            <div class="thinking-box">
                <h3>ğŸ¤” æ·±å…¥æ€è€ƒ</h3>
                <p><strong>æ¨¡å‹è¯„ä¼°çš„å“²å­¦ï¼š</strong></p>
                <p>çˆ±å› æ–¯å¦è¯´ï¼š"Everything should be made as simple as possible, but not simpler."</p>
                <p>è¿™å¥è¯å®Œç¾åœ°è¯ é‡Šäº†æ¨¡å‹é€‰æ‹©çš„æ™ºæ…§ï¼š</p>
                <ul style="margin-left: 20px; line-height: 2;">
                    <li>æ¨¡å‹åº”è¯¥è¶³å¤Ÿç®€å•ï¼Œä»¥ä¿æŒè‰¯å¥½çš„æ³›åŒ–èƒ½åŠ›</li>
                    <li>ä½†ä¸èƒ½è¿‡äºç®€å•ï¼Œä»¥è‡³äºæ— æ³•æ•æ‰æ•°æ®çš„æœ¬è´¨è§„å¾‹</li>
                    <li>æ‰¾åˆ°è¿™ä¸ªå¹³è¡¡ç‚¹ï¼Œå°±æ˜¯æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©çš„è‰ºæœ¯</li>
                </ul>
            </div>

            <div class="insight-box">
                <h3>ğŸ’¡ è®°ä½è¿™äº›åŸåˆ™</h3>
                <div style="font-size: 1.1rem; line-height: 2;">
                    <p>âœ… <strong>æ²¡æœ‰å…è´¹çš„åˆé¤</strong>ï¼šæ²¡æœ‰ä¸€ä¸ªæ¨¡å‹åœ¨æ‰€æœ‰é—®é¢˜ä¸Šéƒ½æ˜¯æœ€å¥½çš„</p>
                    <p>âœ… <strong>å¥¥å¡å§†å‰ƒåˆ€</strong>ï¼šåœ¨æ•ˆæœç›¸è¿‘çš„æƒ…å†µä¸‹ï¼Œé€‰æ‹©æ›´ç®€å•çš„æ¨¡å‹</p>
                    <p>âœ… <strong>éªŒè¯ï¼ŒéªŒè¯ï¼Œå†éªŒè¯</strong>ï¼šæ°¸è¿œä¸è¦ç›¸ä¿¡è®­ç»ƒé›†ä¸Šçš„æ€§èƒ½</p>
                    <p>âœ… <strong>äº†è§£ä½ çš„æ•°æ®</strong>ï¼šé€‰æ‹©åˆé€‚çš„è¯„ä»·æŒ‡æ ‡å’Œæ–¹æ³•</p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 50px;">
                <h3 style="color: var(--primary-purple); margin-bottom: 20px;">ğŸ‰ æ­å–œå®Œæˆå­¦ä¹ ï¼</h3>
                <p style="font-size: 1.2rem; margin-bottom: 30px;">ä½ å·²ç»æŒæ¡äº†æ„å»ºå¯é æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ ¸å¿ƒçŸ¥è¯†</p>
                <div class="quick-nav">
                    <button class="btn" onclick="downloadNotes()">ğŸ“¥ ä¸‹è½½å­¦ä¹ ç¬”è®°</button>
                    <button class="btn btn-secondary" onclick="shareProgress()">ğŸ“¤ åˆ†äº«å­¦ä¹ æˆæœ</button>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- æµ®åŠ¨å·¥å…·æ  -->
<div class="floating-toolbar">
    <button class="toolbar-btn" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">
        <span id="themeIcon">ğŸŒ“</span>
    </button>
    <button class="toolbar-btn" onclick="scrollToTop()" title="å›åˆ°é¡¶éƒ¨">
        â¬†ï¸
    </button>
    <button class="toolbar-btn" onclick="toggleFullscreen()" title="å…¨å±æ¨¡å¼">
        ğŸ–¥ï¸
    </button>
</div>

<script>
    // å…¨å±€å˜é‡
    let startTime = Date.now();
    let scrollProgress = 0;
    let completedSections = new Set();

    // åˆå§‹åŒ–
    function init() {
        // åŠ è½½ä¸»é¢˜
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.body.classList.add('light-theme');
            updateThemeIcon();
        }

        // éšè—åŠ è½½åŠ¨ç”»
        setTimeout(() => {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }, 500);

        // åˆå§‹åŒ–æ‰€æœ‰æ¼”ç¤º
        initLossFunctions();
        initFittingDemo();
        initRegularizationDemo();
        initCrossValidation();
        initGradientDescent();
        initROCCurve();

        // æ·»åŠ äº‹ä»¶ç›‘å¬
        window.addEventListener('scroll', updateProgress);
        window.addEventListener('resize', handleResize);
        document.addEventListener('keydown', handleKeypress);

        // åˆå§‹æ›´æ–°
        updateProgress();
    }

    // ä¸»é¢˜åˆ‡æ¢
    function toggleTheme() {
        document.body.classList.toggle('light-theme');
        const isLight = document.body.classList.contains('light-theme');
        localStorage.setItem('theme', isLight ? 'light' : 'dark');
        updateThemeIcon();
    }

    function updateThemeIcon() {
        const icon = document.getElementById('themeIcon');
        const isLight = document.body.classList.contains('light-theme');
        icon.textContent = isLight ? 'â˜€ï¸' : 'ğŸŒ“';
    }

    // å¯¼èˆªåˆ‡æ¢
    function toggleNav() {
        document.body.classList.toggle('nav-open');
    }

    // æ»šåŠ¨åˆ°é¡¶éƒ¨
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    // å…¨å±åˆ‡æ¢
    function toggleFullscreen() {
        if (!document.fullscreenElement) {
            document.documentElement.requestFullscreen();
        } else {
            document.exitFullscreen();
        }
    }

    // æ›´æ–°è¿›åº¦
    function updateProgress() {
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const scrollTop = window.scrollY;

        // è®¡ç®—æ»šåŠ¨è¿›åº¦
        scrollProgress = Math.min((scrollTop / (documentHeight - windowHeight)) * 100, 100);

        // æ›´æ–°è¿›åº¦æ¡
        document.getElementById('topProgressFill').style.width = scrollProgress + '%';
        document.getElementById('topProgressText').textContent = Math.round(scrollProgress) + '%';
        document.getElementById('navProgressFill').style.width = scrollProgress + '%';
        document.getElementById('progressPercent').textContent = Math.round(scrollProgress) + '%';

        // æ›´æ–°å­¦ä¹ æ—¶é•¿
        const timeSpent = Math.round((Date.now() - startTime) / 60000);
        document.getElementById('timeSpent').textContent = timeSpent + 'åˆ†';

        // æ›´æ–°ç« èŠ‚çŠ¶æ€
        updateSectionStatus();
    }

    // æ›´æ–°ç« èŠ‚çŠ¶æ€
    function updateSectionStatus() {
        const sections = document.querySelectorAll('.section');
        const navItems = document.querySelectorAll('.nav-item');

        sections.forEach((section, index) => {
            const rect = section.getBoundingClientRect();
            const isVisible = rect.top < window.innerHeight * 0.5 && rect.bottom > 0;

            if (isVisible && !completedSections.has(section.id)) {
                completedSections.add(section.id);
                if (navItems[index]) {
                    navItems[index].classList.add('completed');
                }
            }

            // æ›´æ–°å½“å‰æ´»åŠ¨ç« èŠ‚
            if (rect.top <= 100 && rect.bottom > 100) {
                navItems.forEach(item => item.classList.remove('active'));
                if (navItems[index]) {
                    navItems[index].classList.add('active');
                }
            }
        });
    }

    // é”®ç›˜å¿«æ·é”®
    function handleKeypress(e) {
        if (e.altKey && e.key === 'n') {
            toggleNav();
        }
        if (e.ctrlKey && e.key === 't') {
            toggleTheme();
        }
    }

    // çª—å£å¤§å°è°ƒæ•´
    function handleResize() {
        // é‡æ–°ç»˜åˆ¶æ‰€æœ‰canvas
        initLossFunctions();
        initFittingDemo();
    }

    // æŸå¤±å‡½æ•°å¯è§†åŒ–
    function initLossFunctions() {
        const canvas = document.getElementById('lossFunctionsChart');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        function drawLossFunctions() {
            ctx.clearRect(0, 0, width, height);

            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(width / 2, 20);
            ctx.lineTo(width / 2, height - 20);
            ctx.moveTo(20, height / 2);
            ctx.lineTo(width - 20, height / 2);
            ctx.stroke();

            // åæ ‡è½´æ ‡ç­¾
            ctx.fillStyle = 'var(--text-primary)';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('è¯¯å·®', width / 2 + 30, 35);
            ctx.fillText('æŸå¤±', 35, height / 2 - 10);

            const scale = 100;
            const functions = {
                '01Loss': {
                    fn: (x) => Math.abs(x) > 0.01 ? 1 : 0,
                    color: '#ef4444',
                    show: document.getElementById('show01Loss').checked
                },
                'MSE': {
                    fn: (x) => x * x,
                    color: '#7c3aed',
                    show: document.getElementById('showMSE').checked
                },
                'MAE': {
                    fn: (x) => Math.abs(x),
                    color: '#10b981',
                    show: document.getElementById('showMAE').checked
                },
                'Log': {
                    fn: (x) => x > 0 ? -Math.log(1 - Math.min(0.99, Math.abs(x))) : -Math.log(1 - Math.min(0.99, Math.abs(x))),
                    color: '#ec4899',
                    show: document.getElementById('showLog').checked
                }
            };

            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            Object.entries(functions).forEach(([name, config]) => {
                if (!config.show) return;

                ctx.strokeStyle = config.color;
                ctx.lineWidth = 3;
                ctx.beginPath();

                for (let px = 20; px < width - 20; px++) {
                    const x = (px - width / 2) / scale;
                    const y = config.fn(x);
                    const py = height / 2 - y * scale;

                    if (px === 20) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                }
                ctx.stroke();
            });

            // å›¾ä¾‹
            let legendY = 30;
            Object.entries(functions).forEach(([name, config]) => {
                if (!config.show) return;
                ctx.fillStyle = config.color;
                ctx.fillRect(width - 120, legendY, 20, 3);
                ctx.fillStyle = 'var(--text-primary)';
                ctx.font = '12px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(name, width - 90, legendY + 4);
                legendY += 20;
            });
        }

        // æ·»åŠ äº‹ä»¶ç›‘å¬
        ['show01Loss', 'showMSE', 'showMAE', 'showLog'].forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.addEventListener('change', drawLossFunctions);
            }
        });

        drawLossFunctions();
    }

    // æ‹Ÿåˆæ¼”ç¤º
    let fittingData = [];
    function initFittingDemo() {
        const canvas = document.getElementById('fittingCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const slider = document.getElementById('degreeSlider');
        const degreeSpan = document.getElementById('polynomialDegree');

        // ç”Ÿæˆæ•°æ®
        function generateData() {
            fittingData = [];
            for (let i = 0; i < 50; i++) {
                const x = Math.random() * 6 - 3;
                const y = Math.sin(x) + (Math.random() - 0.5) * 0.5;
                fittingData.push({ x, y });
            }
            drawFitting();
        }

        // å¤šé¡¹å¼æ‹Ÿåˆï¼ˆç®€åŒ–ç‰ˆï¼‰
        function polynomialFit(degree) {
            const coeffs = [];
            for (let i = 0; i <= degree; i++) {
                coeffs.push((Math.random() - 0.5) * 2 / Math.pow(2, i));
            }
            return (x) => {
                let y = 0;
                for (let i = 0; i <= degree; i++) {
                    y += coeffs[i] * Math.pow(x, i);
                }
                return y;
            };
        }

        function drawFitting() {
            const degree = parseInt(slider.value);
            degreeSpan.textContent = degree;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const padding = 50;
            const plotWidth = canvas.width - 2 * padding;
            const plotHeight = canvas.height - 2 * padding;

            // åæ ‡è½´
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, canvas.height - padding);
            ctx.stroke();

            // æ•°æ®ç‚¹
            ctx.fillStyle = '#10b981';
            fittingData.forEach(point => {
                const x = padding + (point.x + 3) / 6 * plotWidth;
                const y = canvas.height - padding - (point.y + 1.5) / 3 * plotHeight;
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
            });

            // æ‹Ÿåˆæ›²çº¿
            const fitFn = polynomialFit(degree);
            ctx.strokeStyle = degree <= 3 ? '#10b981' : (degree <= 10 ? '#f97316' : '#ef4444');
            ctx.lineWidth = 3;
            ctx.beginPath();

            for (let px = padding; px <= canvas.width - padding; px++) {
                const x = (px - padding) / plotWidth * 6 - 3;
                const y = fitFn(x);
                const py = canvas.height - padding - (y + 1.5) / 3 * plotHeight;

                if (px === padding) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();

            // æ ‡ç­¾
            ctx.fillStyle = 'var(--text-primary)';
            ctx.font = '16px Arial';
            const label = degree <= 3 ? 'æ¬ æ‹Ÿåˆ' : (degree <= 10 ? 'é€‚åº¦æ‹Ÿåˆ' : 'è¿‡æ‹Ÿåˆ');
            const color = degree <= 3 ? '#ef4444' : (degree <= 10 ? '#10b981' : '#ef4444');
            ctx.fillStyle = color;
            ctx.fillText(label, canvas.width - 100, 40);
        }

        slider.addEventListener('input', drawFitting);
        window.generateNewData = generateData;

        generateData();
    }

    // æ­£åˆ™åŒ–æ¼”ç¤º
    function initRegularizationDemo() {
        const canvas = document.getElementById('regularizationCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const lambdaSlider = document.getElementById('lambdaSlider');
        const lambdaValue = document.getElementById('lambdaValue');

        let regularizationType = 'none';
        const radioButtons = document.getElementsByName('regType');
        radioButtons.forEach(radio => {
            radio.addEventListener('change', (e) => {
                regularizationType = e.target.value;
                drawRegularization();
            });
        });

        // ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
        const data = [];
        for (let i = 0; i < 30; i++) {
            const x = Math.random() * 4 - 2;
            const y = 0.5 * x + Math.sin(x * 2) + (Math.random() - 0.5) * 0.5;
            data.push({ x, y });
        }

        function drawRegularization() {
            const lambda = parseFloat(lambdaSlider.value) / 100;
            lambdaValue.textContent = lambda.toFixed(2);

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const padding = 50;
            const plotWidth = canvas.width - 2 * padding;
            const plotHeight = canvas.height - 2 * padding;

            // åæ ‡è½´
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, canvas.height / 2);
            ctx.lineTo(canvas.width - padding, canvas.height / 2);
            ctx.moveTo(canvas.width / 2, padding);
            ctx.lineTo(canvas.width / 2, canvas.height - padding);
            ctx.stroke();

            // æ•°æ®ç‚¹
            ctx.fillStyle = '#10b981';
            data.forEach(point => {
                const x = canvas.width / 2 + point.x * plotWidth / 4;
                const y = canvas.height / 2 - point.y * plotHeight / 4;
                ctx.beginPath();
                ctx.arc(x, y, 4, 0, Math.PI * 2);
                ctx.fill();
            });

            // æ¨¡æ‹Ÿæ­£åˆ™åŒ–æ•ˆæœçš„æ‹Ÿåˆçº¿
            let coeffs = [0.5, 0.3, -0.1, 0.05];

            if (regularizationType === 'l1') {
                coeffs = coeffs.map(c => Math.abs(c) < lambda * 0.5 ? 0 : c * (1 - lambda * 0.3));
            } else if (regularizationType === 'l2') {
                coeffs = coeffs.map(c => c * (1 - lambda * 0.5));
            }

            // ç»˜åˆ¶æ‹Ÿåˆæ›²çº¿
            ctx.strokeStyle = regularizationType === 'none' ? '#ef4444' :
                regularizationType === 'l1' ? '#ec4899' : '#4facfe';
            ctx.lineWidth = 3;
            ctx.beginPath();

            for (let px = padding; px <= canvas.width - padding; px++) {
                const x = (px - canvas.width / 2) / plotWidth * 4;
                let y = 0;
                for (let i = 0; i < coeffs.length; i++) {
                    y += coeffs[i] * Math.pow(x, i);
                }
                const py = canvas.height / 2 - y * plotHeight / 4;

                if (px === padding) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();

            // æ˜¾ç¤ºç³»æ•°
            ctx.fillStyle = 'var(--text-primary)';
            ctx.font = '12px Arial';
            ctx.fillText('å‚æ•°å€¼:', 20, 30);
            coeffs.forEach((c, i) => {
                ctx.fillText(`w${i}: ${c.toFixed(3)}`, 20, 50 + i * 20);
            });
        }

        lambdaSlider.addEventListener('input', drawRegularization);
        drawRegularization();
    }

    // äº¤å‰éªŒè¯åŠ¨ç”»
    let cvAnimationId;
    function initCrossValidation() {
        const canvas = document.getElementById('cvDemoCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        let currentFold = 0;
        let isAnimating = false;

        function drawCV() {
            const kValueElement = document.getElementById('kValue');
            const k = kValueElement ? parseInt(kValueElement.value) : 5;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const padding = 50;
            const totalWidth = canvas.width - 2 * padding;
            const foldWidth = totalWidth / k;
            const barHeight = 60;
            const y = (canvas.height - barHeight) / 2;

            // ç»˜åˆ¶æ‰€æœ‰æŠ˜
            for (let i = 0; i < k; i++) {
                const x = padding + i * foldWidth;

                if (i === currentFold) {
                    ctx.fillStyle = 'rgba(240, 147, 251, 0.6)';
                    ctx.strokeStyle = '#ec4899';
                } else {
                    ctx.fillStyle = 'rgba(102, 126, 234, 0.3)';
                    ctx.strokeStyle = '#667eea';
                }

                ctx.fillRect(x, y, foldWidth - 5, barHeight);
                ctx.strokeRect(x, y, foldWidth - 5, barHeight);

                // æ ‡ç­¾
                ctx.fillStyle = 'var(--text-primary)';
                ctx.font = '14px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(i === currentFold ? 'Val' : 'Train', x + foldWidth / 2, y + barHeight / 2 + 5);
            }

            // æ˜¾ç¤ºå½“å‰æŠ˜ä¿¡æ¯
            ctx.fillStyle = 'var(--text-primary)';
            ctx.font = '16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`ç¬¬ ${currentFold + 1} / ${k} æŠ˜`, canvas.width / 2, 40);
        }

        window.startCVAnimation = function() {
            if (isAnimating) return;
            isAnimating = true;
            currentFold = 0;

            const kValueElement = document.getElementById('kValue');
            const k = kValueElement ? parseInt(kValueElement.value) : 5;

            function animate() {
                drawCV();
                currentFold++;

                if (currentFold < k) {
                    cvAnimationId = setTimeout(animate, 1000);
                } else {
                    isAnimating = false;
                    currentFold = 0;
                }
            }

            animate();
        };

        drawCV();
    }

    // æ¢¯åº¦ä¸‹é™å¯è§†åŒ–
    let gdPath = [];
    let gdAnimationId;

    function initGradientDescent() {
        const canvas = document.getElementById('gradientDescentCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');

        // å®šä¹‰æŸå¤±å‡½æ•°ï¼ˆç®€å•çš„äºŒæ¬¡å‡½æ•°ï¼‰
        const lossFunction = (x) => (x - 2) * (x - 2) + 1;
        const gradient = (x) => 2 * (x - 2);

        function drawLandscape() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const padding = 50;
            const plotWidth = canvas.width - 2 * padding;
            const plotHeight = canvas.height - 2 * padding;

            // åæ ‡è½´
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, canvas.height - padding);
            ctx.stroke();

            // ç»˜åˆ¶æŸå¤±å‡½æ•°æ›²çº¿
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.beginPath();

            for (let px = padding; px <= canvas.width - padding; px++) {
                const x = (px - padding) / plotWidth * 6 - 2;
                const y = lossFunction(x);
                const py = canvas.height - padding - (y / 10) * plotHeight;

                if (px === padding) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();

            // ç»˜åˆ¶æ¢¯åº¦ä¸‹é™è·¯å¾„
            if (gdPath.length > 0) {
                ctx.strokeStyle = '#ec4899';
                ctx.lineWidth = 3;
                ctx.beginPath();

                gdPath.forEach((point, i) => {
                    const px = padding + (point.x + 2) / 6 * plotWidth;
                    const py = canvas.height - padding - (point.y / 10) * plotHeight;

                    if (i === 0) {
                        ctx.moveTo(px, py);
                    } else {
                        ctx.lineTo(px, py);
                    }
                });
                ctx.stroke();

                // ç»˜åˆ¶å½“å‰ç‚¹
                const current = gdPath[gdPath.length - 1];
                const px = padding + (current.x + 2) / 6 * plotWidth;
                const py = canvas.height - padding - (current.y / 10) * plotHeight;

                ctx.fillStyle = '#10b981';
                ctx.beginPath();
                ctx.arc(px, py, 8, 0, Math.PI * 2);
                ctx.fill();

                // æ˜¾ç¤ºä¿¡æ¯
                ctx.fillStyle = 'var(--text-primary)';
                ctx.font = '14px Arial';
                ctx.fillText(`x = ${current.x.toFixed(4)}`, canvas.width - 150, 40);
                ctx.fillText(`Loss = ${current.y.toFixed(4)}`, canvas.width - 150, 60);
                ctx.fillText(`Gradient = ${current.grad.toFixed(4)}`, canvas.width - 150, 80);
            }
        }

        window.startGradientDescent = function() {
            if (gdAnimationId) return;

            const learningRateElement = document.getElementById('learningRate');
            const lr = parseFloat(learningRateElement.value);
            let x = -1.5; // èµ·å§‹ç‚¹
            gdPath = [];

            function step() {
                const grad = gradient(x);
                const y = lossFunction(x);

                gdPath.push({ x, y, grad });

                x = x - lr * grad;

                drawLandscape();

                if (Math.abs(grad) > 0.001 && gdPath.length < 100) {
                    gdAnimationId = requestAnimationFrame(() => {
                        setTimeout(step, 100);
                    });
                } else {
                    gdAnimationId = null;
                }
            }

            step();
        };

        window.resetGradientDescent = function() {
            if (gdAnimationId) {
                cancelAnimationFrame(gdAnimationId);
                gdAnimationId = null;
            }
            gdPath = [];
            drawLandscape();
        };

        drawLandscape();
    }

    // ROCæ›²çº¿
    function initROCCurve() {
        const canvas = document.getElementById('rocCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const size = Math.min(canvas.width, canvas.height);
        const padding = 60;
        const plotSize = size - 2 * padding;

        function drawROC() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // åæ ‡è½´
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(padding, size - padding);
            ctx.lineTo(size - padding, size - padding);
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, size - padding);
            ctx.stroke();

            // æ ‡ç­¾
            ctx.fillStyle = 'var(--text-primary)';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('å‡æ­£ä¾‹ç‡ (FPR)', size / 2, size - 20);
            ctx.save();
            ctx.translate(20, size / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('çœŸæ­£ä¾‹ç‡ (TPR)', 0, 0);
            ctx.restore();

            // å¯¹è§’çº¿ï¼ˆéšæœºåˆ†ç±»å™¨ï¼‰
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(padding, size - padding);
            ctx.lineTo(size - padding, padding);
            ctx.stroke();
            ctx.setLineDash([]);

            // ROCæ›²çº¿
            const rocPoints = [
                { fpr: 0, tpr: 0 },
                { fpr: 0.1, tpr: 0.4 },
                { fpr: 0.2, tpr: 0.65 },
                { fpr: 0.3, tpr: 0.8 },
                { fpr: 0.5, tpr: 0.9 },
                { fpr: 0.7, tpr: 0.95 },
                { fpr: 1, tpr: 1 }
            ];

            // å¡«å……AUCåŒºåŸŸ
            ctx.fillStyle = 'rgba(124, 58, 237, 0.2)';
            ctx.beginPath();
            ctx.moveTo(padding, size - padding);
            rocPoints.forEach(point => {
                const x = padding + point.fpr * plotSize;
                const y = size - padding - point.tpr * plotSize;
                ctx.lineTo(x, y);
            });
            ctx.lineTo(size - padding, size - padding);
            ctx.closePath();
            ctx.fill();

            // ç»˜åˆ¶æ›²çº¿
            ctx.strokeStyle = '#7c3aed';
            ctx.lineWidth = 3;
            ctx.beginPath();
            rocPoints.forEach((point, i) => {
                const x = padding + point.fpr * plotSize;
                const y = size - padding - point.tpr * plotSize;

                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            });
            ctx.stroke();

            // ç»˜åˆ¶ç‚¹
            rocPoints.forEach(point => {
                const x = padding + point.fpr * plotSize;
                const y = size - padding - point.tpr * plotSize;

                ctx.fillStyle = '#ec4899';
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, Math.PI * 2);
                ctx.fill();
            });

            // ç½‘æ ¼çº¿
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            ctx.lineWidth = 1;
            for (let i = 0.2; i < 1; i += 0.2) {
                // å‚ç›´çº¿
                ctx.beginPath();
                ctx.moveTo(padding + i * plotSize, padding);
                ctx.lineTo(padding + i * plotSize, size - padding);
                ctx.stroke();

                // æ°´å¹³çº¿
                ctx.beginPath();
                ctx.moveTo(padding, size - padding - i * plotSize);
                ctx.lineTo(size - padding, size - padding - i * plotSize);
                ctx.stroke();
            }

            // å®Œç¾åˆ†ç±»å™¨æ ‡æ³¨
            ctx.fillStyle = '#10b981';
            ctx.beginPath();
            ctx.arc(padding, padding, 6, 0, Math.PI * 2);
            ctx.fill();
            ctx.fillStyle = 'var(--text-primary)';
            ctx.font = '12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('å®Œç¾åˆ†ç±»å™¨', padding + 10, padding);
        }

        drawROC();
    }

    // ä¸‹è½½ç¬”è®°
    function downloadNotes() {
        const notes = `# æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹© - å­¦ä¹ ç¬”è®°

## 1. ä¸ºä»€ä¹ˆæ¨¡å‹è¯„ä¼°å¦‚æ­¤é‡è¦ï¼Ÿ
- è®­ç»ƒé›†è¡¨ç°å¥½â‰ æµ‹è¯•é›†è¡¨ç°å¥½
- éœ€è¦ç¡®ä¿æ¨¡å‹å…·æœ‰æ³›åŒ–èƒ½åŠ›
- é¿å…è¿‡æ‹Ÿåˆå’Œæ¬ æ‹Ÿåˆ

## 2. æŸå¤±å‡½æ•°
### åˆ†ç±»æŸå¤±
- 0-1æŸå¤±ï¼šç®€å•ä½†ä¸å¯å¯¼
- äº¤å‰ç†µæŸå¤±ï¼šæ¦‚ç‡è§£é‡Šæ¸…æ™°

### å›å½’æŸå¤±
- å¹³æ–¹æŸå¤±ï¼ˆMSEï¼‰ï¼šå¯¹å¼‚å¸¸å€¼æ•æ„Ÿ
- ç»å¯¹æŸå¤±ï¼ˆMAEï¼‰ï¼šå¯¹å¼‚å¸¸å€¼é²æ£’
- HuberæŸå¤±ï¼šç»“åˆMSEå’ŒMAEçš„ä¼˜ç‚¹

## 3. æ¬ æ‹Ÿåˆä¸è¿‡æ‹Ÿåˆ
### æ¬ æ‹Ÿåˆ
- æ¨¡å‹è¿‡äºç®€å•
- è®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®éƒ½é«˜
- è§£å†³ï¼šå¢åŠ æ¨¡å‹å¤æ‚åº¦

### è¿‡æ‹Ÿåˆ
- æ¨¡å‹è¿‡äºå¤æ‚
- è®­ç»ƒè¯¯å·®ä½ï¼Œæµ‹è¯•è¯¯å·®é«˜
- è§£å†³ï¼šæ­£åˆ™åŒ–ã€æ—©åœã€å¢åŠ æ•°æ®

### åå·®-æ–¹å·®æƒè¡¡
æ€»è¯¯å·® = åå·®Â² + æ–¹å·® + ä¸å¯çº¦è¯¯å·®

## 4. æ­£åˆ™åŒ–æŠ€æœ¯
### L1æ­£åˆ™åŒ–ï¼ˆLassoï¼‰
- äº§ç”Ÿç¨€ç–è§£
- è‡ªåŠ¨ç‰¹å¾é€‰æ‹©

### L2æ­£åˆ™åŒ–ï¼ˆRidgeï¼‰
- æƒé‡è¡°å‡
- å‚æ•°è¶‹å‘å°å€¼ä½†ä¸ä¸º0

## 5. äº¤å‰éªŒè¯
- ç®€å•äº¤å‰éªŒè¯
- KæŠ˜äº¤å‰éªŒè¯ï¼ˆå¸¸ç”¨K=5æˆ–10ï¼‰
- ç•™ä¸€äº¤å‰éªŒè¯

## 6. ä¼˜åŒ–ç®—æ³•
### æ¢¯åº¦ä¸‹é™
- æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBGDï¼‰
- éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆSGDï¼‰
- å°æ‰¹é‡æ¢¯åº¦ä¸‹é™

### å­¦ä¹ ç‡é€‰æ‹©
- è¿‡å°ï¼šæ”¶æ•›æ…¢
- è¿‡å¤§ï¼šå¯èƒ½å‘æ•£
- è‡ªé€‚åº”å­¦ä¹ ç‡ï¼šAdamã€RMSprop

## 7. è¯„ä»·æŒ‡æ ‡
### åˆ†ç±»æŒ‡æ ‡
- å‡†ç¡®ç‡ï¼šæ•´ä½“æ­£ç¡®ç‡
- ç²¾ç¡®ç‡ï¼šæŸ¥å‡†ç‡
- å¬å›ç‡ï¼šæŸ¥å…¨ç‡
- F1åˆ†æ•°ï¼šç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡
- AUCï¼šROCæ›²çº¿ä¸‹é¢ç§¯

### å›å½’æŒ‡æ ‡
- MAEï¼šå¹³å‡ç»å¯¹è¯¯å·®
- MSEï¼šå‡æ–¹è¯¯å·®
- RMSEï¼šå‡æ–¹æ ¹è¯¯å·®
- RÂ²ï¼šå†³å®šç³»æ•°

## æ ¸å¿ƒåŸåˆ™
1. æ²¡æœ‰å…è´¹çš„åˆé¤
2. å¥¥å¡å§†å‰ƒåˆ€åŸåˆ™
3. æ°¸è¿œéªŒè¯æ¨¡å‹æ³›åŒ–èƒ½åŠ›
4. æ ¹æ®é—®é¢˜é€‰æ‹©åˆé€‚çš„è¯„ä»·æŒ‡æ ‡
`;

        const blob = new Blob([notes], { type: 'text/markdown' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'æ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©-å­¦ä¹ ç¬”è®°.md';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }

    // åˆ†äº«è¿›åº¦
    function shareProgress() {
        const progress = Math.round(scrollProgress);
        const sections = completedSections.size;
        const totalSections = document.querySelectorAll('.section').length;

        const shareText = `æˆ‘æ­£åœ¨å­¦ä¹ ã€Šæ¨¡å‹è¯„ä¼°ä¸é€‰æ‹©ã€‹ï¼
ğŸ“š å­¦ä¹ è¿›åº¦ï¼š${progress}%
âœ… å®Œæˆç« èŠ‚ï¼š${sections}/${totalSections}
ğŸ¯ æ ¸å¿ƒæ”¶è·ï¼šç†è§£äº†åå·®-æ–¹å·®æƒè¡¡ã€æŒæ¡äº†æ­£åˆ™åŒ–æŠ€æœ¯ã€å­¦ä¼šäº†äº¤å‰éªŒè¯

#æœºå™¨å­¦ä¹  #æ¨¡å‹è¯„ä¼° #AIå­¦ä¹ `;

        if (navigator.clipboard) {
            navigator.clipboard.writeText(shareText).then(() => {
                alert('å­¦ä¹ è¿›åº¦å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¯ä»¥åˆ†äº«äº†ï¼');
            }).catch(() => {
                alert(shareText);
            });
        } else {
            alert(shareText);
        }
    }

    // å¯åŠ¨
    document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>