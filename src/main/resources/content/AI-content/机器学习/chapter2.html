<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第2章：机器学习基本理论 - 增强可视化版</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: #0a0a0f;
            color: #fff;
            overflow-x: hidden;
            line-height: 1.8;
        }

        /* 增强的滚动条 */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        /* 粒子背景容器 */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* 英雄区域 */
        .hero-section {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: radial-gradient(ellipse at center, #1a1a3e 0%, #0a0a0f 100%);
            overflow: hidden;
        }

        .hero-content {
            text-align: center;
            z-index: 10;
            animation: hero-fade-in 2s ease;
        }

        @keyframes hero-fade-in {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .hero-title {
            font-size: 4.5rem;
            font-weight: 900;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-flow 4s ease-in-out infinite;
        }

        @keyframes gradient-flow {
            0%, 100% {
                background-position: 0% 50%;
                transform: scale(1);
            }
            50% {
                background-position: 100% 50%;
                transform: scale(1.05);
            }
        }

        .hero-subtitle {
            font-size: 1.8rem;
            opacity: 0.9;
            margin-bottom: 50px;
            animation: subtitle-glow 3s ease-in-out infinite alternate;
        }

        @keyframes subtitle-glow {
            from { text-shadow: 0 0 20px rgba(102, 126, 234, 0.5); }
            to { text-shadow: 0 0 30px rgba(102, 126, 234, 0.8); }
        }

        /* 浮动导航 */
        .floating-nav {
            position: fixed;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .floating-nav:hover {
            transform: translateY(-50%) translateX(-10px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
        }

        .nav-item {
            display: block;
            color: #fff;
            text-decoration: none;
            padding: 12px 20px;
            margin: 8px 0;
            border-radius: 15px;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.3), transparent);
            transition: left 0.5s;
        }

        .nav-item:hover::before {
            left: 100%;
        }

        .nav-item:hover {
            background: rgba(102, 126, 234, 0.2);
            transform: translateX(-10px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        /* 章节样式 */
        .section {
            padding: 100px 0;
            position: relative;
        }

        .section-title {
            font-size: 3rem;
            text-align: center;
            margin-bottom: 50px;
            font-weight: 800;
            position: relative;
            z-index: 2;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 2px;
        }

        /* 增强的概念卡片 */
        .concept-section {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 30px;
            padding: 50px;
            margin: 50px 0;
            position: relative;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .concept-section:hover {
            transform: translateY(-5px);
            box-shadow: 0 35px 70px rgba(0, 0, 0, 0.3);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .concept-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            background-size: 200% 100%;
            animation: border-flow 3s linear infinite;
        }

        @keyframes border-flow {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* 交互式图表容器 */
        .interactive-chart {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
        }

        .interactive-chart::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #f093fb, #667eea);
            background-size: 400% 400%;
            border-radius: 22px;
            z-index: -1;
            animation: gradient-rotate 4s ease infinite;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .interactive-chart:hover::before {
            opacity: 0.7;
        }

        @keyframes gradient-rotate {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* 增强的步骤卡片 */
        .step-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .step-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .step-card:hover {
            transform: translateY(-10px) rotateX(5deg);
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 20px 40px rgba(102, 126, 234, 0.2);
        }

        .step-card:hover::before {
            opacity: 1;
        }

        .step-number {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
        }

        /* 3D可视化容器 */
        .viz-3d {
            perspective: 1000px;
            margin: 40px 0;
        }

        .viz-content {
            transform-style: preserve-3d;
            transition: transform 0.3s ease;
        }

        .viz-3d:hover .viz-content {
            transform: rotateY(5deg) rotateX(5deg);
        }

        /* 流程动画 */
        .flow-animation {
            position: relative;
            padding: 20px;
            overflow: hidden;
        }

        .flow-step {
            display: inline-block;
            padding: 15px 25px;
            margin: 10px;
            background: rgba(102, 126, 234, 0.2);
            border-radius: 15px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            position: relative;
            animation: flow-pulse 3s ease-in-out infinite;
        }

        .flow-step:nth-child(2) { animation-delay: 0.5s; }
        .flow-step:nth-child(3) { animation-delay: 1s; }
        .flow-step:nth-child(4) { animation-delay: 1.5s; }

        @keyframes flow-pulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
            }
        }

        /* 数据流动画 */
        .data-flow {
            position: relative;
            height: 100px;
            overflow: hidden;
            border-radius: 10px;
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .data-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #667eea;
            border-radius: 50%;
            animation: data-move 4s linear infinite;
        }

        .data-particle:nth-child(1) { top: 20px; animation-delay: 0s; }
        .data-particle:nth-child(2) { top: 40px; animation-delay: 1s; }
        .data-particle:nth-child(3) { top: 60px; animation-delay: 2s; }
        .data-particle:nth-child(4) { top: 80px; animation-delay: 3s; }

        @keyframes data-move {
            0% {
                left: -10px;
                opacity: 0;
                transform: scale(0.5);
            }
            10% {
                opacity: 1;
                transform: scale(1);
            }
            90% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                left: 100%;
                opacity: 0;
                transform: scale(0.5);
            }
        }

        /* 增强的公式框 */
        .formula-box {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6));
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .formula-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(102, 126, 234, 0.1), transparent);
            animation: formula-shine 3s infinite;
        }

        @keyframes formula-shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* 代码框增强 */
        .code-box {
            background: #1a1a1a;
            border: 1px solid rgba(102, 126, 234, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            overflow-x: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .code-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb);
            background-size: 200% 100%;
            animation: code-glow 2s linear infinite;
        }

        @keyframes code-glow {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* 互动按钮 */
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 35px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 10px;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            display: inline-block;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        /* 警告和成功框 */
        .warning-box, .success-box, .insight-box {
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .warning-box {
            background: rgba(255, 107, 107, 0.1);
            border: 2px solid rgba(255, 107, 107, 0.3);
        }

        .success-box {
            background: rgba(76, 175, 80, 0.1);
            border: 2px solid rgba(76, 175, 80, 0.3);
        }

        .insight-box {
            background: rgba(240, 147, 251, 0.1);
            border: 2px solid rgba(240, 147, 251, 0.3);
        }

        /* 响应式 */
        @media (max-width: 1200px) {
            .floating-nav {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.8rem;
            }
            .section-title {
                font-size: 2.2rem;
            }
            .step-container {
                grid-template-columns: 1fr;
            }
            .container {
                padding: 15px;
            }
        }

        /* 修复滚动动画 - 默认显示所有内容 */
        .fade-in-up {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.8s ease;
        }

        .fade-in-up.hidden {
            opacity: 0;
            transform: translateY(50px);
        }

        /* 交互式SVG样式 */
        .interactive-svg {
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .interactive-svg:hover {
            transform: scale(1.02);
            filter: drop-shadow(0 10px 20px rgba(102, 126, 234, 0.3));
        }

        /* 加载动画 */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0a0a0f;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(102, 126, 234, 0.3);
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* 3D散点图容器 */
        .scatter-3d-container {
            position: relative;
            height: 500px;
            margin: 30px 0;
        }

        /* 特征工程专属样式 */
        .principle-container {
            margin: 40px 0;
        }

        .principle-container h3 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #f093fb;
        }
    </style>
</head>
<body>
<!-- 加载动画 -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loader"></div>
</div>

<!-- 粒子背景 -->
<div class="particles-container">
    <canvas id="particles-canvas"></canvas>
</div>

<!-- 浮动导航 -->
<nav class="floating-nav">
    <h4 style="color: #f093fb; margin-bottom: 15px; text-align: center;">导航</h4>
    <a href="#intro" class="nav-item">🚀 开始</a>
    <a href="#three-elements" class="nav-item">⚙️ 三要素</a>
    <a href="#ml-categories" class="nav-item">🔍 分类</a>
    <a href="#workflow" class="nav-item">🔄 流程</a>
    <a href="#feature-engineering" class="nav-item">🔧 特征工程</a>
    <a href="#visualization" class="nav-item">📊 可视化</a>
</nav>

<!-- 英雄区域 -->
<section class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">机器学习基本理论</h1>
        <p class="hero-subtitle">用最直观的方式理解复杂概念</p>
        <a href="#intro" class="btn">
            开始探索之旅 ✨
        </a>
    </div>
</section>

<!-- 引言 -->
<section id="intro" class="section">
    <div class="container">
        <h2 class="section-title fade-in-up">从失败中学习真理</h2>

        <div class="concept-section fade-in-up">
            <div style="text-align: center; margin-bottom: 30px;">
                <div style="font-size: 4rem; margin-bottom: 20px;">🏥</div>
                <h3 style="font-size: 2rem; margin-bottom: 20px;">某医院AI系统的千万教训</h3>
            </div>

            <div class="data-flow">
                <div class="data-particle"></div>
                <div class="data-particle"></div>
                <div class="data-particle"></div>
                <div class="data-particle"></div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
                <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.1); border-radius: 15px;">
                    <div style="font-size: 2.5rem; color: #4caf50;">99%</div>
                    <div>测试准确率</div>
                </div>
                <div style="text-align: center; padding: 20px; background: rgba(255, 107, 107, 0.1); border-radius: 15px;">
                    <div style="font-size: 2.5rem; color: #ff6b6b;">60%</div>
                    <div>实际表现</div>
                </div>
                <div style="text-align: center; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                    <div style="font-size: 2.5rem; color: #667eea;">1000万</div>
                    <div>投资损失</div>
                </div>
            </div>

            <p style="text-align: center; font-size: 1.3rem; color: #f093fb; margin-top: 30px;">
                为什么会这样？答案就在机器学习的基本理论中...
            </p>
        </div>
    </div>
</section>

<!-- 机器学习三要素 -->
<section id="three-elements" class="section">
    <div class="container">
        <h2 class="section-title fade-in-up">机器学习三要素</h2>

        <div class="concept-section fade-in-up">
            <div style="text-align: center; margin-bottom: 40px;">
                <h3 style="font-size: 2.5rem; margin-bottom: 20px;">🍳 像学做菜一样理解</h3>
            </div>

            <!-- 三要素交互式可视化 -->
            <div class="interactive-chart viz-3d">
                <div class="viz-content">
                    <svg viewBox="0 0 900 600" style="width: 100%; max-width: 900px; height: auto;" class="interactive-svg" id="threeElementsSvg">
                        <!-- 背景 -->
                        <defs>
                            <radialGradient id="modelGrad" cx="50%" cy="50%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#667eea;stop-opacity:0.2" />
                            </radialGradient>
                            <radialGradient id="strategyGrad" cx="50%" cy="50%">
                                <stop offset="0%" style="stop-color:#f093fb;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#f093fb;stop-opacity:0.2" />
                            </radialGradient>
                            <radialGradient id="algorithmGrad" cx="50%" cy="50%">
                                <stop offset="0%" style="stop-color:#4facfe;stop-opacity:0.8" />
                                <stop offset="100%" style="stop-color:#4facfe;stop-opacity:0.2" />
                            </radialGradient>

                            <!-- 动画滤镜 -->
                            <filter id="glow">
                                <fegaussianblur stdDeviation="3" result="coloredBlur"/>
                                <femerge>
                                    <femergenode in="coloredBlur"/>
                                    <femergenode in="SourceGraphic"/>
                                </femerge>
                            </filter>
                        </defs>

                        <!-- 三个圆圈 -->
                        <g transform="translate(450, 300)">
                            <!-- 模型圆 -->
                            <g class="element-group" data-element="model">
                                <circle cx="-200" cy="-120" r="100" fill="url(#modelGrad)" filter="url(#glow)" class="hover-element"/>
                                <text x="-200" y="-130" text-anchor="middle" fill="white" font-size="24" font-weight="bold">模型</text>
                                <text x="-200" y="-105" text-anchor="middle" fill="white" font-size="16">Model</text>
                                <text x="-200" y="-85" text-anchor="middle" fill="white" font-size="14">y = f(x; θ)</text>
                            </g>

                            <!-- 策略圆 -->
                            <g class="element-group" data-element="strategy">
                                <circle cx="200" cy="-120" r="100" fill="url(#strategyGrad)" filter="url(#glow)" class="hover-element"/>
                                <text x="200" y="-130" text-anchor="middle" fill="white" font-size="24" font-weight="bold">策略</text>
                                <text x="200" y="-105" text-anchor="middle" fill="white" font-size="16">Strategy</text>
                                <text x="200" y="-85" text-anchor="middle" fill="white" font-size="14">Loss Function</text>
                            </g>

                            <!-- 算法圆 -->
                            <g class="element-group" data-element="algorithm">
                                <circle cx="0" cy="120" r="100" fill="url(#algorithmGrad)" filter="url(#glow)" class="hover-element"/>
                                <text x="0" y="110" text-anchor="middle" fill="white" font-size="24" font-weight="bold">算法</text>
                                <text x="0" y="135" text-anchor="middle" fill="white" font-size="16">Algorithm</text>
                                <text x="0" y="155" text-anchor="middle" fill="white" font-size="14">Optimization</text>
                            </g>

                            <!-- 中心交集 -->
                            <circle cx="0" cy="-20" r="60" fill="rgba(255,255,255,0.2)" stroke="white" stroke-width="2"/>
                            <text x="0" y="-15" text-anchor="middle" fill="white" font-size="20" font-weight="bold">ML</text>
                            <text x="0" y="5" text-anchor="middle" fill="white" font-size="14">机器学习</text>

                            <!-- 连接线 -->
                            <path d="M -200,-120 L 0,-20 L 200,-120" stroke="white" stroke-width="3" fill="none" opacity="0.6" class="connection-line"/>
                            <path d="M -200,-120 L 0,-20 L 0,120" stroke="white" stroke-width="3" fill="none" opacity="0.6" class="connection-line"/>
                            <path d="M 200,-120 L 0,-20 L 0,120" stroke="white" stroke-width="3" fill="none" opacity="0.6" class="connection-line"/>
                        </g>

                        <!-- 信息面板 -->
                        <rect x="50" y="450" width="800" height="120" rx="15" fill="rgba(0,0,0,0.8)" stroke="rgba(102, 126, 234, 0.3)" stroke-width="2"/>
                        <text x="450" y="480" text-anchor="middle" fill="white" font-size="18" font-weight="bold" id="infoTitle">点击圆圈了解详情</text>
                        <text x="450" y="510" text-anchor="middle" fill="white" font-size="14" id="infoDesc">机器学习 = 模型 + 策略 + 算法</text>
                        <text x="450" y="540" text-anchor="middle" fill="white" font-size="12" id="infoExample">三者缺一不可，相互协作完成学习任务</text>
                    </svg>
                </div>
            </div>

            <!-- 详细步骤卡片 -->
            <div class="step-container">
                <div class="step-card">
                    <div class="step-number">1</div>
                    <h4 style="color: #667eea; margin: 25px 0 15px;">模型（Model）</h4>
                    <div class="formula-box">
                        y = f(x; θ)
                    </div>
                    <p><strong>生活类比：</strong>菜谱，描述如何把原料变成美食</p>
                    <p><strong>常见类型：</strong></p>
                    <div class="flow-animation">
                        <span class="flow-step">线性模型</span>
                        <span class="flow-step">决策树</span>
                        <span class="flow-step">神经网络</span>
                    </div>
                </div>

                <div class="step-card">
                    <div class="step-number">2</div>
                    <h4 style="color: #f093fb; margin: 25px 0 15px;">策略（Strategy）</h4>
                    <div class="formula-box">
                        min Loss(θ) + λ·R(θ)
                    </div>
                    <p><strong>生活类比：</strong>评判标准，什么样的菜算好吃</p>
                    <p><strong>常见策略：</strong></p>
                    <div class="flow-animation">
                        <span class="flow-step">经验风险最小化</span>
                        <span class="flow-step">结构风险最小化</span>
                        <span class="flow-step">最大似然估计</span>
                    </div>
                </div>

                <div class="step-card">
                    <div class="step-number">3</div>
                    <h4 style="color: #4facfe; margin: 25px 0 15px;">算法（Algorithm）</h4>
                    <div class="formula-box">
                        θ = θ - α·∇Loss(θ)
                    </div>
                    <p><strong>生活类比：</strong>练习方法，如何改进厨艺</p>
                    <p><strong>常见算法：</strong></p>
                    <div class="flow-animation">
                        <span class="flow-step">梯度下降</span>
                        <span class="flow-step">牛顿法</span>
                        <span class="flow-step">随机梯度下降</span>
                    </div>
                </div>
            </div>

            <div class="insight-box">
                <h3>💡 核心洞察</h3>
                <p style="font-size: 1.2rem; line-height: 2;">
                    <strong>模型</strong>定义了可能性空间（能学什么）<br>
                    <strong>策略</strong>定义了优化目标（学什么好）<br>
                    <strong>算法</strong>定义了学习路径（怎么学会）<br>
                    <br>
                    三者协同工作，缺一不可！就像做菜需要菜谱、评判标准和练习方法。
                </p>
            </div>
        </div>
    </div>
</section>

<!-- 机器学习方法分类 -->
<section id="ml-categories" class="section">
    <div class="container">
        <h2 class="section-title fade-in-up">机器学习方法分类</h2>

        <div class="concept-section fade-in-up">
            <div style="text-align: center; margin-bottom: 40px;">
                <h3 style="font-size: 2.5rem; margin-bottom: 20px;">👨‍🎓 四种学习方式</h3>
            </div>

            <!-- 交互式分类图 -->
            <div class="interactive-chart">
                <svg viewBox="0 0 1000 700" style="width: 100%; max-width: 1000px; height: auto;" id="categoryChart">
                    <!-- 标题 -->
                    <text x="500" y="40" text-anchor="middle" fill="white" font-size="24" font-weight="bold">
                        机器学习方法全景图
                    </text>

                    <!-- 主容器 -->
                    <g transform="translate(50, 80)">
                        <!-- 监督学习 -->
                        <g class="category-item" data-category="supervised">
                            <rect x="50" y="50" width="350" height="200" rx="20" fill="#667eea" opacity="0.2" stroke="#667eea" stroke-width="2"/>
                            <text x="225" y="80" text-anchor="middle" fill="#667eea" font-size="20" font-weight="bold">监督学习</text>
                            <text x="225" y="105" text-anchor="middle" fill="white" font-size="14">Supervised Learning</text>

                            <!-- 学生图标 -->
                            <circle cx="120" cy="140" r="15" fill="#667eea"/>
                            <rect x="110" y="155" width="20" height="30" fill="#667eea"/>
                            <text x="160" y="165" fill="white" font-size="12">老师指导学习</text>
                            <text x="70" y="200" fill="white" font-size="11">• 有标签数据</text>
                            <text x="70" y="220" fill="white" font-size="11">• 分类和回归</text>
                            <text x="70" y="240" fill="white" font-size="11">• 效果可评估</text>
                        </g>

                        <!-- 无监督学习 -->
                        <g class="category-item" data-category="unsupervised">
                            <rect x="450" y="50" width="350" height="200" rx="20" fill="#f093fb" opacity="0.2" stroke="#f093fb" stroke-width="2"/>
                            <text x="625" y="80" text-anchor="middle" fill="#f093fb" font-size="20" font-weight="bold">无监督学习</text>
                            <text x="625" y="105" text-anchor="middle" fill="white" font-size="14">Unsupervised Learning</text>

                            <!-- 探索图标 -->
                            <circle cx="520" cy="140" r="15" fill="#f093fb"/>
                            <rect x="510" y="155" width="20" height="30" fill="#f093fb"/>
                            <text x="560" y="165" fill="white" font-size="12">自主探索学习</text>
                            <text x="470" y="200" fill="white" font-size="11">• 无标签数据</text>
                            <text x="470" y="220" fill="white" font-size="11">• 聚类和降维</text>
                            <text x="470" y="240" fill="white" font-size="11">• 发现隐藏模式</text>
                        </g>

                        <!-- 强化学习 -->
                        <g class="category-item" data-category="reinforcement">
                            <rect x="50" y="300" width="350" height="200" rx="20" fill="#4facfe" opacity="0.2" stroke="#4facfe" stroke-width="2"/>
                            <text x="225" y="330" text-anchor="middle" fill="#4facfe" font-size="20" font-weight="bold">强化学习</text>
                            <text x="225" y="355" text-anchor="middle" fill="white" font-size="14">Reinforcement Learning</text>

                            <!-- 游戏图标 -->
                            <circle cx="120" cy="390" r="15" fill="#4facfe"/>
                            <rect x="110" y="405" width="20" height="30" fill="#4facfe"/>
                            <text x="160" y="415" fill="white" font-size="12">奖惩中学习</text>
                            <text x="70" y="450" fill="white" font-size="11">• 环境交互</text>
                            <text x="70" y="470" fill="white" font-size="11">• 决策优化</text>
                            <text x="70" y="490" fill="white" font-size="11">• 长期回报</text>
                        </g>

                        <!-- 半监督学习 -->
                        <g class="category-item" data-category="semi-supervised">
                            <rect x="450" y="300" width="350" height="200" rx="20" fill="#4caf50" opacity="0.2" stroke="#4caf50" stroke-width="2"/>
                            <text x="625" y="330" text-anchor="middle" fill="#4caf50" font-size="20" font-weight="bold">半监督学习</text>
                            <text x="625" y="355" text-anchor="middle" fill="white" font-size="14">Semi-Supervised Learning</text>

                            <!-- 混合图标 -->
                            <circle cx="520" cy="390" r="15" fill="#4caf50"/>
                            <rect x="510" y="405" width="20" height="30" fill="#4caf50"/>
                            <text x="560" y="415" fill="white" font-size="12">部分指导学习</text>
                            <text x="470" y="450" fill="white" font-size="11">• 少量标签</text>
                            <text x="470" y="470" fill="white" font-size="11">• 大量无标签</text>
                            <text x="470" y="490" fill="white" font-size="11">• 降低标注成本</text>
                        </g>
                    </g>

                    <!-- 选择决策树 -->
                    <g transform="translate(50, 550)">
                        <rect x="0" y="0" width="900" height="100" rx="15" fill="rgba(0,0,0,0.6)" stroke="rgba(102, 126, 234, 0.3)" stroke-width="1"/>
                        <text x="450" y="25" text-anchor="middle" fill="white" font-size="16" font-weight="bold">如何选择？</text>
                        <text x="100" y="50" fill="white" font-size="12">有标签数据？</text>
                        <text x="300" y="50" fill="white" font-size="12">需要决策？</text>
                        <text x="500" y="50" fill="white" font-size="12">标签充足？</text>
                        <text x="700" y="50" fill="white" font-size="12">探索模式？</text>

                        <text x="100" y="75" fill="#667eea" font-size="11">是 → 监督学习</text>
                        <text x="300" y="75" fill="#4facfe" font-size="11">是 → 强化学习</text>
                        <text x="500" y="75" fill="#4caf50" font-size="11">否 → 半监督</text>
                        <text x="700" y="75" fill="#f093fb" font-size="11">是 → 无监督</text>
                    </g>
                </svg>
            </div>

            <!-- 实际应用案例 -->
            <div style="margin-top: 40px;">
                <h3 style="text-align: center; margin-bottom: 30px;">🎯 实际应用场景</h3>
                <div class="step-container">
                    <div class="step-card" style="border-color: #667eea;">
                        <h4 style="color: #667eea;">🖼️ 图像识别</h4>
                        <p><strong>类型：</strong>监督学习</p>
                        <p><strong>原因：</strong>有大量标注图片</p>
                        <p><strong>算法：</strong>CNN</p>
                        <div style="margin: 15px 0; padding: 10px; background: rgba(102, 126, 234, 0.1); border-radius: 10px;">
                            输入：猫的图片 → 输出：这是猫
                        </div>
                    </div>

                    <div class="step-card" style="border-color: #f093fb;">
                        <h4 style="color: #f093fb;">👥 客户分群</h4>
                        <p><strong>类型：</strong>无监督学习</p>
                        <p><strong>原因：</strong>不知道客户类型</p>
                        <p><strong>算法：</strong>K-means</p>
                        <div style="margin: 15px 0; padding: 10px; background: rgba(240, 147, 251, 0.1); border-radius: 10px;">
                            输入：客户数据 → 输出：客户群体
                        </div>
                    </div>

                    <div class="step-card" style="border-color: #4facfe;">
                        <h4 style="color: #4facfe;">🎮 游戏AI</h4>
                        <p><strong>类型：</strong>强化学习</p>
                        <p><strong>原因：</strong>需要策略决策</p>
                        <p><strong>算法：</strong>Q-learning</p>
                        <div style="margin: 15px 0; padding: 10px; background: rgba(79, 172, 254, 0.1); border-radius: 10px;">
                            输入：游戏状态 → 输出：最佳行动
                        </div>
                    </div>

                    <div class="step-card" style="border-color: #4caf50;">
                        <h4 style="color: #4caf50;">🌐 网页分类</h4>
                        <p><strong>类型：</strong>半监督学习</p>
                        <p><strong>原因：</strong>标注成本高</p>
                        <p><strong>算法：</strong>自训练</p>
                        <div style="margin: 15px 0; padding: 10px; background: rgba(76, 175, 80, 0.1); border-radius: 10px;">
                            输入：少量标注+大量网页 → 输出：网页类别
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 建模流程 -->
<section id="workflow" class="section">
    <div class="container">
        <h2 class="section-title fade-in-up">机器学习建模流程</h2>

        <div class="concept-section fade-in-up">
            <div style="text-align: center; margin-bottom: 40px;">
                <h3 style="font-size: 2.5rem; margin-bottom: 20px;">🏗️ 像建房子一样系统化</h3>
            </div>

            <!-- 流程时间线 -->
            <div class="interactive-chart">
                <svg viewBox="0 0 1200 800" style="width: 100%; max-width: 1200px; height: auto;" id="workflowChart">
                    <!-- 标题 -->
                    <text x="600" y="40" text-anchor="middle" fill="white" font-size="24" font-weight="bold">
                        机器学习项目完整生命周期
                    </text>

                    <!-- 时间线 -->
                    <g transform="translate(100, 100)">
                        <!-- 主时间线 -->
                        <line x1="50" y1="350" x2="1050" y2="350" stroke="#667eea" stroke-width="4"/>

                        <!-- 阶段1：理解阶段 -->
                        <g class="workflow-stage" data-stage="understanding">
                            <circle cx="150" cy="350" r="20" fill="#667eea"/>
                            <text x="150" y="355" text-anchor="middle" fill="white" font-size="14" font-weight="bold">1</text>
                            <rect x="50" y="200" width="200" height="120" rx="15" fill="#667eea" opacity="0.2" stroke="#667eea" stroke-width="2"/>
                            <text x="150" y="225" text-anchor="middle" fill="#667eea" font-size="16" font-weight="bold">业务理解</text>
                            <text x="150" y="245" text-anchor="middle" fill="white" font-size="12">• 定义问题</text>
                            <text x="150" y="265" text-anchor="middle" fill="white" font-size="12">• 设定目标</text>
                            <text x="150" y="285" text-anchor="middle" fill="white" font-size="12">• 评估可行性</text>
                            <text x="150" y="305" text-anchor="middle" fill="white" font-size="12">第1-2周</text>
                        </g>

                        <!-- 阶段2：数据准备 -->
                        <g class="workflow-stage" data-stage="preparation">
                            <circle cx="350" cy="350" r="20" fill="#f093fb"/>
                            <text x="350" y="355" text-anchor="middle" fill="white" font-size="14" font-weight="bold">2</text>
                            <rect x="250" y="200" width="200" height="120" rx="15" fill="#f093fb" opacity="0.2" stroke="#f093fb" stroke-width="2"/>
                            <text x="350" y="225" text-anchor="middle" fill="#f093fb" font-size="16" font-weight="bold">数据收集</text>
                            <text x="350" y="245" text-anchor="middle" fill="white" font-size="12">• 获取数据</text>
                            <text x="350" y="265" text-anchor="middle" fill="white" font-size="12">• 数据探索</text>
                            <text x="350" y="285" text-anchor="middle" fill="white" font-size="12">• 质量评估</text>
                            <text x="350" y="305" text-anchor="middle" fill="white" font-size="12">第3-4周</text>
                        </g>

                        <g class="workflow-stage" data-stage="preparation">
                            <circle cx="550" cy="350" r="20" fill="#f093fb"/>
                            <text x="550" y="355" text-anchor="middle" fill="white" font-size="14" font-weight="bold">3</text>
                            <rect x="450" y="400" width="200" height="120" rx="15" fill="#f093fb" opacity="0.2" stroke="#f093fb" stroke-width="2"/>
                            <text x="550" y="425" text-anchor="middle" fill="#f093fb" font-size="16" font-weight="bold">数据预处理</text>
                            <text x="550" y="445" text-anchor="middle" fill="white" font-size="12">• 清洗数据</text>
                            <text x="550" y="465" text-anchor="middle" fill="white" font-size="12">• 特征工程</text>
                            <text x="550" y="485" text-anchor="middle" fill="white" font-size="12">• 数据变换</text>
                            <text x="550" y="505" text-anchor="middle" fill="white" font-size="12">第5-6周</text>
                        </g>

                        <!-- 阶段3：建模 -->
                        <g class="workflow-stage" data-stage="modeling">
                            <circle cx="750" cy="350" r="20" fill="#4facfe"/>
                            <text x="750" y="355" text-anchor="middle" fill="white" font-size="14" font-weight="bold">4</text>
                            <rect x="650" y="200" width="200" height="120" rx="15" fill="#4facfe" opacity="0.2" stroke="#4facfe" stroke-width="2"/>
                            <text x="750" y="225" text-anchor="middle" fill="#4facfe" font-size="16" font-weight="bold">模型训练</text>
                            <text x="750" y="245" text-anchor="middle" fill="white" font-size="12">• 选择算法</text>
                            <text x="750" y="265" text-anchor="middle" fill="white" font-size="12">• 训练模型</text>
                            <text x="750" y="285" text-anchor="middle" fill="white" font-size="12">• 调参优化</text>
                            <text x="750" y="305" text-anchor="middle" fill="white" font-size="12">第7-8周</text>
                        </g>

                        <!-- 阶段4：部署 -->
                        <g class="workflow-stage" data-stage="deployment">
                            <circle cx="950" cy="350" r="20" fill="#4caf50"/>
                            <text x="950" y="355" text-anchor="middle" fill="white" font-size="14" font-weight="bold">5</text>
                            <rect x="850" y="400" width="200" height="120" rx="15" fill="#4caf50" opacity="0.2" stroke="#4caf50" stroke-width="2"/>
                            <text x="950" y="425" text-anchor="middle" fill="#4caf50" font-size="16" font-weight="bold">部署监控</text>
                            <text x="950" y="445" text-anchor="middle" fill="white" font-size="12">• 模型部署</text>
                            <text x="950" y="465" text-anchor="middle" fill="white" font-size="12">• 性能监控</text>
                            <text x="950" y="485" text-anchor="middle" fill="white" font-size="12">• 持续优化</text>
                            <text x="950" y="505" text-anchor="middle" fill="white" font-size="12">第9-10周</text>
                        </g>

                        <!-- 迭代箭头 -->
                        <path d="M 950 550 Q 500 600, 150 550" stroke="#ff6b6b" stroke-width="3" fill="none" stroke-dasharray="10,5" marker-end="url(#arrowRed)"/>
                        <text x="550" y="580" text-anchor="middle" fill="#ff6b6b" font-size="14" font-weight="bold">持续迭代优化</text>

                        <defs>
                            <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#ff6b6b"/>
                            </marker>
                        </defs>
                    </g>

                    <!-- 时间分配饼图 -->
                    <g transform="translate(950, 150)">
                        <text x="0" y="-20" text-anchor="middle" fill="white" font-size="16" font-weight="bold">时间分配</text>
                        <circle cx="0" cy="0" r="80" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="2"/>

                        <!-- 数据准备 60% -->
                        <path d="M 0,0 L 80,0 A 80,80 0 1,1 -40,-69.3 Z" fill="#f093fb" opacity="0.7"/>
                        <text x="20" y="-20" fill="white" font-size="12" font-weight="bold">60%</text>
                        <text x="20" y="-5" fill="white" font-size="10">数据准备</text>

                        <!-- 建模 20% -->
                        <path d="M 0,0 L -40,-69.3 A 80,80 0 0,1 40,-69.3 Z" fill="#4facfe" opacity="0.7"/>
                        <text x="0" y="-45" fill="white" font-size="12" font-weight="bold">20%</text>
                        <text x="0" y="-30" fill="white" font-size="10">建模</text>

                        <!-- 部署 20% -->
                        <path d="M 0,0 L 40,-69.3 A 80,80 0 0,1 80,0 Z" fill="#4caf50" opacity="0.7"/>
                        <text x="40" y="-20" fill="white" font-size="12" font-weight="bold">20%</text>
                        <text x="40" y="-5" fill="white" font-size="10">部署</text>
                    </g>
                </svg>
            </div>

            <!-- 最佳实践 -->
            <div style="margin-top: 40px;">
                <h3 style="text-align: center; margin-bottom: 30px;">✨ 建模流程最佳实践</h3>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                    <div class="success-box">
                        <h4>🚀 快速原型</h4>
                        <p>先建立简单的基准模型，验证整个流程的可行性，再逐步优化复杂度。</p>
                    </div>

                    <div class="success-box">
                        <h4>📊 数据为王</h4>
                        <p>60%的时间花在数据上是正常的，好的数据比复杂的算法更重要。</p>
                    </div>

                    <div class="success-box">
                        <h4>🔄 持续迭代</h4>
                        <p>机器学习是迭代过程，每次循环都会有新的发现和改进空间。</p>
                    </div>

                    <div class="success-box">
                        <h4>📝 记录一切</h4>
                        <p>记录每次实验的参数、结果和思考，便于后续复现和改进。</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- 特征工程 -->
<section id="feature-engineering" class="section">
    <div class="container">
        <h2 class="section-title fade-in-up">特征工程</h2>

        <div class="concept-section fade-in-up">
            <div style="text-align: center; margin-bottom: 40px;">
                <h3 style="font-size: 2.5rem; margin-bottom: 20px;">🔧 数据的艺术与科学</h3>
                <p style="font-size: 1.3rem; color: #f093fb; font-style: italic;">
                    "数据和特征决定了机器学习的上限，而模型和算法只是逼近这个上限"
                </p>
            </div>

            <!-- 什么是特征工程 -->
            <div class="principle-container">
                <h3>🤔 什么是特征工程？</h3>
                <p style="font-size: 1.2rem; line-height: 1.8; margin: 20px 0;">
                    特征工程（Feature Engineering）是机器学习过程中非常重要的一步，指的是通过对原始数据的处理、转换和构造，生成新的特征或选择有效的特征，从而提高模型的性能。
                </p>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 30px 0;">
                    <div class="insight-box">
                        <h4>🎯 核心目标</h4>
                        <p>将原始数据转换为可以更好地表示问题的特征形式，帮助模型更好地理解和学习数据中的规律</p>
                    </div>
                    <div class="insight-box">
                        <h4>🔄 迭代过程</h4>
                        <p>特征工程是一个迭代过程，需要大量的数据分析和领域知识，依赖于具体情境</p>
                    </div>
                    <div class="insight-box">
                        <h4>📈 关键作用</h4>
                        <p>优秀的特征工程可以显著提高模型的表现；反之，忽视特征工程可能导致模型性能欠佳</p>
                    </div>
                </div>
            </div>

            <!-- 特征工程的四大内容 -->
            <div class="principle-container">
                <h3>🏗️ 特征工程的四大支柱</h3>

                <div class="step-container">
                    <div class="step-card" style="border-color: #f093fb;">
                        <div class="step-number">1</div>
                        <h4 style="color: #f093fb; margin: 25px 0 15px;">特征选择</h4>
                        <p><strong>目标：</strong>从原始特征中挑选出与目标变量关系最密切的特征</p>
                        <div style="margin: 15px 0;">
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #667eea; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>过滤法：</strong>基于统计测试（卡方、相关系数、信息增益）</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #4facfe; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>包裹法：</strong>使用模型评估（递归特征消除RFE）</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #4caf50; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>嵌入法：</strong>模型自带选择（L1正则化、树重要性）</span>
                            </div>
                        </div>
                        <p style="color: #f093fb; font-size: 0.9rem;">💡 特征选择不会创建新特征，也不会改变数据结构</p>
                    </div>

                    <div class="step-card" style="border-color: #4facfe;">
                        <div class="step-number">2</div>
                        <h4 style="color: #4facfe; margin: 25px 0 15px;">特征转换</h4>
                        <p><strong>目标：</strong>对数据进行数学或统计处理，使其更适合模型输入</p>
                        <div style="margin: 15px 0;">
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #f093fb; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>归一化：</strong>缩放到[0,1]范围，适合KNN、SVM</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #ffa726; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>标准化：</strong>均值0，标准差1，适合线性模型</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #ff6b6b; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>编码转换：</strong>One-Hot、Label、Target编码</span>
                            </div>
                        </div>
                        <div class="formula-box" style="margin: 10px 0; font-size: 0.9rem;">
                            标准化: z = (x - μ) / σ<br>
                            归一化: x' = (x - min) / (max - min)
                        </div>
                    </div>

                    <div class="step-card" style="border-color: #4caf50;">
                        <div class="step-number">3</div>
                        <h4 style="color: #4caf50; margin: 25px 0 15px;">特征构造</h4>
                        <p><strong>目标：</strong>基于现有特征创造出新的、更有代表性的特征</p>
                        <div style="margin: 15px 0;">
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #667eea; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>交互特征：</strong>年龄×收入、特征乘积/和/差</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #f093fb; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>统计特征：</strong>时间窗口内的均值/最值/标准差</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #4facfe; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>时间特征：</strong>星期几、月份、节假日标识</span>
                            </div>
                        </div>
                        <p style="color: #4caf50; font-size: 0.9rem;">💡 通过组合、转换、聚合现有特征，形成更好反映数据规律的特征</p>
                    </div>

                    <div class="step-card" style="border-color: #ffa726;">
                        <div class="step-number">4</div>
                        <h4 style="color: #ffa726; margin: 25px 0 15px;">特征降维</h4>
                        <p><strong>目标：</strong>减少特征数量，避免维度灾难和过拟合</p>
                        <div style="margin: 15px 0;">
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #667eea; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>PCA：</strong>主成分分析，保留最大方差</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #4caf50; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>LDA：</strong>线性判别分析，监督降维</span>
                            </div>
                            <div style="display: flex; align-items: center; margin: 8px 0;">
                                <div style="width: 8px; height: 8px; background: #f093fb; border-radius: 50%; margin-right: 10px;"></div>
                                <span><strong>t-SNE：</strong>非线性降维，适合可视化</span>
                            </div>
                        </div>
                        <p style="color: #ffa726; font-size: 0.9rem;">💡 在保持数据本质的情况下减少特征数量</p>
                    </div>
                </div>
            </div>

            <!-- 特征工程流程图 -->
            <div class="interactive-chart">
                <svg viewBox="0 0 1200 600" style="width: 100%; max-width: 1200px; height: auto;" id="featureChart">
                    <!-- 标题 -->
                    <text x="600" y="40" text-anchor="middle" fill="white" font-size="24" font-weight="bold">
                        特征工程完整流程
                    </text>

                    <!-- 原始数据 -->
                    <g transform="translate(50, 100)">
                        <rect x="0" y="0" width="150" height="400" rx="20" fill="#667eea" opacity="0.3" stroke="#667eea" stroke-width="2"/>
                        <text x="75" y="30" text-anchor="middle" fill="#667eea" font-size="18" font-weight="bold">原始数据</text>

                        <!-- 数据类型 -->
                        <rect x="20" y="60" width="110" height="50" rx="8" fill="#667eea" opacity="0.6"/>
                        <text x="75" y="85" text-anchor="middle" fill="white" font-size="12">数值型</text>
                        <text x="75" y="100" text-anchor="middle" fill="white" font-size="10">年龄, 收入</text>

                        <rect x="20" y="130" width="110" height="50" rx="8" fill="#667eea" opacity="0.6"/>
                        <text x="75" y="155" text-anchor="middle" fill="white" font-size="12">类别型</text>
                        <text x="75" y="170" text-anchor="middle" fill="white" font-size="10">性别, 城市</text>

                        <rect x="20" y="200" width="110" height="50" rx="8" fill="#667eea" opacity="0.6"/>
                        <text x="75" y="225" text-anchor="middle" fill="white" font-size="12">时间型</text>
                        <text x="75" y="240" text-anchor="middle" fill="white" font-size="10">交易时间</text>

                        <rect x="20" y="270" width="110" height="50" rx="8" fill="#667eea" opacity="0.6"/>
                        <text x="75" y="295" text-anchor="middle" fill="white" font-size="12">文本型</text>
                        <text x="75" y="310" text-anchor="middle" fill="white" font-size="10">评论, 描述</text>

                        <rect x="20" y="340" width="110" height="50" rx="8" fill="#667eea" opacity="0.6"/>
                        <text x="75" y="365" text-anchor="middle" fill="white" font-size="12">图像型</text>
                        <text x="75" y="380" text-anchor="middle" fill="white" font-size="10">照片, 扫描件</text>
                    </g>

                    <!-- 处理流程 -->
                    <g transform="translate(250, 100)">
                        <!-- 1. 特征选择 -->
                        <g class="fe-step" data-step="selection">
                            <rect x="0" y="0" width="180" height="70" rx="15" fill="#f093fb" opacity="0.8"/>
                            <text x="90" y="25" text-anchor="middle" fill="white" font-size="14" font-weight="bold">1. 特征选择</text>
                            <text x="90" y="45" text-anchor="middle" fill="white" font-size="11">过滤法 • 包裹法</text>
                            <text x="90" y="60" text-anchor="middle" fill="white" font-size="11">嵌入法 • 重要性</text>
                        </g>

                        <!-- 2. 特征变换 -->
                        <g class="fe-step" data-step="transform">
                            <rect x="0" y="90" width="180" height="70" rx="15" fill="#4facfe" opacity="0.8"/>
                            <text x="90" y="115" text-anchor="middle" fill="white" font-size="14" font-weight="bold">2. 特征变换</text>
                            <text x="90" y="135" text-anchor="middle" fill="white" font-size="11">标准化 • 归一化</text>
                            <text x="90" y="150" text-anchor="middle" fill="white" font-size="11">编码 • 离散化</text>
                        </g>

                        <!-- 3. 特征构造 -->
                        <g class="fe-step" data-step="construction">
                            <rect x="0" y="180" width="180" height="70" rx="15" fill="#4caf50" opacity="0.8"/>
                            <text x="90" y="205" text-anchor="middle" fill="white" font-size="14" font-weight="bold">3. 特征构造</text>
                            <text x="90" y="225" text-anchor="middle" fill="white" font-size="11">组合特征 • 统计特征</text>
                            <text x="90" y="240" text-anchor="middle" fill="white" font-size="11">时间特征 • 交互特征</text>
                        </g>

                        <!-- 4. 特征降维 -->
                        <g class="fe-step" data-step="reduction">
                            <rect x="0" y="270" width="180" height="70" rx="15" fill="#ffa726" opacity="0.8"/>
                            <text x="90" y="295" text-anchor="middle" fill="white" font-size="14" font-weight="bold">4. 特征降维</text>
                            <text x="90" y="315" text-anchor="middle" fill="white" font-size="11">PCA • LDA</text>
                            <text x="90" y="330" text-anchor="middle" fill="white" font-size="11">t-SNE • 自编码器</text>
                        </g>
                    </g>

                    <!-- 具体方法 -->
                    <g transform="translate(480, 100)">
                        <rect x="0" y="0" width="280" height="400" rx="20" fill="rgba(255,255,255,0.05)" stroke="rgba(255,255,255,0.2)" stroke-width="1"/>
                        <text x="140" y="30" text-anchor="middle" fill="white" font-size="16" font-weight="bold">核心方法技巧</text>

                        <!-- 选择方法 -->
                        <g transform="translate(20, 50)">
                            <text x="0" y="0" fill="#f093fb" font-size="13" font-weight="bold">🎯 特征选择：</text>
                            <text x="10" y="18" fill="white" font-size="11">• 低方差过滤：删除方差<0.01特征</text>
                            <text x="10" y="33" fill="white" font-size="11">• 相关系数：皮尔逊/斯皮尔曼</text>
                            <text x="10" y="48" fill="white" font-size="11">• 递归消除：RFE自动选择</text>
                            <text x="10" y="63" fill="white" font-size="11">• L1正则：自动稀疏化</text>
                        </g>

                        <!-- 编码方法 -->
                        <g transform="translate(20, 130)">
                            <text x="0" y="0" fill="#4facfe" font-size="13" font-weight="bold">🏷️ 编码方法：</text>
                            <text x="10" y="18" fill="white" font-size="11">• One-Hot：无序类别特征</text>
                            <text x="10" y="33" fill="white" font-size="11">• Label：有序类别特征</text>
                            <text x="10" y="48" fill="white" font-size="11">• Target：基于目标变量均值</text>
                            <text x="10" y="63" fill="white" font-size="11">• Frequency：基于频率编码</text>
                        </g>

                        <!-- 构造方法 -->
                        <g transform="translate(20, 210)">
                            <text x="0" y="0" fill="#4caf50" font-size="13" font-weight="bold">🔨 特征构造：</text>
                            <text x="10" y="18" fill="white" font-size="11">• 多项式：x², xy交互项</text>
                            <text x="10" y="33" fill="white" font-size="11">• 比率特征：x/y相对值</text>
                            <text x="10" y="48" fill="white" font-size="11">• 统计特征：均值/方差/分位数</text>
                            <text x="10" y="63" fill="white" font-size="11">• 时间特征：年/月/周/节假日</text>
                        </g>

                        <!-- 降维方法 -->
                        <g transform="translate(20, 290)">
                            <text x="0" y="0" fill="#ffa726" font-size="13" font-weight="bold">📉 降维方法：</text>
                            <text x="10" y="18" fill="white" font-size="11">• PCA：保留95%方差</text>
                            <text x="10" y="33" fill="white" font-size="11">• LDA：监督降维方法</text>
                            <text x="10" y="48" fill="white" font-size="11">• t-SNE：非线性可视化</text>
                            <text x="10" y="63" fill="white" font-size="11">• 自编码器：深度学习降维</text>
                        </g>
                    </g>

                    <!-- 最终特征 -->
                    <g transform="translate(800, 200)">
                        <rect x="0" y="0" width="150" height="200" rx="20" fill="#4caf50" opacity="0.3" stroke="#4caf50" stroke-width="2"/>
                        <text x="75" y="30" text-anchor="middle" fill="#4caf50" font-size="18" font-weight="bold">优质特征</text>

                        <g transform="translate(20, 60)">
                            <circle cx="10" cy="10" r="3" fill="#4caf50"/>
                            <text x="25" y="15" fill="white" font-size="12">信息丰富</text>

                            <circle cx="10" cy="35" r="3" fill="#4caf50"/>
                            <text x="25" y="40" fill="white" font-size="12">低冗余性</text>

                            <circle cx="10" cy="60" r="3" fill="#4caf50"/>
                            <text x="25" y="65" fill="white" font-size="12">可解释性</text>

                            <circle cx="10" cy="85" r="3" fill="#4caf50"/>
                            <text x="25" y="90" fill="white" font-size="12">稳定性好</text>

                            <circle cx="10" cy="110" r="3" fill="#4caf50"/>
                            <text x="25" y="115" fill="white" font-size="12">计算高效</text>
                        </g>
                    </g>

                    <!-- 箭头连接 -->
                    <path d="M 200 300 L 250 135" stroke="white" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow)"/>
                    <path d="M 430 200 L 480 200" stroke="white" stroke-width="2" marker-end="url(#arrow)"/>
                    <path d="M 760 300 L 800 300" stroke="white" stroke-width="2" marker-end="url(#arrow)"/>

                    <defs>
                        <marker id="arrow" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="white"/>
                        </marker>
                    </defs>
                </svg>
            </div>

            <!-- 常用方法详解 -->
            <div class="principle-container">
                <h3>🛠️ 常用特征工程方法详解</h3>

                <!-- 低方差过滤法 -->
                <div class="step-container">
                    <div class="step-card" style="border-color: #ff6b6b;">
                        <h4 style="color: #ff6b6b;">🎯 低方差过滤法</h4>
                        <p><strong>原理：</strong>删除方差低于阈值的特征，这些特征对预测影响极小</p>
                        <div class="code-box" style="margin: 15px 0;">
                                <pre style="color: #d4d4d4; font-size: 0.85rem;">
<span style="color: #569cd6;">from</span> sklearn.feature_selection <span style="color: #569cd6;">import</span> VarianceThreshold

<span style="color: #608b4e;"># 删除方差低于 0.01 的特征</span>
var_thresh = VarianceThreshold(threshold=<span style="color: #b5cea8;">0.01</span>)
X_filtered = var_thresh.fit_transform(X)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"过滤前: {X.shape[1]} 特征"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"过滤后: {X_filtered.shape[1]} 特征"</span>)
</pre>
                        </div>
                        <p style="color: #ff6b6b; font-size: 0.9rem;">💡 适用于快速删除常数或近似常数的特征</p>
                    </div>

                    <div class="step-card" style="border-color: #4facfe;">
                        <h4 style="color: #4facfe;">📊 相关系数法</h4>
                        <p><strong>目的：</strong>筛选与目标变量高相关的特征，剔除特征间高度相关的冗余特征</p>

                        <!-- 皮尔逊相关系数 -->
                        <div style="margin: 15px 0;">
                            <h5 style="color: #f093fb;">皮尔逊相关系数</h5>
                            <p style="font-size: 0.9rem;">衡量两个变量的线性相关性，取值范围[-1, 1]</p>
                            <div class="formula-box" style="margin: 10px 0;">
                                r = Σ(x-x̄)(y-ȳ) / √[Σ(x-x̄)²Σ(y-ȳ)²]
                            </div>
                            <div class="code-box" style="margin: 10px 0;">
                                    <pre style="color: #d4d4d4; font-size: 0.85rem;">
<span style="color: #608b4e;"># 计算特征与目标变量的皮尔逊相关系数</span>
corr_with_target = X.corrwith(y, method=<span style="color: #ce9178;">"pearson"</span>)
<span style="color: #569cd6;">print</span>(corr_with_target.sort_values(ascending=<span style="color: #569cd6;">False</span>))

<span style="color: #608b4e;"># 计算特征间相关系数矩阵</span>
corr_matrix = X.corr(method=<span style="color: #ce9178;">"pearson"</span>)
<span style="color: #569cd6;">import</span> seaborn <span style="color: #569cd6;">as</span> sns
sns.heatmap(corr_matrix, annot=<span style="color: #569cd6;">True</span>, cmap=<span style="color: #ce9178;">"coolwarm"</span>)
</pre>
                            </div>
                        </div>

                        <!-- 斯皮尔曼相关系数 -->
                        <div style="margin: 15px 0;">
                            <h5 style="color: #4caf50;">斯皮尔曼相关系数</h5>
                            <p style="font-size: 0.9rem;">基于等级的相关性，适用于非线性关系或非正态分布数据</p>
                            <div class="formula-box" style="margin: 10px 0;">
                                ρ = 1 - (6Σd²) / (n(n²-1))
                            </div>
                            <div class="code-box" style="margin: 10px 0;">
                                    <pre style="color: #d4d4d4; font-size: 0.85rem;">
<span style="color: #608b4e;"># 计算斯皮尔曼相关系数</span>
spearman_corr = X.corrwith(y, method=<span style="color: #ce9178;">"spearman"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"斯皮尔曼相关系数: {spearman_corr.iloc[0]:.6f}"</span>)
</pre>
                            </div>
                        </div>
                    </div>

                    <div class="step-card" style="border-color: #4caf50;">
                        <h4 style="color: #4caf50;">📉 主成分分析 (PCA)</h4>
                        <p><strong>原理：</strong>通过线性变换将高维数据投影到低维空间，保留数据的主要变化模式</p>

                        <div class="code-box" style="margin: 15px 0;">
                                <pre style="color: #d4d4d4; font-size: 0.85rem;">
<span style="color: #569cd6;">import</span> numpy <span style="color: #569cd6;">as</span> np
<span style="color: #569cd6;">from</span> sklearn.decomposition <span style="color: #569cd6;">import</span> PCA
<span style="color: #569cd6;">from</span> sklearn.preprocessing <span style="color: #569cd6;">import</span> StandardScaler

<span style="color: #608b4e;"># 1. 数据标准化（PCA前必须做）</span>
scaler = StandardScaler()
X_standardized = scaler.fit_transform(X)

<span style="color: #608b4e;"># 2. 应用PCA降维</span>
<span style="color: #608b4e;"># n_components=0.95 表示保留95%的方差</span>
pca = PCA(n_components=<span style="color: #b5cea8;">0.95</span>)
X_pca = pca.fit_transform(X_standardized)

<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"原始维度: {X.shape[1]}"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"降维后: {X_pca.shape[1]}"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"解释方差比: {pca.explained_variance_ratio_[:5]}"</span>)
</pre>
                        </div>

                        <div style="margin: 15px 0; padding: 15px; background: rgba(76, 175, 80, 0.1); border-radius: 10px;">
                            <h6 style="color: #4caf50;">PCA最佳实践：</h6>
                            <ul style="margin-left: 20px; font-size: 0.9rem;">
                                <li>数据必须先标准化</li>
                                <li>通常保留90%-95%的方差</li>
                                <li>检查主成分的物理意义</li>
                                <li>可视化前2-3个主成分</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PCA 3D可视化演示 -->
            <div class="principle-container">
                <h3>📊 PCA降维可视化演示</h3>
                <div class="interactive-chart">
                    <div class="scatter-3d-container" id="pca3DContainer">
                        <canvas id="pca3DCanvas" width="1000" height="500" style="width: 100%; height: 100%; border-radius: 15px;"></canvas>
                    </div>
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn" onclick="rotatePCA3D()" style="padding: 10px 20px; font-size: 0.9rem;">旋转视角</button>
                        <button class="btn" onclick="togglePCADimension()" style="padding: 10px 20px; font-size: 0.9rem;">切换2D/3D</button>
                    </div>
                </div>
            </div>

            <!-- 实战示例：广告投放数据分析 -->
            <div class="principle-container">
                <h3>📊 实战案例：广告投放效果分析</h3>

                <div class="code-box">
                        <pre style="color: #d4d4d4; font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9rem; line-height: 1.5;">
<span style="color: #569cd6;">import</span> pandas <span style="color: #569cd6;">as</span> pd
<span style="color: #569cd6;">import</span> numpy <span style="color: #569cd6;">as</span> np
<span style="color: #569cd6;">import</span> matplotlib.pyplot <span style="color: #569cd6;">as</span> plt
<span style="color: #569cd6;">import</span> seaborn <span style="color: #569cd6;">as</span> sns
<span style="color: #569cd6;">from</span> sklearn.feature_selection <span style="color: #569cd6;">import</span> VarianceThreshold, SelectKBest, f_regression

<span style="color: #608b4e;"># 1. 加载广告数据</span>
advertising = pd.read_csv(<span style="color: #ce9178;">"advertising.csv"</span>)
advertising.drop(advertising.columns[<span style="color: #b5cea8;">0</span>], axis=<span style="color: #b5cea8;">1</span>, inplace=<span style="color: #569cd6;">True</span>)
advertising.dropna(inplace=<span style="color: #569cd6;">True</span>)

X = advertising.drop(<span style="color: #ce9178;">"Sales"</span>, axis=<span style="color: #b5cea8;">1</span>)  <span style="color: #608b4e;"># TV, Radio, Newspaper</span>
y = advertising[<span style="color: #ce9178;">"Sales"</span>]

<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"数据形状: {X.shape}"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"特征列: {list(X.columns)}"</span>)

<span style="color: #608b4e;"># 2. 特征与目标的相关性分析</span>
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">"\n=== 皮尔逊相关系数 ==="</span>)
pearson_corr = X.corrwith(y, method=<span style="color: #ce9178;">"pearson"</span>)
<span style="color: #569cd6;">print</span>(pearson_corr.sort_values(ascending=<span style="color: #569cd6;">False</span>))
<span style="color: #608b4e;"># TV           0.782224  (强正相关)</span>
<span style="color: #608b4e;"># Radio        0.576223  (中等正相关)</span>
<span style="color: #608b4e;"># Newspaper    0.228299  (弱正相关)</span>

<span style="color: #608b4e;"># 3. 特征间相关性矩阵</span>
plt.figure(figsize=(<span style="color: #b5cea8;">8</span>, <span style="color: #b5cea8;">6</span>))
corr_matrix = advertising.corr(method=<span style="color: #ce9178;">"pearson"</span>)
sns.heatmap(corr_matrix, annot=<span style="color: #569cd6;">True</span>, cmap=<span style="color: #ce9178;">"coolwarm"</span>, fmt=<span style="color: #ce9178;">".2f"</span>)
plt.title(<span style="color: #ce9178;">"特征相关性热力图"</span>)
plt.show()

<span style="color: #608b4e;"># 4. 特征构造</span>
<span style="color: #608b4e;"># 创建交互特征</span>
X[<span style="color: #ce9178;">'TV_Radio_interaction'</span>] = X[<span style="color: #ce9178;">'TV'</span>] * X[<span style="color: #ce9178;">'Radio'</span>]
X[<span style="color: #ce9178;">'Total_Ad_Spend'</span>] = X[<span style="color: #ce9178;">'TV'</span>] + X[<span style="color: #ce9178;">'Radio'</span>] + X[<span style="color: #ce9178;">'Newspaper'</span>]
X[<span style="color: #ce9178;">'TV_dominance'</span>] = X[<span style="color: #ce9178;">'TV'</span>] / (X[<span style="color: #ce9178;">'Total_Ad_Spend'</span>] + <span style="color: #b5cea8;">1</span>)

<span style="color: #608b4e;"># 多项式特征</span>
X[<span style="color: #ce9178;">'TV_squared'</span>] = X[<span style="color: #ce9178;">'TV'</span>] ** <span style="color: #b5cea8;">2</span>
X[<span style="color: #ce9178;">'Radio_squared'</span>] = X[<span style="color: #ce9178;">'Radio'</span>] ** <span style="color: #b5cea8;">2</span>

<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"\n特征工程后形状: {X.shape}"</span>)

<span style="color: #608b4e;"># 5. 新特征的相关性评估</span>
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">"\n=== 新特征与销售额的相关性 ==="</span>)
new_features = [<span style="color: #ce9178;">'TV_Radio_interaction'</span>, <span style="color: #ce9178;">'Total_Ad_Spend'</span>,
                <span style="color: #ce9178;">'TV_dominance'</span>, <span style="color: #ce9178;">'TV_squared'</span>, <span style="color: #ce9178;">'Radio_squared'</span>]
new_corr = X[new_features].corrwith(y, method=<span style="color: #ce9178;">"pearson"</span>)
<span style="color: #569cd6;">print</span>(new_corr.sort_values(ascending=<span style="color: #569cd6;">False</span>))

<span style="color: #608b4e;"># 6. 特征选择</span>
<span style="color: #608b4e;"># 方差过滤</span>
var_filter = VarianceThreshold(threshold=<span style="color: #b5cea8;">0.1</span>)
X_var_filtered = var_filter.fit_transform(X)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"\n方差过滤后特征数: {X_var_filtered.shape[1]}"</span>)

<span style="color: #608b4e;"># 统计测试选择最佳K个特征</span>
selector = SelectKBest(score_func=f_regression, k=<span style="color: #b5cea8;">5</span>)
X_selected = selector.fit_transform(X, y)
selected_features = X.columns[selector.get_support()].tolist()
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"选中的前5个特征: {selected_features}"</span>)

<span style="color: #608b4e;"># 7. 特征重要性可视化</span>
plt.figure(figsize=(<span style="color: #b5cea8;">10</span>, <span style="color: #b5cea8;">6</span>))
feature_scores = selector.scores_
feature_names = X.columns

plt.barh(range(len(feature_names)), feature_scores)
plt.yticks(range(len(feature_names)), feature_names)
plt.xlabel(<span style="color: #ce9178;">'F-Score'</span>)
plt.title(<span style="color: #ce9178;">'特征重要性评分'</span>)
plt.tight_layout()
plt.show()

<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"\n特征工程总结:"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"原始特征数: 3"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"构造后特征数: {X.shape[1]}"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"最终选择特征数: 5"</span>)
<span style="color: #569cd6;">print</span>(<span style="color: #ce9178;">f"性能提升潜力: 通过交互特征挖掘更深层关系"</span>)
</pre>
                </div>
            </div>

            <!-- 特征工程最佳实践 -->
            <div class="insight-box" style="margin-top: 40px;">
                <h3>🎯 特征工程的黄金法则</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div>
                        <h4 style="color: #667eea;">🧠 领域知识第一</h4>
                        <p>深入理解业务场景，基于领域知识构造有意义的特征往往比盲目使用算法更有效。特征工程取决于具体情境。</p>
                    </div>
                    <div>
                        <h4 style="color: #f093fb;">🔄 迭代优化过程</h4>
                        <p>特征工程是一个迭代过程，需要根据模型反馈不断调整和优化特征，这需要大量的数据分析。</p>
                    </div>
                    <div>
                        <h4 style="color: #4caf50;">⚡ 简单有效原则</h4>
                        <p>复杂的特征不一定更好，简单、可解释的特征往往更稳定更实用，更容易在生产环境中维护。</p>
                    </div>
                    <div>
                        <h4 style="color: #ffa726;">🛡️ 避免数据泄露</h4>
                        <p>确保不使用未来信息，避免数据泄露导致过于乐观的结果。时间序列数据尤其需要注意。</p>
                    </div>
                    <div>
                        <h4 style="color: #ff6b6b;">📊 因模型而异</h4>
                        <p>特征的有效编码由所用的模型类型、预测变量与输出之间的关系以及要解决的问题来确定。</p>
                    </div>
                    <div>
                        <h4 style="color: #9c27b0;">🔍 数据类型适配</h4>
                        <p>不同类型的数据集（如文本与图像）可能更适合不同的特征工程技术，需要针对性处理。</p>
                    </div>
                </div>
            </div>

            <!-- 常见陷阱警告 -->
            <div class="warning-box" style="margin-top: 30px;">
                <h3>⚠️ 特征工程常见陷阱</h3>
                <ol style="margin-left: 30px; line-height: 1.8;">
                    <li><strong>数据泄露：</strong>使用了未来信息或目标变量信息，导致模型过于乐观</li>
                    <li><strong>过度拟合：</strong>创建了太多复杂特征，模型在训练集表现好但泛化差</li>
                    <li><strong>忽视缺失值：</strong>在特征变换前没有妥善处理缺失值</li>
                    <li><strong>标准化时机：</strong>在数据分割前进行标准化，导致测试集信息泄露</li>
                    <li><strong>维度爆炸：</strong>无节制地创建交互特征，导致维度灾难</li>
                    <li><strong>忽视业务逻辑：</strong>创建的特征在业务上没有意义或不可解释</li>
                </ol>
            </div>
        </div>
    </div>
</section>

<!-- 可视化展示 -->
<section id="visualization" class="section">
    <div class="container">
        <h2 class="section-title fade-in-up">交互式学习体验</h2>

        <div class="concept-section fade-in-up">
            <div style="text-align: center; margin-bottom: 40px;">
                <h3 style="font-size: 2.5rem; margin-bottom: 20px;">🎮 动手实践理解概念</h3>
            </div>

            <!-- 互动学习模块 -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">

                <!-- 梯度下降可视化 -->
                <div class="interactive-chart" style="height: 400px;">
                    <h4 style="text-align: center; margin-bottom: 20px;">🎯 梯度下降算法演示</h4>
                    <div style="position: relative; height: 300px; background: rgba(0,0,0,0.3); border-radius: 15px; overflow: hidden;">
                        <canvas id="gradientDescentCanvas" width="400" height="300" style="width: 100%; height: 100%; border-radius: 15px;"></canvas>
                        <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);">
                            <button class="btn" onclick="startGradientDescent()" style="padding: 8px 16px; font-size: 0.9rem;">开始演示</button>
                            <button class="btn" onclick="resetGradientDescent()" style="padding: 8px 16px; font-size: 0.9rem;">重置</button>
                        </div>
                    </div>
                </div>

                <!-- 损失函数对比 -->
                <div class="interactive-chart" style="height: 400px;">
                    <h4 style="text-align: center; margin-bottom: 20px;">📊 损失函数对比</h4>
                    <div style="position: relative; height: 300px; background: rgba(0,0,0,0.3); border-radius: 15px; overflow: hidden;">
                        <canvas id="lossFunctionCanvas" width="400" height="300" style="width: 100%; height: 100%; border-radius: 15px;"></canvas>
                        <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);">
                            <select onchange="changeLossFunction(this.value)" style="padding: 5px; border-radius: 5px; background: #333; color: white; border: 1px solid #666;">
                                <option value="mse">均方误差</option>
                                <option value="mae">平均绝对误差</option>
                                <option value="huber">Huber损失</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- 特征重要性 -->
                <div class="interactive-chart" style="height: 400px;">
                    <h4 style="text-align: center; margin-bottom: 20px;">🔍 特征重要性分析</h4>
                    <div style="position: relative; height: 300px; background: rgba(0,0,0,0.3); border-radius: 15px; overflow: hidden;">
                        <canvas id="featureImportanceCanvas" width="400" height="300" style="width: 100%; height: 100%; border-radius: 15px;"></canvas>
                        <div style="position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%);">
                            <button class="btn" onclick="generateRandomFeatures()" style="padding: 8px 16px; font-size: 0.9rem;">生成随机数据</button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- 总结与展望 -->
            <div style="margin-top: 60px; text-align: center;">
                <h3 style="font-size: 2.5rem; margin-bottom: 30px;">🎓 学习之旅的下一站</h3>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 40px 0;">
                    <div class="step-card" style="border-color: #667eea;">
                        <h4 style="color: #667eea;">📚 深入学习</h4>
                        <p>掌握了基本理论，现在可以深入学习具体的算法实现和高级技巧</p>
                        <div class="btn" style="margin-top: 15px;">继续学习</div>
                    </div>

                    <div class="step-card" style="border-color: #f093fb;">
                        <h4 style="color: #f093fb;">🛠️ 实战项目</h4>
                        <p>理论结合实践，通过真实项目来巩固和应用所学知识</p>
                        <div class="btn" style="margin-top: 15px;">开始实战</div>
                    </div>

                    <div class="step-card" style="border-color: #4caf50;">
                        <h4 style="color: #4caf50;">🚀 进阶挑战</h4>
                        <p>探索前沿技术，深度学习、强化学习等高级主题等你挑战</p>
                        <div class="btn" style="margin-top: 15px;">接受挑战</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    // 粒子背景效果
    function initParticles() {
        const canvas = document.getElementById('particles-canvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const particleCount = 80;

        // 创建粒子
        for (let i = 0; i < particleCount; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 0.8,
                vy: (Math.random() - 0.5) * 0.8,
                radius: Math.random() * 2 + 1,
                opacity: Math.random() * 0.5 + 0.3
            });
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            particles.forEach((particle, index) => {
                // 更新位置
                particle.x += particle.vx;
                particle.y += particle.vy;

                // 边界检测
                if (particle.x < 0 || particle.x > canvas.width) particle.vx *= -1;
                if (particle.y < 0 || particle.y > canvas.height) particle.vy *= -1;

                // 绘制粒子
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                ctx.fillStyle = `rgba(102, 126, 234, ${particle.opacity})`;
                ctx.fill();

                // 绘制连接线
                particles.slice(index + 1).forEach(otherParticle => {
                    const dist = Math.sqrt(
                        Math.pow(particle.x - otherParticle.x, 2) +
                        Math.pow(particle.y - otherParticle.y, 2)
                    );

                    if (dist < 120) {
                        ctx.beginPath();
                        ctx.moveTo(particle.x, particle.y);
                        ctx.lineTo(otherParticle.x, otherParticle.y);
                        ctx.strokeStyle = `rgba(102, 126, 234, ${0.2 * (1 - dist / 120)})`;
                        ctx.lineWidth = 1;
                        ctx.stroke();
                    }
                });
            });

            requestAnimationFrame(animateParticles);
        }

        animateParticles();
    }

    // 三要素交互
    function initThreeElementsInteraction() {
        const svg = document.getElementById('threeElementsSvg');
        if (!svg) return;

        const infoTitle = document.getElementById('infoTitle');
        const infoDesc = document.getElementById('infoDesc');
        const infoExample = document.getElementById('infoExample');

        const elementInfo = {
            model: {
                title: "模型 (Model)",
                desc: "定义从输入到输出的映射关系：y = f(x; θ)",
                example: "例如：线性回归 y = wx + b，决策树 if-then规则，神经网络多层变换"
            },
            strategy: {
                title: "策略 (Strategy)",
                desc: "定义什么是好模型的评价准则：Loss Function",
                example: "例如：均方误差MSE，交叉熵损失，0-1损失，正则化项"
            },
            algorithm: {
                title: "算法 (Algorithm)",
                desc: "求解最优模型参数的具体方法：θ* = argmin Loss(θ)",
                example: "例如：梯度下降法，牛顿法，坐标下降法，遗传算法"
            }
        };

        // 添加悬停效果
        document.querySelectorAll('.element-group').forEach(group => {
            const element = group.dataset.element;

            group.addEventListener('mouseenter', () => {
                infoTitle.textContent = elementInfo[element].title;
                infoDesc.textContent = elementInfo[element].desc;
                infoExample.textContent = elementInfo[element].example;

                // 高亮效果
                group.querySelector('circle').style.filter = 'brightness(1.3)';
            });

            group.addEventListener('mouseleave', () => {
                infoTitle.textContent = "机器学习三要素";
                infoDesc.textContent = "模型 + 策略 + 算法 = 完整的机器学习方法";
                infoExample.textContent = "三者缺一不可，相互协作完成学习任务";

                group.querySelector('circle').style.filter = '';
            });
        });
    }

    // 梯度下降可视化
    let gradientAnimation;
    function initGradientDescent() {
        const canvas = document.getElementById('gradientDescentCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        let currentX = 8;
        let learning_rate = 0.3;
        let isAnimating = false;

        function drawFunction() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 绘制函数曲线 f(x) = (x-5)²
            ctx.beginPath();
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;

            for (let x = 0; x < canvas.width; x += 2) {
                const realX = (x / canvas.width) * 10;
                const y = Math.pow(realX - 5, 2);
                const canvasY = canvas.height - (y / 25) * canvas.height;

                if (x === 0) {
                    ctx.moveTo(x, canvasY);
                } else {
                    ctx.lineTo(x, canvasY);
                }
            }
            ctx.stroke();

            // 绘制当前点
            const canvasX = (currentX / 10) * canvas.width;
            const currentY = Math.pow(currentX - 5, 2);
            const canvasY = canvas.height - (currentY / 25) * canvas.height;

            ctx.beginPath();
            ctx.arc(canvasX, canvasY, 8, 0, Math.PI * 2);
            ctx.fillStyle = '#f093fb';
            ctx.fill();

            // 绘制梯度向量
            const gradient = 2 * (currentX - 5);
            const gradientEndX = canvasX - gradient * 20;

            ctx.beginPath();
            ctx.moveTo(canvasX, canvasY);
            ctx.lineTo(gradientEndX, canvasY);
            ctx.strokeStyle = '#4caf50';
            ctx.lineWidth = 2;
            ctx.stroke();

            // 绘制标签
            ctx.fillStyle = 'white';
            ctx.font = '14px Arial';
            ctx.fillText(`x = ${currentX.toFixed(2)}`, 10, 25);
            ctx.fillText(`f(x) = ${currentY.toFixed(2)}`, 10, 45);
            ctx.fillText(`梯度 = ${gradient.toFixed(2)}`, 10, 65);
        }

        window.startGradientDescent = function() {
            if (isAnimating) return;
            isAnimating = true;

            function step() {
                const gradient = 2 * (currentX - 5);
                currentX = currentX - learning_rate * gradient;

                drawFunction();

                if (Math.abs(gradient) > 0.01 && isAnimating) {
                    setTimeout(step, 200);
                } else {
                    isAnimating = false;
                }
            }
            step();
        };

        window.resetGradientDescent = function() {
            isAnimating = false;
            currentX = 8;
            drawFunction();
        };

        drawFunction();
    }

    // 损失函数对比
    function initLossFunctionComparison() {
        const canvas = document.getElementById('lossFunctionCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');

        const lossFunctions = {
            mse: (true_val, pred_val) => Math.pow(true_val - pred_val, 2),
            mae: (true_val, pred_val) => Math.abs(true_val - pred_val),
            huber: (true_val, pred_val) => {
                const error = Math.abs(true_val - pred_val);
                return error <= 1 ? 0.5 * error * error : error - 0.5;
            }
        };

        let currentLoss = 'mse';

        function drawLossFunction() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const true_value = 0;

            // 绘制损失函数
            ctx.beginPath();
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;

            for (let x = 0; x < canvas.width; x += 2) {
                const pred_value = ((x / canvas.width) - 0.5) * 6; // -3 to 3
                const loss = lossFunctions[currentLoss](true_value, pred_value);
                const canvasY = canvas.height - (loss / 5) * (canvas.height - 50) - 25;

                if (x === 0) {
                    ctx.moveTo(x, canvasY);
                } else {
                    ctx.lineTo(x, canvasY);
                }
            }
            ctx.stroke();

            // 绘制坐标轴
            ctx.strokeStyle = 'rgba(255,255,255,0.3)';
            ctx.lineWidth = 1;

            // Y轴
            ctx.beginPath();
            ctx.moveTo(canvas.width / 2, 0);
            ctx.lineTo(canvas.width / 2, canvas.height);
            ctx.stroke();

            // X轴
            ctx.beginPath();
            ctx.moveTo(0, canvas.height - 25);
            ctx.lineTo(canvas.width, canvas.height - 25);
            ctx.stroke();

            // 标签
            ctx.fillStyle = 'white';
            ctx.font = '12px Arial';
            ctx.fillText('预测值', canvas.width - 60, canvas.height - 10);
            ctx.fillText('损失', 10, 20);

            const lossNames = {
                mse: '均方误差 (MSE)',
                mae: '平均绝对误差 (MAE)',
                huber: 'Huber损失'
            };
            ctx.fillText(lossNames[currentLoss], 10, canvas.height - 10);
        }

        window.changeLossFunction = function(loss) {
            currentLoss = loss;
            drawLossFunction();
        };

        drawLossFunction();
    }

    // 特征重要性可视化
    function initFeatureImportance() {
        const canvas = document.getElementById('featureImportanceCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');

        let features = [
            { name: '年龄', importance: 0.25 },
            { name: '收入', importance: 0.35 },
            { name: '教育', importance: 0.15 },
            { name: '职业', importance: 0.20 },
            { name: '地区', importance: 0.05 }
        ];

        function drawFeatureImportance() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const barHeight = 35;
            const spacing = 10;
            const maxWidth = canvas.width - 120;

            features.forEach((feature, index) => {
                const y = index * (barHeight + spacing) + 20;
                const barWidth = feature.importance * maxWidth;

                // 绘制条形
                const gradient = ctx.createLinearGradient(0, 0, barWidth, 0);
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#f093fb');

                ctx.fillStyle = gradient;
                ctx.fillRect(80, y, barWidth, barHeight);

                // 绘制特征名
                ctx.fillStyle = 'white';
                ctx.font = '14px Arial';
                ctx.textAlign = 'right';
                ctx.fillText(feature.name, 75, y + barHeight/2 + 5);

                // 绘制重要性值
                ctx.textAlign = 'left';
                ctx.fillText((feature.importance * 100).toFixed(1) + '%', 85 + barWidth, y + barHeight/2 + 5);
            });

            ctx.textAlign = 'start';
        }

        window.generateRandomFeatures = function() {
            features = features.map(feature => ({
                ...feature,
                importance: Math.random()
            }));

            // 归一化
            const sum = features.reduce((s, f) => s + f.importance, 0);
            features = features.map(f => ({
                ...f,
                importance: f.importance / sum
            }));

            // 排序
            features.sort((a, b) => b.importance - a.importance);

            drawFeatureImportance();
        };

        drawFeatureImportance();
    }

    // PCA 3D可视化
    let pca3DRotation = 0;
    let is3D = true;

    function initPCA3D() {
        const canvas = document.getElementById('pca3DCanvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');

        // 生成模拟的3D数据点
        const generateData = () => {
            const points = [];
            const n = 100;

            for (let i = 0; i < n; i++) {
                // 创建有相关性的3D数据
                const t = Math.random() * 2 * Math.PI;
                const r = Math.random() * 2 + 1;
                const noise = Math.random() * 0.5;

                points.push({
                    x: r * Math.cos(t) + noise,
                    y: r * Math.sin(t) + noise,
                    z: r * 0.5 + noise,
                    color: `hsl(${(t / (2 * Math.PI)) * 360}, 70%, 60%)`
                });
            }
            return points;
        };

        const points = generateData();

        function project3DTo2D(point, rotation) {
            // 简单的3D到2D投影
            const cosR = Math.cos(rotation);
            const sinR = Math.sin(rotation);

            // 绕Y轴旋转
            const x = point.x * cosR - point.z * sinR;
            const z = point.x * sinR + point.z * cosR;

            // 透视投影
            const scale = 100;
            const distance = 5;
            const projectedX = (x * scale) / (z + distance) + canvas.width / 2;
            const projectedY = (point.y * scale) / (z + distance) + canvas.height / 2;

            return { x: projectedX, y: projectedY, depth: z };
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 背景渐变
            const gradient = ctx.createRadialGradient(canvas.width/2, canvas.height/2, 0, canvas.width/2, canvas.height/2, canvas.width/2);
            gradient.addColorStop(0, 'rgba(26, 26, 62, 0.8)');
            gradient.addColorStop(1, 'rgba(10, 10, 15, 0.9)');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 绘制坐标轴
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            ctx.lineWidth = 1;

            // X轴
            const xStart = project3DTo2D({x: -3, y: 0, z: 0}, pca3DRotation);
            const xEnd = project3DTo2D({x: 3, y: 0, z: 0}, pca3DRotation);
            ctx.beginPath();
            ctx.moveTo(xStart.x, xStart.y);
            ctx.lineTo(xEnd.x, xEnd.y);
            ctx.stroke();

            // Y轴
            const yStart = project3DTo2D({x: 0, y: -3, z: 0}, pca3DRotation);
            const yEnd = project3DTo2D({x: 0, y: 3, z: 0}, pca3DRotation);
            ctx.beginPath();
            ctx.moveTo(yStart.x, yStart.y);
            ctx.lineTo(yEnd.x, yEnd.y);
            ctx.stroke();

            if (is3D) {
                // Z轴
                const zStart = project3DTo2D({x: 0, y: 0, z: -3}, pca3DRotation);
                const zEnd = project3DTo2D({x: 0, y: 0, z: 3}, pca3DRotation);
                ctx.beginPath();
                ctx.moveTo(zStart.x, zStart.y);
                ctx.lineTo(zEnd.x, zEnd.y);
                ctx.stroke();
            }

            // 按深度排序点
            const projectedPoints = points.map(p => ({
                ...p,
                projected: project3DTo2D(p, pca3DRotation)
            })).sort((a, b) => a.projected.depth - b.projected.depth);

            // 绘制点
            projectedPoints.forEach(point => {
                const { x, y } = point.projected;
                const size = is3D ? 5 / (point.projected.depth + 5) * 8 : 4;

                ctx.beginPath();
                ctx.arc(x, y, size, 0, Math.PI * 2);
                ctx.fillStyle = point.color;
                ctx.fill();

                // 添加光晕效果
                ctx.beginPath();
                ctx.arc(x, y, size * 1.5, 0, Math.PI * 2);
                ctx.fillStyle = point.color.replace('60%', '30%');
                ctx.globalAlpha = 0.3;
                ctx.fill();
                ctx.globalAlpha = 1;
            });

            // 绘制PCA主成分（如果是2D模式）
            if (!is3D) {
                ctx.strokeStyle = '#f093fb';
                ctx.lineWidth = 3;
                ctx.setLineDash([10, 5]);

                // 第一主成分
                ctx.beginPath();
                ctx.moveTo(canvas.width * 0.2, canvas.height * 0.7);
                ctx.lineTo(canvas.width * 0.8, canvas.height * 0.3);
                ctx.stroke();

                ctx.setLineDash([]);
                ctx.fillStyle = '#f093fb';
                ctx.font = '14px Arial';
                ctx.fillText('PC1', canvas.width * 0.82, canvas.height * 0.3);
            }

            // 标题
            ctx.fillStyle = 'white';
            ctx.font = '16px Arial';
            ctx.fillText(is3D ? '3D原始数据' : '2D降维后数据', 20, 30);

            // 信息
            ctx.font = '12px Arial';
            ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
            ctx.fillText(is3D ? '保留了所有3个维度的信息' : 'PCA降维：保留95%的方差', 20, canvas.height - 20);
        }

        function animate() {
            pca3DRotation += 0.01;
            draw();
            requestAnimationFrame(animate);
        }

        animate();
    }

    window.rotatePCA3D = function() {
        pca3DRotation += Math.PI / 4;
    };

    window.togglePCADimension = function() {
        is3D = !is3D;
    };

    // 滚动动画
    function initScrollAnimations() {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in-up').forEach(el => {
            observer.observe(el);
        });
    }

    // 导航高亮
    function initNavigation() {
        const sections = document.querySelectorAll('section[id]');
        const navItems = document.querySelectorAll('.nav-item');

        function updateActiveNav() {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            navItems.forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('href') === `#${current}`) {
                    item.classList.add('active');
                }
            });
        }

        window.addEventListener('scroll', updateActiveNav);
        updateActiveNav();
    }

    // 平滑滚动
    function initSmoothScroll() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    }

    // 加载动画
    function hideLoadingOverlay() {
        const overlay = document.getElementById('loadingOverlay');
        if (overlay) {
            setTimeout(() => {
                overlay.classList.add('hidden');
            }, 500);
        }
    }

    // 窗口调整
    function handleResize() {
        const canvas = document.getElementById('particles-canvas');
        if (canvas) {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
    }

    // 初始化所有功能
    document.addEventListener('DOMContentLoaded', function() {
        hideLoadingOverlay();
        initParticles();
        initThreeElementsInteraction();
        initGradientDescent();
        initLossFunctionComparison();
        initFeatureImportance();
        initPCA3D();
        initScrollAnimations();
        initNavigation();
        initSmoothScroll();
    });

    window.addEventListener('resize', handleResize);
</script>
</body>
</html>