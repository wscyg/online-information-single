<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬5ç« ï¼šçº¿æ€§å›å½’ - å¯»æ‰¾æ•°æ®èƒŒåçš„è§„å¾‹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* CSS å˜é‡å®šä¹‰ä¸»é¢˜é¢œè‰² */
        :root {
            /* æ·±è‰²ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰ */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: rgba(30, 41, 59, 0.8);
            --bg-card-solid: rgba(30, 41, 59, 0.95);
            --bg-code: #1a1a2e;
            --bg-demo: #0f172a;

            --text-primary: #e2e8f0;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --text-dim: #64748b;

            --border-primary: rgba(34, 197, 94, 0.3);
            --border-secondary: rgba(34, 197, 94, 0.2);
            --border-muted: rgba(148, 163, 184, 0.1);

            --grid-color: #2d3748;
            --grid-light: #4a5568;

            --shadow-sm: rgba(0,0,0,0.3);
            --shadow-md: rgba(0,0,0,0.4);
            --shadow-lg: rgba(0,0,0,0.5);

            --gradient-primary: linear-gradient(135deg, #22c55e, #10b981);
            --gradient-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);

            /* çº¿æ€§å›å½’ä¸»é¢˜è‰² */
            --regression-green: #22c55e;
            --regression-emerald: #10b981;
            --regression-teal: #14b8a6;
            --regression-yellow: #fbbf24;
            --regression-orange: #f97316;
        }

        /* æµ…è‰²ä¸»é¢˜ */
        body.light-theme {
            --bg-primary: #f8fafc;
            --bg-secondary: #e2e8f0;
            --bg-card: rgba(255, 255, 255, 0.9);
            --bg-card-solid: rgba(255, 255, 255, 0.95);
            --bg-code: #f3f4f6;
            --bg-demo: #ffffff;

            --text-primary: #1e293b;
            --text-secondary: #334155;
            --text-muted: #475569;
            --text-dim: #64748b;

            --border-primary: rgba(34, 197, 94, 0.4);
            --border-secondary: rgba(34, 197, 94, 0.3);
            --border-muted: rgba(203, 213, 225, 0.5);

            --grid-color: #e5e7eb;
            --grid-light: #d1d5db;

            --shadow-sm: rgba(0,0,0,0.1);
            --shadow-md: rgba(0,0,0,0.15);
            --shadow-lg: rgba(0,0,0,0.2);

            --gradient-primary: linear-gradient(135deg, #22c55e, #10b981);
            --gradient-bg: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        /* ä¸»é¢˜è¿‡æ¸¡åŠ¨ç”» */
        body,
        body * {
            transition: background-color 0.3s ease,
            color 0.3s ease,
            border-color 0.3s ease,
            box-shadow 0.3s ease;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-primary);
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* å½“å¯¼èˆªå±•å¼€æ—¶ï¼Œå†…å®¹åŒºå³ç§» */
        body.nav-open .container {
            margin-left: 360px;
        }

        /* åŠ¨æ€èƒŒæ™¯æ•ˆæœ - æ•°æ®ç‚¹é£æ ¼ */
        .dynamic-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -1;
        }

        .data-points-bg {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        /* æ™ºèƒ½å¯¼èˆªæ ·å¼ */
        .smart-nav {
            position: fixed;
            left: -340px;
            top: 0;
            width: 340px;
            height: 100vh;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.98) 0%, rgba(30, 41, 59, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--border-primary);
            box-shadow: 4px 0 30px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
        }

        body.nav-open .smart-nav {
            left: 0;
        }

        /* å¯¼èˆªèƒŒæ™¯è£…é¥° */
        .nav-bg-decoration {
            position: absolute;
            top: -100px;
            right: -100px;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--regression-green) 0%, transparent 70%);
            opacity: 0.1;
            animation: pulse 4s ease-in-out infinite;
        }

        /* å¯¼èˆªè§¦å‘æŒ‰é’® */
        .nav-trigger {
            position: fixed;
            left: 20px;
            top: 20px;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 16px;
            cursor: pointer;
            z-index: 1001;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        body.nav-open .nav-trigger {
            left: 290px;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.1));
            border-color: rgba(251, 191, 36, 0.5);
        }

        .nav-trigger:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
        }

        /* æ±‰å ¡èœå•åŠ¨ç”» */
        .nav-trigger-icon {
            width: 24px;
            height: 20px;
            position: relative;
            transform: rotate(0deg);
            transition: 0.5s ease-in-out;
        }

        .nav-trigger-icon span {
            display: block;
            position: absolute;
            height: 3px;
            width: 100%;
            background: linear-gradient(90deg, var(--regression-green), var(--regression-emerald));
            border-radius: 3px;
            opacity: 1;
            left: 0;
            transform: rotate(0deg);
            transition: 0.25s ease-in-out;
        }

        .nav-trigger-icon span:nth-child(1) {
            top: 0px;
        }

        .nav-trigger-icon span:nth-child(2) {
            top: 8px;
        }

        .nav-trigger-icon span:nth-child(3) {
            top: 16px;
        }

        body.nav-open .nav-trigger-icon span:nth-child(1) {
            top: 8px;
            transform: rotate(135deg);
        }

        body.nav-open .nav-trigger-icon span:nth-child(2) {
            opacity: 0;
            left: -60px;
        }

        body.nav-open .nav-trigger-icon span:nth-child(3) {
            top: 8px;
            transform: rotate(-135deg);
        }

        /* å¯¼èˆªå¤´éƒ¨ */
        .nav-header {
            padding: 30px;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.05));
            border-bottom: 1px solid rgba(34, 197, 94, 0.2);
            position: relative;
        }

        .nav-header h3 {
            font-size: 1.4rem;
            background: linear-gradient(135deg, var(--regression-green), var(--regression-emerald));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
        }

        .nav-subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 5px;
        }

        /* ç« èŠ‚è¿›åº¦ç¯ */
        .chapter-progress {
            position: absolute;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
        }

        .progress-ring {
            transform: rotate(-90deg);
        }

        .progress-ring-bg {
            fill: none;
            stroke: rgba(34, 197, 94, 0.1);
            stroke-width: 4;
        }

        .progress-ring-fill {
            fill: none;
            stroke: url(#progressGradient);
            stroke-width: 4;
            stroke-dasharray: 138.23;
            stroke-dashoffset: 138.23;
            transition: stroke-dashoffset 1s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9rem;
            font-weight: bold;
            color: var(--regression-green);
        }

        /* å¯¼èˆªåˆ—è¡¨ */
        .nav-list {
            list-style: none;
            padding: 20px 0;
            max-height: calc(100vh - 300px);
            overflow-y: auto;
            overflow-x: hidden;
        }

        .nav-list::-webkit-scrollbar {
            width: 6px;
        }

        .nav-list::-webkit-scrollbar-track {
            background: rgba(34, 197, 94, 0.05);
            border-radius: 3px;
        }

        .nav-list::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--regression-green), var(--regression-emerald));
            border-radius: 3px;
        }

        /* å¯¼èˆªé¡¹ */
        .nav-item {
            position: relative;
            margin: 8px 15px;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 0;
            background: linear-gradient(90deg, var(--regression-green), var(--regression-emerald));
            transition: width 0.3s ease;
            opacity: 0.8;
        }

        .nav-item:hover::before {
            width: 4px;
        }

        .nav-item.active::before {
            width: 4px;
            opacity: 1;
            box-shadow: 0 0 12px var(--regression-green);
        }

        .nav-item a {
            display: flex;
            align-items: center;
            padding: 14px 20px;
            color: var(--text-muted);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            background: rgba(0, 0, 0, 0);
        }

        .nav-item:hover a {
            color: var(--text-primary);
            background: rgba(34, 197, 94, 0.05);
            padding-left: 28px;
        }

        .nav-item.active a {
            color: var(--text-primary);
            background: linear-gradient(90deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.05));
            padding-left: 28px;
            font-weight: 600;
        }

        /* å¯¼èˆªå›¾æ ‡åŠ¨ç”» */
        .nav-icon {
            font-size: 1.4rem;
            margin-right: 14px;
            flex-shrink: 0;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: rgba(34, 197, 94, 0.1);
            border-radius: 8px;
        }

        .nav-item:hover .nav-icon {
            transform: scale(1.1) rotate(10deg);
            background: rgba(34, 197, 94, 0.2);
        }

        .nav-item.active .nav-icon {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(16, 185, 129, 0.2));
            animation: iconPulse 2s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* å¯¼èˆªæ–‡æœ¬å’Œæ—¶é—´ */
        .nav-content {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-text {
            font-size: 0.95rem;
            font-weight: 500;
        }

        .nav-meta {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-time {
            font-size: 0.75rem;
            color: var(--text-dim);
            background: rgba(34, 197, 94, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
        }

        .nav-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4a5568;
            transition: all 0.3s ease;
        }

        .nav-item.completed .nav-status {
            background: #10b981;
            box-shadow: 0 0 8px #10b981;
        }

        .nav-item.active .nav-status {
            background: var(--regression-green);
            box-shadow: 0 0 8px var(--regression-green);
            animation: statusPulse 2s ease-in-out infinite;
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* å¯¼èˆªåº•éƒ¨ç»Ÿè®¡ */
        .nav-footer {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 25px;
            background: linear-gradient(to top, rgba(15, 23, 42, 0.98), transparent);
            border-top: 1px solid rgba(34, 197, 94, 0.2);
        }

        .learning-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: rgba(34, 197, 94, 0.05);
            padding: 12px;
            border-radius: 10px;
            border: 1px solid rgba(34, 197, 94, 0.2);
            text-align: center;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--regression-green);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* ä¸»æ ‡é¢˜æ ·å¼ */
        .main-header {
            text-align: center;
            margin: 60px 0;
            position: relative;
        }

        .main-title {
            font-size: 4rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--regression-green) 0%, var(--regression-emerald) 50%, var(--regression-teal) 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradient-flow 6s ease infinite;
            text-shadow: 0 0 80px rgba(34, 197, 94, 0.5);
            margin-bottom: 20px;
        }

        @keyframes gradient-flow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .subtitle {
            font-size: 1.6rem;
            color: #94a3b8;
            text-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        /* ç« èŠ‚å¡ç‰‡æ ·å¼ */
        .section-card {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px;
            margin: 30px 0;
            border: 1px solid var(--border-secondary);
            box-shadow: 0 20px 40px var(--shadow-sm);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .section-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--regression-green), var(--regression-emerald), var(--regression-teal));
            border-radius: 24px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
        }

        .section-card:hover::before {
            opacity: 0.5;
            animation: borderRotate 4s linear infinite;
        }

        @keyframes borderRotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 60px var(--shadow-md);
        }

        .section-title {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--regression-green), var(--regression-emerald));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* æ•…äº‹æ¡†æ ·å¼ */
        .story-box {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.1), rgba(245, 158, 11, 0.05));
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(251, 191, 36, 0.3);
            position: relative;
            overflow: hidden;
        }

        .story-box::after {
            content: 'ğŸ“Š';
            position: absolute;
            top: -20px;
            right: 20px;
            font-size: 4rem;
            opacity: 0.08;
            z-index: 0;
        }

        /* æ€è€ƒé¢˜æ¡†æ ·å¼ */
        .thinking-box {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.05));
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(34, 197, 94, 0.3);
            position: relative;
        }

        .thinking-box::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 5px 15px;
            border-radius: 50%;
            opacity: 0.3;
            z-index: 1;
        }

        /* å…¬å¼å®¹å™¨æ ·å¼ */
        .formula-box {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(124, 58, 237, 0.05));
            border-radius: 20px;
            padding: 35px;
            margin: 30px 0;
            text-align: center;
            border: 2px solid rgba(139, 92, 246, 0.3);
            position: relative;
            overflow: hidden;
        }

        .formula-box::before {
            content: 'âˆ‘';
            position: absolute;
            top: -30px;
            right: 30px;
            font-size: 6rem;
            opacity: 0.03;
            transform: rotate(15deg);
            z-index: 0;
        }

        .math-formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.8rem;
            color: var(--text-primary);
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        /* çŸ©é˜µæ ·å¼ */
        .matrix {
            display: inline-block;
            position: relative;
            margin: 0 10px;
            padding: 10px 15px;
        }

        .matrix::before {
            content: '[';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            font-size: 2.5rem;
            line-height: 1;
            display: flex;
            align-items: center;
        }

        .matrix::after {
            content: ']';
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            font-size: 2.5rem;
            line-height: 1;
            display: flex;
            align-items: center;
        }

        .matrix-content {
            display: grid;
            grid-template-columns: repeat(var(--cols, 1), auto);
            gap: 15px 20px;
            padding: 0 15px;
        }

        .matrix-element {
            text-align: center;
            min-width: 30px;
        }

        /* é«˜äº®æ ·å¼ */
        .highlight-primary {
            color: var(--regression-green);
            font-weight: bold;
            background: rgba(34, 197, 94, 0.1);
            padding: 2px 8px;
            border-radius: 6px;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .highlight-success {
            color: #10b981;
            font-weight: bold;
            background: rgba(16, 185, 129, 0.1);
            padding: 2px 8px;
            border-radius: 6px;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .highlight-warning {
            color: #f59e0b;
            font-weight: bold;
            background: rgba(245, 158, 11, 0.1);
            padding: 2px 8px;
            border-radius: 6px;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .highlight-danger {
            color: #ef4444;
            font-weight: bold;
            background: rgba(239, 68, 68, 0.1);
            padding: 2px 8px;
            border-radius: 6px;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        /* äº¤äº’å¼æ¼”ç¤ºåŒºåŸŸ */
        .demo-container {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.8));
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(34, 197, 94, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        .demo-canvas {
            background: #0f172a;
            border-radius: 10px;
            margin: 20px auto;
            display: block;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            cursor: crosshair;
        }

        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .demo-btn {
            background: linear-gradient(135deg, var(--regression-green), var(--regression-emerald));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(34, 197, 94, 0.3);
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
        }

        .demo-btn:active {
            transform: translateY(0);
        }

        /* ä»£ç åŒºåŸŸæ ·å¼ */
        .code-block {
            background: #1a1a2e;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            overflow-x: auto;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .code-block::before {
            content: 'Python';
            position: absolute;
            top: -12px;
            left: 20px;
            background: linear-gradient(135deg, var(--regression-green), var(--regression-emerald));
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .code-block pre {
            color: #f8f8f2;
            font-family: 'Fira Code', 'Consolas', monospace;
            line-height: 1.6;
            margin: 0;
        }

        /* è¯­æ³•é«˜äº® */
        .keyword { color: #ff79c6; }
        .string { color: #f1fa8c; }
        .comment { color: #6272a4; }
        .number { color: #bd93f9; }
        .function { color: #50fa7b; }

        /* è¿›åº¦æŒ‡ç¤ºå™¨ */
        .progress-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.1));
            padding: 15px 25px;
            border-radius: 50px;
            border: 2px solid rgba(34, 197, 94, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px var(--shadow-sm);
        }

        .progress-bar {
            width: 150px;
            height: 6px;
            background: rgba(34, 197, 94, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--regression-green), var(--regression-emerald));
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        /* æµ®åŠ¨å·¥å…·æ  */
        .floating-toolbar {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

        .toolbar-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--regression-green), var(--regression-emerald));
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(34, 197, 94, 0.3);
        }

        .toolbar-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
        }

        /* å‚æ•°æ§åˆ¶é¢æ¿ */
        .param-panel {
            background: rgba(34, 197, 94, 0.05);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .param-slider {
            width: 100%;
            margin: 10px 0;
        }

        .param-value {
            display: inline-block;
            width: 60px;
            text-align: center;
            color: var(--regression-green);
            font-weight: bold;
        }

        /* æ•°æ®è¡¨æ ¼æ ·å¼ */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--bg-card);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow-sm);
        }

        .data-table th {
            background: linear-gradient(135deg, var(--regression-green), var(--regression-emerald));
            color: white;
            padding: 12px 20px;
            font-weight: 600;
            text-align: center;
        }

        .data-table td {
            padding: 10px 20px;
            text-align: center;
            border-bottom: 1px solid var(--border-muted);
            color: var(--text-primary);
            font-weight: 500;
        }

        .data-table tr:hover td {
            background: rgba(34, 197, 94, 0.05);
        }

        .data-table tr:last-child td {
            border-bottom: none;
        }

        /* æ¨¡å‹çŠ¶æ€æŒ‡ç¤ºå™¨ */
        .model-status {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .status-item {
            text-align: center;
        }

        .status-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--regression-green);
        }

        /* è­¦å‘Šæ¡† */
        .warning-box {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05));
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(239, 68, 68, 0.3);
            position: relative;
        }

        .warning-box::before {
            content: 'âš ï¸';
            position: absolute;
            top: -15px;
            left: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 5px 15px;
            border-radius: 50%;
            opacity: 0.6;
            z-index: 1;
        }

        /* ç†è®ºæ¡† */
        .theory-box {
            background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(14, 165, 233, 0.05));
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(6, 182, 212, 0.3);
            position: relative;
        }

        .theory-box::before {
            content: 'ğŸ“';
            position: absolute;
            top: -15px;
            right: 20px;
            font-size: 2rem;
            background: var(--bg-card-solid);
            padding: 5px 15px;
            border-radius: 50%;
            opacity: 0.6;
            z-index: 1;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1400px) {
            body.nav-open .container {
                margin-left: 0;
                padding-left: 360px;
            }
        }

        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .section-card {
                padding: 25px;
            }

            .demo-controls {
                flex-direction: column;
            }

            .smart-nav {
                width: 100%;
                left: -100%;
            }

            body.nav-open .smart-nav {
                left: 0;
            }

            body.nav-open .container {
                margin-left: 0;
                padding-left: 20px;
            }

            body.nav-open .nav-trigger {
                left: auto;
                right: 20px;
            }

            .matrix {
                font-size: 1rem;
            }
        }

        /* åŠ¨ç”»æ•ˆæœ */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* è„‰å†²åŠ¨ç”» */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        /* ç« èŠ‚é”šç‚¹åç§» */
        .section-anchor {
            scroll-margin-top: 100px;
        }

        /* æ•°æ®ç‚¹åŠ¨ç”» */
        @keyframes data-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .data-point {
            display: inline-block;
            width: 10px;
            height: 10px;
            background: var(--regression-green);
            border-radius: 50%;
            margin: 0 5px;
            animation: data-float 2s ease-in-out infinite;
        }

        /* è®­ç»ƒè¿‡ç¨‹åŠ¨ç”» */
        @keyframes training {
            0% { opacity: 0.3; }
            50% { opacity: 1; }
            100% { opacity: 0.3; }
        }

        .training-active {
            animation: training 1s ease-in-out infinite;
        }

        /* ç»“æœå¡ç‰‡ */
        .result-card {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.05));
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(34, 197, 94, 0.2);
        }

        /* å¯è§†åŒ–å›¾è¡¨å®¹å™¨ */
        .chart-container {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
    </style>
</head>
<body>
<!-- åŠ¨æ€èƒŒæ™¯ -->
<div class="dynamic-bg">
    <canvas id="dataPointsBg" class="data-points-bg"></canvas>
</div>

<!-- å¯¼èˆªè§¦å‘æŒ‰é’® -->
<button class="nav-trigger" onclick="toggleNav()">
    <div class="nav-trigger-icon">
        <span></span>
        <span></span>
        <span></span>
    </div>
</button>

<!-- æ™ºèƒ½å¯¼èˆªç³»ç»Ÿ -->
<nav class="smart-nav">
    <div class="nav-bg-decoration"></div>

    <div class="nav-header">
        <h3>ğŸ“ˆ çº¿æ€§å›å½’å­¦ä¹ æŒ‡å—</h3>
        <p class="nav-subtitle">å¯»æ‰¾æ•°æ®èƒŒåçš„è§„å¾‹</p>

        <div class="chapter-progress">
            <svg width="50" height="50">
                <defs>
                    <linearGradient id="progressGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#22c55e;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <circle cx="25" cy="25" r="22" class="progress-ring progress-ring-bg"></circle>
                <circle cx="25" cy="25" r="22" class="progress-ring progress-ring-fill" id="progressRing"></circle>
            </svg>
            <div class="progress-text" id="progressPercent">0%</div>
        </div>
    </div>

    <ul class="nav-list">
        <li class="nav-item active" data-section="intro">
            <a href="#intro">
                <span class="nav-icon">ğŸŒ…</span>
                <div class="nav-content">
                    <span class="nav-text">å¼•è¨€ï¼šæ•°æ®åˆ†æå¸ˆçš„å›°æƒ‘</span>
                    <div class="nav-meta">
                        <span class="nav-time">5 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="discovery">
            <a href="#discovery">
                <span class="nav-icon">ğŸ”</span>
                <div class="nav-content">
                    <span class="nav-text">1.1 å‘ç°çº¿æ€§å…³ç³»</span>
                    <div class="nav-meta">
                        <span class="nav-time">8 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="concept">
            <a href="#concept">
                <span class="nav-icon">ğŸ¯</span>
                <div class="nav-content">
                    <span class="nav-text">1.2 çº¿æ€§å›å½’æ¦‚å¿µ</span>
                    <div class="nav-meta">
                        <span class="nav-time">10 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="bestfit">
            <a href="#bestfit">
                <span class="nav-icon">ğŸ¤”</span>
                <div class="nav-content">
                    <span class="nav-text">1.3 æœ€ä½³æ‹Ÿåˆç›´çº¿</span>
                    <div class="nav-meta">
                        <span class="nav-time">12 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="loss">
            <a href="#loss">
                <span class="nav-icon">ğŸ§®</span>
                <div class="nav-content">
                    <span class="nav-text">1.4 æŸå¤±å‡½æ•°ï¼šMSE</span>
                    <div class="nav-meta">
                        <span class="nav-time">10 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="analytical">
            <a href="#analytical">
                <span class="nav-icon">ğŸ’¡</span>
                <div class="nav-content">
                    <span class="nav-text">1.5 è§£æè§£æ–¹æ³•</span>
                    <div class="nav-meta">
                        <span class="nav-time">15 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="matrix">
            <a href="#matrix">
                <span class="nav-icon">ğŸ”¢</span>
                <div class="nav-content">
                    <span class="nav-text">1.6 çŸ©é˜µå½¢å¼æ¨å¯¼</span>
                    <div class="nav-meta">
                        <span class="nav-time">20 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="gradient">
            <a href="#gradient">
                <span class="nav-icon">ğŸš€</span>
                <div class="nav-content">
                    <span class="nav-text">1.7 æ¢¯åº¦ä¸‹é™æ³•</span>
                    <div class="nav-meta">
                        <span class="nav-time">15 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="evaluation">
            <a href="#evaluation">
                <span class="nav-icon">ğŸ“Š</span>
                <div class="nav-content">
                    <span class="nav-text">1.8 æ¨¡å‹è¯„ä¼°</span>
                    <div class="nav-meta">
                        <span class="nav-time">12 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="assumptions">
            <a href="#assumptions">
                <span class="nav-icon">âš ï¸</span>
                <div class="nav-content">
                    <span class="nav-text">1.9 çº¿æ€§å›å½’å‡è®¾</span>
                    <div class="nav-meta">
                        <span class="nav-time">10 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="regularization">
            <a href="#regularization">
                <span class="nav-icon">ğŸ›¡ï¸</span>
                <div class="nav-content">
                    <span class="nav-text">1.10 æ­£åˆ™åŒ–</span>
                    <div class="nav-meta">
                        <span class="nav-time">15 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="implementation">
            <a href="#implementation">
                <span class="nav-icon">ğŸ’»</span>
                <div class="nav-content">
                    <span class="nav-text">1.11 ä»£ç å®ç°</span>
                    <div class="nav-meta">
                        <span class="nav-time">15 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="practice">
            <a href="#practice">
                <span class="nav-icon">ğŸ¯</span>
                <div class="nav-content">
                    <span class="nav-text">1.12 å®æˆ˜æ¡ˆä¾‹</span>
                    <div class="nav-meta">
                        <span class="nav-time">20 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
        <li class="nav-item" data-section="summary">
            <a href="#summary">
                <span class="nav-icon">ğŸ“š</span>
                <div class="nav-content">
                    <span class="nav-text">1.13 æ€»ç»“ä¸å±•æœ›</span>
                    <div class="nav-meta">
                        <span class="nav-time">5 min</span>
                        <span class="nav-status"></span>
                    </div>
                </div>
            </a>
        </li>
    </ul>

    <div class="nav-footer">
        <div class="learning-stats">
            <div class="stat-card">
                <div class="stat-value" id="totalTime">182</div>
                <div class="stat-label">æ€»æ—¶é•¿(åˆ†é’Ÿ)</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="completedSections">0/14</div>
                <div class="stat-label">å®Œæˆç« èŠ‚</div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 15px;">
            <kbd style="background: rgba(34, 197, 94, 0.1); padding: 4px 8px; border-radius: 4px;">Alt</kbd> +
            <kbd style="background: rgba(34, 197, 94, 0.1); padding: 4px 8px; border-radius: 4px;">N</kbd>
            <span style="color: var(--text-muted); font-size: 0.8rem;">åˆ‡æ¢å¯¼èˆª</span>
        </div>
    </div>
</nav>

<!-- è¿›åº¦æŒ‡ç¤ºå™¨ -->
<div class="progress-indicator">
    <span>å­¦ä¹ è¿›åº¦</span>
    <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
    </div>
    <span id="progressText">0%</span>
</div>

<!-- ä¸»å®¹å™¨ -->
<div class="container">
    <!-- æ ‡é¢˜éƒ¨åˆ† -->
    <div class="main-header fade-in">
        <h1 class="main-title">ç¬¬5ç« ï¼šçº¿æ€§å›å½’</h1>
        <p class="subtitle">ğŸ“ˆ å¯»æ‰¾æ•°æ®èƒŒåçš„è§„å¾‹ï¼Œè®©æ•°æ®è¯´è¯</p>
    </div>

    <!-- å¼•è¨€ï¼šæ•°æ®åˆ†æå¸ˆçš„å›°æƒ‘ -->
    <div id="intro" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸŒ… å¼•è¨€ï¼šæ•°æ®åˆ†æå¸ˆçš„å›°æƒ‘</h2>

        <div class="story-box">
            <h3 style="color: #fbbf24; margin-bottom: 20px;">ğŸ“Š å‘¨ä¸€æ—©æ™¨ï¼Œåˆ›ä¸šå…¬å¸çš„æ•°æ®åˆ†æå®¤</h3>
            <p style="font-size: 1.1rem; line-height: 1.8;">
                æ•°æ®åˆ†æå¸ˆå°æç›¯ç€ç”µè„‘å±å¹•ï¼Œçœ‰å¤´ç´§é”ã€‚<br><br>
                è€æ¿çš„è¦æ±‚å¾ˆç®€å•ï¼š<span class="highlight-warning">"é¢„æµ‹ä¸‹ä¸ªæœˆçš„é”€å”®é¢"</span><br>
                ä½†æ˜¯é¢å¯¹ç€æ•£ä¹±çš„æ•°æ®ç‚¹ï¼Œå°ææ„Ÿåˆ°æ— ä»ä¸‹æ‰‹...<br><br>
                "è¿™äº›æ•°æ®çœ‹èµ·æ¥<span class="highlight-danger">æ¯«æ— è§„å¾‹å¯è¨€</span>ï¼"
            </p>
            <div style="background: rgba(251, 191, 36, 0.1); padding: 20px; border-radius: 10px; margin-top: 20px; border: 1px solid rgba(251, 191, 36, 0.3);">
                <p style="text-align: center; font-size: 1.2rem; color: #fbbf24;">
                    ğŸ’¡ å¦‚æœèƒ½æ‰¾åˆ°æ•°æ®èƒŒåçš„<strong>è§„å¾‹</strong>...<br>
                    å°±èƒ½é¢„æµ‹æœªæ¥ï¼Œåšå‡ºæ›´å¥½çš„å†³ç­–ï¼
                </p>
            </div>
        </div>

        <div class="thinking-box">
            <h3>å°æçš„æ•°æ®æŒ‘æˆ˜</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div style="background: rgba(34, 197, 94, 0.1); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #22c55e; margin-bottom: 10px;">ğŸ“Š ç°æœ‰æ•°æ®</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li>âœ“ 6ä¸ªæœˆçš„å¹¿å‘ŠæŠ•å…¥</li>
                        <li>âœ“ å¯¹åº”çš„é”€å”®é¢</li>
                        <li>âœ“ çœ‹ä¼¼æ•£ä¹±çš„æ•°æ®ç‚¹</li>
                    </ul>
                </div>
                <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #ef4444; margin-bottom: 10px;">â“ éœ€è¦è§£å†³</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li>âœ“ å¹¿å‘ŠæŠ•å…¥ä¸é”€å”®çš„å…³ç³»ï¼Ÿ</li>
                        <li>âœ“ å¦‚ä½•é¢„æµ‹æœªæ¥é”€å”®ï¼Ÿ</li>
                        <li>âœ“ é¢„æµ‹çš„å¯é æ€§å¦‚ä½•ï¼Ÿ</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- 1.1 å‘ç°çº¿æ€§å…³ç³» -->
    <div id="discovery" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ” 1.1 å‘ç°è§„å¾‹ï¼šæ•£ç‚¹å›¾ä¸­çš„ç§˜å¯†</h2>

        <div class="thinking-box">
            <h3>ä»æ•£ç‚¹åˆ°ç›´çº¿çš„é¡¿æ‚Ÿ</h3>
            <p>å½“å°ææŠŠæ•°æ®ç”»æˆæ•£ç‚¹å›¾æ—¶ï¼Œ<span class="highlight-primary">å¥‡è¿¹å‡ºç°äº†</span>ï¼</p>
            <p>è¿™äº›çœ‹ä¼¼æ‚ä¹±çš„ç‚¹ï¼Œä¼¼ä¹éƒ½<span class="highlight-success">å›´ç»•ç€æŸæ¡éšå½¢çš„ç›´çº¿åˆ†å¸ƒ</span>...</p>
        </div>

        <!-- äº¤äº’å¼æ•£ç‚¹å›¾æ¼”ç¤º -->
        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ“Š äº¤äº’å¼æ•°æ®æ¢ç´¢</h3>
            <canvas id="scatterCanvas" class="demo-canvas" width="800" height="400"></canvas>
            <div class="demo-controls">
                <button class="demo-btn" onclick="showScatterOnly()">åªçœ‹æ•£ç‚¹</button>
                <button class="demo-btn" onclick="showTrendLine()">æ·»åŠ è¶‹åŠ¿çº¿</button>
                <button class="demo-btn" onclick="animateRegression()">åŠ¨ç”»æ¼”ç¤º</button>
                <button class="demo-btn" onclick="addRandomPoint()">æ·»åŠ æ•°æ®ç‚¹</button>
            </div>
            <div class="model-status">
                <div class="status-item">
                    <div class="status-label">æ•°æ®ç‚¹æ•°</div>
                    <div class="status-value" id="pointCount">7</div>
                </div>
                <div class="status-item">
                    <div class="status-label">ç›¸å…³ç³»æ•°</div>
                    <div class="status-value" id="correlation">0.95</div>
                </div>
                <div class="status-item">
                    <div class="status-label">æ‹Ÿåˆä¼˜åº¦ RÂ²</div>
                    <div class="status-value" id="rSquared">0.90</div>
                </div>
            </div>
        </div>

        <div class="theory-box">
            <h3>ğŸ“ ç›¸å…³ç³»æ•°ï¼ˆPearson Correlationï¼‰</h3>
            <p>ç›¸å…³ç³»æ•°è¡¡é‡ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„çº¿æ€§ç›¸å…³ç¨‹åº¦ï¼š</p>
            <div class="math-formula">
                r = Î£[(xáµ¢ - xÌ„)(yáµ¢ - È³)] / âˆš[Î£(xáµ¢ - xÌ„)Â² Ã— Î£(yáµ¢ - È³)Â²]
            </div>
            <ul style="margin-top: 20px;">
                <li>r = 1ï¼šå®Œå…¨æ­£ç›¸å…³</li>
                <li>r = 0ï¼šæ— çº¿æ€§ç›¸å…³</li>
                <li>r = -1ï¼šå®Œå…¨è´Ÿç›¸å…³</li>
                <li>|r| > 0.7ï¼šå¼ºç›¸å…³</li>
            </ul>
        </div>
    </div>

    <!-- 1.2 çº¿æ€§å›å½’æ¦‚å¿µ -->
    <div id="concept" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ¯ 1.2 çº¿æ€§å›å½’ï¼šç”¨ç›´çº¿è®²è¿°æ•°æ®çš„æ•…äº‹</h2>

        <div class="formula-box">
            <h3 style="color: #8b5cf6; margin-bottom: 20px;">ğŸ“ ä¸€å…ƒçº¿æ€§å›å½’æ¨¡å‹</h3>
            <div class="math-formula">
                y = Î²â‚€ + Î²â‚x + Îµ
            </div>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
                <div style="background: rgba(251, 191, 36, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #fbbf24; font-weight: bold;">yï¼šå› å˜é‡</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">æˆ‘ä»¬è¦é¢„æµ‹çš„ç›®æ ‡</div>
                </div>
                <div style="background: rgba(34, 197, 94, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #22c55e; font-weight: bold;">xï¼šè‡ªå˜é‡</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">å½±å“å› ç´ </div>
                </div>
                <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #ef4444; font-weight: bold;">Î²â‚€ï¼šæˆªè·</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">åŸºå‡†å€¼(x=0æ—¶çš„yå€¼)</div>
                </div>
                <div style="background: rgba(6, 182, 212, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #06b6d4; font-weight: bold;">Î²â‚ï¼šæ–œç‡</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">xæ¯å¢åŠ 1ï¼Œyçš„å˜åŒ–é‡</div>
                </div>
                <div style="background: rgba(139, 92, 246, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #8b5cf6; font-weight: bold;">Îµï¼šè¯¯å·®é¡¹</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">éšæœºè¯¯å·®ï¼Œå‡è®¾Îµ~N(0,ÏƒÂ²)</div>
                </div>
            </div>
        </div>

        <div class="formula-box" style="margin-top: 30px;">
            <h3 style="color: #8b5cf6; margin-bottom: 20px;">ğŸ“ å¤šå…ƒçº¿æ€§å›å½’æ¨¡å‹</h3>
            <div class="math-formula">
                y = Î²â‚€ + Î²â‚xâ‚ + Î²â‚‚xâ‚‚ + ... + Î²â‚šxâ‚š + Îµ
            </div>
            <p style="margin-top: 20px; color: var(--text-secondary);">
                å½“æœ‰å¤šä¸ªè‡ªå˜é‡å½±å“å› å˜é‡æ—¶ï¼Œä½¿ç”¨å¤šå…ƒçº¿æ€§å›å½’
            </p>
        </div>

        <!-- å‚æ•°æ„ä¹‰å¯è§†åŒ– -->
        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ¯ ç†è§£å›å½’å‚æ•°</h3>
            <canvas id="paramsCanvas" class="demo-canvas" width="800" height="400"></canvas>
            <div class="param-panel">
                <h4 style="color: #22c55e; margin-bottom: 15px;">è°ƒæ•´å‚æ•°ï¼Œè§‚å¯Ÿå˜åŒ–</h4>
                <div>
                    <label>æˆªè· Î²â‚€: <span class="param-value" id="beta0Value">30</span></label>
                    <input type="range" class="param-slider" id="beta0Slider" min="0" max="100" step="5" value="30" oninput="updateParams()">
                </div>
                <div>
                    <label>æ–œç‡ Î²â‚: <span class="param-value" id="beta1Value">2.5</span></label>
                    <input type="range" class="param-slider" id="beta1Slider" min="-5" max="5" step="0.1" value="2.5" oninput="updateParams()">
                </div>
            </div>
        </div>
    </div>

    <!-- 1.3 æœ€ä½³æ‹Ÿåˆç›´çº¿ -->
    <div id="bestfit" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ¤” 1.3 æ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•æ‰¾åˆ°æœ€ä½³æ‹Ÿåˆç›´çº¿ï¼Ÿ</h2>

        <div class="thinking-box">
            <h3>æ— æ•°æ¡ç›´çº¿ï¼Œå“ªæ¡æœ€å¥½ï¼Ÿ</h3>
            <p>é¢å¯¹æ•£ç‚¹å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡º<span class="highlight-warning">æ— æ•°æ¡ç›´çº¿</span>ã€‚</p>
            <p>ä½†å“ªæ¡ç›´çº¿<span class="highlight-danger">æœ€èƒ½ä»£è¡¨æ•°æ®çš„è§„å¾‹</span>å‘¢ï¼Ÿ</p>
        </div>

        <div class="theory-box">
            <h3>ğŸ“ æœ€å°äºŒä¹˜æ³•åŸç†</h3>
            <p>æœ€ä½³æ‹Ÿåˆç›´çº¿åº”è¯¥ä½¿æ‰€æœ‰æ•°æ®ç‚¹åˆ°ç›´çº¿çš„<span class="highlight-primary">å‚ç›´è·ç¦»å¹³æ–¹å’Œæœ€å°</span>ã€‚</p>
            <p>ä¸ºä»€ä¹ˆæ˜¯å‚ç›´è·ç¦»ï¼Ÿå› ä¸ºæˆ‘ä»¬è¦æœ€å°åŒ–<strong>é¢„æµ‹è¯¯å·®</strong>ï¼ˆyæ–¹å‘çš„è¯¯å·®ï¼‰ã€‚</p>
            <div style="margin-top: 20px;">
                <p><strong>ç›®æ ‡å‡½æ•°ï¼š</strong></p>
                <div class="math-formula">
                    min Î£(yáµ¢ - Å·áµ¢)Â² = min Î£[yáµ¢ - (Î²â‚€ + Î²â‚xáµ¢)]Â²
                </div>
            </div>
        </div>

        <!-- å¤šæ¡ç›´çº¿å¯¹æ¯”æ¼”ç¤º -->
        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ¯ ä¸åŒç›´çº¿çš„æ‹Ÿåˆæ•ˆæœ</h3>
            <canvas id="fitCanvas" class="demo-canvas" width="800" height="500"></canvas>
            <div class="demo-controls">
                <button class="demo-btn" onclick="showLine('flat')">å¤ªå¹³ç¼“</button>
                <button class="demo-btn" onclick="showLine('steep')">å¤ªé™¡å³­</button>
                <button class="demo-btn" onclick="showLine('best')">æœ€ä½³æ‹Ÿåˆ</button>
                <button class="demo-btn" onclick="showAllLines()">å…¨éƒ¨å¯¹æ¯”</button>
            </div>
            <div class="result-card" id="fitResult" style="text-align: center;">
                <p>ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹ä¸åŒç›´çº¿çš„æ‹Ÿåˆæ•ˆæœ...</p>
            </div>
        </div>
    </div>

    <!-- 1.4 æŸå¤±å‡½æ•°ï¼šMSE -->
    <div id="loss" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ§® 1.4 æŸå¤±å‡½æ•°ï¼šå‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰</h2>

        <div class="thinking-box">
            <h3>ä¸ºä»€ä¹ˆè¦å¹³æ–¹ï¼Ÿ</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div style="background: rgba(239, 68, 68, 0.1); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #ef4444;">âŒ ç®€å•æ±‚å’Œçš„é—®é¢˜</h4>
                    <p style="font-family: monospace;">
                        è¯¯å·®: +5, -5, +3, -3<br>
                        æ€»å’Œ: 0 ğŸ˜±<br>
                        <span style="color: #fbbf24;">çœ‹èµ·æ¥å®Œç¾ï¼Ÿå®é™…å¾ˆç³Ÿç³•ï¼</span>
                    </p>
                </div>
                <div style="background: rgba(34, 197, 94, 0.1); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #22c55e;">âœ… å¹³æ–¹çš„æ™ºæ…§</h4>
                    <p style="font-family: monospace;">
                        è¯¯å·®Â²: 25, 25, 9, 9<br>
                        æ€»å’Œ: 68<br>
                        <span style="color: #22c55e;">çœŸå®åæ˜ äº†è¯¯å·®å¤§å°ï¼</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="formula-box">
            <h3 style="color: #06b6d4; margin-bottom: 20px;">ğŸ“ æŸå¤±å‡½æ•°å®šä¹‰</h3>
            <div style="display: grid; gap: 20px;">
                <div>
                    <p><strong>å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰ï¼š</strong></p>
                    <div class="math-formula">
                        MSE = (1/n) Ã— Î£(yáµ¢ - Å·áµ¢)Â²
                    </div>
                </div>
                <div>
                    <p><strong>å‡æ–¹æ ¹è¯¯å·®ï¼ˆRMSEï¼‰ï¼š</strong></p>
                    <div class="math-formula">
                        RMSE = âˆšMSE = âˆš[(1/n) Ã— Î£(yáµ¢ - Å·áµ¢)Â²]
                    </div>
                </div>
                <div>
                    <p><strong>å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMAEï¼‰ï¼š</strong></p>
                    <div class="math-formula">
                        MAE = (1/n) Ã— Î£|yáµ¢ - Å·áµ¢|
                    </div>
                </div>
            </div>
        </div>

        <!-- MSEå¯è§†åŒ–æ¼”ç¤º -->
        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ“Š MSEçš„å‡ ä½•æ„ä¹‰</h3>
            <canvas id="mseCanvas" class="demo-canvas" width="800" height="400"></canvas>
            <div class="demo-controls">
                <button class="demo-btn" onclick="showErrors()">æ˜¾ç¤ºè¯¯å·®</button>
                <button class="demo-btn" onclick="showSquares()">è¯¯å·®å¹³æ–¹</button>
                <button class="demo-btn" onclick="animateMSE()">åŠ¨ç”»æ¼”ç¤º</button>
            </div>
            <div class="model-status">
                <div class="status-item">
                    <div class="status-label">å½“å‰MSE</div>
                    <div class="status-value" id="currentMSE">0.00</div>
                </div>
            </div>
        </div>

        <div class="theory-box">
            <h3>ğŸ’¡ MSEçš„ä¼˜ç‚¹</h3>
            <ul>
                <li><strong>æ•°å­¦æ€§è´¨å¥½</strong>ï¼šå¤„å¤„å¯å¯¼ï¼Œä¾¿äºä¼˜åŒ–</li>
                <li><strong>æƒ©ç½šå¤§è¯¯å·®</strong>ï¼šå¹³æ–¹æ”¾å¤§äº†å¤§è¯¯å·®çš„å½±å“</li>
                <li><strong>æœ‰å”¯ä¸€æœ€ä¼˜è§£</strong>ï¼šå‡¸å‡½æ•°ï¼Œä¿è¯å…¨å±€æœ€ä¼˜</li>
                <li><strong>ä¸æ­£æ€åˆ†å¸ƒå‡è®¾ä¸€è‡´</strong>ï¼šæœ€å¤§ä¼¼ç„¶ä¼°è®¡çš„ç»“æœ</li>
            </ul>
        </div>
    </div>

    <!-- 1.5 è§£æè§£æ–¹æ³• -->
    <div id="analytical" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ’¡ 1.5 æ±‚è§£æ–¹æ³•ä¸€ï¼šè§£æè§£ï¼ˆæ­£è§„æ–¹ç¨‹ï¼‰</h2>

        <div class="story-box">
            <h3 style="color: #fbbf24;">ğŸ“ æ•°å­¦çš„ä¼˜é›…</h3>
            <p>é€šè¿‡å¾®ç§¯åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥<span class="highlight-primary">ç›´æ¥æ±‚å‡ºæœ€ä¼˜å‚æ•°</span>ï¼</p>
            <p>è¿™å°±åƒè§£æ–¹ç¨‹ä¸€æ ·ï¼Œæœ‰ç¡®å®šçš„ç­”æ¡ˆã€‚</p>
        </div>

        <div class="formula-box">
            <h3 style="color: #22c55e;">ğŸ“ ä¸€å…ƒçº¿æ€§å›å½’çš„æ¨å¯¼</h3>
            <div style="display: grid; gap: 20px; margin-top: 20px;">
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #22c55e; font-weight: bold;">ç›®æ ‡ï¼šæœ€å°åŒ–æŸå¤±å‡½æ•°</p>
                    <p style="font-family: 'Times New Roman', serif; font-size: 1.2rem; text-align: center; margin: 15px 0;">
                        J(Î²â‚€, Î²â‚) = Î£(yáµ¢ - Î²â‚€ - Î²â‚xáµ¢)Â²
                    </p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #06b6d4; font-weight: bold;">æ±‚åå¯¼ï¼Œä»¤å…¶ä¸ºé›¶</p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                        <div style="text-align: center;">
                            âˆ‚J/âˆ‚Î²â‚€ = -2Î£(yáµ¢ - Î²â‚€ - Î²â‚xáµ¢) = 0
                        </div>
                        <div style="text-align: center;">
                            âˆ‚J/âˆ‚Î²â‚ = -2Î£xáµ¢(yáµ¢ - Î²â‚€ - Î²â‚xáµ¢) = 0
                        </div>
                    </div>
                </div>
                <div style="background: rgba(34, 197, 94, 0.1); padding: 20px; border-radius: 10px; border: 2px solid rgba(34, 197, 94, 0.3);">
                    <p style="color: #22c55e; font-weight: bold;">ğŸ¯ æœ€ç»ˆè§£ï¼ˆæ­£è§„æ–¹ç¨‹ï¼‰</p>
                    <div style="font-family: 'Times New Roman', serif; font-size: 1.2rem; text-align: center; margin: 15px 0;">
                        Î²â‚ = Î£[(xáµ¢ - xÌ„)(yáµ¢ - È³)] / Î£(xáµ¢ - xÌ„)Â²<br><br>
                        Î²â‚€ = È³ - Î²â‚xÌ„
                    </div>
                </div>
            </div>
        </div>

        <!-- è®¡ç®—æ¼”ç¤º -->
        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ§® è§£æè§£è®¡ç®—æ¼”ç¤º</h3>
            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 20px;">
                <div>
                    <table class="data-table">
                        <thead>
                        <tr>
                            <th>å¹¿å‘Š(ä¸‡)</th>
                            <th>é”€å”®(ä¸‡)</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr><td>10</td><td>50</td></tr>
                        <tr><td>15</td><td>65</td></tr>
                        <tr><td>20</td><td>78</td></tr>
                        <tr><td>25</td><td>92</td></tr>
                        <tr><td>30</td><td>105</td></tr>
                        </tbody>
                    </table>
                </div>
                <div>
                    <canvas id="analyticalCanvas" class="demo-canvas" width="400" height="300"></canvas>
                    <div class="result-card" style="margin-top: 20px;">
                        <div id="analyticalResult">
                            <p><strong>è®¡ç®—è¿‡ç¨‹ï¼š</strong></p>
                            <p>xÌ„ = 20, È³ = 78</p>
                            <p>åˆ†å­ = Î£[(xáµ¢-20)(yáµ¢-78)] = 550</p>
                            <p>åˆ†æ¯ = Î£(xáµ¢-20)Â² = 250</p>
                            <p>Î²â‚ = 550/250 = 2.2</p>
                            <p>Î²â‚€ = 78 - 2.2Ã—20 = 34</p>
                            <p style="color: #22c55e; font-weight: bold;">å›å½’æ–¹ç¨‹ï¼šy = 34 + 2.2x</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 1.6 çŸ©é˜µå½¢å¼æ¨å¯¼ -->
    <div id="matrix" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ”¢ 1.6 çŸ©é˜µå½¢å¼æ¨å¯¼ï¼ˆå¤šå…ƒçº¿æ€§å›å½’ï¼‰</h2>

        <div class="theory-box">
            <h3>ğŸ“ çŸ©é˜µè¡¨ç¤ºæ³•</h3>
            <p>å¯¹äºnä¸ªæ ·æœ¬ï¼Œpä¸ªç‰¹å¾çš„æ•°æ®é›†ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 20px 0; align-items: center; justify-items: center;">
                <div>
                    <p style="text-align: center; margin-bottom: 10px;"><strong>è®¾è®¡çŸ©é˜µ X</strong></p>
                    <div class="matrix" style="--cols: 4;">
                        <div class="matrix-content">
                            <span class="matrix-element">1</span>
                            <span class="matrix-element">xâ‚â‚</span>
                            <span class="matrix-element">...</span>
                            <span class="matrix-element">xâ‚â‚š</span>
                            <span class="matrix-element">1</span>
                            <span class="matrix-element">xâ‚‚â‚</span>
                            <span class="matrix-element">...</span>
                            <span class="matrix-element">xâ‚‚â‚š</span>
                            <span class="matrix-element">â‹®</span>
                            <span class="matrix-element">â‹®</span>
                            <span class="matrix-element">â‹±</span>
                            <span class="matrix-element">â‹®</span>
                            <span class="matrix-element">1</span>
                            <span class="matrix-element">xâ‚™â‚</span>
                            <span class="matrix-element">...</span>
                            <span class="matrix-element">xâ‚™â‚š</span>
                        </div>
                    </div>
                    <p style="text-align: center; margin-top: 10px; color: var(--text-muted);">nÃ—(p+1)</p>
                </div>
                <div>
                    <p style="text-align: center; margin-bottom: 10px;"><strong>å‚æ•°å‘é‡ Î²</strong></p>
                    <div class="matrix" style="--cols: 1;">
                        <div class="matrix-content">
                            <span class="matrix-element">Î²â‚€</span>
                            <span class="matrix-element">Î²â‚</span>
                            <span class="matrix-element">â‹®</span>
                            <span class="matrix-element">Î²â‚š</span>
                        </div>
                    </div>
                    <p style="text-align: center; margin-top: 10px; color: var(--text-muted);">(p+1)Ã—1</p>
                </div>
                <div>
                    <p style="text-align: center; margin-bottom: 10px;"><strong>ç›®æ ‡å‘é‡ y</strong></p>
                    <div class="matrix" style="--cols: 1;">
                        <div class="matrix-content">
                            <span class="matrix-element">yâ‚</span>
                            <span class="matrix-element">yâ‚‚</span>
                            <span class="matrix-element">â‹®</span>
                            <span class="matrix-element">yâ‚™</span>
                        </div>
                    </div>
                    <p style="text-align: center; margin-top: 10px; color: var(--text-muted);">nÃ—1</p>
                </div>
                <div>
                    <p style="text-align: center; margin-bottom: 10px;"><strong>è¯¯å·®å‘é‡ Îµ</strong></p>
                    <div class="matrix" style="--cols: 1;">
                        <div class="matrix-content">
                            <span class="matrix-element">Îµâ‚</span>
                            <span class="matrix-element">Îµâ‚‚</span>
                            <span class="matrix-element">â‹®</span>
                            <span class="matrix-element">Îµâ‚™</span>
                        </div>
                    </div>
                    <p style="text-align: center; margin-top: 10px; color: var(--text-muted);">nÃ—1</p>
                </div>
            </div>
            <div class="math-formula">
                y = XÎ² + Îµ
            </div>
        </div>

        <div class="formula-box">
            <h3 style="color: #8b5cf6;">ğŸ“ æ­£è§„æ–¹ç¨‹çš„çŸ©é˜µå½¢å¼æ¨å¯¼</h3>
            <div style="display: grid; gap: 20px; margin-top: 20px;">
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #22c55e; font-weight: bold;">æŸå¤±å‡½æ•°çš„çŸ©é˜µå½¢å¼</p>
                    <div style="font-family: 'Times New Roman', serif; font-size: 1.2rem; text-align: center; margin: 15px 0;">
                        J(Î²) = (y - XÎ²)áµ€(y - XÎ²) = ||y - XÎ²||Â²
                    </div>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #06b6d4; font-weight: bold;">å¯¹Î²æ±‚å¯¼</p>
                    <div style="font-family: 'Times New Roman', serif; font-size: 1.2rem; text-align: center; margin: 15px 0;">
                        âˆ‡J(Î²) = -2Xáµ€(y - XÎ²) = -2Xáµ€y + 2Xáµ€XÎ²
                    </div>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #fbbf24; font-weight: bold;">ä»¤å¯¼æ•°ä¸ºé›¶</p>
                    <div style="font-family: 'Times New Roman', serif; font-size: 1.2rem; text-align: center; margin: 15px 0;">
                        Xáµ€XÎ² = Xáµ€y
                    </div>
                </div>
                <div style="background: rgba(34, 197, 94, 0.1); padding: 20px; border-radius: 10px; border: 2px solid rgba(34, 197, 94, 0.3);">
                    <p style="color: #22c55e; font-weight: bold;">ğŸ¯ æ­£è§„æ–¹ç¨‹è§£</p>
                    <div style="font-family: 'Times New Roman', serif; font-size: 1.4rem; text-align: center; margin: 15px 0;">
                        Î²Ì‚ = (Xáµ€X)â»Â¹Xáµ€y
                    </div>
                    <p style="color: var(--text-muted); text-align: center;">å‰æï¼šXáµ€X å¯é€†ï¼ˆæ»¡ç§©ï¼‰</p>
                </div>
            </div>
        </div>

        <div class="warning-box">
            <h3>âš ï¸ æ­£è§„æ–¹ç¨‹çš„å±€é™æ€§</h3>
            <ul>
                <li><strong>è®¡ç®—å¤æ‚åº¦é«˜</strong>ï¼šçŸ©é˜µæ±‚é€†çš„å¤æ‚åº¦ä¸ºO(pÂ³)</li>
                <li><strong>æ•°å€¼ç¨³å®šæ€§é—®é¢˜</strong>ï¼šå½“Xáµ€Xæ¥è¿‘å¥‡å¼‚æ—¶ï¼Œæ±‚é€†ä¸ç¨³å®š</li>
                <li><strong>å†…å­˜éœ€æ±‚å¤§</strong>ï¼šéœ€è¦å­˜å‚¨å®Œæ•´çš„Xáµ€XçŸ©é˜µ</li>
                <li><strong>ä¸é€‚åˆå¤§è§„æ¨¡æ•°æ®</strong>ï¼šå½“æ ·æœ¬é‡nå¾ˆå¤§æ—¶ï¼Œè®¡ç®—å›°éš¾</li>
            </ul>
            <p style="margin-top: 20px;">è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨<span class="highlight-primary">æ¢¯åº¦ä¸‹é™</span>æˆ–å…¶ä»–è¿­ä»£æ–¹æ³•</p>
        </div>
    </div>

    <!-- 1.7 æ¢¯åº¦ä¸‹é™æ³• -->
    <div id="gradient" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸš€ 1.7 æ±‚è§£æ–¹æ³•äºŒï¼šæ¢¯åº¦ä¸‹é™ï¼ˆè¿­ä»£ä¼˜åŒ–ï¼‰</h2>

        <div class="story-box">
            <h3 style="color: #22c55e;">ğŸ”ï¸ ç›²äººä¸‹å±±çš„æ™ºæ…§</h3>
            <p>æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªç›²äººï¼Œç«™åœ¨å±±é¡¶ï¼Œè¦æ‰¾åˆ°æœ€ä½ç‚¹ã€‚</p>
            <p>ä½ ä¼šæ€ä¹ˆåšï¼Ÿ<span class="highlight-primary">æ¢æµ‹è„šä¸‹çš„å¡åº¦ï¼Œæœç€ä¸‹å¡çš„æ–¹å‘èµ°ä¸€å°æ­¥</span>ï¼Œä¸æ–­é‡å¤ï¼</p>
        </div>

        <div class="formula-box">
            <h3 style="color: #06b6d4;">ğŸ“ æ¢¯åº¦ä¸‹é™ç®—æ³•</h3>
            <div style="display: grid; gap: 20px;">
                <div>
                    <p><strong>æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆBatch GDï¼‰ï¼š</strong></p>
                    <div class="math-formula">
                        Î² = Î² - Î± Ã— (1/n) Ã— Xáµ€(XÎ² - y)
                    </div>
                </div>
                <div>
                    <p><strong>éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆSGDï¼‰ï¼š</strong></p>
                    <div class="math-formula">
                        Î² = Î² - Î± Ã— xáµ¢áµ€(xáµ¢Î² - yáµ¢)
                    </div>
                </div>
                <div>
                    <p><strong>å°æ‰¹é‡æ¢¯åº¦ä¸‹é™ï¼ˆMini-batch GDï¼‰ï¼š</strong></p>
                    <div class="math-formula">
                        Î² = Î² - Î± Ã— (1/m) Ã— X_batcháµ€(X_batchÎ² - y_batch)
                    </div>
                </div>
            </div>
            <p style="margin-top: 20px; text-align: center;">
                Î±ï¼šå­¦ä¹ ç‡ï¼Œæ§åˆ¶æ¯æ­¥çš„å¤§å°
            </p>
        </div>

        <!-- æ¢¯åº¦ä¸‹é™å¯è§†åŒ– -->
        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ”ï¸ æ¢¯åº¦ä¸‹é™è¿‡ç¨‹å¯è§†åŒ–</h3>
            <canvas id="gradientCanvas" class="demo-canvas" width="800" height="500"></canvas>
            <div class="demo-controls">
                <button class="demo-btn" onclick="startGradientDescent()">å¼€å§‹ä¸‹é™</button>
                <button class="demo-btn" onclick="pauseGradientDescent()">æš‚åœ</button>
                <button class="demo-btn" onclick="resetGradientDescent()">é‡ç½®</button>
                <button class="demo-btn" onclick="changeLearnRate()">è°ƒæ•´å­¦ä¹ ç‡</button>
            </div>
            <div class="model-status">
                <div class="status-item">
                    <div class="status-label">è¿­ä»£æ¬¡æ•°</div>
                    <div class="status-value" id="gdIteration">0</div>
                </div>
                <div class="status-item">
                    <div class="status-label">å­¦ä¹ ç‡</div>
                    <div class="status-value" id="learnRate">0.01</div>
                </div>
                <div class="status-item">
                    <div class="status-label">å½“å‰æŸå¤±</div>
                    <div class="status-value" id="gdLoss">100.00</div>
                </div>
            </div>
        </div>

        <div class="theory-box">
            <h3>ğŸ“Š ä¸‰ç§æ¢¯åº¦ä¸‹é™æ–¹æ³•å¯¹æ¯”</h3>
            <table class="data-table">
                <thead>
                <tr>
                    <th>æ–¹æ³•</th>
                    <th>æ¯æ¬¡è¿­ä»£è®¡ç®—é‡</th>
                    <th>æ”¶æ•›é€Ÿåº¦</th>
                    <th>å†…å­˜éœ€æ±‚</th>
                    <th>é€‚ç”¨åœºæ™¯</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>æ‰¹é‡GD</td>
                    <td>é«˜ï¼ˆå…¨éƒ¨æ ·æœ¬ï¼‰</td>
                    <td>ç¨³å®šä½†æ…¢</td>
                    <td>é«˜</td>
                    <td>å°æ•°æ®é›†</td>
                </tr>
                <tr>
                    <td>éšæœºGD</td>
                    <td>ä½ï¼ˆå•ä¸ªæ ·æœ¬ï¼‰</td>
                    <td>å¿«ä½†ä¸ç¨³å®š</td>
                    <td>ä½</td>
                    <td>å¤§æ•°æ®é›†</td>
                </tr>
                <tr>
                    <td>å°æ‰¹é‡GD</td>
                    <td>ä¸­ï¼ˆæ‰¹æ¬¡æ ·æœ¬ï¼‰</td>
                    <td>è¾ƒå¿«ä¸”ç¨³å®š</td>
                    <td>ä¸­</td>
                    <td>é€šç”¨æ¨è</td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- å­¦ä¹ ç‡å½±å“æ¼”ç¤º -->
        <div style="background: rgba(139, 92, 246, 0.1); padding: 25px; border-radius: 15px; margin-top: 30px; border: 2px solid rgba(139, 92, 246, 0.3);">
            <h4 style="color: #8b5cf6; text-align: center; margin-bottom: 20px;">âš¡ å­¦ä¹ ç‡çš„å½±å“</h4>
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
                <div style="text-align: center;">
                    <div style="color: #ef4444; font-weight: bold;">å­¦ä¹ ç‡è¿‡å°</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        Î± = 0.0001<br>
                        æ”¶æ•›ææ…¢<br>
                        éœ€è¦å¤§é‡è¿­ä»£
                    </div>
                </div>
                <div style="text-align: center;">
                    <div style="color: #22c55e; font-weight: bold;">å­¦ä¹ ç‡åˆé€‚</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        Î± = 0.01<br>
                        å¹³ç¨³æ”¶æ•›<br>
                        æ•ˆç‡æœ€é«˜
                    </div>
                </div>
                <div style="text-align: center;">
                    <div style="color: #fbbf24; font-weight: bold;">å­¦ä¹ ç‡è¿‡å¤§</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">
                        Î± = 1.0<br>
                        å¯èƒ½å‘æ•£<br>
                        é”™è¿‡æœ€ä¼˜è§£
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 1.8 æ¨¡å‹è¯„ä¼° -->
    <div id="evaluation" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ“Š 1.8 æ¨¡å‹è¯„ä¼°ï¼šå¦‚ä½•åˆ¤æ–­æ¨¡å‹å¥½åï¼Ÿ</h2>

        <div class="formula-box">
            <h3 style="color: #22c55e;">ğŸ“ è¯„ä¼°æŒ‡æ ‡</h3>
            <div style="display: grid; gap: 20px;">
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #22c55e; font-weight: bold;">RÂ²ï¼ˆå†³å®šç³»æ•°ï¼‰</p>
                    <div class="math-formula">
                        RÂ² = 1 - SSR/SST = 1 - Î£(yáµ¢ - Å·áµ¢)Â² / Î£(yáµ¢ - È³)Â²
                    </div>
                    <p style="margin-top: 10px; color: var(--text-muted);">
                        è§£é‡Šäº†å¤šå°‘æ–¹å·®ï¼ŒèŒƒå›´[0,1]ï¼Œè¶Šæ¥è¿‘1è¶Šå¥½
                    </p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #fbbf24; font-weight: bold;">è°ƒæ•´RÂ²ï¼ˆAdjusted RÂ²ï¼‰</p>
                    <div class="math-formula">
                        RÂ²_adj = 1 - [(1-RÂ²)(n-1)] / (n-p-1)
                    </div>
                    <p style="margin-top: 10px; color: var(--text-muted);">
                        è€ƒè™‘äº†ç‰¹å¾æ•°é‡ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆ
                    </p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #06b6d4; font-weight: bold;">AICï¼ˆèµ¤æ± ä¿¡æ¯å‡†åˆ™ï¼‰</p>
                    <div class="math-formula">
                        AIC = nÃ—ln(SSR/n) + 2p
                    </div>
                    <p style="margin-top: 10px; color: var(--text-muted);">
                        å¹³è¡¡æ‹Ÿåˆä¼˜åº¦å’Œæ¨¡å‹å¤æ‚åº¦ï¼Œè¶Šå°è¶Šå¥½
                    </p>
                </div>
            </div>
        </div>

        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ“Š æ®‹å·®åˆ†æ</h3>
            <canvas id="residualCanvas" class="demo-canvas" width="800" height="400"></canvas>
            <div class="demo-controls">
                <button class="demo-btn" onclick="showResidualPlot()">æ®‹å·®å›¾</button>
                <button class="demo-btn" onclick="showQQPlot()">Q-Qå›¾</button>
                <button class="demo-btn" onclick="showHistogram()">æ®‹å·®ç›´æ–¹å›¾</button>
            </div>
        </div>

        <div class="theory-box">
            <h3>ğŸ“‹ æ¨¡å‹è¯Šæ–­æ£€æŸ¥æ¸…å•</h3>
            <ul>
                <li>âœ“ <strong>æ®‹å·®éšæœºæ€§</strong>ï¼šæ®‹å·®åº”è¯¥éšæœºåˆ†å¸ƒï¼Œæ— æ˜æ˜¾æ¨¡å¼</li>
                <li>âœ“ <strong>æ®‹å·®æ­£æ€æ€§</strong>ï¼šæ®‹å·®åº”è¯¥æœä»æ­£æ€åˆ†å¸ƒ</li>
                <li>âœ“ <strong>åŒæ–¹å·®æ€§</strong>ï¼šæ®‹å·®çš„æ–¹å·®åº”è¯¥æ’å®š</li>
                <li>âœ“ <strong>æ— è‡ªç›¸å…³</strong>ï¼šæ®‹å·®ä¹‹é—´åº”è¯¥ç‹¬ç«‹</li>
                <li>âœ“ <strong>æ— å¤šé‡å…±çº¿æ€§</strong>ï¼šè‡ªå˜é‡ä¹‹é—´ä¸åº”é«˜åº¦ç›¸å…³</li>
            </ul>
        </div>
    </div>

    <!-- 1.9 çº¿æ€§å›å½’å‡è®¾ -->
    <div id="assumptions" class="section-card fade-in section-anchor">
        <h2 class="section-title">âš ï¸ 1.9 çº¿æ€§å›å½’çš„åŸºæœ¬å‡è®¾</h2>

        <div class="warning-box">
            <h3>çº¿æ€§å›å½’çš„äº”å¤§å‡è®¾ï¼ˆLINERï¼‰</h3>
            <div style="display: grid; gap: 20px; margin-top: 20px;">
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #22c55e;">L - Linearityï¼ˆçº¿æ€§å…³ç³»ï¼‰</h4>
                    <p>å› å˜é‡ä¸è‡ªå˜é‡ä¹‹é—´å­˜åœ¨çº¿æ€§å…³ç³»</p>
                    <p style="color: var(--text-muted); margin-top: 10px;">æ£€éªŒæ–¹æ³•ï¼šæ•£ç‚¹å›¾ã€æ®‹å·®å›¾</p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #fbbf24;">I - Independenceï¼ˆç‹¬ç«‹æ€§ï¼‰</h4>
                    <p>è§‚æµ‹å€¼ç›¸äº’ç‹¬ç«‹ï¼Œæ®‹å·®æ— è‡ªç›¸å…³</p>
                    <p style="color: var(--text-muted); margin-top: 10px;">æ£€éªŒæ–¹æ³•ï¼šDurbin-Watsonæ£€éªŒ</p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #06b6d4;">N - Normalityï¼ˆæ­£æ€æ€§ï¼‰</h4>
                    <p>æ®‹å·®æœä»æ­£æ€åˆ†å¸ƒ</p>
                    <p style="color: var(--text-muted); margin-top: 10px;">æ£€éªŒæ–¹æ³•ï¼šQ-Qå›¾ã€Shapiro-Wilkæ£€éªŒ</p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #8b5cf6;">E - Equal varianceï¼ˆåŒæ–¹å·®æ€§ï¼‰</h4>
                    <p>æ®‹å·®çš„æ–¹å·®æ’å®š</p>
                    <p style="color: var(--text-muted); margin-top: 10px;">æ£€éªŒæ–¹æ³•ï¼šæ®‹å·®å›¾ã€Breusch-Paganæ£€éªŒ</p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <h4 style="color: #ef4444;">R - No multicollinearityï¼ˆæ— å¤šé‡å…±çº¿æ€§ï¼‰</h4>
                    <p>è‡ªå˜é‡ä¹‹é—´ä¸å­˜åœ¨å®Œå…¨ç›¸å…³</p>
                    <p style="color: var(--text-muted); margin-top: 10px;">æ£€éªŒæ–¹æ³•ï¼šVIFï¼ˆæ–¹å·®è†¨èƒ€å› å­ï¼‰</p>
                </div>
            </div>
        </div>

        <div class="theory-box">
            <h3>ğŸ’¡ å‡è®¾è¿èƒŒçš„åæœä¸å¯¹ç­–</h3>
            <table class="data-table">
                <thead>
                <tr>
                    <th>å‡è®¾è¿èƒŒ</th>
                    <th>åæœ</th>
                    <th>è§£å†³æ–¹æ¡ˆ</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>éçº¿æ€§</td>
                    <td>ç³»æ•°ä¼°è®¡æœ‰å</td>
                    <td>å˜é‡å˜æ¢ã€å¤šé¡¹å¼å›å½’</td>
                </tr>
                <tr>
                    <td>è‡ªç›¸å…³</td>
                    <td>æ ‡å‡†è¯¯ä½ä¼°</td>
                    <td>æ—¶é—´åºåˆ—æ¨¡å‹ã€GLS</td>
                </tr>
                <tr>
                    <td>éæ­£æ€</td>
                    <td>å‡è®¾æ£€éªŒå¤±æ•ˆ</td>
                    <td>å¤§æ ·æœ¬ã€ç¨³å¥æ ‡å‡†è¯¯</td>
                </tr>
                <tr>
                    <td>å¼‚æ–¹å·®</td>
                    <td>æ•ˆç‡æŸå¤±</td>
                    <td>åŠ æƒæœ€å°äºŒä¹˜ã€å˜æ¢</td>
                </tr>
                <tr>
                    <td>å¤šé‡å…±çº¿æ€§</td>
                    <td>ç³»æ•°ä¸ç¨³å®š</td>
                    <td>åˆ é™¤å˜é‡ã€å²­å›å½’</td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- 1.10 æ­£åˆ™åŒ– -->
    <div id="regularization" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ›¡ï¸ 1.10 æ­£åˆ™åŒ–ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆ</h2>

        <div class="thinking-box">
            <h3>è¿‡æ‹Ÿåˆé—®é¢˜</h3>
            <p>å½“æ¨¡å‹è¿‡äºå¤æ‚æ—¶ï¼Œä¼š<span class="highlight-warning">è¿‡åº¦æ‹Ÿåˆè®­ç»ƒæ•°æ®</span>ï¼Œå¯¼è‡´æ³›åŒ–èƒ½åŠ›å·®ã€‚</p>
            <p>æ­£åˆ™åŒ–é€šè¿‡<span class="highlight-primary">é™åˆ¶å‚æ•°å¤§å°</span>æ¥ç®€åŒ–æ¨¡å‹ã€‚</p>
        </div>

        <div class="formula-box">
            <h3 style="color: #8b5cf6;">ğŸ“ æ­£åˆ™åŒ–æ–¹æ³•</h3>
            <div style="display: grid; gap: 20px;">
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #22c55e; font-weight: bold;">Ridgeå›å½’ï¼ˆL2æ­£åˆ™åŒ–ï¼‰</p>
                    <div class="math-formula">
                        J(Î²) = MSE + Î»Î£Î²áµ¢Â²
                    </div>
                    <p style="margin-top: 10px; color: var(--text-muted);">
                        å‹ç¼©ç³»æ•°ä½†ä¸ä¼šå˜ä¸º0ï¼Œé€‚åˆæ‰€æœ‰ç‰¹å¾éƒ½æœ‰ç”¨çš„æƒ…å†µ
                    </p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #fbbf24; font-weight: bold;">Lassoå›å½’ï¼ˆL1æ­£åˆ™åŒ–ï¼‰</p>
                    <div class="math-formula">
                        J(Î²) = MSE + Î»Î£|Î²áµ¢|
                    </div>
                    <p style="margin-top: 10px; color: var(--text-muted);">
                        å¯ä»¥å°†ç³»æ•°å‹ç¼©åˆ°0ï¼Œå®ç°ç‰¹å¾é€‰æ‹©
                    </p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 20px; border-radius: 10px;">
                    <p style="color: #06b6d4; font-weight: bold;">å¼¹æ€§ç½‘ï¼ˆElastic Netï¼‰</p>
                    <div class="math-formula">
                        J(Î²) = MSE + Î»â‚Î£|Î²áµ¢| + Î»â‚‚Î£Î²áµ¢Â²
                    </div>
                    <p style="margin-top: 10px; color: var(--text-muted);">
                        ç»“åˆL1å’ŒL2çš„ä¼˜ç‚¹ï¼Œé€‚åˆé«˜ç»´æ•°æ®
                    </p>
                </div>
            </div>
        </div>

        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ›¡ï¸ æ­£åˆ™åŒ–æ•ˆæœæ¼”ç¤º</h3>
            <canvas id="regularizationCanvas" class="demo-canvas" width="800" height="400"></canvas>
            <div class="param-panel">
                <h4 style="color: #22c55e; margin-bottom: 15px;">è°ƒæ•´æ­£åˆ™åŒ–å‚æ•°</h4>
                <div>
                    <label>Î» (æ­£åˆ™åŒ–å¼ºåº¦): <span class="param-value" id="lambdaValue">0.1</span></label>
                    <input type="range" class="param-slider" id="lambdaSlider" min="0" max="2" step="0.1" value="0.1" oninput="updateRegularization()">
                </div>
            </div>
            <div class="demo-controls">
                <button class="demo-btn" onclick="showRegularization('none')">æ— æ­£åˆ™åŒ–</button>
                <button class="demo-btn" onclick="showRegularization('ridge')">Ridge</button>
                <button class="demo-btn" onclick="showRegularization('lasso')">Lasso</button>
            </div>
        </div>

        <div class="theory-box">
            <h3>ğŸ’¡ æ­£åˆ™åŒ–å‚æ•°Î»çš„é€‰æ‹©</h3>
            <ul>
                <li><strong>äº¤å‰éªŒè¯</strong>ï¼šæœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œé€šè¿‡kæŠ˜äº¤å‰éªŒè¯é€‰æ‹©æœ€ä¼˜Î»</li>
                <li><strong>ä¿¡æ¯å‡†åˆ™</strong>ï¼šä½¿ç”¨AICæˆ–BICé€‰æ‹©</li>
                <li><strong>ç»éªŒæ³•åˆ™</strong>ï¼šä»å°åˆ°å¤§å°è¯•ï¼Œè§‚å¯ŸéªŒè¯é›†æ€§èƒ½</li>
            </ul>
            <p style="margin-top: 20px;">
                Î»=0ï¼šæ— æ­£åˆ™åŒ–<br>
                Î»â†’âˆï¼šæ‰€æœ‰ç³»æ•°è¶‹äº0
            </p>
        </div>
    </div>

    <!-- 1.11 ä»£ç å®ç° -->
    <div id="implementation" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ’» 1.11 ä»£ç å®ç°ï¼šä»ç†è®ºåˆ°å®è·µ</h2>

        <!-- æ‰‹åŠ¨å®ç°çº¿æ€§å›å½’ -->
        <div class="code-block">
            <pre><code><span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="keyword">class</span> <span class="function">LinearRegression</span>:
    <span class="string">"""çº¿æ€§å›å½’çš„å®Œæ•´å®ç°"""</span>

    <span class="keyword">def</span> <span class="function">__init__</span>(self, method=<span class="string">'normal'</span>, learning_rate=<span class="number">0.01</span>,
                 n_iterations=<span class="number">1000</span>, regularization=<span class="keyword">None</span>, alpha=<span class="number">0.1</span>):
        self.method = method  <span class="comment"># 'normal' or 'gradient'</span>
        self.learning_rate = learning_rate
        self.n_iterations = n_iterations
        self.regularization = regularization  <span class="comment"># None, 'ridge', 'lasso'</span>
        self.alpha = alpha  <span class="comment"># æ­£åˆ™åŒ–å‚æ•°</span>
        self.coef_ = <span class="keyword">None</span>
        self.intercept_ = <span class="keyword">None</span>
        self.loss_history = []

    <span class="keyword">def</span> <span class="function">fit</span>(self, X, y):
        <span class="string">"""è®­ç»ƒæ¨¡å‹"""</span>
        <span class="comment"># æ·»åŠ æˆªè·é¡¹</span>
        X_b = np.c_[np.ones((X.shape[<span class="number">0</span>], <span class="number">1</span>)), X]

        <span class="keyword">if</span> self.method == <span class="string">'normal'</span>:
            self._normal_equation(X_b, y)
        <span class="keyword">else</span>:
            self._gradient_descent(X_b, y)

        <span class="comment"># åˆ†ç¦»æˆªè·å’Œç³»æ•°</span>
        self.intercept_ = self.theta[<span class="number">0</span>]
        self.coef_ = self.theta[<span class="number">1</span>:]

    <span class="keyword">def</span> <span class="function">_normal_equation</span>(self, X_b, y):
        <span class="string">"""æ­£è§„æ–¹ç¨‹æ±‚è§£"""</span>
        <span class="keyword">if</span> self.regularization == <span class="string">'ridge'</span>:
            <span class="comment"># Ridgeå›å½’çš„è§£æè§£</span>
            n_features = X_b.shape[<span class="number">1</span>]
            regularization_matrix = self.alpha * np.eye(n_features)
            regularization_matrix[<span class="number">0</span>, <span class="number">0</span>] = <span class="number">0</span>  <span class="comment"># ä¸æ­£åˆ™åŒ–æˆªè·</span>
            self.theta = np.linalg.inv(X_b.T @ X_b + regularization_matrix) @ X_b.T @ y
        <span class="keyword">else</span>:
            <span class="comment"># æ™®é€šæœ€å°äºŒä¹˜</span>
            self.theta = np.linalg.inv(X_b.T @ X_b) @ X_b.T @ y

    <span class="keyword">def</span> <span class="function">_gradient_descent</span>(self, X_b, y):
        <span class="string">"""æ¢¯åº¦ä¸‹é™æ±‚è§£"""</span>
        n_samples = X_b.shape[<span class="number">0</span>]
        self.theta = np.random.randn(X_b.shape[<span class="number">1</span>])

        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(self.n_iterations):
            <span class="comment"># é¢„æµ‹å€¼</span>
            y_pred = X_b @ self.theta

            <span class="comment"># è®¡ç®—æ¢¯åº¦</span>
            gradient = (<span class="number">1</span>/n_samples) * X_b.T @ (y_pred - y)

            <span class="comment"># æ·»åŠ æ­£åˆ™åŒ–é¡¹</span>
            <span class="keyword">if</span> self.regularization == <span class="string">'ridge'</span>:
                gradient[<span class="number">1</span>:] += (self.alpha/n_samples) * self.theta[<span class="number">1</span>:]
            <span class="keyword">elif</span> self.regularization == <span class="string">'lasso'</span>:
                gradient[<span class="number">1</span>:] += (self.alpha/n_samples) * np.sign(self.theta[<span class="number">1</span>:])

            <span class="comment"># æ›´æ–°å‚æ•°</span>
            self.theta -= self.learning_rate * gradient

            <span class="comment"># è®°å½•æŸå¤±</span>
            loss = self._compute_loss(X_b, y, y_pred)
            self.loss_history.append(loss)

    <span class="keyword">def</span> <span class="function">_compute_loss</span>(self, X_b, y, y_pred):
        <span class="string">"""è®¡ç®—æŸå¤±å‡½æ•°"""</span>
        n_samples = X_b.shape[<span class="number">0</span>]
        mse = (<span class="number">1</span>/(<span class="number">2</span>*n_samples)) * np.sum((y - y_pred)**<span class="number">2</span>)

        <span class="keyword">if</span> self.regularization == <span class="string">'ridge'</span>:
            mse += (self.alpha/(<span class="number">2</span>*n_samples)) * np.sum(self.theta[<span class="number">1</span>:]**<span class="number">2</span>)
        <span class="keyword">elif</span> self.regularization == <span class="string">'lasso'</span>:
            mse += (self.alpha/(<span class="number">2</span>*n_samples)) * np.sum(np.abs(self.theta[<span class="number">1</span>:]))

        <span class="keyword">return</span> mse

    <span class="keyword">def</span> <span class="function">predict</span>(self, X):
        <span class="string">"""é¢„æµ‹"""</span>
        X_b = np.c_[np.ones((X.shape[<span class="number">0</span>], <span class="number">1</span>)), X]
        <span class="keyword">return</span> X_b @ self.theta

    <span class="keyword">def</span> <span class="function">score</span>(self, X, y):
        <span class="string">"""è®¡ç®—RÂ²"""</span>
        y_pred = self.predict(X)
        ss_tot = np.sum((y - np.mean(y))**<span class="number">2</span>)
        ss_res = np.sum((y - y_pred)**<span class="number">2</span>)
        <span class="keyword">return</span> <span class="number">1</span> - (ss_res / ss_tot)</code></pre>
        </div>

        <!-- ä½¿ç”¨sklearn -->
        <div class="code-block">
            <pre><code><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression, Ridge, Lasso, ElasticNet
<span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler, PolynomialFeatures
<span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, cross_val_score, GridSearchCV
<span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error, r2_score
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt

<span class="comment"># 1. æ•°æ®å‡†å¤‡</span>
X, y = load_data()  <span class="comment"># å‡è®¾æœ‰æ•°æ®åŠ è½½å‡½æ•°</span>
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">42</span>)

<span class="comment"># 2. æ•°æ®æ ‡å‡†åŒ–ï¼ˆé‡è¦ï¼ï¼‰</span>
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

<span class="comment"># 3. æ™®é€šçº¿æ€§å›å½’</span>
lr = LinearRegression()
lr.fit(X_train_scaled, y_train)
y_pred_lr = lr.predict(X_test_scaled)
<span class="function">print</span>(<span class="string">f"Linear Regression RÂ²: {r2_score(y_test, y_pred_lr):.4f}"</span>)

<span class="comment"># 4. Ridgeå›å½’ï¼ˆå¸¦äº¤å‰éªŒè¯é€‰æ‹©æœ€ä¼˜Î»ï¼‰</span>
ridge_params = {<span class="string">'alpha'</span>: np.logspace(<span class="number">-4</span>, <span class="number">2</span>, <span class="number">20</span>)}
ridge_cv = GridSearchCV(Ridge(), ridge_params, cv=<span class="number">5</span>, scoring=<span class="string">'r2'</span>)
ridge_cv.fit(X_train_scaled, y_train)
<span class="function">print</span>(<span class="string">f"Best Ridge alpha: {ridge_cv.best_params_['alpha']:.4f}"</span>)
<span class="function">print</span>(<span class="string">f"Ridge RÂ²: {ridge_cv.score(X_test_scaled, y_test):.4f}"</span>)

<span class="comment"># 5. Lassoå›å½’ï¼ˆç‰¹å¾é€‰æ‹©ï¼‰</span>
lasso_params = {<span class="string">'alpha'</span>: np.logspace(<span class="number">-4</span>, <span class="number">1</span>, <span class="number">20</span>)}
lasso_cv = GridSearchCV(Lasso(max_iter=<span class="number">1000</span>), lasso_params, cv=<span class="number">5</span>, scoring=<span class="string">'r2'</span>)
lasso_cv.fit(X_train_scaled, y_train)
<span class="function">print</span>(<span class="string">f"Best Lasso alpha: {lasso_cv.best_params_['alpha']:.4f}"</span>)
<span class="function">print</span>(<span class="string">f"Lasso RÂ²: {lasso_cv.score(X_test_scaled, y_test):.4f}"</span>)

<span class="comment"># æŸ¥çœ‹Lassoé€‰æ‹©çš„ç‰¹å¾</span>
selected_features = np.where(lasso_cv.best_estimator_.coef_ != <span class="number">0</span>)[<span class="number">0</span>]
<span class="function">print</span>(<span class="string">f"Selected features by Lasso: {selected_features}"</span>)

<span class="comment"># 6. å¼¹æ€§ç½‘</span>
elastic_params = {
    <span class="string">'alpha'</span>: np.logspace(<span class="number">-4</span>, <span class="number">1</span>, <span class="number">10</span>),
    <span class="string">'l1_ratio'</span>: [<span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">0.7</span>, <span class="number">0.9</span>]
}
elastic_cv = GridSearchCV(ElasticNet(max_iter=<span class="number">1000</span>), elastic_params, cv=<span class="number">5</span>, scoring=<span class="string">'r2'</span>)
elastic_cv.fit(X_train_scaled, y_train)
<span class="function">print</span>(<span class="string">f"Best Elastic Net params: {elastic_cv.best_params_}"</span>)
<span class="function">print</span>(<span class="string">f"Elastic Net RÂ²: {elastic_cv.score(X_test_scaled, y_test):.4f}"</span>)

<span class="comment"># 7. å¤šé¡¹å¼å›å½’ï¼ˆå¤„ç†éçº¿æ€§å…³ç³»ï¼‰</span>
poly = PolynomialFeatures(degree=<span class="number">2</span>, include_bias=<span class="keyword">False</span>)
X_train_poly = poly.fit_transform(X_train_scaled)
X_test_poly = poly.transform(X_test_scaled)

poly_lr = LinearRegression()
poly_lr.fit(X_train_poly, y_train)
y_pred_poly = poly_lr.predict(X_test_poly)
<span class="function">print</span>(<span class="string">f"Polynomial Regression RÂ²: {r2_score(y_test, y_pred_poly):.4f}"</span>)

<span class="comment"># 8. æ¨¡å‹æ¯”è¾ƒå¯è§†åŒ–</span>
models = {
    <span class="string">'Linear'</span>: lr.predict(X_test_scaled),
    <span class="string">'Ridge'</span>: ridge_cv.predict(X_test_scaled),
    <span class="string">'Lasso'</span>: lasso_cv.predict(X_test_scaled),
    <span class="string">'ElasticNet'</span>: elastic_cv.predict(X_test_scaled),
    <span class="string">'Polynomial'</span>: y_pred_poly
}

plt.figure(figsize=(<span class="number">12</span>, <span class="number">8</span>))
<span class="keyword">for</span> i, (name, y_pred) <span class="keyword">in</span> <span class="function">enumerate</span>(models.items()):
    plt.subplot(<span class="number">2</span>, <span class="number">3</span>, i+<span class="number">1</span>)
    plt.scatter(y_test, y_pred, alpha=<span class="number">0.5</span>)
    plt.plot([y_test.min(), y_test.max()], [y_test.min(), y_test.max()], <span class="string">'r--'</span>)
    plt.xlabel(<span class="string">'True Values'</span>)
    plt.ylabel(<span class="string">'Predictions'</span>)
    plt.title(<span class="string">f'{name} (RÂ²: {r2_score(y_test, y_pred):.3f})'</span>)
plt.tight_layout()
plt.show()</code></pre>
        </div>
    </div>

    <!-- 1.12 å®æˆ˜æ¡ˆä¾‹ -->
    <div id="practice" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ¯ 1.12 å®æˆ˜æ¡ˆä¾‹ï¼šå¤šæ¸ é“å¹¿å‘ŠæŠ•æ”¾ä¼˜åŒ–</h2>

        <div class="story-box">
            <h3 style="color: #fbbf24;">ğŸ¯ çœŸå®çš„å•†ä¸šæŒ‘æˆ˜</h3>
            <p>ä¸€å®¶å…¬å¸åœ¨<span class="highlight-warning">ç”µè§†ã€å¹¿æ’­ã€æŠ¥çº¸</span>ä¸‰ä¸ªæ¸ é“æŠ•æ”¾å¹¿å‘Šã€‚</p>
            <p>å¦‚ä½•åˆ†é…é¢„ç®—æ‰èƒ½<span class="highlight-primary">æœ€å¤§åŒ–é”€å”®é¢</span>ï¼Ÿ</p>
        </div>

        <!-- æ•°æ®é›†è¯´æ˜ -->
        <div class="thinking-box">
            <h3>ğŸ“Š Advertisingæ•°æ®é›†</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                <div style="background: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #ef4444; font-weight: bold;">ğŸ“º TV</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">ç”µè§†å¹¿å‘ŠæŠ•å…¥ï¼ˆåƒå…ƒï¼‰</div>
                </div>
                <div style="background: rgba(251, 191, 36, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #fbbf24; font-weight: bold;">ğŸ“» Radio</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">å¹¿æ’­å¹¿å‘ŠæŠ•å…¥ï¼ˆåƒå…ƒï¼‰</div>
                </div>
                <div style="background: rgba(34, 197, 94, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #22c55e; font-weight: bold;">ğŸ“° Newspaper</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">æŠ¥çº¸å¹¿å‘ŠæŠ•å…¥ï¼ˆåƒå…ƒï¼‰</div>
                </div>
                <div style="background: rgba(139, 92, 246, 0.1); padding: 15px; border-radius: 10px;">
                    <div style="color: #8b5cf6; font-weight: bold;">ğŸ’° Sales</div>
                    <div style="color: var(--text-secondary); font-size: 0.9rem;">é”€å”®é¢ï¼ˆç™¾ä¸‡å…ƒï¼‰</div>
                </div>
            </div>
        </div>

        <!-- å®Œæ•´æ¡ˆä¾‹ä»£ç  -->
        <div class="code-block">
            <pre><code><span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt
<span class="keyword">import</span> seaborn <span class="keyword">as</span> sns
<span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split, cross_val_score
<span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression, Ridge, Lasso
<span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler
<span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error, r2_score
<span class="keyword">import</span> statsmodels.api <span class="keyword">as</span> sm
<span class="keyword">from</span> statsmodels.stats.outliers_influence <span class="keyword">import</span> variance_inflation_factor

<span class="comment"># 1. æ•°æ®åŠ è½½ä¸æ¢ç´¢</span>
advertising = pd.read_csv(<span class="string">'advertising.csv'</span>)
<span class="function">print</span>(<span class="string">"æ•°æ®é›†å½¢çŠ¶:"</span>, advertising.shape)
<span class="function">print</span>(<span class="string">"\næ•°æ®æ¦‚è§ˆ:"</span>)
<span class="function">print</span>(advertising.head())
<span class="function">print</span>(<span class="string">"\nåŸºæœ¬ç»Ÿè®¡ä¿¡æ¯:"</span>)
<span class="function">print</span>(advertising.describe())

<span class="comment"># 2. æ•°æ®å¯è§†åŒ–æ¢ç´¢</span>
fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, figsize=(<span class="number">12</span>, <span class="number">10</span>))

<span class="comment"># é”€å”®é¢åˆ†å¸ƒ</span>
axes[<span class="number">0</span>, <span class="number">0</span>].hist(advertising[<span class="string">'Sales'</span>], bins=<span class="number">20</span>, edgecolor=<span class="string">'black'</span>)
axes[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">'é”€å”®é¢åˆ†å¸ƒ'</span>)
axes[<span class="number">0</span>, <span class="number">0</span>].set_xlabel(<span class="string">'é”€å”®é¢ï¼ˆç™¾ä¸‡å…ƒï¼‰'</span>)

<span class="comment"># ç›¸å…³æ€§çƒ­å›¾</span>
correlation_matrix = advertising.corr()
sns.heatmap(correlation_matrix, annot=<span class="keyword">True</span>, cmap=<span class="string">'coolwarm'</span>, ax=axes[<span class="number">0</span>, <span class="number">1</span>])
axes[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">'å˜é‡ç›¸å…³æ€§çŸ©é˜µ'</span>)

<span class="comment"># æ•£ç‚¹å›¾çŸ©é˜µ</span>
features = [<span class="string">'TV'</span>, <span class="string">'Radio'</span>, <span class="string">'Newspaper'</span>]
<span class="keyword">for</span> i, feature <span class="keyword">in</span> <span class="function">enumerate</span>(features):
    <span class="keyword">if</span> i < <span class="number">2</span>:
        axes[<span class="number">1</span>, i].scatter(advertising[feature], advertising[<span class="string">'Sales'</span>], alpha=<span class="number">0.5</span>)
        axes[<span class="number">1</span>, i].set_xlabel(feature)
        axes[<span class="number">1</span>, i].set_ylabel(<span class="string">'Sales'</span>)
        axes[<span class="number">1</span>, i].set_title(<span class="string">f'{feature} vs Sales'</span>)

plt.tight_layout()
plt.show()

<span class="comment"># 3. å¤šé‡å…±çº¿æ€§æ£€æŸ¥</span>
X = advertising[features]
vif_data = pd.DataFrame()
vif_data[<span class="string">"feature"</span>] = features
vif_data[<span class="string">"VIF"</span>] = [variance_inflation_factor(X.values, i)
                    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="function">len</span>(features))]
<span class="function">print</span>(<span class="string">"\næ–¹å·®è†¨èƒ€å› å­ï¼ˆVIFï¼‰ï¼š"</span>)
<span class="function">print</span>(vif_data)

<span class="comment"># 4. æ•°æ®å‡†å¤‡</span>
X = advertising[features]
y = advertising[<span class="string">'Sales'</span>]
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">42</span>)

<span class="comment"># æ ‡å‡†åŒ–</span>
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

<span class="comment"># 5. å¤šå…ƒçº¿æ€§å›å½’</span>
model = LinearRegression()
model.fit(X_train_scaled, y_train)

<span class="comment"># é¢„æµ‹</span>
y_pred_train = model.predict(X_train_scaled)
y_pred_test = model.predict(X_test_scaled)

<span class="comment"># 6. æ¨¡å‹è¯„ä¼°</span>
<span class="function">print</span>(<span class="string">"\næ¨¡å‹æ€§èƒ½è¯„ä¼°ï¼š"</span>)
<span class="function">print</span>(<span class="string">f"è®­ç»ƒé›† RÂ²: {r2_score(y_train, y_pred_train):.4f}"</span>)
<span class="function">print</span>(<span class="string">f"æµ‹è¯•é›† RÂ²: {r2_score(y_test, y_pred_test):.4f}"</span>)
<span class="function">print</span>(<span class="string">f"è®­ç»ƒé›† RMSE: {np.sqrt(mean_squared_error(y_train, y_pred_train)):.4f}"</span>)
<span class="function">print</span>(<span class="string">f"æµ‹è¯•é›† RMSE: {np.sqrt(mean_squared_error(y_test, y_pred_test)):.4f}"</span>)

<span class="comment"># 7. è¯¦ç»†ç»Ÿè®¡åˆ†æï¼ˆä½¿ç”¨statsmodelsï¼‰</span>
X_train_sm = sm.add_constant(X_train_scaled)
model_sm = sm.OLS(y_train, X_train_sm).fit()
<span class="function">print</span>(<span class="string">"\nè¯¦ç»†ç»Ÿè®¡æ‘˜è¦ï¼š"</span>)
<span class="function">print</span>(model_sm.summary())

<span class="comment"># 8. æ®‹å·®åˆ†æ</span>
residuals = y_test - y_pred_test

fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, figsize=(<span class="number">12</span>, <span class="number">10</span>))

<span class="comment"># æ®‹å·®vsé¢„æµ‹å€¼</span>
axes[<span class="number">0</span>, <span class="number">0</span>].scatter(y_pred_test, residuals, alpha=<span class="number">0.5</span>)
axes[<span class="number">0</span>, <span class="number">0</span>].axhline(y=<span class="number">0</span>, color=<span class="string">'r'</span>, linestyle=<span class="string">'--'</span>)
axes[<span class="number">0</span>, <span class="number">0</span>].set_xlabel(<span class="string">'é¢„æµ‹å€¼'</span>)
axes[<span class="number">0</span>, <span class="number">0</span>].set_ylabel(<span class="string">'æ®‹å·®'</span>)
axes[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">'æ®‹å·®å›¾'</span>)

<span class="comment"># Q-Qå›¾</span>
sm.qqplot(residuals, line=<span class="string">'45'</span>, ax=axes[<span class="number">0</span>, <span class="number">1</span>])
axes[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">'Q-Qå›¾'</span>)

<span class="comment"># æ®‹å·®ç›´æ–¹å›¾</span>
axes[<span class="number">1</span>, <span class="number">0</span>].hist(residuals, bins=<span class="number">20</span>, edgecolor=<span class="string">'black'</span>)
axes[<span class="number">1</span>, <span class="number">0</span>].set_xlabel(<span class="string">'æ®‹å·®'</span>)
axes[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">'æ®‹å·®åˆ†å¸ƒ'</span>)

<span class="comment"># å®é™…vsé¢„æµ‹</span>
axes[<span class="number">1</span>, <span class="number">1</span>].scatter(y_test, y_pred_test, alpha=<span class="number">0.5</span>)
axes[<span class="number">1</span>, <span class="number">1</span>].plot([y_test.min(), y_test.max()], [y_test.min(), y_test.max()], <span class="string">'r--'</span>)
axes[<span class="number">1</span>, <span class="number">1</span>].set_xlabel(<span class="string">'å®é™…é”€å”®é¢'</span>)
axes[<span class="number">1</span>, <span class="number">1</span>].set_ylabel(<span class="string">'é¢„æµ‹é”€å”®é¢'</span>)
axes[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">'å®é™… vs é¢„æµ‹'</span>)

plt.tight_layout()
plt.show()

<span class="comment"># 9. ç‰¹å¾é‡è¦æ€§åˆ†æ</span>
feature_importance = pd.DataFrame({
    <span class="string">'ç‰¹å¾'</span>: features,
    <span class="string">'ç³»æ•°'</span>: model.coef_,
    <span class="string">'ç»å¯¹å€¼ç³»æ•°'</span>: np.abs(model.coef_)
}).sort_values(<span class="string">'ç»å¯¹å€¼ç³»æ•°'</span>, ascending=<span class="keyword">False</span>)

<span class="function">print</span>(<span class="string">"\nç‰¹å¾é‡è¦æ€§ï¼ˆæ ‡å‡†åŒ–åï¼‰ï¼š"</span>)
<span class="function">print</span>(feature_importance)

<span class="comment"># 10. é¢„ç®—ä¼˜åŒ–å»ºè®®</span>
<span class="function">print</span>(<span class="string">"\nğŸ’¡ é¢„ç®—ä¼˜åŒ–å»ºè®®ï¼š"</span>)
<span class="function">print</span>(<span class="string">f"1. TVå¹¿å‘Šç³»æ•°: {model.coef_[0]:.3f} - å½±å“åŠ›è¾ƒå¤§"</span>)
<span class="function">print</span>(<span class="string">f"2. Radioå¹¿å‘Šç³»æ•°: {model.coef_[1]:.3f} - å½±å“åŠ›æœ€å¤§"</span>)
<span class="function">print</span>(<span class="string">f"3. Newspaperå¹¿å‘Šç³»æ•°: {model.coef_[2]:.3f} - å½±å“åŠ›è¾ƒå°"</span>)
<span class="function">print</span>(<span class="string">"\nå»ºè®®ï¼šä¼˜å…ˆæŠ•èµ„Radioå¹¿å‘Šï¼Œå…¶æ¬¡æ˜¯TVå¹¿å‘Šï¼Œé€‚å½“å‡å°‘Newspaperå¹¿å‘ŠæŠ•å…¥"</span>)

<span class="comment"># 11. é¢„æµ‹å‡½æ•°</span>
<span class="keyword">def</span> <span class="function">predict_sales</span>(tv, radio, newspaper):
    <span class="string">"""é¢„æµ‹ç»™å®šå¹¿å‘ŠæŠ•å…¥çš„é”€å”®é¢"""</span>
    input_data = np.array([[tv, radio, newspaper]])
    input_scaled = scaler.transform(input_data)
    prediction = model.predict(input_scaled)[<span class="number">0</span>]
    <span class="keyword">return</span> prediction

<span class="comment"># ç¤ºä¾‹é¢„æµ‹</span>
<span class="function">print</span>(<span class="string">"\né¢„æµ‹ç¤ºä¾‹ï¼š"</span>)
<span class="function">print</span>(<span class="string">f"TV=200, Radio=40, Newspaper=50 -> é¢„æµ‹é”€å”®é¢: {predict_sales(200, 40, 50):.2f}ç™¾ä¸‡å…ƒ"</span>)</code></pre>
        </div>

        <!-- ç»“æœåˆ†æ -->
        <div class="result-card">
            <h4 style="color: #22c55e; margin-bottom: 15px;">ğŸ“Š åˆ†æç»“æœ</h4>
            <div style="display: grid; gap: 15px;">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; text-align: center;">
                    <div>
                        <div style="color: #fbbf24; font-size: 2rem; font-weight: bold;">0.287</div>
                        <div style="color: var(--text-secondary);">TVç³»æ•°</div>
                    </div>
                    <div>
                        <div style="color: #22c55e; font-size: 2rem; font-weight: bold;">0.188</div>
                        <div style="color: var(--text-secondary);">Radioç³»æ•°</div>
                    </div>
                    <div>
                        <div style="color: #64748b; font-size: 2rem; font-weight: bold;">-0.001</div>
                        <div style="color: var(--text-secondary);">Newspaperç³»æ•°</div>
                    </div>
                </div>
                <div style="background: rgba(251, 191, 36, 0.1); padding: 20px; border-radius: 10px;">
                    <p style="color: #fbbf24; font-weight: bold;">ğŸ’¡ å…³é”®æ´å¯Ÿ</p>
                    <ul style="color: var(--text-secondary); margin-top: 10px;">
                        <li><strong>TVå’ŒRadio</strong>çš„ç»„åˆæ•ˆæœæœ€å¥½ï¼ˆå­˜åœ¨äº¤äº’ä½œç”¨ï¼‰</li>
                        <li><strong>Newspaper</strong>çš„æ•ˆæœå‡ ä¹å¯ä»¥å¿½ç•¥ï¼ˆpå€¼>0.05ï¼‰</li>
                        <li>æ¨¡å‹RÂ²=0.897ï¼Œè§£é‡Šäº†89.7%çš„é”€å”®å˜åŒ–</li>
                        <li>å»ºè®®é‡æ–°åˆ†é…Newspaperé¢„ç®—åˆ°TVå’ŒRadio</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- äº¤äº’å¼é¢„æµ‹å·¥å…· -->
        <div class="demo-container">
            <h3 style="color: #22c55e; text-align: center; margin-bottom: 20px;">ğŸ¯ å¹¿å‘Šé¢„ç®—ä¼˜åŒ–å·¥å…·</h3>
            <div class="param-panel">
                <h4 style="color: #22c55e; margin-bottom: 15px;">è°ƒæ•´å¹¿å‘Šé¢„ç®—ï¼Œé¢„æµ‹é”€å”®é¢</h4>
                <div>
                    <label>ğŸ“º TVå¹¿å‘Š: <span class="param-value" id="tvBudget">150</span>åƒå…ƒ</label>
                    <input type="range" class="param-slider" id="tvSlider" min="0" max="300" step="10" value="150" oninput="updatePrediction()">
                </div>
                <div>
                    <label>ğŸ“» Radioå¹¿å‘Š: <span class="param-value" id="radioBudget">30</span>åƒå…ƒ</label>
                    <input type="range" class="param-slider" id="radioSlider" min="0" max="50" step="1" value="30" oninput="updatePrediction()">
                </div>
                <div>
                    <label>ğŸ“° Newspaperå¹¿å‘Š: <span class="param-value" id="newspaperBudget">20</span>åƒå…ƒ</label>
                    <input type="range" class="param-slider" id="newspaperSlider" min="0" max="100" step="5" value="20" oninput="updatePrediction()">
                </div>
            </div>
            <div class="result-card" style="text-align: center; margin-top: 20px;">
                <h4 style="color: #22c55e;">é¢„æµ‹é”€å”®é¢</h4>
                <div style="font-size: 3rem; color: #fbbf24; font-weight: bold;" id="predictedSales">15.2</div>
                <div style="color: var(--text-secondary);">ç™¾ä¸‡å…ƒ</div>
                <div style="margin-top: 20px; color: var(--text-muted);">
                    æ€»é¢„ç®—ï¼š<span id="totalBudget">200</span>åƒå…ƒ | ROIï¼š<span id="roi">7.6</span>å€
                </div>
            </div>
        </div>
    </div>

    <!-- 1.13 æ€»ç»“ä¸å±•æœ› -->
    <div id="summary" class="section-card fade-in section-anchor">
        <h2 class="section-title">ğŸ“š 1.13 æ€»ç»“ä¸å±•æœ›</h2>

        <div class="thinking-box">
            <h3>å›é¡¾ï¼šä»å›°æƒ‘åˆ°æ´å¯Ÿ</h3>
            <div style="margin-top: 20px;">
                <p>1ï¸âƒ£ <span class="highlight-primary">å‘ç°è§„å¾‹</span>ï¼šä»æ•£ç‚¹å›¾ä¸­çœ‹åˆ°çº¿æ€§å…³ç³»</p>
                <p>2ï¸âƒ£ <span class="highlight-success">æ•°å­¦å»ºæ¨¡</span>ï¼šç”¨ç›´çº¿æ–¹ç¨‹æè¿°å…³ç³»</p>
                <p>3ï¸âƒ£ <span class="highlight-warning">å®šä¹‰ç›®æ ‡</span>ï¼šæœ€å°åŒ–é¢„æµ‹è¯¯å·®ï¼ˆMSEï¼‰</p>
                <p>4ï¸âƒ£ <span class="highlight-danger">æ±‚è§£æ–¹æ³•</span>ï¼šæ­£è§„æ–¹ç¨‹å’Œæ¢¯åº¦ä¸‹é™</p>
                <p>5ï¸âƒ£ <span class="highlight-primary">çŸ©é˜µæ¨å¯¼</span>ï¼šå¤šå…ƒçº¿æ€§å›å½’çš„ä¼˜é›…è§£æ³•</p>
                <p>6ï¸âƒ£ <span class="highlight-success">æ¨¡å‹è¯Šæ–­</span>ï¼šæ£€éªŒå‡è®¾ï¼Œè¯„ä¼°æ€§èƒ½</p>
                <p>7ï¸âƒ£ <span class="highlight-warning">æ­£åˆ™åŒ–</span>ï¼šé˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜æ³›åŒ–</p>
                <p>8ï¸âƒ£ <span class="highlight-danger">å®é™…åº”ç”¨</span>ï¼šé¢„æµ‹ã€ä¼˜åŒ–ã€å†³ç­–</p>
            </div>
        </div>

        <!-- æ ¸å¿ƒçŸ¥è¯†ç‚¹æ€»ç»“ -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 30px 0;">
            <div class="pulse" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.1)); padding: 25px; border-radius: 15px; border: 2px solid rgba(34, 197, 94, 0.4); text-align: center;">
                <h4 style="color: #22c55e; margin-bottom: 15px;">ğŸ“Š æ•°æ®æ´å¯Ÿ</h4>
                <p>çº¿æ€§å…³ç³»æ— å¤„ä¸åœ¨<br>ç›¸å…³æ€§â‰ å› æœæ€§<br>ç‰¹å¾å·¥ç¨‹å¾ˆé‡è¦</p>
            </div>
            <div class="pulse" style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.1)); padding: 25px; border-radius: 15px; border: 2px solid rgba(251, 191, 36, 0.4); text-align: center; animation-delay: 0.3s;">
                <h4 style="color: #fbbf24; margin-bottom: 15px;">ğŸ¯ ä¼˜åŒ–æ–¹æ³•</h4>
                <p>æ­£è§„æ–¹ç¨‹å¿«é€Ÿç²¾ç¡®<br>æ¢¯åº¦ä¸‹é™çµæ´»é€šç”¨<br>æ­£åˆ™åŒ–é˜²æ­¢è¿‡æ‹Ÿåˆ</p>
            </div>
            <div class="pulse" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(124, 58, 237, 0.1)); padding: 25px; border-radius: 15px; border: 2px solid rgba(139, 92, 246, 0.4); text-align: center; animation-delay: 0.6s;">
                <h4 style="color: #8b5cf6; margin-bottom: 15px;">ğŸ”¬ æ¨¡å‹è¯Šæ–­</h4>
                <p>æ£€éªŒåŸºæœ¬å‡è®¾<br>æ®‹å·®åˆ†ææ˜¯å…³é”®<br>å¤šè§’åº¦è¯„ä¼°æ€§èƒ½</p>
            </div>
        </div>

        <!-- é‡è¦å…¬å¼æ±‡æ€» -->
        <div class="formula-box">
            <h3 style="color: #22c55e; margin-bottom: 20px;">ğŸ“ é‡è¦å…¬å¼æ±‡æ€»</h3>
            <div style="display: grid; gap: 15px;">
                <div style="background: rgba(15, 23, 42, 0.8); padding: 15px; border-radius: 10px;">
                    <p><strong>çº¿æ€§å›å½’æ¨¡å‹ï¼š</strong> y = Î²â‚€ + Î²â‚xâ‚ + ... + Î²â‚šxâ‚š + Îµ</p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 15px; border-radius: 10px;">
                    <p><strong>æ­£è§„æ–¹ç¨‹ï¼š</strong> Î²Ì‚ = (Xáµ€X)â»Â¹Xáµ€y</p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 15px; border-radius: 10px;">
                    <p><strong>æ¢¯åº¦ä¸‹é™ï¼š</strong> Î² = Î² - Î±âˆ‡J(Î²)</p>
                </div>
                <div style="background: rgba(15, 23, 42, 0.8); padding: 15px; border-radius: 10px;">
                    <p><strong>å†³å®šç³»æ•°ï¼š</strong> RÂ² = 1 - SSR/SST</p>
                </div>
            </div>
        </div>

        <!-- æ·±åº¦æ€è€ƒé¢˜ -->
        <div style="background: rgba(239, 68, 68, 0.1); padding: 30px; border-radius: 20px; margin: 30px 0; border: 2px solid rgba(239, 68, 68, 0.3);">
            <h3 style="color: #ef4444; margin-bottom: 20px;">ğŸ¤” æ·±åº¦æ€è€ƒé¢˜</h3>
            <ol style="line-height: 2; padding-left: 20px;">
                <li><strong>çº¿æ€§å‡è®¾</strong>ï¼šç°å®ä¸–ç•ŒçœŸçš„éƒ½æ˜¯çº¿æ€§çš„å—ï¼Ÿå¦‚ä½•å¤„ç†éçº¿æ€§å…³ç³»ï¼Ÿ</li>
                <li><strong>é«˜ç»´è¯…å’’</strong>ï¼šå½“ç‰¹å¾æ•°pæ¥è¿‘æˆ–è¶…è¿‡æ ·æœ¬æ•°næ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
                <li><strong>å› æœæ¨æ–­</strong>ï¼šçº¿æ€§å›å½’èƒ½å‘Šè¯‰æˆ‘ä»¬å› æœå…³ç³»å—ï¼Ÿéœ€è¦ä»€ä¹ˆé¢å¤–æ¡ä»¶ï¼Ÿ</li>
                <li><strong>ç¨³å¥æ€§</strong>ï¼šå¼‚å¸¸å€¼å¯¹çº¿æ€§å›å½’çš„å½±å“æœ‰å¤šå¤§ï¼Ÿå¦‚ä½•æé«˜ç¨³å¥æ€§ï¼Ÿ</li>
                <li><strong>æ—¶é—´åºåˆ—</strong>ï¼šå¦‚æœæ•°æ®æœ‰æ—¶é—´ä¾èµ–æ€§ï¼Œæ™®é€šçº¿æ€§å›å½’è¿˜é€‚ç”¨å—ï¼Ÿ</li>
                <li><strong>è´å¶æ–¯è§†è§’</strong>ï¼šä»è´å¶æ–¯è§’åº¦çœ‹ï¼Œçº¿æ€§å›å½’åœ¨åšä»€ä¹ˆå‡è®¾ï¼Ÿ</li>
            </ol>
        </div>

        <!-- å®è·µå»ºè®® -->
        <div class="theory-box">
            <h3>ğŸ’¼ å®è·µå»ºè®®</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div>
                    <h4 style="color: #22c55e;">âœ… æœ€ä½³å®è·µ</h4>
                    <ul>
                        <li>å§‹ç»ˆè¿›è¡Œæ•°æ®æ¢ç´¢å’Œå¯è§†åŒ–</li>
                        <li>æ£€æŸ¥å¹¶å¤„ç†ç¼ºå¤±å€¼å’Œå¼‚å¸¸å€¼</li>
                        <li>ç‰¹å¾æ ‡å‡†åŒ–å¾ˆé‡è¦</li>
                        <li>ä½¿ç”¨äº¤å‰éªŒè¯é€‰æ‹©æ¨¡å‹</li>
                        <li>è¯Šæ–­æ¨¡å‹å‡è®¾æ˜¯å¦æ»¡è¶³</li>
                        <li>è€ƒè™‘ç‰¹å¾ä¹‹é—´çš„äº¤äº’ä½œç”¨</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #ef4444;">âŒ å¸¸è§é™·é˜±</h4>
                    <ul>
                        <li>å¿½è§†å¤šé‡å…±çº¿æ€§é—®é¢˜</li>
                        <li>è¿‡åº¦è§£é‡Šä½RÂ²çš„æ¨¡å‹</li>
                        <li>å¤–æ¨åˆ°æ•°æ®èŒƒå›´ä¹‹å¤–</li>
                        <li>å¿½ç•¥æ®‹å·®çš„æ¨¡å¼</li>
                        <li>è¿‡åº¦ä¾èµ–på€¼</li>
                        <li>æ··æ·†ç›¸å…³æ€§å’Œå› æœæ€§</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- ä¸‹ä¸€æ­¥å­¦ä¹ å»ºè®® -->
        <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.05)); padding: 30px; border-radius: 20px; border: 2px solid rgba(34, 197, 94, 0.3);">
            <h3 style="color: #22c55e; margin-bottom: 20px;">ğŸ“š å»¶ä¼¸å­¦ä¹ è·¯å¾„</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4 style="color: #fbbf24;">ç†è®ºæ·±åŒ–</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li>ğŸ“– å¹¿ä¹‰çº¿æ€§æ¨¡å‹ï¼ˆGLMï¼‰</li>
                        <li>ğŸ§® è´å¶æ–¯çº¿æ€§å›å½’</li>
                        <li>ğŸ”¬ æ··åˆæ•ˆåº”æ¨¡å‹</li>
                        <li>ğŸ“Š æ—¶é—´åºåˆ—å›å½’</li>
                        <li>ğŸ¯ å› æœæ¨æ–­æ–¹æ³•</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #8b5cf6;">å®è·µé¡¹ç›®</h4>
                    <ul style="list-style: none; padding: 0;">
                        <li>ğŸ  æˆ¿ä»·é¢„æµ‹ï¼ˆKaggleï¼‰</li>
                        <li>ğŸ“ˆ è‚¡ç¥¨æ”¶ç›Šé¢„æµ‹</li>
                        <li>ğŸŒ¡ï¸ æ°”å€™å˜åŒ–åˆ†æ</li>
                        <li>ğŸ’° å®¢æˆ·ä»·å€¼é¢„æµ‹</li>
                        <li>ğŸ¥ åŒ»ç–—è´¹ç”¨é¢„æµ‹</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- ç»“è¯­ -->
    <div class="section-card fade-in" style="text-align: center; background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(16, 185, 129, 0.05)); border: 3px solid rgba(34, 197, 94, 0.4);">
        <h2 style="font-size: 3rem; background: linear-gradient(135deg, #22c55e, #10b981, #14b8a6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 30px;">
            ğŸ‰ æ­å–œå®Œæˆçº¿æ€§å›å½’å­¦ä¹ ï¼
        </h2>
        <p style="font-size: 1.3rem; color: #cbd5e1; line-height: 1.8; margin-bottom: 40px;">
            ä»æ•£ä¹±çš„æ•°æ®ç‚¹åˆ°ç²¾ç¡®çš„é¢„æµ‹æ¨¡å‹<br>
            ä»ç®€å•çš„ä¸€å…ƒå›å½’åˆ°å¤æ‚çš„å¤šå…ƒåˆ†æ<br>
            ä»æ•°å­¦æ¨å¯¼åˆ°å®æˆ˜åº”ç”¨<br>
            ä½ å·²ç»æŒæ¡äº†æ•°æ®åˆ†æçš„åŸºç¡€æ­¦å™¨<br>
            çº¿æ€§å›å½’â€”â€”å¼€å¯æœºå™¨å­¦ä¹ ä¹‹æ—…çš„ç¬¬ä¸€æ­¥
        </p>
        <div class="demo-controls">
            <button class="demo-btn" onclick="downloadNotes()" style="font-size: 1.1rem; padding: 15px 30px;">
                ğŸ“¥ ä¸‹è½½å­¦ä¹ ç¬”è®°
            </button>
            <button class="demo-btn" onclick="startQuiz()" style="font-size: 1.1rem; padding: 15px 30px;">
                ğŸ§  å¼€å§‹çŸ¥è¯†æµ‹éªŒ
            </button>
            <button class="demo-btn" onclick="shareAchievement()" style="font-size: 1.1rem; padding: 15px 30px;">
                ğŸŠ åˆ†äº«å­¦ä¹ æˆå°±
            </button>
        </div>
    </div>
</div>

<!-- æµ®åŠ¨å·¥å…·æ  -->
<div class="floating-toolbar">
    <button class="toolbar-btn theme-toggle-btn" onclick="toggleTheme()" title="åˆ‡æ¢ä¸»é¢˜">
        <span class="theme-icon">ğŸŒ“</span>
    </button>
    <button class="toolbar-btn" onclick="scrollToTop()" title="å›åˆ°é¡¶éƒ¨">â¬†ï¸</button>
    <button class="toolbar-btn" onclick="toggleHelp()" title="å¸®åŠ©">â“</button>
</div>

<script>
    // å…¨å±€å˜é‡
    let navOpen = false;
    let sectionsRead = new Set();
    let totalSections = 14;
    let isAnimating = false;
    let gradientAnimation = null;
    let currentLineType = 'best';
    let regressionParams = { beta0: 30, beta1: 2.5 };
    let regularizationType = 'none';

    // ç¤ºä¾‹æ•°æ®
    const sampleData = [
        { x: 10, y: 50 },
        { x: 15, y: 65 },
        { x: 20, y: 78 },
        { x: 25, y: 92 },
        { x: 30, y: 105 },
        { x: 18, y: 72 },
        { x: 22, y: 85 }
    ];

    // å¯¼èˆªç³»ç»ŸåŠŸèƒ½
    function toggleNav() {
        navOpen = !navOpen;
        document.body.classList.toggle('nav-open', navOpen);
    }

    // é”®ç›˜å¿«æ·é”®
    document.addEventListener('keydown', function(e) {
        if (e.altKey && e.key === 'n') {
            e.preventDefault();
            toggleNav();
        }
        if ((e.ctrlKey || e.metaKey) && e.key === 's') {
            e.preventDefault();
            downloadNotes();
        }
    });

    // åˆå§‹åŒ–å¯¼èˆª
    function initNavigation() {
        const navItems = document.querySelectorAll('.nav-item a');
        navItems.forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });

                    document.querySelectorAll('.nav-item').forEach(ni => ni.classList.remove('active'));
                    this.parentElement.classList.add('active');
                }
            });
        });

        updateNavigationOnScroll();
    }

    // æ›´æ–°å¯¼èˆªçŠ¶æ€
    function updateNavigationOnScroll() {
        const sections = document.querySelectorAll('.section-anchor');
        const navItems = document.querySelectorAll('.nav-item');

        window.addEventListener('scroll', function() {
            const scrollPosition = window.scrollY + 150;

            updateProgress();

            sections.forEach((section, index) => {
                const sectionTop = section.offsetTop;
                const sectionBottom = sectionTop + section.offsetHeight;

                if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                    navItems.forEach(item => item.classList.remove('active'));
                    if (navItems[index]) {
                        navItems[index].classList.add('active');

                        const sectionId = section.id;
                        if (!sectionsRead.has(sectionId)) {
                            sectionsRead.add(sectionId);
                            navItems[index].classList.add('completed');
                            updateReadingStats();
                        }
                    }
                }
            });
        });
    }

    // æ›´æ–°é˜…è¯»ç»Ÿè®¡
    function updateReadingStats() {
        const sectionsReadCount = sectionsRead.size;
        document.getElementById('completedSections').textContent = `${sectionsReadCount}/${totalSections}`;

        const percentage = Math.round((sectionsReadCount / totalSections) * 100);
        document.getElementById('progressPercent').textContent = percentage + '%';

        // æ›´æ–°è¿›åº¦ç¯
        const circumference = 2 * Math.PI * 22;
        const offset = circumference - (percentage / 100) * circumference;
        document.getElementById('progressRing').style.strokeDashoffset = offset;
    }

    // æ›´æ–°è¿›åº¦æ¡
    function updateProgress() {
        const scrolled = window.scrollY;
        const total = document.documentElement.scrollHeight - window.innerHeight;
        const progress = Math.min((scrolled / total) * 100, 100);

        document.getElementById('progressFill').style.width = progress + '%';
        document.getElementById('progressText').textContent = Math.round(progress) + '%';
    }

    // æ•£ç‚¹å›¾æ¼”ç¤º
    let scatterCanvas, scatterCtx;

    function initScatterDemo() {
        scatterCanvas = document.getElementById('scatterCanvas');
        if (!scatterCanvas) return;

        scatterCtx = scatterCanvas.getContext('2d');
        drawScatter();
    }

    function drawScatter(showLine = false) {
        if (!scatterCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        scatterCtx.fillStyle = colors.background;
        scatterCtx.fillRect(0, 0, scatterCanvas.width, scatterCanvas.height);

        // ç»˜åˆ¶ç½‘æ ¼
        drawGrid(scatterCtx, scatterCanvas);

        // ç»˜åˆ¶åæ ‡è½´
        drawAxes(scatterCtx, scatterCanvas, 'å¹¿å‘ŠæŠ•å…¥ï¼ˆä¸‡å…ƒï¼‰', 'é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰');

        // ç»˜åˆ¶æ•°æ®ç‚¹
        const padding = 60;
        const width = scatterCanvas.width - 2 * padding;
        const height = scatterCanvas.height - 2 * padding;

        sampleData.forEach(point => {
            const x = padding + (point.x / 40) * width;
            const y = scatterCanvas.height - padding - (point.y / 120) * height;

            scatterCtx.beginPath();
            scatterCtx.arc(x, y, 8, 0, 2 * Math.PI);
            scatterCtx.fillStyle = colors.dataPoint;
            scatterCtx.fill();
            scatterCtx.strokeStyle = colors.background;
            scatterCtx.lineWidth = 2;
            scatterCtx.stroke();
        });

        // ç»˜åˆ¶è¶‹åŠ¿çº¿
        if (showLine) {
            const beta0 = 34;
            const beta1 = 2.2;

            scatterCtx.beginPath();
            scatterCtx.strokeStyle = colors.regressionLine;
            scatterCtx.lineWidth = 3;

            const x1 = 0;
            const y1 = beta0 + beta1 * x1;
            const x2 = 40;
            const y2 = beta0 + beta1 * x2;

            const px1 = padding + (x1 / 40) * width;
            const py1 = scatterCanvas.height - padding - (y1 / 120) * height;
            const px2 = padding + (x2 / 40) * width;
            const py2 = scatterCanvas.height - padding - (y2 / 120) * height;

            scatterCtx.moveTo(px1, py1);
            scatterCtx.lineTo(px2, py2);
            scatterCtx.stroke();
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        updateScatterStats();
    }

    function showScatterOnly() {
        drawScatter(false);
    }

    function showTrendLine() {
        drawScatter(true);
    }

    function animateRegression() {
        // åŠ¨ç”»å±•ç¤ºå›å½’çº¿çš„å½¢æˆ
        let progress = 0;
        const animate = () => {
            drawScatter(false);

            const colors = getCanvasColors();
            const padding = 60;
            const width = scatterCanvas.width - 2 * padding;
            const height = scatterCanvas.height - 2 * padding;

            // æ¸è¿›ç»˜åˆ¶å›å½’çº¿
            scatterCtx.globalAlpha = progress;
            scatterCtx.beginPath();
            scatterCtx.strokeStyle = colors.regressionLine;
            scatterCtx.lineWidth = 3;

            const beta0 = 34;
            const beta1 = 2.2;
            const x1 = 0;
            const y1 = beta0 + beta1 * x1;
            const x2 = 40 * progress;
            const y2 = beta0 + beta1 * x2;

            const px1 = padding + (x1 / 40) * width;
            const py1 = scatterCanvas.height - padding - (y1 / 120) * height;
            const px2 = padding + (x2 / 40) * width;
            const py2 = scatterCanvas.height - padding - (y2 / 120) * height;

            scatterCtx.moveTo(px1, py1);
            scatterCtx.lineTo(px2, py2);
            scatterCtx.stroke();
            scatterCtx.globalAlpha = 1;

            progress += 0.02;
            if (progress <= 1) {
                requestAnimationFrame(animate);
            }
        };
        animate();
    }

    function addRandomPoint() {
        const x = Math.random() * 30 + 5;
        const y = 34 + 2.2 * x + (Math.random() - 0.5) * 20;
        sampleData.push({ x, y });
        drawScatter(true);
    }

    function updateScatterStats() {
        document.getElementById('pointCount').textContent = sampleData.length;
        // è®¡ç®—ç›¸å…³ç³»æ•°
        const n = sampleData.length;
        const sumX = sampleData.reduce((sum, p) => sum + p.x, 0);
        const sumY = sampleData.reduce((sum, p) => sum + p.y, 0);
        const meanX = sumX / n;
        const meanY = sumY / n;

        const num = sampleData.reduce((sum, p) => sum + (p.x - meanX) * (p.y - meanY), 0);
        const denX = Math.sqrt(sampleData.reduce((sum, p) => sum + Math.pow(p.x - meanX, 2), 0));
        const denY = Math.sqrt(sampleData.reduce((sum, p) => sum + Math.pow(p.y - meanY, 2), 0));
        const r = num / (denX * denY);

        document.getElementById('correlation').textContent = r.toFixed(3);
        document.getElementById('rSquared').textContent = (r * r).toFixed(3);
    }

    // å‚æ•°å¯è§†åŒ–
    let paramsCanvas, paramsCtx;

    function initParamsDemo() {
        paramsCanvas = document.getElementById('paramsCanvas');
        if (!paramsCanvas) return;

        paramsCtx = paramsCanvas.getContext('2d');
        drawParams();
    }

    function drawParams() {
        if (!paramsCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        paramsCtx.fillStyle = colors.background;
        paramsCtx.fillRect(0, 0, paramsCanvas.width, paramsCanvas.height);

        // ç»˜åˆ¶ç½‘æ ¼
        drawGrid(paramsCtx, paramsCanvas);

        // ç»˜åˆ¶åæ ‡è½´
        drawAxes(paramsCtx, paramsCanvas, 'x', 'y');

        // ç»˜åˆ¶å›å½’çº¿
        const padding = 60;
        const width = paramsCanvas.width - 2 * padding;
        const height = paramsCanvas.height - 2 * padding;

        paramsCtx.beginPath();
        paramsCtx.strokeStyle = colors.regressionLine;
        paramsCtx.lineWidth = 3;

        const x1 = -10;
        const y1 = regressionParams.beta0 + regressionParams.beta1 * x1;
        const x2 = 40;
        const y2 = regressionParams.beta0 + regressionParams.beta1 * x2;

        const px1 = padding + ((x1 + 10) / 50) * width;
        const py1 = paramsCanvas.height - padding - ((y1 + 50) / 200) * height;
        const px2 = padding + ((x2 + 10) / 50) * width;
        const py2 = paramsCanvas.height - padding - ((y2 + 50) / 200) * height;

        paramsCtx.moveTo(px1, py1);
        paramsCtx.lineTo(px2, py2);
        paramsCtx.stroke();

        // æ ‡æ³¨æˆªè·
        const interceptX = padding + (10 / 50) * width;
        const interceptY = paramsCanvas.height - padding - ((regressionParams.beta0 + 50) / 200) * height;

        paramsCtx.beginPath();
        paramsCtx.arc(interceptX, interceptY, 6, 0, 2 * Math.PI);
        paramsCtx.fillStyle = colors.highlight;
        paramsCtx.fill();

        paramsCtx.fillStyle = colors.text;
        paramsCtx.font = '14px Arial';
        paramsCtx.fillText(`Î²â‚€ = ${regressionParams.beta0}`, interceptX + 10, interceptY - 10);

        // æ ‡æ³¨æ–œç‡
        const midX = padding + (25 / 50) * width;
        const midY = paramsCanvas.height - padding - ((regressionParams.beta0 + regressionParams.beta1 * 15 + 50) / 200) * height;

        paramsCtx.fillText(`æ–œç‡ Î²â‚ = ${regressionParams.beta1}`, midX, midY - 20);
    }

    function updateParams() {
        regressionParams.beta0 = parseFloat(document.getElementById('beta0Slider').value);
        regressionParams.beta1 = parseFloat(document.getElementById('beta1Slider').value);

        document.getElementById('beta0Value').textContent = regressionParams.beta0;
        document.getElementById('beta1Value').textContent = regressionParams.beta1.toFixed(1);

        drawParams();
    }

    // æ‹Ÿåˆæ•ˆæœæ¼”ç¤º
    let fitCanvas, fitCtx;

    function initFitDemo() {
        fitCanvas = document.getElementById('fitCanvas');
        if (!fitCanvas) return;

        fitCtx = fitCanvas.getContext('2d');
        showLine('best');
    }

    function showLine(type) {
        if (!fitCtx) return;

        currentLineType = type;
        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        fitCtx.fillStyle = colors.background;
        fitCtx.fillRect(0, 0, fitCanvas.width, fitCanvas.height);

        // ç»˜åˆ¶ç½‘æ ¼
        drawGrid(fitCtx, fitCanvas);

        // ç»˜åˆ¶æ•°æ®ç‚¹
        const padding = 60;
        const width = fitCanvas.width - 2 * padding;
        const height = fitCanvas.height - 2 * padding;

        sampleData.forEach(point => {
            const x = padding + (point.x / 40) * width;
            const y = fitCanvas.height - padding - (point.y / 120) * height;

            fitCtx.beginPath();
            fitCtx.arc(x, y, 6, 0, 2 * Math.PI);
            fitCtx.fillStyle = colors.dataPoint;
            fitCtx.fill();
        });

        // æ ¹æ®ç±»å‹ç»˜åˆ¶ä¸åŒçš„ç›´çº¿
        let beta0, beta1, lineColor, message;

        switch(type) {
            case 'flat':
                beta0 = 60;
                beta1 = 1.0;
                lineColor = '#ef4444';
                message = 'å¤ªå¹³ç¼“ï¼šä½ä¼°äº†å˜åŒ–è¶‹åŠ¿ï¼ŒMSE = 580';
                break;
            case 'steep':
                beta0 = 10;
                beta1 = 4.0;
                lineColor = '#fbbf24';
                message = 'å¤ªé™¡å³­ï¼šé«˜ä¼°äº†å˜åŒ–è¶‹åŠ¿ï¼ŒMSE = 420';
                break;
            case 'best':
                beta0 = 34;
                beta1 = 2.2;
                lineColor = '#22c55e';
                message = 'æœ€ä½³æ‹Ÿåˆï¼šè¯¯å·®æœ€å°ï¼ŒMSE = 12.5';
                break;
        }

        // ç»˜åˆ¶ç›´çº¿
        fitCtx.beginPath();
        fitCtx.strokeStyle = lineColor;
        fitCtx.lineWidth = 3;

        const x1 = 0;
        const y1 = beta0 + beta1 * x1;
        const x2 = 40;
        const y2 = beta0 + beta1 * x2;

        const px1 = padding + (x1 / 40) * width;
        const py1 = fitCanvas.height - padding - (y1 / 120) * height;
        const px2 = padding + (x2 / 40) * width;
        const py2 = fitCanvas.height - padding - (y2 / 120) * height;

        fitCtx.moveTo(px1, py1);
        fitCtx.lineTo(px2, py2);
        fitCtx.stroke();

        // ç»˜åˆ¶è¯¯å·®çº¿ï¼ˆä»…æœ€ä½³æ‹Ÿåˆæ—¶ï¼‰
        if (type === 'best') {
            fitCtx.strokeStyle = colors.error;
            fitCtx.lineWidth = 1;
            fitCtx.setLineDash([5, 5]);

            sampleData.forEach(point => {
                const x = padding + (point.x / 40) * width;
                const y = fitCanvas.height - padding - (point.y / 120) * height;
                const predY = fitCanvas.height - padding - ((beta0 + beta1 * point.x) / 120) * height;

                fitCtx.beginPath();
                fitCtx.moveTo(x, y);
                fitCtx.lineTo(x, predY);
                fitCtx.stroke();
            });

            fitCtx.setLineDash([]);
        }

        // æ›´æ–°ç»“æœä¿¡æ¯
        document.getElementById('fitResult').innerHTML = `<p style="color: ${lineColor};">${message}</p>`;
    }

    function showAllLines() {
        if (!fitCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        fitCtx.fillStyle = colors.background;
        fitCtx.fillRect(0, 0, fitCanvas.width, fitCanvas.height);

        // ç»˜åˆ¶ç½‘æ ¼
        drawGrid(fitCtx, fitCanvas);

        // ç»˜åˆ¶æ•°æ®ç‚¹
        const padding = 60;
        const width = fitCanvas.width - 2 * padding;
        const height = fitCanvas.height - 2 * padding;

        sampleData.forEach(point => {
            const x = padding + (point.x / 40) * width;
            const y = fitCanvas.height - padding - (point.y / 120) * height;

            fitCtx.beginPath();
            fitCtx.arc(x, y, 6, 0, 2 * Math.PI);
            fitCtx.fillStyle = colors.dataPoint;
            fitCtx.fill();
        });

        // ç»˜åˆ¶æ‰€æœ‰ä¸‰æ¡çº¿
        const lines = [
            { beta0: 60, beta1: 1.0, color: '#ef4444', label: 'å¤ªå¹³' },
            { beta0: 10, beta1: 4.0, color: '#fbbf24', label: 'å¤ªé™¡' },
            { beta0: 34, beta1: 2.2, color: '#22c55e', label: 'æœ€ä½³' }
        ];

        lines.forEach(line => {
            fitCtx.beginPath();
            fitCtx.strokeStyle = line.color;
            fitCtx.lineWidth = 2;
            fitCtx.globalAlpha = 0.8;

            const x1 = 0;
            const y1 = line.beta0 + line.beta1 * x1;
            const x2 = 40;
            const y2 = line.beta0 + line.beta1 * x2;

            const px1 = padding + (x1 / 40) * width;
            const py1 = fitCanvas.height - padding - (y1 / 120) * height;
            const px2 = padding + (x2 / 40) * width;
            const py2 = fitCanvas.height - padding - (y2 / 120) * height;

            fitCtx.moveTo(px1, py1);
            fitCtx.lineTo(px2, py2);
            fitCtx.stroke();
            fitCtx.globalAlpha = 1;
        });

        document.getElementById('fitResult').innerHTML = '<p>å¯¹æ¯”ä¸‰ç§æ‹Ÿåˆæ•ˆæœï¼Œç»¿è‰²çº¿è¯¯å·®æœ€å°</p>';
    }

    // MSEå¯è§†åŒ–
    let mseCanvas, mseCtx;

    function initMSEDemo() {
        mseCanvas = document.getElementById('mseCanvas');
        if (!mseCanvas) return;

        mseCtx = mseCanvas.getContext('2d');
        showErrors();
    }

    function showErrors() {
        if (!mseCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        mseCtx.fillStyle = colors.background;
        mseCtx.fillRect(0, 0, mseCanvas.width, mseCanvas.height);

        // ç»˜åˆ¶ç½‘æ ¼
        drawGrid(mseCtx, mseCanvas);

        // ç»˜åˆ¶æ•°æ®ç‚¹å’Œå›å½’çº¿
        const padding = 60;
        const width = mseCanvas.width - 2 * padding;
        const height = mseCanvas.height - 2 * padding;

        const beta0 = 34;
        const beta1 = 2.2;

        // ç»˜åˆ¶å›å½’çº¿
        mseCtx.beginPath();
        mseCtx.strokeStyle = colors.regressionLine;
        mseCtx.lineWidth = 3;

        const x1 = 0;
        const y1 = beta0 + beta1 * x1;
        const x2 = 40;
        const y2 = beta0 + beta1 * x2;

        const px1 = padding + (x1 / 40) * width;
        const py1 = mseCanvas.height - padding - (y1 / 120) * height;
        const px2 = padding + (x2 / 40) * width;
        const py2 = mseCanvas.height - padding - (y2 / 120) * height;

        mseCtx.moveTo(px1, py1);
        mseCtx.lineTo(px2, py2);
        mseCtx.stroke();

        // ç»˜åˆ¶æ•°æ®ç‚¹å’Œè¯¯å·®çº¿
        let totalMSE = 0;
        sampleData.forEach(point => {
            const x = padding + (point.x / 40) * width;
            const y = mseCanvas.height - padding - (point.y / 120) * height;
            const predY = beta0 + beta1 * point.x;
            const predPixelY = mseCanvas.height - padding - (predY / 120) * height;

            // è¯¯å·®çº¿
            mseCtx.strokeStyle = colors.error;
            mseCtx.lineWidth = 2;
            mseCtx.beginPath();
            mseCtx.moveTo(x, y);
            mseCtx.lineTo(x, predPixelY);
            mseCtx.stroke();

            // æ•°æ®ç‚¹
            mseCtx.beginPath();
            mseCtx.arc(x, y, 6, 0, 2 * Math.PI);
            mseCtx.fillStyle = colors.dataPoint;
            mseCtx.fill();

            // è®¡ç®—MSE
            const error = point.y - predY;
            totalMSE += error * error;
        });

        // æ›´æ–°MSEæ˜¾ç¤º
        const mse = totalMSE / sampleData.length;
        document.getElementById('currentMSE').textContent = mse.toFixed(2);
    }

    function showSquares() {
        showErrors();

        // åœ¨è¯¯å·®çº¿æ—è¾¹æ˜¾ç¤ºå¹³æ–¹å€¼
        const colors = getCanvasColors();
        const padding = 60;
        const width = mseCanvas.width - 2 * padding;
        const height = mseCanvas.height - 2 * padding;

        const beta0 = 34;
        const beta1 = 2.2;

        mseCtx.fillStyle = colors.text;
        mseCtx.font = '12px Arial';

        sampleData.forEach(point => {
            const x = padding + (point.x / 40) * width;
            const predY = beta0 + beta1 * point.x;
            const error = point.y - predY;
            const squared = error * error;

            mseCtx.fillText(squared.toFixed(1), x + 10, mseCanvas.height - padding - (point.y / 120) * height);
        });
    }

    function animateMSE() {
        let progress = 0;
        const animate = () => {
            showErrors();

            const colors = getCanvasColors();
            const padding = 60;
            const width = mseCanvas.width - 2 * padding;
            const height = mseCanvas.height - 2 * padding;

            const beta0 = 34;
            const beta1 = 2.2;

            // åŠ¨ç”»æ˜¾ç¤ºè¯¯å·®å¹³æ–¹
            mseCtx.globalAlpha = progress;
            mseCtx.fillStyle = 'rgba(251, 191, 36, 0.2)';

            sampleData.forEach(point => {
                const x = padding + (point.x / 40) * width;
                const y = mseCanvas.height - padding - (point.y / 120) * height;
                const predY = beta0 + beta1 * point.x;
                const predPixelY = mseCanvas.height - padding - (predY / 120) * height;
                const error = Math.abs(y - predPixelY);

                // ç»˜åˆ¶è¯¯å·®å¹³æ–¹çš„å¯è§†åŒ–ï¼ˆæ­£æ–¹å½¢ï¼‰
                if (error > 5) {
                    mseCtx.fillRect(x - error/2, Math.min(y, predPixelY), error, error);
                }
            });

            mseCtx.globalAlpha = 1;

            progress += 0.02;
            if (progress <= 1) {
                requestAnimationFrame(animate);
            }
        };
        animate();
    }

    // è§£æè§£æ¼”ç¤º
    let analyticalCanvas, analyticalCtx;

    function initAnalyticalDemo() {
        analyticalCanvas = document.getElementById('analyticalCanvas');
        if (!analyticalCanvas) return;

        analyticalCtx = analyticalCanvas.getContext('2d');
        drawAnalyticalSolution();
    }

    function drawAnalyticalSolution() {
        if (!analyticalCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        analyticalCtx.fillStyle = colors.background;
        analyticalCtx.fillRect(0, 0, analyticalCanvas.width, analyticalCanvas.height);

        // ç»˜åˆ¶å°å‹æ•£ç‚¹å›¾å’Œå›å½’çº¿
        const padding = 40;
        const width = analyticalCanvas.width - 2 * padding;
        const height = analyticalCanvas.height - 2 * padding;

        // ç»˜åˆ¶åæ ‡è½´
        analyticalCtx.strokeStyle = colors.axis;
        analyticalCtx.lineWidth = 2;
        analyticalCtx.beginPath();
        analyticalCtx.moveTo(padding, analyticalCanvas.height - padding);
        analyticalCtx.lineTo(analyticalCanvas.width - padding, analyticalCanvas.height - padding);
        analyticalCtx.moveTo(padding, padding);
        analyticalCtx.lineTo(padding, analyticalCanvas.height - padding);
        analyticalCtx.stroke();

        // ç»˜åˆ¶æ•°æ®ç‚¹
        const data = [
            { x: 10, y: 50 },
            { x: 15, y: 65 },
            { x: 20, y: 78 },
            { x: 25, y: 92 },
            { x: 30, y: 105 }
        ];

        data.forEach(point => {
            const x = padding + ((point.x - 5) / 30) * width;
            const y = analyticalCanvas.height - padding - ((point.y - 40) / 70) * height;

            analyticalCtx.beginPath();
            analyticalCtx.arc(x, y, 5, 0, 2 * Math.PI);
            analyticalCtx.fillStyle = colors.dataPoint;
            analyticalCtx.fill();
        });

        // ç»˜åˆ¶å›å½’çº¿
        analyticalCtx.beginPath();
        analyticalCtx.strokeStyle = colors.regressionLine;
        analyticalCtx.lineWidth = 2;

        const beta0 = 34;
        const beta1 = 2.2;
        const x1 = 5;
        const y1 = beta0 + beta1 * x1;
        const x2 = 35;
        const y2 = beta0 + beta1 * x2;

        const px1 = padding + ((x1 - 5) / 30) * width;
        const py1 = analyticalCanvas.height - padding - ((y1 - 40) / 70) * height;
        const px2 = padding + ((x2 - 5) / 30) * width;
        const py2 = analyticalCanvas.height - padding - ((y2 - 40) / 70) * height;

        analyticalCtx.moveTo(px1, py1);
        analyticalCtx.lineTo(px2, py2);
        analyticalCtx.stroke();
    }

    // æ¢¯åº¦ä¸‹é™å¯è§†åŒ–
    let gradientCanvas, gradientCtx;
    let gdProgress = 0;
    let learningRate = 0.01;
    let gdAnimation = null;
    let gdPath = [];

    function initGradientDemo() {
        gradientCanvas = document.getElementById('gradientCanvas');
        if (!gradientCanvas) return;

        gradientCtx = gradientCanvas.getContext('2d');
        drawGradientDescent();
    }

    function drawGradientDescent() {
        if (!gradientCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        gradientCtx.fillStyle = colors.background;
        gradientCtx.fillRect(0, 0, gradientCanvas.width, gradientCanvas.height);

        // ç»˜åˆ¶æŸå¤±å‡½æ•°æ›²é¢ï¼ˆ2DæŠ•å½±ï¼‰
        const padding = 60;
        const width = gradientCanvas.width - 2 * padding;
        const height = gradientCanvas.height - 2 * padding;

        // ç»˜åˆ¶ç­‰é«˜çº¿
        gradientCtx.strokeStyle = colors.contour;
        gradientCtx.lineWidth = 1;
        gradientCtx.globalAlpha = 0.3;

        for (let i = 0; i < 5; i++) {
            gradientCtx.beginPath();
            gradientCtx.arc(gradientCanvas.width / 2, gradientCanvas.height / 2, 50 + i * 40, 0, 2 * Math.PI);
            gradientCtx.stroke();
        }
        gradientCtx.globalAlpha = 1;

        // ç»˜åˆ¶æœ€ä¼˜ç‚¹
        const optimalX = gradientCanvas.width / 2;
        const optimalY = gradientCanvas.height / 2;

        gradientCtx.beginPath();
        gradientCtx.arc(optimalX, optimalY, 8, 0, 2 * Math.PI);
        gradientCtx.fillStyle = colors.optimal;
        gradientCtx.fill();

        // ç»˜åˆ¶è·¯å¾„
        if (gdPath.length > 0) {
            gradientCtx.beginPath();
            gradientCtx.strokeStyle = colors.path;
            gradientCtx.lineWidth = 3;
            gradientCtx.moveTo(gdPath[0].x, gdPath[0].y);

            for (let i = 1; i < gdPath.length; i++) {
                gradientCtx.lineTo(gdPath[i].x, gdPath[i].y);
            }
            gradientCtx.stroke();

            // ç»˜åˆ¶å½“å‰ä½ç½®
            const current = gdPath[gdPath.length - 1];
            gradientCtx.beginPath();
            gradientCtx.arc(current.x, current.y, 6, 0, 2 * Math.PI);
            gradientCtx.fillStyle = colors.current;
            gradientCtx.fill();
        }

        // æ›´æ–°çŠ¶æ€
        if (gdPath.length > 0) {
            document.getElementById('gdIteration').textContent = gdPath.length - 1;
            const current = gdPath[gdPath.length - 1];
            const distance = Math.sqrt(Math.pow(current.x - optimalX, 2) + Math.pow(current.y - optimalY, 2));
            const loss = Math.max(0, (distance * distance / 100)).toFixed(2);
            document.getElementById('gdLoss').textContent = loss;
        }
    }

    function startGradientDescent() {
        if (gdAnimation) return;

        // åˆå§‹åŒ–èµ·ç‚¹ï¼ˆéšæœºä½ç½®ï¼‰
        gdPath = [{
            x: 100 + Math.random() * 200,
            y: 100 + Math.random() * 200
        }];

        const optimalX = gradientCanvas.width / 2;
        const optimalY = gradientCanvas.height / 2;

        const animate = () => {
            const current = gdPath[gdPath.length - 1];
            const gradX = (current.x - optimalX) / 100;
            const gradY = (current.y - optimalY) / 100;

            // æ¢¯åº¦ä¸‹é™æ›´æ–°
            const newX = current.x - learningRate * gradX * 100;
            const newY = current.y - learningRate * gradY * 100;

            gdPath.push({ x: newX, y: newY });
            drawGradientDescent();

            // æ£€æŸ¥æ˜¯å¦æ”¶æ•›
            const distance = Math.sqrt(Math.pow(newX - optimalX, 2) + Math.pow(newY - optimalY, 2));
            if (distance > 5 && gdPath.length < 100) {
                gdAnimation = requestAnimationFrame(animate);
            } else {
                gdAnimation = null;
            }
        };

        animate();
    }

    function pauseGradientDescent() {
        if (gdAnimation) {
            cancelAnimationFrame(gdAnimation);
            gdAnimation = null;
        }
    }

    function resetGradientDescent() {
        pauseGradientDescent();
        gdPath = [];
        drawGradientDescent();
        document.getElementById('gdIteration').textContent = '0';
        document.getElementById('gdLoss').textContent = '100.00';
    }

    function changeLearnRate() {
        const rates = [0.001, 0.01, 0.1, 1.0];
        const currentIndex = rates.indexOf(learningRate);
        learningRate = rates[(currentIndex + 1) % rates.length];
        document.getElementById('learnRate').textContent = learningRate;
    }

    // æ®‹å·®åˆ†ææ¼”ç¤º
    let residualCanvas, residualCtx;

    function initResidualDemo() {
        residualCanvas = document.getElementById('residualCanvas');
        if (!residualCanvas) return;

        residualCtx = residualCanvas.getContext('2d');
        showResidualPlot();
    }

    function showResidualPlot() {
        if (!residualCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        residualCtx.fillStyle = colors.background;
        residualCtx.fillRect(0, 0, residualCanvas.width, residualCanvas.height);

        // ç»˜åˆ¶åæ ‡è½´
        drawAxes(residualCtx, residualCanvas, 'é¢„æµ‹å€¼', 'æ®‹å·®');

        // è®¡ç®—æ®‹å·®
        const beta0 = 34;
        const beta1 = 2.2;
        const residuals = sampleData.map(point => ({
            predicted: beta0 + beta1 * point.x,
            residual: point.y - (beta0 + beta1 * point.x)
        }));

        // ç»˜åˆ¶æ®‹å·®ç‚¹
        const padding = 60;
        const width = residualCanvas.width - 2 * padding;
        const height = residualCanvas.height - 2 * padding;

        residuals.forEach(r => {
            const x = padding + ((r.predicted - 40) / 80) * width;
            const y = residualCanvas.height/2 - (r.residual / 20) * height/2;

            residualCtx.beginPath();
            residualCtx.arc(x, y, 5, 0, 2 * Math.PI);
            residualCtx.fillStyle = colors.dataPoint;
            residualCtx.fill();
        });

        // ç»˜åˆ¶é›¶çº¿
        residualCtx.beginPath();
        residualCtx.strokeStyle = colors.error;
        residualCtx.lineWidth = 2;
        residualCtx.setLineDash([5, 5]);
        residualCtx.moveTo(padding, residualCanvas.height/2);
        residualCtx.lineTo(residualCanvas.width - padding, residualCanvas.height/2);
        residualCtx.stroke();
        residualCtx.setLineDash([]);
    }

    function showQQPlot() {
        // Q-Qå›¾å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰
        if (!residualCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        residualCtx.fillStyle = colors.background;
        residualCtx.fillRect(0, 0, residualCanvas.width, residualCanvas.height);

        // ç»˜åˆ¶å¯¹è§’çº¿
        residualCtx.beginPath();
        residualCtx.strokeStyle = colors.regressionLine;
        residualCtx.lineWidth = 2;
        residualCtx.moveTo(60, residualCanvas.height - 60);
        residualCtx.lineTo(residualCanvas.width - 60, 60);
        residualCtx.stroke();

        // ç»˜åˆ¶æ ‡é¢˜
        residualCtx.fillStyle = colors.text;
        residualCtx.font = '16px Arial';
        residualCtx.textAlign = 'center';
        residualCtx.fillText('Q-Q Plot', residualCanvas.width/2, 30);
    }

    function showHistogram() {
        // æ®‹å·®ç›´æ–¹å›¾ï¼ˆç®€åŒ–ç‰ˆï¼‰
        if (!residualCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        residualCtx.fillStyle = colors.background;
        residualCtx.fillRect(0, 0, residualCanvas.width, residualCanvas.height);

        // ç®€å•çš„æŸ±çŠ¶å›¾
        const barWidth = 40;
        const bars = [2, 5, 8, 6, 3];
        const maxHeight = Math.max(...bars);

        bars.forEach((height, i) => {
            const x = 100 + i * (barWidth + 10);
            const h = (height / maxHeight) * 200;
            const y = residualCanvas.height - 80 - h;

            residualCtx.fillStyle = colors.dataPoint;
            residualCtx.fillRect(x, y, barWidth, h);
        });

        // ç»˜åˆ¶æ ‡é¢˜
        residualCtx.fillStyle = colors.text;
        residualCtx.font = '16px Arial';
        residualCtx.textAlign = 'center';
        residualCtx.fillText('æ®‹å·®åˆ†å¸ƒ', residualCanvas.width/2, 30);
    }

    // æ­£åˆ™åŒ–æ¼”ç¤º
    let regularizationCanvas, regularizationCtx;

    function initRegularizationDemo() {
        regularizationCanvas = document.getElementById('regularizationCanvas');
        if (!regularizationCanvas) return;

        regularizationCtx = regularizationCanvas.getContext('2d');
        showRegularization('none');
    }

    function showRegularization(type) {
        regularizationType = type;
        if (!regularizationCtx) return;

        const colors = getCanvasColors();

        // æ¸…é™¤ç”»å¸ƒ
        regularizationCtx.fillStyle = colors.background;
        regularizationCtx.fillRect(0, 0, regularizationCanvas.width, regularizationCanvas.height);

        // ç»˜åˆ¶ç³»æ•°å¯¹æ¯”å›¾
        const coefficients = {
            none: [2.5, 1.8, 1.2, 0.9, 0.6],
            ridge: [2.0, 1.5, 1.0, 0.7, 0.5],
            lasso: [2.2, 1.6, 0, 0, 0]
        };

        const names = ['Î²â‚', 'Î²â‚‚', 'Î²â‚ƒ', 'Î²â‚„', 'Î²â‚…'];
        const coefs = coefficients[type];

        // ç»˜åˆ¶æŸ±çŠ¶å›¾
        const barWidth = 60;
        const maxCoef = 3;

        coefs.forEach((coef, i) => {
            const x = 100 + i * (barWidth + 20);
            const h = (Math.abs(coef) / maxCoef) * 200;
            const y = regularizationCanvas.height/2 - (coef > 0 ? h : 0);

            regularizationCtx.fillStyle = type === 'lasso' && coef === 0 ? '#64748b' : colors.regressionLine;
            regularizationCtx.fillRect(x, y, barWidth, coef > 0 ? h : -h);

            // æ ‡ç­¾
            regularizationCtx.fillStyle = colors.text;
            regularizationCtx.font = '14px Arial';
            regularizationCtx.textAlign = 'center';
            regularizationCtx.fillText(names[i], x + barWidth/2, regularizationCanvas.height - 40);
            regularizationCtx.fillText(coef.toFixed(1), x + barWidth/2, y - 10);
        });

        // æ ‡é¢˜
        const title = type === 'none' ? 'æ— æ­£åˆ™åŒ–' : type === 'ridge' ? 'Ridgeå›å½’' : 'Lassoå›å½’';
        regularizationCtx.font = '18px Arial';
        regularizationCtx.fillText(title, regularizationCanvas.width/2, 30);
    }

    function updateRegularization() {
        const lambda = parseFloat(document.getElementById('lambdaSlider').value);
        document.getElementById('lambdaValue').textContent = lambda.toFixed(1);
        showRegularization(regularizationType);
    }

    // å¹¿å‘Šé¢„ç®—é¢„æµ‹
    function updatePrediction() {
        const tv = parseFloat(document.getElementById('tvSlider').value);
        const radio = parseFloat(document.getElementById('radioSlider').value);
        const newspaper = parseFloat(document.getElementById('newspaperSlider').value);

        document.getElementById('tvBudget').textContent = tv;
        document.getElementById('radioBudget').textContent = radio;
        document.getElementById('newspaperBudget').textContent = newspaper;

        // ç®€åŒ–çš„é¢„æµ‹æ¨¡å‹
        const prediction = 2.5 + tv * 0.046 + radio * 0.189 - newspaper * 0.001;
        document.getElementById('predictedSales').textContent = prediction.toFixed(1);

        // è®¡ç®—æ€»é¢„ç®—å’ŒROI
        const totalBudget = tv + radio + newspaper;
        document.getElementById('totalBudget').textContent = totalBudget.toFixed(0);

        const roi = totalBudget > 0 ? (prediction * 1000 / totalBudget).toFixed(1) : '0.0';
        document.getElementById('roi').textContent = roi;
    }

    // èƒŒæ™¯åŠ¨ç”»
    function initDataPointsBackground() {
        const canvas = document.getElementById('dataPointsBg');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const points = [];
        const connections = [];

        // åˆ›å»ºæ•°æ®ç‚¹
        for (let i = 0; i < 30; i++) {
            points.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 0.3,
                vy: (Math.random() - 0.5) * 0.3,
                radius: Math.random() * 4 + 2,
                opacity: Math.random() * 0.5 + 0.3
            });
        }

        function animate() {
            ctx.fillStyle = 'rgba(15, 23, 42, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // æ›´æ–°ç‚¹çš„ä½ç½®
            points.forEach(point => {
                point.x += point.vx;
                point.y += point.vy;

                if (point.x < 0 || point.x > canvas.width) point.vx *= -1;
                if (point.y < 0 || point.y > canvas.height) point.vy *= -1;
            });

            // ç»˜åˆ¶è¿æ¥çº¿ï¼ˆæ¨¡æ‹Ÿå›å½’çº¿ï¼‰
            ctx.strokeStyle = 'rgba(34, 197, 94, 0.1)';
            ctx.lineWidth = 1;

            for (let i = 0; i < points.length - 1; i++) {
                if (Math.random() > 0.98) {
                    ctx.beginPath();
                    ctx.moveTo(points[i].x, points[i].y);
                    ctx.lineTo(points[i + 1].x, points[i + 1].y);
                    ctx.stroke();
                }
            }

            // ç»˜åˆ¶æ•°æ®ç‚¹
            points.forEach(point => {
                ctx.beginPath();
                ctx.arc(point.x, point.y, point.radius, 0, 2 * Math.PI);
                ctx.fillStyle = `rgba(34, 197, 94, ${point.opacity})`;
                ctx.fill();
            });

            requestAnimationFrame(animate);
        }

        animate();

        // çª—å£å¤§å°æ”¹å˜æ—¶è°ƒæ•´ç”»å¸ƒ
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    }

    // è¾…åŠ©å‡½æ•°
    function drawGrid(ctx, canvas) {
        const colors = getCanvasColors();
        ctx.strokeStyle = colors.grid;
        ctx.lineWidth = 1;
        ctx.globalAlpha = 0.2;

        const gridSize = 40;
        for (let i = 0; i <= canvas.width; i += gridSize) {
            ctx.beginPath();
            ctx.moveTo(i, 0);
            ctx.lineTo(i, canvas.height);
            ctx.stroke();
        }

        for (let i = 0; i <= canvas.height; i += gridSize) {
            ctx.beginPath();
            ctx.moveTo(0, i);
            ctx.lineTo(canvas.width, i);
            ctx.stroke();
        }

        ctx.globalAlpha = 1;
    }

    function drawAxes(ctx, canvas, xLabel, yLabel) {
        const colors = getCanvasColors();
        const padding = 60;

        ctx.strokeStyle = colors.axis;
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(padding, canvas.height - padding);
        ctx.lineTo(canvas.width - padding, canvas.height - padding);
        ctx.moveTo(padding, padding);
        ctx.lineTo(padding, canvas.height - padding);
        ctx.stroke();

        // æ ‡ç­¾
        ctx.fillStyle = colors.text;
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText(xLabel, canvas.width / 2, canvas.height - 20);

        ctx.save();
        ctx.translate(20, canvas.height / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.fillText(yLabel, 0, 0);
        ctx.restore();
    }

    function getCanvasColors() {
        const isLight = document.body.classList.contains('light-theme');
        return {
            background: isLight ? '#ffffff' : '#0f172a',
            grid: isLight ? '#e5e7eb' : '#2d3748',
            text: isLight ? '#1e293b' : '#cbd5e1',
            axis: isLight ? '#64748b' : '#4a5568',
            dataPoint: '#ef4444',
            regressionLine: '#22c55e',
            error: '#fbbf24',
            errorSquare: 'rgba(251, 191, 36, 0.2)',
            contour: isLight ? '#cbd5e1' : '#334155',
            optimal: '#22c55e',
            current: '#ef4444',
            path: '#fbbf24',
            highlight: '#8b5cf6'
        };
    }

    // ä¸»é¢˜åˆ‡æ¢
    function initTheme() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
            document.body.classList.add('light-theme');
            updateThemeIcon('light');
        }
    }

    function toggleTheme() {
        const isLight = document.body.classList.contains('light-theme');

        if (isLight) {
            document.body.classList.remove('light-theme');
            localStorage.setItem('theme', 'dark');
            updateThemeIcon('dark');
        } else {
            document.body.classList.add('light-theme');
            localStorage.setItem('theme', 'light');
            updateThemeIcon('light');
        }

        // é‡ç»˜æ‰€æœ‰canvas
        updateAllCanvas();
    }

    function updateThemeIcon(theme) {
        const icon = document.querySelector('.theme-icon');
        if (icon) {
            icon.textContent = theme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
        }
    }

    function updateAllCanvas() {
        drawScatter(true);
        drawParams();
        showLine(currentLineType);
        showErrors();
        drawAnalyticalSolution();
        drawGradientDescent();
        showResidualPlot();
        showRegularization(regularizationType);
    }

    // å·¥å…·å‡½æ•°
    function scrollToTop() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function toggleHelp() {
        alert('ä½¿ç”¨æç¤ºï¼š\n1. ç‚¹å‡»å¯¼èˆªé¡¹å¿«é€Ÿè·³è½¬åˆ°ç›¸åº”ç« èŠ‚\n2. ä½¿ç”¨äº¤äº’å¼æ¼”ç¤ºç†è§£çº¿æ€§å›å½’åŸç†\n3. Alt+N åˆ‡æ¢å¯¼èˆªæ \n4. Ctrl+S ä¿å­˜å­¦ä¹ ç¬”è®°\n5. ç‚¹å‡»ä¸»é¢˜æŒ‰é’®åˆ‡æ¢æ·±è‰²/æµ…è‰²æ¨¡å¼');
    }

    function downloadNotes() {
        const notes = `
ç¬¬5ç« ï¼šçº¿æ€§å›å½’å­¦ä¹ ç¬”è®°

ä¸€ã€æ ¸å¿ƒæ¦‚å¿µ
- çº¿æ€§å›å½’æ˜¯ç”¨ç›´çº¿ï¼ˆæˆ–è¶…å¹³é¢ï¼‰æ‹Ÿåˆæ•°æ®çš„æ–¹æ³•
- ç›®æ ‡ï¼šæ‰¾åˆ°æœ€èƒ½ä»£è¡¨æ•°æ®è§„å¾‹çš„ç›´çº¿
- åº”ç”¨ï¼šé¢„æµ‹ã€åˆ†æå˜é‡å…³ç³»

äºŒã€æ•°å­¦æ¨¡å‹
1. ä¸€å…ƒçº¿æ€§å›å½’ï¼šy = Î²â‚€ + Î²â‚x + Îµ
2. å¤šå…ƒçº¿æ€§å›å½’ï¼šy = Î²â‚€ + Î²â‚xâ‚ + ... + Î²â‚šxâ‚š + Îµ
   - yï¼šå› å˜é‡ï¼ˆé¢„æµ‹ç›®æ ‡ï¼‰
   - xï¼šè‡ªå˜é‡ï¼ˆå½±å“å› ç´ ï¼‰
   - Î²â‚€ï¼šæˆªè·ï¼ˆåŸºå‡†å€¼ï¼‰
   - Î²â‚...Î²â‚šï¼šå›å½’ç³»æ•°ï¼ˆå½±å“ç¨‹åº¦ï¼‰
   - Îµï¼šè¯¯å·®é¡¹ï¼Œå‡è®¾Îµ~N(0,ÏƒÂ²)

ä¸‰ã€æŸå¤±å‡½æ•°
MSE = (1/n) Ã— Î£(yáµ¢ - Å·áµ¢)Â²
- ä½¿ç”¨å¹³æ–¹é¿å…æ­£è´ŸæŠµæ¶ˆ
- æƒ©ç½šå¤§çš„é¢„æµ‹è¯¯å·®
- æœ‰å”¯ä¸€æœ€å°å€¼ï¼ˆå‡¸å‡½æ•°ï¼‰

å››ã€æ±‚è§£æ–¹æ³•
1. è§£æè§£ï¼ˆæ­£è§„æ–¹ç¨‹ï¼‰
   - ä¸€å…ƒï¼šÎ²â‚ = Î£[(xáµ¢ - xÌ„)(yáµ¢ - È³)] / Î£(xáµ¢ - xÌ„)Â²
           Î²â‚€ = È³ - Î²â‚xÌ„
   - å¤šå…ƒï¼šÎ²Ì‚ = (Xáµ€X)â»Â¹Xáµ€y
   - ä¼˜ç‚¹ï¼šä¸€æ­¥åˆ°ä½ï¼Œç²¾ç¡®è§£
   - ç¼ºç‚¹ï¼šè®¡ç®—å¤æ‚åº¦O(pÂ³)ï¼Œå¤§æ•°æ®é›†å›°éš¾

2. æ¢¯åº¦ä¸‹é™
   - æ›´æ–°è§„åˆ™ï¼šÎ² = Î² - Î± Ã— âˆ‡J(Î²)
   - æ‰¹é‡GDï¼šä½¿ç”¨å…¨éƒ¨æ•°æ®
   - éšæœºGDï¼šä½¿ç”¨å•ä¸ªæ ·æœ¬
   - å°æ‰¹é‡GDï¼šä½¿ç”¨éƒ¨åˆ†æ ·æœ¬
   - ä¼˜ç‚¹ï¼šé€‚åˆå¤§æ•°æ®ï¼Œå†…å­˜å‹å¥½
   - ç¼ºç‚¹ï¼šéœ€è¦è°ƒå‚ï¼Œå¯èƒ½é™·å…¥å±€éƒ¨æœ€ä¼˜

äº”ã€æ¨¡å‹è¯„ä¼°
- RÂ²ï¼ˆå†³å®šç³»æ•°ï¼‰ï¼šè§£é‡Šçš„æ–¹å·®æ¯”ä¾‹
- è°ƒæ•´RÂ²ï¼šè€ƒè™‘ç‰¹å¾æ•°é‡
- MSE/RMSEï¼šé¢„æµ‹è¯¯å·®
- æ®‹å·®åˆ†æï¼šæ£€éªŒæ¨¡å‹å‡è®¾

å…­ã€çº¿æ€§å›å½’å‡è®¾ï¼ˆLINERï¼‰
L - Linearityï¼ˆçº¿æ€§å…³ç³»ï¼‰
I - Independenceï¼ˆç‹¬ç«‹æ€§ï¼‰
N - Normalityï¼ˆæ­£æ€æ€§ï¼‰
E - Equal varianceï¼ˆåŒæ–¹å·®æ€§ï¼‰
R - No multicollinearityï¼ˆæ— å¤šé‡å…±çº¿æ€§ï¼‰

ä¸ƒã€æ­£åˆ™åŒ–æ–¹æ³•
1. Ridgeï¼ˆL2ï¼‰ï¼šJ = MSE + Î»Î£Î²áµ¢Â²
   - å‹ç¼©ç³»æ•°ä½†ä¸ä¼šä¸º0
2. Lassoï¼ˆL1ï¼‰ï¼šJ = MSE + Î»Î£|Î²áµ¢|
   - å¯ä»¥ç‰¹å¾é€‰æ‹©ï¼ˆç³»æ•°ä¸º0ï¼‰
3. å¼¹æ€§ç½‘ï¼šç»“åˆL1å’ŒL2

å…«ã€å®æˆ˜è¦ç‚¹
- æ•°æ®æ ‡å‡†åŒ–å¾ˆé‡è¦
- æ£€æŸ¥å¤šé‡å…±çº¿æ€§ï¼ˆVIFï¼‰
- éªŒè¯æ¨¡å‹å‡è®¾
- ä½¿ç”¨äº¤å‰éªŒè¯é€‰æ‹©å‚æ•°
- æ³¨æ„è¿‡æ‹Ÿåˆé£é™©

ä¹ã€å¹¿å‘ŠæŠ•æ”¾æ¡ˆä¾‹
- å¤šå…ƒçº¿æ€§å›å½’åˆ†æ
- TVå’ŒRadioæ•ˆæœæ˜¾è‘—
- Newspaperæ•ˆæœä¸æ˜¾è‘—
- å­˜åœ¨æ¸ é“é—´çš„äº¤äº’ä½œç”¨
- RÂ²=0.897ï¼Œæ¨¡å‹æ‹Ÿåˆè‰¯å¥½

åã€é‡è¦æé†’
- ç›¸å…³æ€§â‰ å› æœæ€§
- å¤–æ¨éœ€è°¨æ…
- æ®‹å·®æ¨¡å¼å¾ˆé‡è¦
- ç‰¹å¾å·¥ç¨‹æ˜¯å…³é”®

å­¦ä¹ è¿›åº¦ï¼š${document.getElementById('progressPercent').textContent}
å®Œæˆç« èŠ‚ï¼š${document.getElementById('completedSections').textContent}
å­¦ä¹ æ—¶é—´ï¼š${new Date().toLocaleString()}
        `;

        const blob = new Blob([notes], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'çº¿æ€§å›å½’å­¦ä¹ ç¬”è®°.txt';
        a.click();
        URL.revokeObjectURL(url);
    }

    function startQuiz() {
        const questions = [
            {
                question: "çº¿æ€§å›å½’çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: ["æ‰¾åˆ°æ•°æ®çš„å¹³å‡å€¼", "æ‰¾åˆ°æœ€ä½³æ‹Ÿåˆç›´çº¿", "å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»", "è®¡ç®—æ•°æ®çš„æ–¹å·®"],
                correct: 1,
                explanation: "çº¿æ€§å›å½’çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€æ¡æœ€èƒ½ä»£è¡¨æ•°æ®è§„å¾‹çš„ç›´çº¿ï¼Œä½¿é¢„æµ‹è¯¯å·®æœ€å°"
            },
            {
                question: "ä¸ºä»€ä¹ˆä½¿ç”¨è¯¯å·®çš„å¹³æ–¹è€Œä¸æ˜¯ç®€å•æ±‚å’Œï¼Ÿ",
                options: ["è®¡ç®—æ›´ç®€å•", "é¿å…æ­£è´Ÿè¯¯å·®æŠµæ¶ˆ", "ä½¿ç»“æœæ›´å¤§", "æ²¡æœ‰ç‰¹åˆ«åŸå› "],
                correct: 1,
                explanation: "æ­£è´Ÿè¯¯å·®ä¼šç›¸äº’æŠµæ¶ˆï¼Œä½¿ç”¨å¹³æ–¹å¯ä»¥ç¡®ä¿æ‰€æœ‰è¯¯å·®éƒ½è¢«è€ƒè™‘ï¼Œä¸”æƒ©ç½šå¤§çš„è¯¯å·®"
            },
            {
                question: "æ­£è§„æ–¹ç¨‹çš„çŸ©é˜µå½¢å¼æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: ["Î² = Xáµ€X", "Î² = (Xáµ€X)â»Â¹Xáµ€y", "Î² = Xáµ€y", "Î² = Xâ»Â¹y"],
                correct: 1,
                explanation: "æ­£è§„æ–¹ç¨‹é€šè¿‡æ±‚å¯¼å¹¶ä»¤å…¶ä¸ºé›¶å¾—åˆ°ï¼šÎ²Ì‚ = (Xáµ€X)â»Â¹Xáµ€y"
            },
            {
                question: "æ¢¯åº¦ä¸‹é™ä¸­ï¼Œå­¦ä¹ ç‡è¿‡å¤§ä¼šå¯¼è‡´ä»€ä¹ˆï¼Ÿ",
                options: ["æ”¶æ•›å¤ªæ…¢", "å¯èƒ½å‘æ•£æˆ–éœ‡è¡", "æ²¡æœ‰å½±å“", "ç»“æœæ›´å‡†ç¡®"],
                correct: 1,
                explanation: "å­¦ä¹ ç‡è¿‡å¤§å¯èƒ½å¯¼è‡´æ­¥é•¿å¤ªå¤§ï¼Œé”™è¿‡æœ€ä¼˜è§£ï¼Œç”šè‡³ä½¿æŸå¤±å‡½æ•°å‘æ•£"
            },
            {
                question: "RÂ²çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: ["è¯¯å·®çš„å¹³æ–¹", "ç›¸å…³ç³»æ•°çš„å¹³æ–¹", "æ¨¡å‹è§£é‡Šçš„æ–¹å·®æ¯”ä¾‹", "å›å½’ç³»æ•°"],
                correct: 2,
                explanation: "RÂ²è¡¨ç¤ºæ¨¡å‹è§£é‡Šçš„æ–¹å·®å æ€»æ–¹å·®çš„æ¯”ä¾‹ï¼Œè¶Šæ¥è¿‘1è¯´æ˜æ¨¡å‹æ‹Ÿåˆè¶Šå¥½"
            },
            {
                question: "ä»¥ä¸‹å“ªä¸ªä¸æ˜¯çº¿æ€§å›å½’çš„åŸºæœ¬å‡è®¾ï¼Ÿ",
                options: ["çº¿æ€§å…³ç³»", "è¯¯å·®ç‹¬ç«‹", "ç‰¹å¾å¿…é¡»æ­£æ€åˆ†å¸ƒ", "åŒæ–¹å·®æ€§"],
                correct: 2,
                explanation: "çº¿æ€§å›å½’è¦æ±‚çš„æ˜¯è¯¯å·®é¡¹æ­£æ€åˆ†å¸ƒï¼Œè€Œä¸æ˜¯ç‰¹å¾æ­£æ€åˆ†å¸ƒ"
            },
            {
                question: "Ridgeå›å½’å’ŒLassoå›å½’çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Ÿ",
                options: ["è®¡ç®—é€Ÿåº¦ä¸åŒ", "Ridgeå¯ä»¥ç‰¹å¾é€‰æ‹©", "Lassoå¯ä»¥å°†ç³»æ•°å‹ç¼©åˆ°0", "æ²¡æœ‰åŒºåˆ«"],
                correct: 2,
                explanation: "Lassoä½¿ç”¨L1æ­£åˆ™åŒ–ï¼Œå¯ä»¥å°†æŸäº›ç³»æ•°å‹ç¼©åˆ°0ï¼Œå®ç°ç‰¹å¾é€‰æ‹©ï¼›Ridgeä½¿ç”¨L2æ­£åˆ™åŒ–ï¼Œåªèƒ½å‹ç¼©ç³»æ•°ä½†ä¸ä¼šä¸º0"
            },
            {
                question: "å¤šé‡å…±çº¿æ€§ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ï¼Ÿ",
                options: ["é¢„æµ‹å‡†ç¡®åº¦ä¸‹é™", "ç³»æ•°ä¼°è®¡ä¸ç¨³å®š", "æ¨¡å‹æ— æ³•æ”¶æ•›", "æ®‹å·®ä¸ç‹¬ç«‹"],
                correct: 1,
                explanation: "å¤šé‡å…±çº¿æ€§ä½¿å¾—ç³»æ•°ä¼°è®¡ä¸ç¨³å®šï¼Œå¾®å°çš„æ•°æ®å˜åŒ–å¯èƒ½å¯¼è‡´ç³»æ•°å¤§å¹…å˜åŒ–"
            }
        ];

        let score = 0;
        let currentQuestion = 0;

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                showResult();
                return;
            }

            const q = questions[currentQuestion];
            const html = `
                <div style="background: rgba(30, 41, 59, 0.9); padding: 30px; border-radius: 20px; max-width: 600px; margin: 50px auto;">
                    <h3 style="color: #22c55e; margin-bottom: 20px;">é—®é¢˜ ${currentQuestion + 1}/${questions.length}</h3>
                    <p style="font-size: 1.2rem; margin-bottom: 20px;">${q.question}</p>
                    <div style="display: grid; gap: 10px;">
                        ${q.options.map((opt, i) => `
                            <button onclick="selectAnswer(${i})" style="background: rgba(34, 197, 94, 0.1); border: 2px solid rgba(34, 197, 94, 0.3); color: #e2e8f0; padding: 15px; border-radius: 10px; cursor: pointer; text-align: left; transition: all 0.3s;">
                                ${String.fromCharCode(65 + i)}. ${opt}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', `<div id="quizModal" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 10000; display: flex; align-items: center; justify-content: center;">${html}</div>`);
        }

        window.selectAnswer = function(index) {
            const q = questions[currentQuestion];
            if (index === q.correct) {
                score++;
                alert('âœ… æ­£ç¡®ï¼\n\n' + q.explanation);
            } else {
                alert('âŒ é”™è¯¯ï¼\n\næ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š' + q.options[q.correct] + '\n\n' + q.explanation);
            }
            currentQuestion++;
            document.getElementById('quizModal').remove();
            showQuestion();
        };

        function showResult() {
            const percentage = (score / questions.length * 100).toFixed(0);
            const html = `
                <div style="background: rgba(30, 41, 59, 0.9); padding: 40px; border-radius: 20px; max-width: 600px; margin: 50px auto; text-align: center;">
                    <h2 style="color: #22c55e; margin-bottom: 30px;">æµ‹éªŒå®Œæˆï¼</h2>
                    <div style="font-size: 4rem; margin-bottom: 20px;">
                        ${percentage >= 80 ? 'ğŸ‰' : percentage >= 60 ? 'ğŸ‘' : 'ğŸ’ª'}
                    </div>
                    <p style="font-size: 2rem; color: #10b981; margin-bottom: 10px;">
                        å¾—åˆ†ï¼š${score}/${questions.length}
                    </p>
                    <p style="font-size: 1.5rem; color: #94a3b8; margin-bottom: 30px;">
                        æ­£ç¡®ç‡ï¼š${percentage}%
                    </p>
                    <button onclick="document.getElementById('quizModal').remove()" style="background: linear-gradient(135deg, #22c55e, #10b981); color: white; border: none; padding: 15px 30px; border-radius: 25px; cursor: pointer; font-size: 1.1rem;">
                        å…³é—­
                    </button>
                </div>
            `;

            document.getElementById('quizModal').innerHTML = html;
        }

        showQuestion();
    }

    function shareAchievement() {
        const text = `ğŸ‰ æˆ‘åˆšåˆšå®Œæˆäº†çº¿æ€§å›å½’çš„å­¦ä¹ ï¼

ğŸ“š å­¦ä¹ å†…å®¹ï¼š
- ç†è§£çº¿æ€§å›å½’çš„æ ¸å¿ƒæ¦‚å¿µ
- æŒæ¡æ­£è§„æ–¹ç¨‹å’Œæ¢¯åº¦ä¸‹é™
- å­¦ä¼šçŸ©é˜µå½¢å¼çš„æ¨å¯¼
- ç†è§£æ¨¡å‹è¯„ä¼°å’Œè¯Šæ–­
- æŒæ¡æ­£åˆ™åŒ–æ–¹æ³•
- å®Œæˆå¤šæ¸ é“å¹¿å‘ŠæŠ•æ”¾æ¡ˆä¾‹

å­¦ä¹ è¿›åº¦ï¼š${document.getElementById('progressPercent').textContent}
å·²å®Œæˆç« èŠ‚ï¼š${document.getElementById('completedSections').textContent}

çº¿æ€§å›å½’â€”â€”æ•°æ®åˆ†æçš„åŸºç¡€æ­¦å™¨ï¼

#æœºå™¨å­¦ä¹  #çº¿æ€§å›å½’ #æ•°æ®åˆ†æ #Python`;

        if (navigator.share) {
            navigator.share({
                title: 'çº¿æ€§å›å½’å­¦ä¹ æˆå°±',
                text: text,
                url: window.location.href
            }).catch(err => console.log('åˆ†äº«å–æ¶ˆ'));
        } else {
            navigator.clipboard.writeText(text).then(() => {
                alert('å­¦ä¹ æˆå°±å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
            });
        }
    }

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        // åˆå§‹åŒ–ä¸»é¢˜
        initTheme();

        // åˆå§‹åŒ–å¯¼èˆª
        initNavigation();

        // åˆå§‹åŒ–æ‰€æœ‰æ¼”ç¤º
        initScatterDemo();
        initParamsDemo();
        initFitDemo();
        initMSEDemo();
        initAnalyticalDemo();
        initGradientDemo();
        initResidualDemo();
        initRegularizationDemo();
        initDataPointsBackground();

        // æ¸å…¥åŠ¨ç”»
        const cards = document.querySelectorAll('.fade-in');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry, index) => {
                if (entry.isIntersecting) {
                    setTimeout(() => {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }, index * 100);
                }
            });
        });

        cards.forEach(card => {
            observer.observe(card);
        });
    });

    // å¹³æ»‘æ»šåŠ¨
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // æ§åˆ¶å°å½©è›‹
    console.log('%cğŸ“ˆ çº¿æ€§å›å½’å­¦ä¹ ç³»ç»Ÿå·²åŠ è½½ï¼', 'color: #22c55e; font-size: 20px; font-weight: bold;');
    console.log('%cå¯»æ‰¾æ•°æ®èƒŒåçš„è§„å¾‹ï¼Œé¢„æµ‹æœªæ¥çš„è¶‹åŠ¿', 'color: #10b981; font-size: 16px;');
    console.log('%cæç¤ºï¼šAlt+N åˆ‡æ¢å¯¼èˆªï¼ŒCtrl+S ä¿å­˜ç¬”è®°', 'color: #fbbf24; font-size: 14px;');
</script>
</body>
</html>