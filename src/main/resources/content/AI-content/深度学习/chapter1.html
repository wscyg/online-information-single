<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬1ç« ï¼šæœºå™¨æ„ŸçŸ¥çš„ç¬¬ä¸€å—ç – - æ„ŸçŸ¥æœºï¼ˆå¢å¼ºç‰ˆï¼‰| æ·±åº¦å­¦ä¹ ä¹‹æ—…</title>
    <meta name="description" content="ä»é›¶å¼€å§‹ç†è§£æ„ŸçŸ¥æœºï¼šä¸€ä¸ªæ·±å¤œçš„æ¢ç´¢ä¹‹æ—…ï¼Œä»å›°æƒ‘åˆ°é¡¿æ‚Ÿï¼Œæ­å¼€æ·±åº¦å­¦ä¹ çš„ç¬¬ä¸€å±‚é¢çº±">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <style>
        /* ===== CSSå˜é‡å®šä¹‰ ===== */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-dark: #0f172a;
            --bg-section: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #e2e8f0; /* æå‡äº®åº¦ä»¥æ»¡è¶³WCAG AAæ ‡å‡† */
            --text-muted: #cbd5e1; /* æå‡äº®åº¦ */
            --accent-red: #ef4444;
            --accent-green: #22c55e;
            --accent-blue: #06b6d4;
            --accent-yellow: #fbbf24;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.3);
            --animation-duration: 0.3s;
            --content-max-width: 1200px;
            --focus-ring: 0 0 0 3px rgba(139, 92, 246, 0.5);
        }

        /* äº®è‰²ä¸»é¢˜ */
        [data-theme="light"] {
            --bg-dark: #ffffff;
            --bg-section: #f8fafc;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        /* ===== å…¨å±€æ ·å¼ ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color var(--animation-duration) ease;
        }

        /* ===== ç„¦ç‚¹æ ·å¼ ===== */
        :focus-visible {
            outline: none;
            box-shadow: var(--focus-ring);
            border-radius: 0.25rem;
        }

        button:focus-visible,
        a:focus-visible {
            outline: none;
            box-shadow: var(--focus-ring);
        }

        /* ===== å¸ƒå±€ç»„ä»¶ ===== */
        .container {
            max-width: var(--content-max-width);
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* ===== å¯¼èˆªæ  ===== */
        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
            transition: transform 0.3s ease;
        }

        .nav-header.hidden {
            transform: translateY(-100%);
        }

        .nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .nav-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-title h1 {
            font-size: 1.25rem;
            font-weight: 600;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn-control {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            position: relative;
        }

        .btn-control:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .nav-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: var(--primary-gradient);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* ===== éš¾åº¦é€‰æ‹©å™¨ ===== */
        .difficulty-selector {
            position: fixed;
            right: 20px;
            top: 80px;
            background: var(--bg-section);
            border: 1px solid var(--border-color);
            border-radius: 0.5rem;
            padding: 1rem;
            z-index: 999;
            box-shadow: var(--shadow-lg);
        }

        .difficulty-selector h4 {
            color: var(--accent-purple);
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
        }

        .difficulty-option {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            cursor: pointer;
            border-radius: 0.25rem;
            transition: all 0.2s ease;
        }

        .difficulty-option:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .difficulty-option.active {
            background: rgba(139, 92, 246, 0.2);
            color: var(--accent-purple);
        }

        .difficulty-option input[type="radio"] {
            display: none;
        }

        /* ===== ä¾§è¾¹å¯¼èˆª ===== */
        .sidebar {
            position: fixed;
            left: -300px;
            top: 60px;
            bottom: 0;
            width: 300px;
            background: var(--bg-section);
            border-right: 1px solid var(--border-color);
            padding: 2rem;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 999;
        }

        .sidebar.open {
            transform: translateX(300px);
        }

        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 998;
        }

        .sidebar-overlay.active {
            display: block;
        }

        .toc-item {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            margin-bottom: 0.25rem;
        }

        .toc-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .toc-item.active {
            background: var(--primary-gradient);
            color: white;
        }

        /* ===== å­¦ä¹ ä¼™ä¼´ç³»ç»Ÿ ===== */
        .learning-buddy {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            background: var(--bg-section);
            border: 2px solid var(--accent-purple);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--shadow-lg);
            z-index: 900;
            transform: translateY(400px);
            transition: transform 0.5s ease;
        }

        .learning-buddy.active {
            transform: translateY(0);
        }

        .learning-buddy.minimized {
            width: auto;
            padding: 0;
            border-radius: 50%;
            overflow: hidden;
        }

        .learning-buddy.minimized .buddy-content {
            display: none;
        }

        .learning-buddy.minimized .buddy-avatar {
            margin: 0;
            cursor: pointer;
        }

        .buddy-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .buddy-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            flex-shrink: 0;
        }

        .buddy-controls {
            display: flex;
            gap: 0.5rem;
        }

        .buddy-control-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid var(--border-color);
            background: transparent;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .buddy-control-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .buddy-message {
            background: rgba(139, 92, 246, 0.1);
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 1rem;
            position: relative;
        }

        .buddy-message::before {
            content: '';
            position: absolute;
            top: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-bottom: 8px solid rgba(139, 92, 246, 0.1);
        }

        /* ===== ä¸»å†…å®¹åŒº ===== */
        main {
            margin-top: 80px;
            padding-bottom: 4rem;
        }

        /* ===== ç« èŠ‚å¡ç‰‡ ===== */
        .chapter-hero {
            background: var(--primary-gradient);
            padding: 4rem 0;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .chapter-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: pulse 10s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        .chapter-hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
        }

        .chapter-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease;
        }

        .chapter-hero p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== å†…å®¹åŒºå— ===== */
        .section-card {
            background: var(--bg-section);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            transition: transform var(--animation-duration) ease;
        }

        .section-card:hover {
            transform: translateY(-2px);
        }

        /* ===== å­¦ä¹ å¾ªç¯æŒ‡ç¤ºå™¨ ===== */
        .learning-loop {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
            padding: 1.5rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 1rem;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .loop-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            position: relative;
        }

        .loop-step.active {
            background: rgba(139, 92, 246, 0.2);
            transform: scale(1.1);
        }

        .loop-step .icon {
            font-size: 2rem;
        }

        .loop-step .label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .loop-connector {
            position: absolute;
            top: 50%;
            right: -2rem;
            width: 2rem;
            height: 2px;
            background: rgba(139, 92, 246, 0.3);
        }

        /* ===== æ•…äº‹å¡ç‰‡ ===== */
        .story-card {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(245, 158, 11, 0.1));
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(251, 191, 36, 0.2);
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: 'ğŸŒ™';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 5rem;
            opacity: 0.1;
            transform: rotate(15deg);
        }

        /* ===== äººç‰©å¯¹è¯ ===== */
        .dialogue-container {
            margin: 2rem 0;
            padding: 1.5rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 0.75rem;
        }

        .dialogue-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            animation: slideIn 0.5s ease;
        }

        .dialogue-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .dialogue-avatar.student {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
        }

        .dialogue-avatar.teacher {
            background: linear-gradient(135deg, #06b6d4, #0891b2);
        }

        .dialogue-avatar.friend {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }

        .dialogue-content {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 0.5rem;
            position: relative;
        }

        .dialogue-content::before {
            content: '';
            position: absolute;
            left: -8px;
            top: 15px;
            width: 0;
            height: 0;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid rgba(255, 255, 255, 0.05);
        }

        .dialogue-name {
            font-weight: bold;
            color: var(--accent-purple);
            margin-bottom: 0.25rem;
        }

        /* ===== æ¦‚å¿µå¡ç‰‡ç½‘æ ¼ ===== */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .concept-card {
            padding: 1.5rem;
            border-radius: 0.75rem;
            transition: all var(--animation-duration) ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
            transform: scaleX(0);
            transition: transform var(--animation-duration) ease;
        }

        .concept-card:hover::before {
            transform: scaleX(1);
        }

        .concept-card.why {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .concept-card.what {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .concept-card.how {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .concept-card.pitfall {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        /* ===== æ•°å­¦æ¨å¯¼å®¹å™¨ ===== */
        .math-derivation {
            background: rgba(79, 70, 229, 0.05);
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .math-step {
            margin: 1.5rem 0;
            padding-left: 2rem;
            position: relative;
        }

        .math-step::before {
            content: attr(data-step);
            position: absolute;
            left: 0;
            top: 0;
            width: 24px;
            height: 24px;
            background: var(--accent-purple);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
            font-weight: bold;
        }

        .math-explanation {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 0.5rem;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        /* ===== äº¤äº’å¼å¯è§†åŒ– ===== */
        .interactive-demo {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .demo-controls {
            display: flex;
            gap: 2rem;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .control-group label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        input[type="range"] {
            width: 150px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary-gradient);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-value {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-family: monospace;
            min-width: 50px;
            text-align: center;
        }

        #perceptron-canvas,
        #xor-canvas,
        #training-canvas,
        #iris-canvas,
        #hyperplane-canvas {
            display: block;
            margin: 0 auto;
            border-radius: 0.5rem;
            background: rgba(0, 0, 0, 0.2);
            cursor: crosshair;
        }

        /* ===== å³æ—¶ç»ƒä¹  ===== */
        .instant-practice {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .practice-question {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .practice-options {
            display: grid;
            gap: 1rem;
        }

        .practice-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            position: relative;
            overflow: hidden;
            text-align: left;
            width: 100%;
        }

        .practice-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .practice-option.selected {
            border-color: var(--accent-blue);
        }

        .practice-option.correct {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--accent-green);
        }

        .practice-option.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--accent-red);
        }

        .practice-feedback {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .practice-feedback.show {
            display: block;
        }

        .practice-feedback.correct {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: var(--accent-green);
        }

        .practice-feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--accent-red);
        }

        /* ===== å¸¸è§é”™è¯¯ä¸“æ  ===== */
        .common-mistakes {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .mistake-item {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 0.5rem;
        }

        .mistake-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .mistake-content h4 {
            color: var(--accent-red);
            margin-bottom: 0.5rem;
        }

        /* ===== ä»£ç å®¹å™¨ ===== */
        .code-container {
            margin: 2rem 0;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .code-header {
            background: #1a1a2e;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .code-header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .code-header-right {
            display: flex;
            gap: 0.5rem;
        }

        .code-tab {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
        }

        .code-tab.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .code-action {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-action:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .code-content {
            background: #0d1117;
            overflow-x: auto;
        }

        .code-content pre {
            margin: 0;
            padding: 1.5rem;
        }

        .code-content code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .code-output {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.875rem;
            display: none;
        }

        .code-output.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== å­¦ä¹ è·¯å¾„æ¨è ===== */
        .learning-path {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .path-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            cursor: pointer;
        }

        .path-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(4px);
        }

        .path-item.completed {
            opacity: 0.6;
        }

        .path-item.current {
            border: 2px solid var(--accent-purple);
            background: rgba(139, 92, 246, 0.1);
        }

        .path-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }

        .path-content h4 {
            color: var(--accent-purple);
            margin-bottom: 0.25rem;
        }

        .path-content p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        /* ===== æç¤ºæ¡† ===== */
        .tip {
            display: flex;
            gap: 1rem;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
        }

        .tip-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .tip-content {
            flex: 1;
        }

        .tip.info {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .tip.warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .tip.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .tip.success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        /* ===== æ·±åº¦æŒ‡ç¤ºå™¨ ===== */
        .depth-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            font-size: 0.875rem;
            margin-left: 1rem;
        }

        .depth-indicator.beginner {
            background: rgba(34, 197, 94, 0.1);
            border-color: rgba(34, 197, 94, 0.3);
            color: var(--accent-green);
        }

        .depth-indicator.intermediate {
            background: rgba(251, 191, 36, 0.1);
            border-color: rgba(251, 191, 36, 0.3);
            color: var(--accent-yellow);
        }

        .depth-indicator.advanced {
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
            color: var(--accent-red);
        }

        /* ===== å¯æŠ˜å å†…å®¹ ===== */
        .collapsible {
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
            border-radius: 0.75rem;
            overflow: hidden;
        }

        .collapsible-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: background var(--animation-duration) ease;
            user-select: none;
        }

        .collapsible-header:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .collapsible-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
        }

        .collapsible-icon {
            transition: transform var(--animation-duration) ease;
        }

        .collapsible.expanded .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--animation-duration) ease;
        }

        .collapsible.expanded .collapsible-content {
            max-height: 2000px;
        }

        .collapsible-inner {
            padding: 1.5rem;
        }

        /* ===== æŒ‰é’®æ ·å¼ ===== */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* ===== å­¦ä¹ æˆå°±ç³»ç»Ÿ ===== */
        .achievement-popup {
            position: fixed;
            top: 100px;
            right: -400px;
            width: 350px;
            background: var(--bg-section);
            border: 2px solid var(--accent-yellow);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            transition: right 0.5s ease;
        }

        .achievement-popup.show {
            right: 20px;
        }

        .achievement-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .achievement-icon {
            width: 60px;
            height: 60px;
            background: var(--accent-yellow);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
        }

        .achievement-content h3 {
            color: var(--accent-yellow);
            margin-bottom: 0.25rem;
        }

        /* ===== é€šçŸ¥æ ·å¼ ===== */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: var(--accent-green);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            z-index: 1000;
            animation: slideInRight 0.3s ease;
            box-shadow: var(--shadow-lg);
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ===== å“åº”å¼è®¾è®¡ ===== */
        @media (max-width: 1024px) {
            .chapter-hero h1 {
                font-size: 2.5rem;
            }

            .concept-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }

            .difficulty-selector {
                top: auto;
                bottom: 80px;
            }
        }

        @media (max-width: 768px) {
            .nav-title h1 {
                font-size: 1rem;
            }

            .section-card {
                padding: 1.5rem;
            }

            .chapter-hero {
                padding: 3rem 0;
            }

            .chapter-hero h1 {
                font-size: 2rem;
            }

            .chapter-hero p {
                font-size: 1rem;
            }

            .learning-loop {
                flex-direction: column;
                gap: 1rem;
            }

            .loop-connector {
                display: none;
            }

            .demo-controls {
                flex-direction: column;
                align-items: stretch;
            }

            input[type="range"] {
                width: 100%;
            }

            .learning-buddy {
                width: 90%;
                left: 5%;
                right: 5%;
            }
        }

        /* ===== æ‰“å°æ ·å¼ ===== */
        @media print {
            .nav-header,
            .sidebar,
            .btn,
            .demo-controls,
            .code-action,
            .difficulty-selector,
            .learning-buddy {
                display: none;
            }

            .section-card {
                page-break-inside: avoid;
                box-shadow: none;
                border: 1px solid #ddd;
            }

            body {
                background: white;
                color: black;
            }
        }

        /* ===== åŠ¨ç”»ä¼˜åŒ– ===== */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ===== å·¥å…·ç±» ===== */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }

        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }

        /* ===== åŠ è½½åŠ¨ç”» ===== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-purple);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
<!-- å¯¼èˆªæ  -->
<nav class="nav-header" role="navigation" aria-label="ä¸»å¯¼èˆª">
    <div class="container">
        <div class="nav-content">
            <div class="nav-title">
                <button id="toggle-sidebar" class="btn-control" aria-label="åˆ‡æ¢ä¾§è¾¹æ " tabindex="0">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <h1>ç¬¬1ç« ï¼šæœºå™¨æ„ŸçŸ¥çš„ç¬¬ä¸€å—ç –</h1>
            </div>
            <div class="nav-controls">
                <button id="toggle-buddy" class="btn-control" aria-label="å­¦ä¹ ä¼™ä¼´" tabindex="0">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </button>
                <button id="toggle-theme" class="btn-control" aria-label="åˆ‡æ¢ä¸»é¢˜" tabindex="0">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                    </svg>
                </button>
            </div>
        </div>
        <div class="nav-progress">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </div>
</nav>

<!-- éš¾åº¦é€‰æ‹©å™¨ -->
<div class="difficulty-selector">
    <h4>é€‰æ‹©å­¦ä¹ æ·±åº¦</h4>
    <label class="difficulty-option active" tabindex="0">
        <input type="radio" name="difficulty" value="beginner" checked>
        <span>ğŸŒ± åˆå­¦è€…</span>
    </label>
    <label class="difficulty-option" tabindex="0">
        <input type="radio" name="difficulty" value="intermediate">
        <span>ğŸŒ¿ è¿›é˜¶</span>
    </label>
    <label class="difficulty-option" tabindex="0">
        <input type="radio" name="difficulty" value="advanced">
        <span>ğŸŒ³ æ·±å…¥</span>
    </label>
</div>

<!-- ä¾§è¾¹æ  -->
<aside class="sidebar" id="sidebar" role="navigation" aria-label="ç« èŠ‚å¯¼èˆª">
    <h3 style="margin-bottom: 1.5rem; color: var(--accent-purple);">ç›®å½•å¯¼èˆª</h3>
    <nav>
        <a href="#intro" class="toc-item active" tabindex="0">å¼•è¨€ï¼šæ·±å¤œçš„å›°æƒ‘</a>
        <a href="#problem" class="toc-item" tabindex="0">å‘ç°é—®é¢˜ï¼šçº¿æ€§åˆ†ç±»çš„æŒ‘æˆ˜</a>
        <a href="#biology" class="toc-item" tabindex="0">ç”Ÿç‰©å¯å‘ï¼šç¥ç»å…ƒçš„å·¥ä½œåŸç†</a>
        <a href="#math-model" class="toc-item" tabindex="0">æ•°å­¦å»ºæ¨¡ï¼šæ„ŸçŸ¥æœºçš„è¯ç”Ÿ</a>
        <a href="#learning" class="toc-item" tabindex="0">å­¦ä¹ ç®—æ³•ï¼šè®©æœºå™¨è‡ªå·±å­¦ä¹ </a>
        <a href="#implementation" class="toc-item" tabindex="0">ä»£ç å®ç°ï¼šä»ç†è®ºåˆ°å®è·µ</a>
        <a href="#experiment" class="toc-item" tabindex="0">å®æˆ˜æ¼”ç»ƒï¼šé¸¢å°¾èŠ±åˆ†ç±»</a>
        <a href="#limitation" class="toc-item" tabindex="0">è‡´å‘½ç¼ºé™·ï¼šXORé—®é¢˜</a>
        <a href="#history" class="toc-item" tabindex="0">å†å²å›é¡¾ï¼šAIçš„ç¬¬ä¸€ä¸ªå†¬å¤©</a>
        <a href="#breakthrough" class="toc-item" tabindex="0">çªç ´æ€è€ƒï¼šæ·±åº¦çš„å¿…è¦æ€§</a>
        <a href="#summary" class="toc-item" tabindex="0">æ€»ç»“ï¼šæ‰¿å‰å¯å</a>
    </nav>
</aside>

<!-- ä¾§è¾¹æ é®ç½© -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<!-- å­¦ä¹ ä¼™ä¼´ç³»ç»Ÿ -->
<div class="learning-buddy" id="learning-buddy">
    <div class="buddy-header">
        <div class="buddy-avatar" id="buddy-avatar">ğŸ¤–</div>
        <div class="buddy-controls">
            <button class="buddy-control-btn" id="minimize-buddy" aria-label="æœ€å°åŒ–" tabindex="0">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </button>
            <button class="buddy-control-btn" id="close-buddy" aria-label="å…³é—­" tabindex="0">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>
    </div>
    <div class="buddy-content">
        <div class="buddy-message">
            <p>å—¨ï¼æˆ‘æ˜¯ä½ çš„AIå­¦ä¹ åŠ©æ‰‹å°æ™ºã€‚æˆ‘æ³¨æ„åˆ°ä½ åœ¨å­¦ä¹ æ„ŸçŸ¥æœºï¼Œæœ‰ä»€ä¹ˆéœ€è¦å¸®åŠ©çš„å—ï¼Ÿ</p>
        </div>
        <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
            <button class="btn btn-secondary" onclick="getBuddyHint()" tabindex="0">ç»™æˆ‘æç¤º</button>
            <button class="btn btn-secondary" onclick="getBuddySummary()" tabindex="0">æ€»ç»“è¦ç‚¹</button>
        </div>
    </div>
</div>

<!-- æˆå°±å¼¹çª— -->
<div class="achievement-popup" id="achievement-popup">
    <div class="achievement-header">
        <div class="achievement-icon">ğŸ†</div>
        <div class="achievement-content">
            <h3>è§£é”æˆå°±ï¼</h3>
            <p id="achievement-text">å®Œæˆç¬¬ä¸€ä¸ªæ¦‚å¿µå­¦ä¹ </p>
        </div>
    </div>
    <div class="progress" style="margin-top: 1rem;">
        <div style="height: 8px; background: rgba(255, 255, 255, 0.1); border-radius: 4px;">
            <div id="achievement-progress" style="height: 100%; width: 20%; background: var(--accent-yellow); border-radius: 4px;"></div>
        </div>
        <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.5rem;">
            <span id="achievement-count">1</span>/5 å®Œæˆæœ¬ç« å­¦ä¹ 
        </p>
    </div>
</div>

<!-- ä¸»å†…å®¹ -->
<main>
    <!-- ç« èŠ‚æ ‡é¢˜ -->
    <section class="chapter-hero">
        <div class="container">
            <div class="chapter-hero-content">
                <h1>æœºå™¨æ„ŸçŸ¥çš„ç¬¬ä¸€å—ç –ï¼šæ„ŸçŸ¥æœº</h1>
                <p>ä»ç”Ÿç‰©ç¥ç»å…ƒåˆ°äººå·¥æ™ºèƒ½çš„ç¬¬ä¸€æ­¥ â€”â€” è®©æœºå™¨å­¦ä¼š"çœ‹è§"ä¸–ç•Œ</p>
                <div class="mt-4">
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                        ğŸ§  ä»¿ç”Ÿå­¦ä¹ 
                    </span>
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                        â±ï¸ 60åˆ†é’Ÿ
                    </span>
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                        ğŸ¯ å¥ åŸºä¹‹ä½œ
                    </span>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- å­¦ä¹ ç›®æ ‡ -->
        <section class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ“š æœ¬ç« å­¦ä¹ ç›®æ ‡</h2>
            <div class="concept-grid">
                <div class="concept-card what" tabindex="0">
                    <h3 style="color: var(--accent-green); margin-bottom: 0.5rem;">âœ“ ç†è§£æ ¸å¿ƒæ¦‚å¿µ</h3>
                    <p>æŒæ¡æ„ŸçŸ¥æœºçš„æ•°å­¦æ¨¡å‹å’Œå‡ ä½•æ„ä¹‰ï¼Œç†è§£çº¿æ€§åˆ†ç±»çš„æœ¬è´¨</p>
                </div>
                <div class="concept-card how" tabindex="0">
                    <h3 style="color: var(--accent-blue); margin-bottom: 0.5rem;">âœ“ æŒæ¡å­¦ä¹ ç®—æ³•</h3>
                    <p>æ·±å…¥ç†è§£æ„ŸçŸ¥æœºå­¦ä¹ è§„åˆ™ï¼Œä½“ä¼šæœºå™¨å­¦ä¹ çš„åŸºæœ¬æ€æƒ³</p>
                </div>
                <div class="concept-card why" tabindex="0">
                    <h3 style="color: var(--accent-red); margin-bottom: 0.5rem;">âœ“ å‘ç°æ ¹æœ¬å±€é™</h3>
                    <p>é€šè¿‡XORé—®é¢˜è®¤è¯†çº¿æ€§æ¨¡å‹çš„å¤©èŠ±æ¿ï¼Œç†è§£æ·±åº¦çš„å¿…è¦æ€§</p>
                </div>
                <div class="concept-card pitfall" tabindex="0">
                    <h3 style="color: var(--accent-yellow); margin-bottom: 0.5rem;">âœ“ æ±²å–å†å²æ•™è®­</h3>
                    <p>äº†è§£AIç¬¬ä¸€ä¸ªå†¬å¤©çš„æ¥é¾™å»è„‰ï¼ŒåŸ¹å…»æ‰¹åˆ¤æ€§æ€ç»´</p>
                </div>
            </div>
        </section>

        <!-- å­¦ä¹ è·¯å¾„æ¨è -->
        <section class="learning-path">
            <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ—ºï¸ æ¨èå­¦ä¹ è·¯å¾„</h3>
            <div class="path-item completed" tabindex="0">
                <div class="path-icon">âœ“</div>
                <div class="path-content">
                    <h4>å‰ç½®çŸ¥è¯†æ£€æŸ¥</h4>
                    <p>çº¿æ€§ä»£æ•°åŸºç¡€ã€Pythonç¼–ç¨‹</p>
                </div>
            </div>
            <div class="path-item current" tabindex="0">
                <div class="path-icon">ğŸ“</div>
                <div class="path-content">
                    <h4>å½“å‰ç« èŠ‚ï¼šæ„ŸçŸ¥æœº</h4>
                    <p>æ·±åº¦å­¦ä¹ çš„ç¬¬ä¸€å—åŸºçŸ³</p>
                </div>
            </div>
            <div class="path-item" tabindex="0">
                <div class="path-icon">ğŸ”œ</div>
                <div class="path-content">
                    <h4>ä¸‹ä¸€ç«™ï¼šåå‘ä¼ æ’­</h4>
                    <p>æ·±åº¦ç½‘ç»œçš„è®­ç»ƒæ ¸å¿ƒ</p>
                </div>
            </div>
        </section>

        <!-- å­¦ä¹ å¾ªç¯1ï¼šå¼•è¨€æ•…äº‹ -->
        <section id="intro" class="section-card">
            <div class="learning-loop">
                <div class="loop-step active">
                    <span class="icon">ğŸ¤”</span>
                    <span class="label">å¼•å‘å¥½å¥‡</span>
                    <span class="loop-connector"></span>
                </div>
                <div class="loop-step">
                    <span class="icon">ğŸ“–</span>
                    <span class="label">æ ¸å¿ƒæ¦‚å¿µ</span>
                    <span class="loop-connector"></span>
                </div>
                <div class="loop-step">
                    <span class="icon">ğŸ¯</span>
                    <span class="label">å³æ—¶ç»ƒä¹ </span>
                    <span class="loop-connector"></span>
                </div>
                <div class="loop-step">
                    <span class="icon">ğŸ’¡</span>
                    <span class="label">æ€»ç»“æå‡</span>
                </div>
            </div>

            <div class="story-card">
                <h2 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸŒ™ å‡Œæ™¨2ç‚¹37åˆ†ï¼ŒåŒ—èˆªæ–°ä¸»æ¥¼çš„ä¸çœ ä¹‹å¤œ</h2>

                <!-- å¢å¼ºçš„äººç‰©èƒŒæ™¯ -->
                <div style="background: rgba(0, 0, 0, 0.2); padding: 1rem; border-radius: 0.5rem; margin-bottom: 2rem;">
                    <p style="font-style: italic; color: var(--text-secondary);">
                        é™ˆæ˜ï¼Œè®¡ç®—æœºç³»å¤§ä¸‰å­¦ç”Ÿï¼Œç»°å·"å°é™ˆ"ã€‚å¹³æ—¶æˆç»©ä¸­ç­‰ï¼Œä½†å¯¹AIå……æ»¡çƒ­æƒ…ã€‚
                        è¿™æ˜¯ä»–ç¬¬ä¸‰æ¬¡å°è¯•å®Œæˆæœºå™¨å­¦ä¹ ä½œä¸šï¼Œå‰ä¸¤æ¬¡éƒ½ä»¥å¤±è´¥å‘Šç»ˆ...
                    </p>
                </div>

                <!-- åœºæ™¯è®¾å®š -->
                <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center; margin-bottom: 2rem;">
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #fbbf24, #f59e0b); display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 1rem; box-shadow: 0 8px 25px rgba(251, 191, 36, 0.3);">
                            ğŸ˜µ
                        </div>
                        <div style="color: var(--text-secondary); font-size: 1.1rem;">
                            <strong style="color: var(--accent-yellow);">ç–²æƒ«çš„å°é™ˆ</strong><br>
                            "ä¸ºä»€ä¹ˆçœ‹èµ·æ¥è¿™ä¹ˆç®€å•çš„é—®é¢˜ï¼Œå°±æ˜¯è§£å†³ä¸äº†..."
                        </div>
                    </div>

                    <div style="color: var(--accent-purple); font-size: 2rem;">ğŸ’­</div>

                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #06b6d4, #0891b2); display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto 1rem; box-shadow: 0 8px 25px rgba(6, 182, 212, 0.3);">
                            ğŸ“Š
                        </div>
                        <div style="color: var(--text-secondary); font-size: 1.1rem;">
                            <strong style="color: var(--accent-blue);">ä½œä¸šè¦æ±‚</strong><br>
                            "æ ¹æ®å¹³æ—¶æˆç»©ï¼Œé¢„æµ‹å­¦ç”Ÿæ˜¯å¦èƒ½é€šè¿‡è€ƒè¯•"
                        </div>
                    </div>
                </div>

                <!-- å†…å¿ƒç‹¬ç™½ -->
                <div style="background: rgba(139, 92, 246, 0.1); padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 2rem;">
                    <p style="font-style: italic;">
                        ğŸ’­ "æˆ‘å·²ç»è¯•äº†å„ç§if-elseç»„åˆï¼Œç”šè‡³ç”¨äº†åå‡ ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œä½†å‡†ç¡®ç‡å°±æ˜¯ä¸Šä¸å»ã€‚
                        éš¾é“çœŸçš„è¦ä¸€ä¸ªä¸ªè°ƒæ•´é˜ˆå€¼å—ï¼Ÿä¸€å®šæœ‰æ›´èªæ˜çš„æ–¹æ³•..."
                    </p>
                </div>

                <!-- å¯¹è¯åœºæ™¯ -->
                <div class="dialogue-container">
                    <div class="dialogue-item">
                        <div class="dialogue-avatar student">ğŸ˜“</div>
                        <div class="dialogue-content">
                            <div class="dialogue-name">å°é™ˆ</div>
                            <p>æˆ‘çš„ç¬¬ä¸€æ¬¡å°è¯•æ˜¯è¿™æ ·çš„...</p>
                        </div>
                    </div>
                </div>

                <div class="tip info">
                    <span class="tip-icon">ğŸ’»</span>
                    <div class="tip-content">
                        <strong>ç¬¬ä¸€æ¬¡å°è¯•ï¼šæš´åŠ›if-else</strong><br>
                        <code style="background: rgba(0,0,0,0.2); padding: 0.2rem 0.5rem; border-radius: 4px;">
                            if (ä½œä¸šåˆ†æ•° > 60 and æœŸä¸­æˆç»© > 60): return "é€šè¿‡"
                        </code><br><br>
                        ç»“æœï¼šå‡†ç¡®ç‡åªæœ‰65%ï¼<br>
                        "ä¸å¯¹å•Šï¼Œæœ‰äº›å­¦ç”Ÿä½œä¸š80åˆ†ã€æœŸä¸­50åˆ†ä¹Ÿé€šè¿‡äº†..."
                    </div>
                </div>

                <div class="dialogue-container mt-3">
                    <div class="dialogue-item">
                        <div class="dialogue-avatar friend">ğŸ¤“</div>
                        <div class="dialogue-content">
                            <div class="dialogue-name">å®¤å‹å°æï¼ˆå‡Œæ™¨è¢«åµé†’ï¼‰</div>
                            <p>ä½ ä¸ºå•¥ä¸è¯•è¯•åŠ æƒå¹³å‡ï¼Ÿå°±åƒGPAè®¡ç®—é‚£æ ·ã€‚</p>
                        </div>
                    </div>
                    <div class="dialogue-item">
                        <div class="dialogue-avatar student">ğŸ¤”</div>
                        <div class="dialogue-content">
                            <div class="dialogue-name">å°é™ˆ</div>
                            <p>å¯¹å•Šï¼å¯æ˜¯æƒé‡è¯¥æ€ä¹ˆå®šå‘¢ï¼Ÿ</p>
                        </div>
                    </div>
                </div>

                <div class="tip error mt-3">
                    <span class="tip-icon">ğŸ˜±</span>
                    <div class="tip-content">
                        <strong>ç¬¬äºŒæ¬¡å°è¯•ï¼šå¤æ‚è§„åˆ™</strong><br>
                        <code style="background: rgba(0,0,0,0.2); padding: 0.2rem 0.5rem; border-radius: 4px;">
                            if (0.6*ä½œä¸š + 0.4*æœŸä¸­ > 65): return "é€šè¿‡"
                        </code><br><br>
                        ç»“æœï¼šå‡†ç¡®ç‡æå‡åˆ°72%ï¼Œä½†æ˜¯...<br>
                        "æƒé‡0.6å’Œ0.4æ˜¯æˆ‘ççŒœçš„ï¼Œæ€ä¹ˆæ‰èƒ½æ‰¾åˆ°æœ€ä½³æƒé‡ï¼Ÿ"
                    </div>
                </div>

                <!-- è½¬æŠ˜ç‚¹ -->
                <div class="dialogue-container mt-3">
                    <div class="dialogue-item">
                        <div class="dialogue-avatar teacher">ğŸ‘¨â€ğŸ«</div>
                        <div class="dialogue-content">
                            <div class="dialogue-name">ç‹æ•™æˆï¼ˆçªç„¶å‡ºç°åœ¨å®éªŒå®¤ï¼‰</div>
                            <p>å°é™ˆï¼Œè¿˜åœ¨ç†¬å¤œå•Šï¼Ÿä½ é‡åˆ°çš„é—®é¢˜ï¼Œå…¶å®60å¹´å‰å°±æœ‰äººè§£å†³äº†ã€‚
                                å¬è¯´è¿‡æ„ŸçŸ¥æœºå—ï¼Ÿ</p>
                        </div>
                    </div>
                </div>

                <div class="tip warning mt-3">
                    <span class="tip-icon">ğŸ’¡</span>
                    <div class="tip-content">
                        <strong>å…³é”®é—®é¢˜æµ®ç°</strong><br>
                        1. å¦‚ä½•æ‰¾åˆ°æœ€ä½³çš„åˆ†ç•Œçº¿ï¼Ÿ<br>
                        2. èƒ½å¦è®©æœºå™¨è‡ªå·±å­¦ä¹ è¿™æ¡çº¿ï¼Ÿ<br>
                        3. è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ
                    </div>
                </div>
            </div>

            <!-- å³æ—¶ç»ƒä¹  -->
            <div class="instant-practice">
                <h3 style="color: var(--accent-green); margin-bottom: 1rem;">ğŸ¯ æ€è€ƒç»ƒä¹ </h3>
                <div class="practice-question">
                    åœ¨å°é™ˆçš„é—®é¢˜ä¸­ï¼Œä»€ä¹ˆæ˜¯æœ€å…³é”®çš„æŒ‘æˆ˜ï¼Ÿ
                </div>
                <div class="practice-options">
                    <button class="practice-option" data-answer="a" tabindex="0">
                        A. æ•°æ®é‡å¤ªå°‘
                    </button>
                    <button class="practice-option" data-answer="b" tabindex="0">
                        B. ä¸çŸ¥é“å¦‚ä½•ç¡®å®šæœ€ä½³çš„æƒé‡å‚æ•°
                    </button>
                    <button class="practice-option" data-answer="c" tabindex="0">
                        C. Pythonä»£ç å†™å¾—ä¸å¥½
                    </button>
                    <button class="practice-option" data-answer="d" tabindex="0">
                        D. è®¡ç®—æœºæ€§èƒ½ä¸å¤Ÿ
                    </button>
                </div>
                <div class="practice-feedback" id="practice-feedback-1"></div>
            </div>
        </section>

        <!-- å­¦ä¹ å¾ªç¯2ï¼šå‘ç°é—®é¢˜ -->
        <section id="problem" class="section-card">
            <div class="learning-loop">
                <div class="loop-step">
                    <span class="icon">ğŸ¤”</span>
                    <span class="label">å¼•å‘å¥½å¥‡</span>
                    <span class="loop-connector"></span>
                </div>
                <div class="loop-step active">
                    <span class="icon">ğŸ“–</span>
                    <span class="label">æ ¸å¿ƒæ¦‚å¿µ</span>
                    <span class="loop-connector"></span>
                </div>
                <div class="loop-step">
                    <span class="icon">ğŸ¯</span>
                    <span class="label">å³æ—¶ç»ƒä¹ </span>
                    <span class="loop-connector"></span>
                </div>
                <div class="loop-step">
                    <span class="icon">ğŸ’¡</span>
                    <span class="label">æ€»ç»“æå‡</span>
                </div>
            </div>

            <h2 style="color: var(--accent-red); margin-bottom: 1.5rem;">
                ğŸ¯ å¯è§†åŒ–é—®é¢˜ï¼šåˆ°åº•åœ¨å¯»æ‰¾ä»€ä¹ˆï¼Ÿ
                <span class="depth-indicator beginner">åˆå­¦è€…</span>
            </h2>

            <!-- äº¤äº’å¼å¯è§†åŒ– -->
            <div class="interactive-demo">
                <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">ğŸ“Š å­¦ç”Ÿæˆç»©åˆ†å¸ƒï¼ˆäº¤äº’å¼ï¼‰</h3>

                <div class="demo-controls">
                    <div class="control-group">
                        <label>æƒé‡ wâ‚ï¼ˆä½œä¸šåˆ†æ•°ï¼‰</label>
                        <div class="slider-container">
                            <input type="range" id="w1-slider" min="-2" max="2" step="0.1" value="1">
                            <span class="slider-value" id="w1-value">1.0</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label>æƒé‡ wâ‚‚ï¼ˆæœŸä¸­æˆç»©ï¼‰</label>
                        <div class="slider-container">
                            <input type="range" id="w2-slider" min="-2" max="2" step="0.1" value="1">
                            <span class="slider-value" id="w2-value">1.0</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label>åç½® b</label>
                        <div class="slider-container">
                            <input type="range" id="b-slider" min="-200" max="0" step="10" value="-120">
                            <span class="slider-value" id="b-value">-120</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="autoTrain()" tabindex="0">ğŸ¯ è‡ªåŠ¨è®­ç»ƒ</button>
                    <button class="btn btn-secondary" onclick="resetParams()" tabindex="0">ğŸ”„ é‡ç½®</button>
                </div>

                <canvas id="perceptron-canvas" width="800" height="400"></canvas>

                <div style="margin-top: 1rem; text-align: center;">
                    <span style="color: var(--accent-green);">æ­£ç¡®åˆ†ç±»ï¼š<span id="correct-count">0</span></span>
                    <span style="margin: 0 2rem;">|</span>
                    <span style="color: var(--accent-red);">é”™è¯¯åˆ†ç±»ï¼š<span id="error-count">0</span></span>
                    <span style="margin: 0 2rem;">|</span>
                    <span style="color: var(--accent-yellow);">å‡†ç¡®ç‡ï¼š<span id="accuracy">0%</span></span>
                </div>

                <div class="tip info mt-3">
                    <span class="tip-icon">ğŸ’¡</span>
                    <div class="tip-content">
                        <strong>äº¤äº’æç¤ºï¼š</strong><br>
                        â€¢ æ‹–åŠ¨æ»‘å—è°ƒæ•´å‚æ•°ï¼Œè§‚å¯Ÿå†³ç­–è¾¹ç•Œçš„å˜åŒ–<br>
                        â€¢ ç‚¹å‡»ç”»å¸ƒæ·»åŠ æ–°çš„æ•°æ®ç‚¹<br>
                        â€¢ ç‚¹å‡»"è‡ªåŠ¨è®­ç»ƒ"è®©æ„ŸçŸ¥æœºè‡ªå·±å­¦ä¹ æœ€ä½³å‚æ•°
                    </div>
                </div>
            </div>

            <!-- æ·±å…¥ç†è§£ -->
            <div class="collapsible mt-4 beginner-content">
                <div class="collapsible-header" tabindex="0">
                    <div class="collapsible-title">
                        <span>ğŸ¤”</span>
                        <span>æ·±å…¥ç†è§£ï¼šä»€ä¹ˆæ˜¯çº¿æ€§å¯åˆ†ï¼Ÿ</span>
                        <span class="depth-indicator beginner">åˆå­¦è€…</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <p>æƒ³è±¡ä½ æ˜¯ä¸€ä¸ªå†œåœºä¸»ï¼Œè¦æŠŠè‹¹æœå’Œæ©™å­åˆ†å¼€ï¼š</p>
                        <ul style="line-height: 2; margin-top: 1rem;">
                            <li>ğŸ å¦‚æœèƒ½ç”¨ä¸€æ¡ç›´çº¿å®Œå…¨åˆ†å¼€ â†’ çº¿æ€§å¯åˆ†</li>
                            <li>ğŸŠ å¦‚æœæ€ä¹ˆç”»ç›´çº¿éƒ½ä¸èƒ½å®Œå…¨åˆ†å¼€ â†’ çº¿æ€§ä¸å¯åˆ†</li>
                        </ul>
                        <div style="background: rgba(139, 92, 246, 0.1); padding: 1rem; border-radius: 0.5rem; margin-top: 1rem;">
                            <strong>æ•°å­¦è¡¨è¾¾ï¼š</strong><br>
                            å­˜åœ¨wå’Œbï¼Œä½¿å¾—å¯¹æ‰€æœ‰æ ·æœ¬ï¼š<br>
                            â€¢ æ­£ç±»ï¼šwÂ·x + b > 0<br>
                            â€¢ è´Ÿç±»ï¼šwÂ·x + b < 0
                        </div>
                    </div>
                </div>
            </div>

            <!-- è¿›é˜¶å†…å®¹ -->
            <div class="collapsible mt-2 intermediate-content" style="display: none;">
                <div class="collapsible-header" tabindex="0">
                    <div class="collapsible-title">
                        <span>ğŸ”¬</span>
                        <span>è¿›é˜¶ï¼šå†³ç­–è¾¹ç•Œçš„å‡ ä½•æ„ä¹‰</span>
                        <span class="depth-indicator intermediate">è¿›é˜¶</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <div class="math-derivation">
                            <h4>ä¸ºä»€ä¹ˆ wÂ·x + b = 0 è¡¨ç¤ºä¸€æ¡ç›´çº¿ï¼Ÿ</h4>

                            <div class="math-step" data-step="1">
                                <strong>å±•å¼€å†…ç§¯ï¼š</strong><br>
                                wÂ·x + b = wâ‚xâ‚ + wâ‚‚xâ‚‚ + b = 0
                            </div>

                            <div class="math-step" data-step="2">
                                <strong>å˜å½¢ä¸ºæ–œæˆªå¼ï¼š</strong><br>
                                xâ‚‚ = -(wâ‚/wâ‚‚)xâ‚ - (b/wâ‚‚)
                                <div class="math-explanation">
                                    è¿™å°±æ˜¯ç›´çº¿æ–¹ç¨‹ y = mx + c çš„å½¢å¼ï¼<br>
                                    æ–œç‡ m = -wâ‚/wâ‚‚ï¼Œæˆªè· c = -b/wâ‚‚
                                </div>
                            </div>

                            <div class="math-step" data-step="3">
                                <strong>æ³•å‘é‡è§£é‡Šï¼š</strong><br>
                                å‘é‡ w = (wâ‚, wâ‚‚) å‚ç›´äºå†³ç­–è¾¹ç•Œ
                                <div class="math-explanation">
                                    w æŒ‡å‘æ­£ç±»æ–¹å‘ï¼Œå†³å®šäº†åˆ†ç±»çš„æ–¹å‘æ€§
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³æ—¶ç»ƒä¹  -->
            <div class="instant-practice">
                <h3 style="color: var(--accent-green); margin-bottom: 1rem;">ğŸ¯ å¿«é€Ÿæ£€éªŒ</h3>
                <div class="practice-question">
                    åœ¨äºŒç»´å¹³é¢ä¸Šï¼Œæ–¹ç¨‹ wâ‚xâ‚ + wâ‚‚xâ‚‚ + b = 0 è¡¨ç¤ºçš„æ˜¯ä»€ä¹ˆï¼Ÿ
                </div>
                <div class="practice-options">
                    <button class="practice-option" data-answer="a" tabindex="0">
                        A. ä¸€ä¸ªç‚¹
                    </button>
                    <button class="practice-option" data-answer="b" tabindex="0">
                        B. ä¸€æ¡ç›´çº¿
                    </button>
                    <button class="practice-option" data-answer="c" tabindex="0">
                        C. ä¸€ä¸ªåœ†
                    </button>
                    <button class="practice-option" data-answer="d" tabindex="0">
                        D. ä¸€ä¸ªæŠ›ç‰©çº¿
                    </button>
                </div>
                <div class="practice-feedback" id="practice-feedback-2"></div>
            </div>
        </section>

        <!-- ç”Ÿç‰©å¯å‘éƒ¨åˆ† -->
        <section id="biology" class="section-card">
            <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">
                ğŸ§  ç”Ÿç‰©å¯å‘ï¼šå‘å¤§è‡ªç„¶å­¦ä¹ 
                <span class="depth-indicator beginner">åˆå­¦è€…</span>
            </h2>

            <!-- æ•…äº‹åŒ–çš„å¼•å…¥ -->
            <div class="dialogue-container">
                <div class="dialogue-item">
                    <div class="dialogue-avatar teacher">ğŸ‘¨â€ğŸ«</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">ç‹æ•™æˆ</div>
                        <p>å°é™ˆï¼Œä½ çŸ¥é“å—ï¼Ÿæˆ‘ä»¬çš„å¤§è„‘æœ‰å¤§çº¦860äº¿ä¸ªç¥ç»å…ƒï¼Œæ¯ä¸ªç¥ç»å…ƒéƒ½åœ¨åšä¸€ä»¶ç®€å•çš„äº‹ï¼š
                            æ”¶é›†ä¿¡å·ï¼Œåˆ¤æ–­æ˜¯å¦è¦"æ¿€æ´»"ã€‚</p>
                    </div>
                </div>
                <div class="dialogue-item">
                    <div class="dialogue-avatar student">ğŸ˜®</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">å°é™ˆ</div>
                        <p>å°±åƒæˆ‘åœ¨åˆ¤æ–­å­¦ç”Ÿæ˜¯å¦é€šè¿‡è€ƒè¯•ï¼Ÿæ”¶é›†åˆ†æ•°ï¼Œç„¶åå†³å®šï¼Ÿ</p>
                    </div>
                </div>
                <div class="dialogue-item">
                    <div class="dialogue-avatar teacher">ğŸ‘¨â€ğŸ«</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">ç‹æ•™æˆ</div>
                        <p>æ²¡é”™ï¼1943å¹´ï¼ŒMcCullochå’ŒPittså°±æ˜¯è¿™ä¹ˆæƒ³çš„ã€‚è®©æˆ‘ç”»ç»™ä½ çœ‹...</p>
                    </div>
                </div>
            </div>

            <!-- ç¥ç»å…ƒå¯¹æ¯”å¯è§†åŒ– -->
            <div class="interactive-demo">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ”¬ ç”Ÿç‰©ç¥ç»å…ƒ vs äººå·¥ç¥ç»å…ƒ</h3>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <!-- ç”Ÿç‰©ç¥ç»å…ƒ -->
                    <div style="text-align: center;">
                        <h4 style="color: var(--accent-green);">ç”Ÿç‰©ç¥ç»å…ƒ</h4>
                        <canvas id="bio-neuron-canvas" width="400" height="300"></canvas>
                        <div style="text-align: left; margin-top: 1rem; padding: 1rem; background: rgba(34, 197, 94, 0.1); border-radius: 0.5rem;">
                            <p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
                            <ol style="line-height: 1.8;">
                                <li>æ ‘çªæ¥æ”¶å…¶ä»–ç¥ç»å…ƒçš„ä¿¡å·</li>
                                <li>ç»†èƒä½“æ•´åˆæ‰€æœ‰è¾“å…¥ä¿¡å·</li>
                                <li>å½“æ€»å’Œè¶…è¿‡é˜ˆå€¼æ—¶ï¼Œäº§ç”ŸåŠ¨ä½œç”µä½</li>
                                <li>é€šè¿‡è½´çªä¼ é€’ä¿¡å·ç»™å…¶ä»–ç¥ç»å…ƒ</li>
                            </ol>
                        </div>
                    </div>

                    <!-- äººå·¥ç¥ç»å…ƒ -->
                    <div style="text-align: center;">
                        <h4 style="color: var(--accent-purple);">äººå·¥ç¥ç»å…ƒï¼ˆæ„ŸçŸ¥æœºï¼‰</h4>
                        <canvas id="artificial-neuron-canvas" width="400" height="300"></canvas>
                        <div style="text-align: left; margin-top: 1rem; padding: 1rem; background: rgba(139, 92, 246, 0.1); border-radius: 0.5rem;">
                            <p><strong>æ•°å­¦æ¨¡å‹ï¼š</strong></p>
                            <ol style="line-height: 1.8;">
                                <li>è¾“å…¥ï¼šxâ‚, xâ‚‚, ..., xâ‚™</li>
                                <li>æƒé‡ï¼šwâ‚, wâ‚‚, ..., wâ‚™</li>
                                <li>åŠ æƒå’Œï¼šÎ£(wáµ¢xáµ¢) + b</li>
                                <li>æ¿€æ´»å‡½æ•°ï¼šsign(åŠ æƒå’Œ)</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <div class="tip info mt-3">
                    <span class="tip-icon">ğŸ”—</span>
                    <div class="tip-content">
                        <strong>å…³é”®å¯¹åº”å…³ç³»ï¼š</strong><br>
                        â€¢ æ ‘çª â†” è¾“å…¥<br>
                        â€¢ çªè§¦å¼ºåº¦ â†” æƒé‡<br>
                        â€¢ ç»†èƒä½“ â†” æ±‚å’Œå•å…ƒ<br>
                        â€¢ æ¿€æ´»é˜ˆå€¼ â†” åç½®<br>
                        â€¢ è½´çª â†” è¾“å‡º
                    </div>
                </div>
            </div>

            <!-- å†å²èƒŒæ™¯ -->
            <div class="collapsible mt-4">
                <div class="collapsible-header" tabindex="0">
                    <div class="collapsible-title">
                        <span>ğŸ“š</span>
                        <span>å†å²èƒŒæ™¯ï¼šç¥ç»ç½‘ç»œç ”ç©¶çš„å¼€ç«¯</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <div style="background: rgba(251, 191, 36, 0.1); padding: 1.5rem; border-radius: 0.5rem;">
                            <h4 style="color: var(--accent-yellow);">1943å¹´ï¼šå¼€åˆ›æ€§è®ºæ–‡</h4>
                            <p><strong>ã€ŠA Logical Calculus of Ideas Immanent in Nervous Activityã€‹</strong></p>
                            <p style="margin-top: 0.5rem;">McCullochï¼ˆç¥ç»ç§‘å­¦å®¶ï¼‰å’Œ Pittsï¼ˆæ•°å­¦å®¶ï¼‰é¦–æ¬¡æå‡ºç”¨æ•°å­¦æ¨¡å‹æè¿°ç¥ç»å…ƒã€‚
                                å½“æ—¶Pittsåªæœ‰20å²ï¼</p>
                        </div>

                        <div style="margin-top: 1rem;">
                            <h4>ä¸»è¦è´¡çŒ®ï¼š</h4>
                            <ul style="line-height: 2;">
                                <li>è¯æ˜äº†ç¥ç»ç½‘ç»œå¯ä»¥è®¡ç®—ä»»ä½•é€»è¾‘å‡½æ•°</li>
                                <li>å¥ å®šäº†è®¡ç®—ç¥ç»ç§‘å­¦çš„åŸºç¡€</li>
                                <li>å¯å‘äº†åç»­çš„æ„ŸçŸ¥æœºç ”ç©¶</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ•°å­¦å»ºæ¨¡éƒ¨åˆ† -->
        <section id="math-model" class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">
                ğŸ“ æ•°å­¦å»ºæ¨¡ï¼šæ„ŸçŸ¥æœºçš„è¯ç”Ÿ
                <span class="depth-indicator intermediate">è¿›é˜¶</span>
            </h2>

            <!-- æ¸è¿›å¼æ•°å­¦æ¨å¯¼ -->
            <div class="math-derivation">
                <h3>ä»ç›´è§‰åˆ°å…¬å¼ï¼šä¸€æ­¥æ­¥æ„å»ºæ„ŸçŸ¥æœº</h3>

                <div class="math-step" data-step="1">
                    <strong>ç›´è§‰ï¼šåŠ æƒæŠ•ç¥¨</strong>
                    <p>å°±åƒè¯„å§”æ‰“åˆ†ï¼Œæ¯ä¸ªç‰¹å¾éƒ½æœ‰ä¸åŒçš„é‡è¦æ€§ï¼ˆæƒé‡ï¼‰</p>
                    <div style="text-align: center; margin: 1rem 0;">
                        æ€»åˆ† = ç‰¹å¾1Ã—æƒé‡1 + ç‰¹å¾2Ã—æƒé‡2 + ... + ç‰¹å¾nÃ—æƒé‡n
                    </div>
                </div>

                <div class="math-step" data-step="2">
                    <strong>æ•°å­¦åŒ–ï¼šå†…ç§¯å½¢å¼</strong>
                    <p>ç”¨å‘é‡ç®€æ´è¡¨ç¤ºï¼š</p>
                    <div style="text-align: center; margin: 1rem 0; font-size: 1.2rem;">
                        z = wÂ·x + b = Î£(wáµ¢xáµ¢) + b
                    </div>
                    <div class="math-explanation">
                        å…¶ä¸­ï¼šwæ˜¯æƒé‡å‘é‡ï¼Œxæ˜¯è¾“å…¥å‘é‡ï¼Œbæ˜¯åç½®ï¼ˆé˜ˆå€¼çš„ç›¸åæ•°ï¼‰
                    </div>
                </div>

                <div class="math-step" data-step="3">
                    <strong>å†³ç­–ï¼šç¬¦å·å‡½æ•°</strong>
                    <p>å°†è¿ç»­çš„å¾—åˆ†è½¬æ¢ä¸ºç¦»æ•£çš„ç±»åˆ«ï¼š</p>
                    <div style="text-align: center; margin: 1rem 0; font-size: 1.2rem;">
                        y = sign(z) = { +1, if z â‰¥ 0; -1, if z < 0 }
                    </div>
                    <div class="math-explanation">
                        æ­£åˆ† â†’ æ­£ç±»ï¼ˆ+1ï¼‰ï¼Œè´Ÿåˆ† â†’ è´Ÿç±»ï¼ˆ-1ï¼‰
                    </div>
                </div>

                <div class="math-step" data-step="4">
                    <strong>å®Œæ•´æ¨¡å‹ï¼šæ„ŸçŸ¥æœº</strong>
                    <div style="text-align: center; margin: 1rem 0; font-size: 1.3rem; color: var(--accent-purple);">
                        f(x) = sign(wÂ·x + b)
                    </div>
                </div>
            </div>

            <!-- å‡ ä½•è§£é‡Šçš„äº¤äº’å¼æ¼”ç¤º -->
            <div class="interactive-demo mt-4">
                <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">ğŸ¨ å‡ ä½•ç›´è§‚ï¼šè¶…å¹³é¢çš„é­”åŠ›</h3>

                <div class="demo-controls">
                    <div class="control-group">
                        <label>è§†è§’æ—‹è½¬</label>
                        <div class="slider-container">
                            <input type="range" id="rotation-slider" min="0" max="360" value="45">
                            <span class="slider-value" id="rotation-value">45Â°</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label>ä¿¯ä»°è§’åº¦</label>
                        <div class="slider-container">
                            <input type="range" id="elevation-slider" min="0" max="90" value="30">
                            <span class="slider-value" id="elevation-value">30Â°</span>
                        </div>
                    </div>
                    <button class="btn btn-secondary" onclick="toggleAnimation()" tabindex="0">
                        <span id="animation-toggle">â–¶ï¸ æ’­æ”¾åŠ¨ç”»</span>
                    </button>
                </div>

                <canvas id="hyperplane-canvas" width="800" height="500"></canvas>

                <div class="tip info mt-3">
                    <span class="tip-icon">ğŸ’¡</span>
                    <div class="tip-content">
                        <strong>å…³é”®æ´å¯Ÿï¼š</strong><br>
                        â€¢ åœ¨nç»´ç©ºé—´ä¸­ï¼ŒwÂ·x + b = 0 å®šä¹‰äº†ä¸€ä¸ª(n-1)ç»´çš„è¶…å¹³é¢<br>
                        â€¢ è¿™ä¸ªè¶…å¹³é¢å°†æ•´ä¸ªç©ºé—´åˆ†æˆä¸¤åŠï¼šæ­£ç±»åŒºåŸŸå’Œè´Ÿç±»åŒºåŸŸ<br>
                        â€¢ æ„ŸçŸ¥æœºçš„æœ¬è´¨å°±æ˜¯å¯»æ‰¾è¿™æ ·ä¸€ä¸ªæœ€ä¼˜çš„åˆ†å‰²è¶…å¹³é¢
                    </div>
                </div>
            </div>

            <!-- å¸¸è§é”™è¯¯æé†’ -->
            <div class="common-mistakes">
                <h3 style="color: var(--accent-red); margin-bottom: 1rem;">âš ï¸ å¸¸è§è¯¯åŒº</h3>

                <div class="mistake-item">
                    <div class="mistake-icon">âŒ</div>
                    <div class="mistake-content">
                        <h4>è¯¯åŒº1ï¼šå¿˜è®°åç½®é¡¹</h4>
                        <p>å¾ˆå¤šåˆå­¦è€…å®ç°æ„ŸçŸ¥æœºæ—¶å¿˜è®°åŠ åç½®bï¼Œå¯¼è‡´å†³ç­–è¾¹ç•Œå¿…é¡»è¿‡åŸç‚¹ï¼Œ
                            å¤§å¤§é™åˆ¶äº†æ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›ã€‚</p>
                        <p style="color: var(--accent-green); margin-top: 0.5rem;">
                            âœ“ æ­£ç¡®åšæ³•ï¼šå§‹ç»ˆåŒ…å«åç½®é¡¹ï¼Œæˆ–å°†å…¶ä½œä¸ºé¢å¤–çš„æƒé‡å¤„ç†
                        </p>
                    </div>
                </div>

                <div class="mistake-item">
                    <div class="mistake-icon">âŒ</div>
                    <div class="mistake-content">
                        <h4>è¯¯åŒº2ï¼šæ··æ·†è¾“å‡ºå€¼</h4>
                        <p>æ„ŸçŸ¥æœºè¾“å‡ºçš„æ˜¯ç¦»æ•£çš„ç±»åˆ«æ ‡ç­¾ï¼ˆ+1æˆ–-1ï¼‰ï¼Œä¸æ˜¯æ¦‚ç‡å€¼ï¼</p>
                        <p style="color: var(--accent-green); margin-top: 0.5rem;">
                            âœ“ æ­£ç¡®ç†è§£ï¼šsignå‡½æ•°äº§ç”Ÿçš„æ˜¯"ç¡¬"åˆ†ç±»ï¼Œä¸åƒé€»è¾‘å›å½’é‚£æ ·è¾“å‡ºæ¦‚ç‡
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- å­¦ä¹ ç®—æ³•éƒ¨åˆ† -->
        <section id="learning" class="section-card">
            <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">
                ğŸ¯ æ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•ï¼šè®©æœºå™¨è‡ªå·±å­¦ä¹ 
                <span class="depth-indicator intermediate">è¿›é˜¶</span>
            </h2>

            <!-- ç®—æ³•å‘ç°çš„æ•…äº‹ -->
            <div class="dialogue-container">
                <div class="dialogue-item">
                    <div class="dialogue-avatar student">ğŸ’¡</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">å°é™ˆï¼ˆæç„¶å¤§æ‚Ÿï¼‰</div>
                        <p>æ•™æˆï¼Œæˆ‘æ˜ç™½äº†ï¼å°±åƒæˆ‘ä»¬ä»é”™è¯¯ä¸­å­¦ä¹ ä¸€æ ·ï¼Œ
                            æœºå™¨ä¹Ÿå¯ä»¥ä»åˆ†ç±»é”™è¯¯ä¸­è°ƒæ•´è‡ªå·±çš„å‚æ•°ï¼</p>
                    </div>
                </div>
                <div class="dialogue-item">
                    <div class="dialogue-avatar teacher">ğŸ‘¨â€ğŸ«</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">ç‹æ•™æˆ</div>
                        <p>æ­£æ˜¯å¦‚æ­¤ï¼Rosenblattåœ¨1957å¹´æå‡ºçš„æ„ŸçŸ¥æœºå­¦ä¹ è§„åˆ™ï¼Œ
                            æœ¬è´¨ä¸Šå°±æ˜¯"é”™è¯¯é©±åŠ¨"çš„å­¦ä¹ ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¨å¯¼...</p>
                    </div>
                </div>
            </div>

            <!-- å­¦ä¹ ç®—æ³•çš„ç›´è§‚è§£é‡Š -->
            <div class="math-derivation">
                <h3>æ„ŸçŸ¥æœºå­¦ä¹ è§„åˆ™ï¼šä»é”™è¯¯ä¸­å­¦ä¹ </h3>

                <div class="math-step" data-step="1">
                    <strong>æ ¸å¿ƒæ€æƒ³</strong>
                    <p>åªåœ¨é¢„æµ‹é”™è¯¯æ—¶æ›´æ–°å‚æ•°ï¼Œæ­£ç¡®æ—¶ä¿æŒä¸å˜</p>
                    <div class="math-explanation">
                        "If it ain't broke, don't fix it" â€”â€” å¦‚æœæ²¡åï¼Œå°±åˆ«ä¿®å®ƒ
                    </div>
                </div>

                <div class="math-step" data-step="2">
                    <strong>é”™è¯¯æƒ…å†µåˆ†æ</strong>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                        <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 0.5rem;">
                            <h5>æƒ…å†µ1ï¼šå‡é˜´æ€§</h5>
                            <p>çœŸå®ï¼š+1ï¼Œé¢„æµ‹ï¼š-1</p>
                            <p>è¯´æ˜ï¼šwÂ·x + b å¤ªå°äº†</p>
                            <p>è§£å†³ï¼šå¢å¤§ wÂ·x</p>
                        </div>
                        <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 0.5rem;">
                            <h5>æƒ…å†µ2ï¼šå‡é˜³æ€§</h5>
                            <p>çœŸå®ï¼š-1ï¼Œé¢„æµ‹ï¼š+1</p>
                            <p>è¯´æ˜ï¼šwÂ·x + b å¤ªå¤§äº†</p>
                            <p>è§£å†³ï¼šå‡å° wÂ·x</p>
                        </div>
                    </div>
                </div>

                <div class="math-step" data-step="3">
                    <strong>æ›´æ–°è§„åˆ™æ¨å¯¼</strong>
                    <p>ç»Ÿä¸€çš„æ›´æ–°å…¬å¼ï¼ˆå½“é¢„æµ‹é”™è¯¯æ—¶ï¼‰ï¼š</p>
                    <div style="text-align: center; margin: 1rem 0; font-size: 1.2rem;">
                        w â† w + Î·Â·yÂ·x<br>
                        b â† b + Î·Â·y
                    </div>
                    <div class="math-explanation">
                        â€¢ Î· æ˜¯å­¦ä¹ ç‡ï¼ˆæ­¥é•¿ï¼‰ï¼Œæ§åˆ¶æ¯æ¬¡è°ƒæ•´çš„å¹…åº¦<br>
                        â€¢ y æ˜¯çœŸå®æ ‡ç­¾ï¼ˆ+1æˆ–-1ï¼‰ï¼Œå†³å®šè°ƒæ•´çš„æ–¹å‘<br>
                        â€¢ x æ˜¯å½“å‰æ ·æœ¬ï¼Œå†³å®šè°ƒæ•´çš„å…·ä½“å†…å®¹
                    </div>
                </div>
            </div>

            <!-- ç®—æ³•å¯è§†åŒ–æ¼”ç¤º -->
            <div class="interactive-demo mt-4">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸ¬ å­¦ä¹ è¿‡ç¨‹å¯è§†åŒ–</h3>

                <div class="demo-controls">
                    <div class="control-group">
                        <label>å­¦ä¹ ç‡ Î·</label>
                        <div class="slider-container">
                            <input type="range" id="lr-slider" min="0.01" max="1" step="0.01" value="0.1">
                            <span class="slider-value" id="lr-value">0.1</span>
                        </div>
                    </div>
                    <div class="control-group">
                        <label>è®­ç»ƒé€Ÿåº¦</label>
                        <div class="slider-container">
                            <input type="range" id="speed-slider" min="100" max="2000" step="100" value="500">
                            <span class="slider-value" id="speed-value">500ms</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="startTraining()" tabindex="0">
                        <span id="train-button">â–¶ï¸ å¼€å§‹è®­ç»ƒ</span>
                    </button>
                    <button class="btn btn-secondary" onclick="stepTraining()" tabindex="0">
                        â­ï¸ å•æ­¥æ‰§è¡Œ
                    </button>
                </div>

                <canvas id="training-canvas" width="800" height="400"></canvas>

                <div style="margin-top: 1rem;">
                    <div style="background: rgba(0, 0, 0, 0.2); padding: 1rem; border-radius: 0.5rem; font-family: monospace;">
                        <div>è½®æ¬¡ï¼š<span id="epoch-count">0</span></div>
                        <div>å½“å‰æ ·æœ¬ï¼š<span id="current-sample">-</span></div>
                        <div>é¢„æµ‹ç»“æœï¼š<span id="prediction">-</span></div>
                        <div>æ›´æ–°ä¿¡æ¯ï¼š<span id="update-info">ç­‰å¾…å¼€å§‹...</span></div>
                    </div>
                </div>
            </div>

            <!-- æ”¶æ•›æ€§è¯æ˜ -->
            <div class="collapsible mt-4 advanced-content" style="display: none;">
                <div class="collapsible-header" tabindex="0">
                    <div class="collapsible-title">
                        <span>ğŸ”¬</span>
                        <span>æ„ŸçŸ¥æœºæ”¶æ•›å®šç†ï¼ˆNovikoff, 1962ï¼‰</span>
                        <span class="depth-indicator advanced">æ·±å…¥</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <div class="math-derivation">
                            <h4>å®šç†é™ˆè¿°</h4>
                            <p>å¦‚æœè®­ç»ƒæ•°æ®é›†æ˜¯<strong>çº¿æ€§å¯åˆ†</strong>çš„ï¼Œé‚£ä¹ˆæ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•ä¸€å®šä¼šåœ¨<strong>æœ‰é™æ­¥å†…æ”¶æ•›</strong>ã€‚</p>

                            <div class="math-step" data-step="1">
                                <strong>å‰ææ¡ä»¶</strong>
                                <p>å­˜åœ¨æœ€ä¼˜è§£ (w*, b*) å’Œé—´éš” Î³ > 0ï¼Œä½¿å¾—ï¼š</p>
                                <div style="text-align: center; margin: 0.5rem 0;">
                                    y(w*Â·x + b*) â‰¥ Î³, âˆ€(x, y) âˆˆ D
                                </div>
                            </div>

                            <div class="math-step" data-step="2">
                                <strong>è¯æ˜è¦ç‚¹</strong>
                                <p>1. æ¯æ¬¡æ›´æ–°ä½¿ w å‘ w* é è¿‘ï¼š</p>
                                <div style="text-align: center; margin: 0.5rem 0;">
                                    w_{k+1}Â·w* â‰¥ w_kÂ·w* + Î·Î³
                                </div>
                                <p>2. æƒé‡çš„æ¨¡é•¿å¢é•¿æœ‰ç•Œï¼š</p>
                                <div style="text-align: center; margin: 0.5rem 0;">
                                    ||w_{k+1}||Â² â‰¤ ||w_k||Â² + Î·Â²RÂ²
                                </div>
                            </div>

                            <div class="math-step" data-step="3">
                                <strong>æ”¶æ•›ä¸Šç•Œ</strong>
                                <p>è¿­ä»£æ¬¡æ•°çš„ä¸Šç•Œï¼š</p>
                                <div style="text-align: center; margin: 0.5rem 0; font-size: 1.2rem;">
                                    k â‰¤ (R/Î³)Â²
                                </div>
                                <div class="math-explanation">
                                    å…¶ä¸­ R = max||x||ï¼Œè¡¨ç¤ºæ•°æ®çš„æœ€å¤§èŒƒæ•°
                                </div>
                            </div>
                        </div>

                        <div class="tip warning mt-3">
                            <span class="tip-icon">âš ï¸</span>
                            <div class="tip-content">
                                <strong>å…³é”®å‰æï¼š</strong>æ•°æ®å¿…é¡»æ˜¯çº¿æ€§å¯åˆ†çš„ï¼<br>
                                å¦‚æœä¸å¯åˆ†ï¼Œç®—æ³•å°†æ°¸è¿œéœ‡è¡ï¼Œæ— æ³•æ”¶æ•›ã€‚
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ·±å…¥ç†è§£ï¼šå…·ä½“è®¡ç®—è¿‡ç¨‹ -->
            <div class="collapsible mt-4 expanded">
                <div class="collapsible-header" tabindex="0">
                    <div class="collapsible-title">
                        <span>ğŸ”¬</span>
                        <span>æ·±å…¥ç†è§£ï¼šæ‰‹æŠŠæ‰‹è®¡ç®—æ„ŸçŸ¥æœºå¦‚ä½•æ‰¾åˆ°æœ€ä¼˜è§£</span>
                        <span class="depth-indicator intermediate">è¿›é˜¶</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <!-- å…·ä½“ä¾‹å­ä»‹ç» -->
                        <div class="example-box" style="background: rgba(139, 92, 246, 0.05); border: 2px solid rgba(139, 92, 246, 0.3); padding: 2rem; border-radius: 1rem;">
                            <h4 style="color: var(--accent-purple); margin-bottom: 1rem;">ğŸ“ è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ‰‹ç®—æ„ŸçŸ¥æœºçš„å­¦ä¹ è¿‡ç¨‹</h4>

                            <p><strong>é—®é¢˜è®¾å®šï¼š</strong>åœ¨2Då¹³é¢ä¸Šæœ‰4ä¸ªç‚¹ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°ä¸€æ¡ç›´çº¿å°†å®ƒä»¬æ­£ç¡®åˆ†ç±»ã€‚</p>

                            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; align-items: center; margin-top: 1.5rem;">
                                <div>
                                    <table style="width: 100%; text-align: center; border-collapse: collapse;">
                                        <thead>
                                        <tr style="background: rgba(139, 92, 246, 0.1);">
                                            <th style="padding: 0.75rem; border: 1px solid var(--border-color);">ç‚¹</th>
                                            <th style="padding: 0.75rem; border: 1px solid var(--border-color);">åæ ‡(xâ‚,xâ‚‚)</th>
                                            <th style="padding: 0.75rem; border: 1px solid var(--border-color);">æ ‡ç­¾y</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">A</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">(3, 3)</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color); color: var(--accent-blue);">+1</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">B</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">(4, 3)</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color); color: var(--accent-blue);">+1</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">C</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">(1, 1)</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color); color: var(--accent-red);">-1</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">D</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color);">(2, 1)</td>
                                            <td style="padding: 0.5rem; border: 1px solid var(--border-color); color: var(--accent-red);">-1</td>
                                        </tr>
                                        </tbody>
                                    </table>

                                    <div style="margin-top: 1rem; padding: 1rem; background: rgba(255, 255, 255, 0.05); border-radius: 0.5rem;">
                                        <p><strong>åˆå§‹åŒ–ï¼š</strong></p>
                                        <p>w = [0, 0]áµ€</p>
                                        <p>b = 0</p>
                                        <p>å­¦ä¹ ç‡ Î· = 1</p>
                                    </div>
                                </div>

                                <div>
                                    <canvas id="perceptron-math-viz" width="400" height="400" style="background: rgba(0, 0, 0, 0.1); border-radius: 0.5rem;"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- äº¤äº’å¼è®¡ç®—æ¼”ç¤º -->
                        <div class="interactive-demo mt-4">
                            <h4 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">ğŸ¯ äº¤äº’å¼è®¡ç®—è¿‡ç¨‹</h4>

                            <div class="demo-controls">
                                <button class="btn btn-primary" id="start-calculation" onclick="startCalculation()" tabindex="0">
                                    â–¶ï¸ å¼€å§‹è®¡ç®—
                                </button>
                                <button class="btn btn-secondary" onclick="stepCalculation()" tabindex="0">
                                    â­ï¸ å•æ­¥æ‰§è¡Œ
                                </button>
                                <button class="btn btn-secondary" onclick="resetCalculation()" tabindex="0">
                                    ğŸ”„ é‡ç½®
                                </button>
                                <span style="margin-left: 2rem;">é€Ÿåº¦ï¼š</span>
                                <input type="range" id="calc-speed" min="500" max="3000" value="1500" style="width: 150px;">
                                <span id="calc-speed-value">1.5s</span>
                            </div>

                            <!-- è®¡ç®—è¿‡ç¨‹æ˜¾ç¤º -->
                            <div id="calculation-display" style="margin-top: 2rem;">
                                <!-- å½“å‰æ­¥éª¤ -->
                                <div style="background: rgba(34, 197, 94, 0.1); border: 2px solid rgba(34, 197, 94, 0.3); padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1rem;">
                                    <h5 style="color: var(--accent-green); margin-bottom: 1rem;">å½“å‰æ­¥éª¤</h5>
                                    <div id="current-calculation" style="font-family: 'SF Mono', monospace; line-height: 1.8;">
                                        <div>è¿­ä»£è½®æ¬¡: <span id="calc-epoch" style="font-weight: bold;">0</span></div>
                                        <div>å½“å‰æ ·æœ¬: <span id="calc-sample" style="font-weight: bold;">ç­‰å¾…å¼€å§‹...</span></div>
                                        <div>å½“å‰å‚æ•°: w = [<span id="calc-w" style="color: var(--accent-purple);">0, 0</span>], b = <span id="calc-b" style="color: var(--accent-purple);">0</span></div>
                                    </div>
                                </div>

                                <!-- è¯¦ç»†è®¡ç®—æ­¥éª¤ -->
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <!-- è®¡ç®—è¿‡ç¨‹ -->
                                    <div style="background: rgba(6, 182, 212, 0.05); border: 1px solid rgba(6, 182, 212, 0.3); padding: 1rem; border-radius: 0.5rem;">
                                        <h5 style="color: var(--accent-blue); margin-bottom: 0.5rem;">ğŸ“Š è®¡ç®—è¿‡ç¨‹</h5>
                                        <div id="calc-steps" style="font-size: 0.9rem; line-height: 2;">
                                            <div class="calc-step" style="opacity: 0.5;">1. è®¡ç®— wÂ·x + b</div>
                                            <div class="calc-step" style="opacity: 0.5;">2. åº”ç”¨ç¬¦å·å‡½æ•°</div>
                                            <div class="calc-step" style="opacity: 0.5;">3. æ¯”è¾ƒé¢„æµ‹ä¸çœŸå®æ ‡ç­¾</div>
                                            <div class="calc-step" style="opacity: 0.5;">4. æ›´æ–°å‚æ•°ï¼ˆå¦‚éœ€è¦ï¼‰</div>
                                        </div>
                                    </div>

                                    <!-- æ•°å­¦å…¬å¼ -->
                                    <div style="background: rgba(251, 191, 36, 0.05); border: 1px solid rgba(251, 191, 36, 0.3); padding: 1rem; border-radius: 0.5rem;">
                                        <h5 style="color: var(--accent-yellow); margin-bottom: 0.5rem;">âœï¸ æ•°å­¦ç»†èŠ‚</h5>
                                        <div id="math-details" style="font-family: 'SF Mono', monospace; font-size: 0.85rem; line-height: 1.8;">
                                            ç­‰å¾…è®¡ç®—...
                                        </div>
                                    </div>
                                </div>

                                <!-- å†å²è®°å½• -->
                                <div style="margin-top: 1rem; background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-color); border-radius: 0.5rem; padding: 1rem;">
                                    <h5 style="margin-bottom: 0.5rem;">ğŸ“œ æ›´æ–°å†å²</h5>
                                    <div id="update-history" style="max-height: 200px; overflow-y: auto; font-size: 0.85rem; line-height: 1.6;">
                                        <div style="color: var(--text-secondary);">è¿˜æ²¡æœ‰æ›´æ–°è®°å½•...</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ç»“æœæ€»ç»“ -->
                            <div id="calculation-result" style="display: none; margin-top: 2rem; background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(139, 92, 246, 0.1)); border: 2px solid rgba(34, 197, 94, 0.5); border-radius: 1rem; padding: 2rem;">
                                <h4 style="color: var(--accent-green); margin-bottom: 1rem;">ğŸ‰ æ”¶æ•›æˆåŠŸï¼</h4>
                                <div id="final-result"></div>
                            </div>
                        </div>

                        <!-- å…³é”®æ´å¯Ÿ -->
                        <div class="tip info mt-4">
                            <span class="tip-icon">ğŸ’¡</span>
                            <div class="tip-content">
                                <strong>å…³é”®æ´å¯Ÿï¼š</strong><br>
                                â€¢ æ„ŸçŸ¥æœºä¸æ˜¯éšæœºæ›´æ–°ï¼Œæ¯æ¬¡æ›´æ–°éƒ½æœ‰æ˜ç¡®çš„æ•°å­¦ä¾æ®<br>
                                â€¢ æ›´æ–°çš„æ–¹å‘å’Œå¤§å°éƒ½æ˜¯ä¸ºäº†çº æ­£å½“å‰çš„é”™è¯¯<br>
                                â€¢ åªè¦æ•°æ®çº¿æ€§å¯åˆ†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸€å®šä¼šæ”¶æ•›<br>
                                â€¢ æœ€ç»ˆçš„å†³ç­–è¾¹ç•Œå–å†³äºæ ·æœ¬çš„éå†é¡ºåº
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å³æ—¶ç»ƒä¹  -->
            <div class="instant-practice">
                <h3 style="color: var(--accent-green); margin-bottom: 1rem;">ğŸ¯ ç†è§£æ£€æŸ¥</h3>
                <div class="practice-question">
                    ä¸ºä»€ä¹ˆæ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•åªåœ¨é¢„æµ‹é”™è¯¯æ—¶æ›´æ–°å‚æ•°ï¼Ÿ
                </div>
                <div class="practice-options">
                    <button class="practice-option" data-answer="a" tabindex="0">
                        A. ä¸ºäº†èŠ‚çœè®¡ç®—èµ„æº
                    </button>
                    <button class="practice-option" data-answer="b" tabindex="0">
                        B. æ­£ç¡®åˆ†ç±»çš„æ ·æœ¬ä¸éœ€è¦è°ƒæ•´å†³ç­–è¾¹ç•Œ
                    </button>
                    <button class="practice-option" data-answer="c" tabindex="0">
                        C. è¿™æ˜¯éšæœºå†³å®šçš„
                    </button>
                    <button class="practice-option" data-answer="d" tabindex="0">
                        D. ä¸ºäº†è®©ç®—æ³•æ›´å¤æ‚
                    </button>
                </div>
                <div class="practice-feedback" id="practice-feedback-3"></div>
            </div>
        </section>

        <!-- ä»£ç å®ç°éƒ¨åˆ† -->
        <section id="implementation" class="section-card">
            <h2 style="color: var(--accent-blue); margin-bottom: 1.5rem;">
                ğŸ’» ä»£ç å®ç°ï¼šä»ç†è®ºåˆ°å®è·µ
                <span class="depth-indicator intermediate">è¿›é˜¶</span>
            </h2>

            <!-- å®ç°å‰çš„è®¨è®º -->
            <div class="dialogue-container">
                <div class="dialogue-item">
                    <div class="dialogue-avatar student">ğŸ’»</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">å°é™ˆ</div>
                        <p>ç†è®ºæˆ‘éƒ½æ‡‚äº†ï¼Œä½†æ€ä¹ˆç”¨ä»£ç å®ç°å‘¢ï¼Ÿ</p>
                    </div>
                </div>
                <div class="dialogue-item">
                    <div class="dialogue-avatar teacher">ğŸ‘¨â€ğŸ«</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">ç‹æ•™æˆ</div>
                        <p>å¾ˆç®€å•ï¼æ„ŸçŸ¥æœºçš„ç¾å¦™ä¹‹å¤„å°±åœ¨äºå®ƒçš„ç®€æ´ã€‚
                            æˆ‘ä»¬å…ˆç”¨NumPyå®ç°åŸºç¡€ç‰ˆæœ¬ï¼Œå†çœ‹çœ‹ç°ä»£æ¡†æ¶çš„å®ç°ã€‚</p>
                    </div>
                </div>
            </div>

            <div class="code-container">
                <div class="code-header">
                    <div class="code-header-left">
                        <button class="code-tab active" data-lang="numpy" tabindex="0">çº¯NumPyå®ç°</button>
                        <button class="code-tab" data-lang="pytorch" tabindex="0">PyTorchå®ç°</button>
                        <button class="code-tab" data-lang="visual" tabindex="0">å¯è§†åŒ–ç‰ˆæœ¬</button>
                    </div>
                    <div class="code-header-right">
                        <button class="code-action" onclick="copyCode()" tabindex="0">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            å¤åˆ¶
                        </button>
                        <button class="code-action" onclick="runCode()" tabindex="0">
                            â–¶ï¸ è¿è¡Œ
                        </button>
                    </div>
                </div>
                <div class="code-content" id="numpy-code">
<pre><code class="python">import numpy as np

class Perceptron:
    """æ„ŸçŸ¥æœºï¼šæ·±åº¦å­¦ä¹ çš„ç¬¬ä¸€å—ç§¯æœ¨

    è¿™ä¸ªå®ç°åŒ…å«äº†è¯¦ç»†çš„æ³¨é‡Šå’Œè°ƒè¯•ä¿¡æ¯ï¼Œ
    å¸®åŠ©ä½ ç†è§£æ¯ä¸€æ­¥çš„è®¡ç®—è¿‡ç¨‹ã€‚
    """

    def __init__(self, n_features, learning_rate=0.1, verbose=True):
        """åˆå§‹åŒ–æ„ŸçŸ¥æœº

        Args:
            n_features: è¾“å…¥ç‰¹å¾çš„ç»´åº¦
            learning_rate: å­¦ä¹ ç‡ï¼Œæ§åˆ¶æ¯æ¬¡æ›´æ–°çš„æ­¥é•¿
            verbose: æ˜¯å¦æ‰“å°è®­ç»ƒè¿‡ç¨‹ä¿¡æ¯
        """
        # åˆå§‹åŒ–æƒé‡ä¸ºé›¶å‘é‡
        self.w = np.zeros(n_features)
        self.b = 0.0
        self.lr = learning_rate
        self.verbose = verbose
        self.history = []  # è®°å½•è®­ç»ƒå†å²

    def predict(self, X):
        """é¢„æµ‹å‡½æ•°ï¼šf(x) = sign(wÂ·x + b)

        Args:
            X: è¾“å…¥æ ·æœ¬ï¼Œå¯ä»¥æ˜¯å•ä¸ªæ ·æœ¬æˆ–æ‰¹é‡æ ·æœ¬

        Returns:
            é¢„æµ‹çš„ç±»åˆ«æ ‡ç­¾ï¼ˆ+1 æˆ– -1ï¼‰
        """
        # è®¡ç®—çº¿æ€§è¾“å‡º
        linear_output = np.dot(X, self.w) + self.b

        # åº”ç”¨ç¬¦å·å‡½æ•°
        return np.sign(linear_output)

    def fit(self, X, y, epochs=100):
        """è®­ç»ƒå‡½æ•°ï¼šå®ç°æ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•

        Args:
            X: è®­ç»ƒæ ·æœ¬ç‰¹å¾çŸ©é˜µ [n_samples, n_features]
            y: è®­ç»ƒæ ·æœ¬æ ‡ç­¾å‘é‡ [n_samples]
            epochs: æœ€å¤§è®­ç»ƒè½®æ•°

        Returns:
            self: è¿”å›è®­ç»ƒå¥½çš„æ¨¡å‹
        """
        n_samples = X.shape[0]

        for epoch in range(epochs):
            errors = 0
            epoch_updates = []

            # éå†æ‰€æœ‰è®­ç»ƒæ ·æœ¬
            for idx in range(n_samples):
                xi, yi = X[idx], y[idx]

                # é¢„æµ‹å½“å‰æ ·æœ¬
                yi_pred = self.predict(xi)

                # æ£€æŸ¥æ˜¯å¦åˆ†ç±»é”™è¯¯
                if yi * yi_pred <= 0:  # é”™è¯¯åˆ†ç±»
                    # æ›´æ–°æƒé‡å’Œåç½®
                    old_w = self.w.copy()
                    old_b = self.b

                    self.w += self.lr * yi * xi
                    self.b += self.lr * yi

                    errors += 1

                    # è®°å½•æ›´æ–°ä¿¡æ¯
                    update_info = {
                        'sample': idx,
                        'x': xi,
                        'y_true': yi,
                        'y_pred': yi_pred,
                        'w_change': self.w - old_w,
                        'b_change': self.b - old_b
                    }
                    epoch_updates.append(update_info)

            # è®°å½•æœ¬è½®è®­ç»ƒä¿¡æ¯
            self.history.append({
                'epoch': epoch,
                'errors': errors,
                'accuracy': 1 - errors/n_samples,
                'updates': epoch_updates
            })

            if self.verbose and epoch % 10 == 0:
                print(f"Epoch {epoch}: é”™è¯¯æ•° = {errors}, "
                      f"å‡†ç¡®ç‡ = {(1 - errors/n_samples)*100:.1f}%")

            # å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œæå‰åœæ­¢
            if errors == 0:
                if self.verbose:
                    print(f"âœ“ å®Œç¾æ”¶æ•›ï¼ä»…ç”¨äº† {epoch + 1} è½®è¿­ä»£")
                break

        return self

    def score(self, X, y):
        """è®¡ç®—æ¨¡å‹åœ¨ç»™å®šæ•°æ®é›†ä¸Šçš„å‡†ç¡®ç‡"""
        predictions = self.predict(X)
        return np.mean(predictions == y)

    def decision_function(self, X):
        """è¿”å›å†³ç­–å‡½æ•°çš„å€¼ï¼ˆæœªç»è¿‡signå‡½æ•°ï¼‰"""
        return np.dot(X, self.w) + self.b

    def get_hyperplane_params(self):
        """è·å–è¶…å¹³é¢å‚æ•°ï¼Œç”¨äºå¯è§†åŒ–"""
        return self.w, self.b


# ========== ä½¿ç”¨ç¤ºä¾‹ ==========
if __name__ == "__main__":
    # åˆ›å»ºä¸€ä¸ªç®€å•çš„çº¿æ€§å¯åˆ†æ•°æ®é›†
    np.random.seed(42)

    # ç”Ÿæˆä¸¤ç±»æ•°æ®
    n_samples_per_class = 50

    # ç¬¬ä¸€ç±»ï¼šä¸­å¿ƒåœ¨ (2, 2)
    X_class1 = np.random.randn(n_samples_per_class, 2) + [2, 2]
    y_class1 = np.ones(n_samples_per_class)

    # ç¬¬äºŒç±»ï¼šä¸­å¿ƒåœ¨ (-2, -2)
    X_class2 = np.random.randn(n_samples_per_class, 2) + [-2, -2]
    y_class2 = -np.ones(n_samples_per_class)

    # åˆå¹¶æ•°æ®
    X = np.vstack([X_class1, X_class2])
    y = np.hstack([y_class1, y_class2])

    # è®­ç»ƒæ„ŸçŸ¥æœº
    print("="*50)
    print("æ„ŸçŸ¥æœºè®­ç»ƒæ¼”ç¤º")
    print("="*50)

    model = Perceptron(n_features=2, learning_rate=0.1)
    model.fit(X, y, epochs=100)

    print(f"\næœ€ç»ˆå‚æ•°ï¼š")
    print(f"æƒé‡ w = {model.w}")
    print(f"åç½® b = {model.b:.4f}")
    print(f"è®­ç»ƒå‡†ç¡®ç‡: {model.score(X, y)*100:.1f}%")

    # æµ‹è¯•ä¸€äº›æ–°æ ·æœ¬
    print("\næµ‹è¯•æ–°æ ·æœ¬ï¼š")
    test_points = np.array([[3, 3], [-3, -3], [0, 0]])
    for point in test_points:
        prediction = model.predict(point)
        confidence = model.decision_function(point)
        print(f"ç‚¹ {point} -> é¢„æµ‹: {int(prediction)}, "
              f"å†³ç­–å€¼: {confidence:.3f}")</code></pre>
                </div>
                <div class="code-content" id="pytorch-code" style="display: none;">
<pre><code class="python">import torch
import torch.nn as nn
import torch.optim as optim
import numpy as np

class PerceptronPyTorch(nn.Module):
    """ä½¿ç”¨PyTorchå®ç°çš„æ„ŸçŸ¥æœº

    å±•ç¤ºäº†å¦‚ä½•ç”¨ç°ä»£æ·±åº¦å­¦ä¹ æ¡†æ¶å®ç°ç»å…¸ç®—æ³•
    """

    def __init__(self, n_features):
        super().__init__()
        # nn.Linear åŒ…å«äº†æƒé‡å’Œåç½®
        self.linear = nn.Linear(n_features, 1)

        # åˆå§‹åŒ–å‚æ•°ä¸ºé›¶ï¼ˆä¸NumPyç‰ˆæœ¬ä¸€è‡´ï¼‰
        nn.init.zeros_(self.linear.weight)
        nn.init.zeros_(self.linear.bias)

    def forward(self, x):
        """å‰å‘ä¼ æ’­"""
        # çº¿æ€§å˜æ¢
        linear_output = self.linear(x)
        # åº”ç”¨ç¬¦å·å‡½æ•°
        return torch.sign(linear_output)

    def predict(self, x):
        """é¢„æµ‹å‡½æ•°ï¼ˆä¸sklearnæ¥å£å…¼å®¹ï¼‰"""
        with torch.no_grad():
            x_tensor = torch.FloatTensor(x)
            return self.forward(x_tensor).squeeze().numpy()


class PerceptronTrainer:
    """æ„ŸçŸ¥æœºè®­ç»ƒå™¨

    å®ç°äº†æ„ŸçŸ¥æœºç‰¹å®šçš„æŸå¤±å‡½æ•°å’Œè®­ç»ƒé€»è¾‘
    """

    def __init__(self, model, learning_rate=0.1):
        self.model = model
        self.lr = learning_rate

    def perceptron_loss(self, output, target):
        """æ„ŸçŸ¥æœºæŸå¤±å‡½æ•°

        Loss = max(0, -y * f(x))
        åªæœ‰é”™è¯¯åˆ†ç±»çš„æ ·æœ¬äº§ç”ŸæŸå¤±
        """
        return torch.mean(torch.clamp(-target * output, min=0))

    def train_epoch(self, X, y):
        """è®­ç»ƒä¸€ä¸ªepoch"""
        # éšæœºæ‰“ä¹±æ•°æ®
        indices = torch.randperm(len(X))
        errors = 0

        for idx in indices:
            x_i = X[idx:idx+1]  # ä¿æŒæ‰¹æ¬¡ç»´åº¦
            y_i = y[idx:idx+1]

            # å‰å‘ä¼ æ’­
            output = self.model.linear(x_i)

            # æ£€æŸ¥æ˜¯å¦åˆ†ç±»é”™è¯¯
            if y_i * output <= 0:
                errors += 1

                # æ‰‹åŠ¨å®ç°æ„ŸçŸ¥æœºæ›´æ–°è§„åˆ™
                with torch.no_grad():
                    # w = w + lr * y * x
                    self.model.linear.weight += self.lr * y_i * x_i
                    # b = b + lr * y
                    self.model.linear.bias += self.lr * y_i

        return errors

    def fit(self, X, y, epochs=100, verbose=True):
        """è®­ç»ƒæ¨¡å‹"""
        X = torch.FloatTensor(X)
        y = torch.FloatTensor(y).reshape(-1, 1)
        n_samples = len(X)

        for epoch in range(epochs):
            errors = self.train_epoch(X, y)
            accuracy = 1 - errors / n_samples

            if verbose and epoch % 10 == 0:
                print(f"Epoch {epoch}: é”™è¯¯æ•° = {errors}, "
                      f"å‡†ç¡®ç‡ = {accuracy*100:.1f}%")

            if errors == 0:
                if verbose:
                    print(f"âœ“ å®Œç¾æ”¶æ•›ï¼ç”¨æ—¶ {epoch + 1} è½®")
                break

    def score(self, X, y):
        """è®¡ç®—å‡†ç¡®ç‡"""
        X = torch.FloatTensor(X)
        y = torch.FloatTensor(y)

        with torch.no_grad():
            predictions = torch.sign(self.model.linear(X)).squeeze()
            return (predictions == y).float().mean().item()


# ========== é«˜çº§åŠŸèƒ½ï¼šæ‰¹é‡è®­ç»ƒ ==========
class BatchPerceptron(nn.Module):
    """æ”¯æŒæ‰¹é‡æ›´æ–°çš„æ„ŸçŸ¥æœº"""

    def __init__(self, n_features):
        super().__init__()
        self.linear = nn.Linear(n_features, 1)
        nn.init.zeros_(self.linear.weight)
        nn.init.zeros_(self.linear.bias)

    def forward(self, x):
        return self.linear(x)

    def fit(self, X, y, epochs=100, batch_size=32, lr=0.1):
        """ä½¿ç”¨å°æ‰¹é‡æ¢¯åº¦ä¸‹é™è®­ç»ƒ"""
        X = torch.FloatTensor(X)
        y = torch.FloatTensor(y).reshape(-1, 1)

        dataset = torch.utils.data.TensorDataset(X, y)
        dataloader = torch.utils.data.DataLoader(
            dataset, batch_size=batch_size, shuffle=True
        )

        optimizer = optim.SGD(self.parameters(), lr=lr)

        for epoch in range(epochs):
            total_loss = 0
            for batch_X, batch_y in dataloader:
                # å‰å‘ä¼ æ’­
                output = self.forward(batch_X)

                # è®¡ç®—æŸå¤±ï¼ˆæ„ŸçŸ¥æœºæŸå¤±ï¼‰
                loss = torch.mean(torch.clamp(-batch_y * output, min=0))

                # åå‘ä¼ æ’­
                optimizer.zero_grad()
                loss.backward()
                optimizer.step()

                total_loss += loss.item()

            if epoch % 10 == 0:
                print(f"Epoch {epoch}: Loss = {total_loss:.4f}")

            # æ£€æŸ¥æ˜¯å¦å®Œå…¨æ­£ç¡®åˆ†ç±»
            with torch.no_grad():
                all_output = self.forward(X)
                errors = (y * all_output <= 0).sum().item()
                if errors == 0:
                    print(f"âœ“ æ”¶æ•›ï¼ç”¨æ—¶ {epoch + 1} è½®")
                    break


# ========== ä½¿ç”¨ç¤ºä¾‹ ==========
if __name__ == "__main__":
    # ä½¿ç”¨ä¸NumPyç‰ˆæœ¬ç›¸åŒçš„æ•°æ®
    np.random.seed(42)
    n_samples_per_class = 50

    X_class1 = np.random.randn(n_samples_per_class, 2) + [2, 2]
    y_class1 = np.ones(n_samples_per_class)

    X_class2 = np.random.randn(n_samples_per_class, 2) + [-2, -2]
    y_class2 = -np.ones(n_samples_per_class)

    X = np.vstack([X_class1, X_class2])
    y = np.hstack([y_class1, y_class2])

    print("="*50)
    print("PyTorch æ„ŸçŸ¥æœºè®­ç»ƒæ¼”ç¤º")
    print("="*50)

    # è®­ç»ƒåŸºç¡€ç‰ˆæœ¬
    model = PerceptronPyTorch(n_features=2)
    trainer = PerceptronTrainer(model, learning_rate=0.1)
    trainer.fit(X, y, epochs=100)

    print(f"\næœ€ç»ˆå‚æ•°ï¼š")
    print(f"æƒé‡ w = {model.linear.weight.data.numpy()}")
    print(f"åç½® b = {model.linear.bias.data.item():.4f}")
    print(f"è®­ç»ƒå‡†ç¡®ç‡: {trainer.score(X, y)*100:.1f}%")

    print("\n" + "="*50)
    print("æ‰¹é‡è®­ç»ƒç‰ˆæœ¬")
    print("="*50)

    batch_model = BatchPerceptron(n_features=2)
    batch_model.fit(X, y, epochs=100, batch_size=16)</code></pre>
                </div>
                <div class="code-content" id="visual-code" style="display: none;">
<pre><code class="python">import numpy as np
import matplotlib.pyplot as plt
from matplotlib.animation import FuncAnimation
from IPython.display import HTML

class VisualPerceptron:
    """å¯è§†åŒ–çš„æ„ŸçŸ¥æœºå®ç°

    å®æ—¶å±•ç¤ºè®­ç»ƒè¿‡ç¨‹ä¸­å†³ç­–è¾¹ç•Œçš„å˜åŒ–
    """

    def __init__(self, n_features=2, learning_rate=0.1):
        self.w = np.zeros(n_features)
        self.b = 0.0
        self.lr = learning_rate
        self.history = []

    def predict(self, X):
        return np.sign(np.dot(X, self.w) + self.b)

    def fit_with_visualization(self, X, y, epochs=50):
        """å¸¦å¯è§†åŒ–çš„è®­ç»ƒè¿‡ç¨‹"""
        n_samples = X.shape[0]

        # è®¾ç½®å›¾å½¢
        fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

        # å·¦å›¾ï¼šæ•°æ®å’Œå†³ç­–è¾¹ç•Œ
        ax1.set_title('å†³ç­–è¾¹ç•Œæ¼”åŒ–', fontsize=14)
        ax1.set_xlabel('ç‰¹å¾ 1')
        ax1.set_ylabel('ç‰¹å¾ 2')

        # å³å›¾ï¼šæŸå¤±æ›²çº¿
        ax2.set_title('è®­ç»ƒè¿›åº¦', fontsize=14)
        ax2.set_xlabel('è¿­ä»£æ¬¡æ•°')
        ax2.set_ylabel('é”™è¯¯æ•°')

        # ç»˜åˆ¶æ•°æ®ç‚¹
        colors = ['red' if yi == -1 else 'blue' for yi in y]
        scatter = ax1.scatter(X[:, 0], X[:, 1], c=colors,
                             s=100, alpha=0.6, edgecolors='black')

        # åˆå§‹åŒ–å†³ç­–è¾¹ç•Œçº¿
        x_min, x_max = X[:, 0].min() - 1, X[:, 0].max() + 1
        x_line = np.linspace(x_min, x_max, 100)

        line, = ax1.plot([], [], 'g-', linewidth=2, label='å†³ç­–è¾¹ç•Œ')
        ax1.set_xlim(x_min, x_max)
        ax1.set_ylim(X[:, 1].min() - 1, X[:, 1].max() + 1)
        ax1.legend()
        ax1.grid(True, alpha=0.3)

        # åˆå§‹åŒ–è¯¯å·®æ›²çº¿
        error_line, = ax2.plot([], [], 'r-', linewidth=2)
        ax2.set_xlim(0, epochs)
        ax2.set_ylim(0, n_samples)
        ax2.grid(True, alpha=0.3)

        # è®­ç»ƒå†å²
        iteration_errors = []
        iteration_count = 0

        # åŠ¨ç”»æ›´æ–°å‡½æ•°
        def update(frame):
            nonlocal iteration_count

            if frame < epochs:
                errors = 0

                </div>
                <div class="code-output" id="code-output">
                    <strong>è¿è¡Œç»“æœï¼š</strong>
                    <pre>æ„ŸçŸ¥æœºè®­ç»ƒå®Œæˆï¼
æœ€ç»ˆæƒé‡: [0.8, 0.6]
æœ€ç»ˆåç½®: -1.2
è®­ç»ƒå‡†ç¡®ç‡: 100%</pre>
                </div>
            </div>

            <!-- ä»£ç è¦ç‚¹æ€»ç»“ -->
            <div class="tip success mt-3">
                <span class="tip-icon">âœ…</span>
                <div class="tip-content">
                    <strong>å®ç°è¦ç‚¹ï¼š</strong><br>
                    â€¢ æ„ŸçŸ¥æœºçš„æ ¸å¿ƒä»£ç ä¸è¶…è¿‡50è¡Œ<br>
                    â€¢ å…³é”®åœ¨äºæ­£ç¡®å®ç°æ›´æ–°è§„åˆ™<br>
                    â€¢ æ³¨æ„å¤„ç†æ•°æ®çš„ç»´åº¦å’Œç±»å‹<br>
                    â€¢ å¯è§†åŒ–èƒ½å¸®åŠ©ç†è§£ç®—æ³•è¡Œä¸º
                </div>
            </div>
        </section>

        <!-- å®æˆ˜æ¼”ç»ƒï¼šé¸¢å°¾èŠ±åˆ†ç±» -->
        <section id="experiment" class="section-card">
            <h2 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">
                ğŸŒº å®æˆ˜æ¼”ç»ƒï¼šé¸¢å°¾èŠ±åˆ†ç±»
                <span class="depth-indicator intermediate">è¿›é˜¶</span>
            </h2>

            <!-- é—®é¢˜ä»‹ç» -->
            <div class="story-card">
                <h3>ç»å…¸æ•°æ®é›†ï¼šFisherçš„é¸¢å°¾èŠ±</h3>
                <p>1936å¹´ï¼Œç»Ÿè®¡å­¦å®¶Ronald Fisheræ”¶é›†äº†150æœµé¸¢å°¾èŠ±çš„æ•°æ®ï¼Œ
                    æˆä¸ºæœºå™¨å­¦ä¹ é¢†åŸŸæœ€ç»å…¸çš„æ•°æ®é›†ä¹‹ä¸€ã€‚</p>

                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1.5rem;">
                    <div style="text-align: center; padding: 1rem; background: rgba(239, 68, 68, 0.1); border-radius: 0.5rem;">
                        <div style="font-size: 3rem;">ğŸŒº</div>
                        <strong>Setosa</strong><br>
                        å±±é¸¢å°¾
                    </div>
                    <div style="text-align: center; padding: 1rem; background: rgba(34, 197, 94, 0.1); border-radius: 0.5rem;">
                        <div style="font-size: 3rem;">ğŸŒ¸</div>
                        <strong>Versicolor</strong><br>
                        å˜è‰²é¸¢å°¾
                    </div>
                    <div style="text-align: center; padding: 1rem; background: rgba(6, 182, 212, 0.1); border-radius: 0.5rem;">
                        <div style="font-size: 3rem;">ğŸŒ¼</div>
                        <strong>Virginica</strong><br>
                        ç»´å‰å°¼äºšé¸¢å°¾
                    </div>
                </div>
            </div>

            <!-- æ•°æ®æ¢ç´¢ -->
            <div class="interactive-demo mt-4">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ“Š æ•°æ®æ¢ç´¢ä¸å¯è§†åŒ–</h3>

                <div class="demo-controls">
                    <div class="control-group">
                        <label>Xè½´ç‰¹å¾</label>
                        <select id="x-feature" class="form-select">
                            <option value="0">èŠ±è¼é•¿åº¦</option>
                            <option value="1">èŠ±è¼å®½åº¦</option>
                            <option value="2" selected>èŠ±ç“£é•¿åº¦</option>
                            <option value="3">èŠ±ç“£å®½åº¦</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Yè½´ç‰¹å¾</label>
                        <select id="y-feature" class="form-select">
                            <option value="0">èŠ±è¼é•¿åº¦</option>
                            <option value="1">èŠ±è¼å®½åº¦</option>
                            <option value="2">èŠ±ç“£é•¿åº¦</option>
                            <option value="3" selected>èŠ±ç“£å®½åº¦</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>é€‰æ‹©ä¸¤ä¸ªç±»åˆ«</label>
                        <div>
                            <label><input type="checkbox" id="class-0" checked> Setosa</label>
                            <label><input type="checkbox" id="class-1" checked> Versicolor</label>
                            <label><input type="checkbox" id="class-2"> Virginica</label>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="trainIrisPerceptron()" tabindex="0">
                        ğŸš€ è®­ç»ƒæ„ŸçŸ¥æœº
                    </button>
                </div>

                <canvas id="iris-canvas" width="800" height="500"></canvas>

                <div class="mt-3" id="iris-results" style="display: none;">
                    <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 0.5rem;">
                        <h4 style="color: var(--accent-green);">è®­ç»ƒç»“æœ</h4>
                        <div id="iris-stats"></div>
                    </div>
                </div>
            </div>

            <!-- å®éªŒä»£ç  -->
            <div class="code-container mt-4">
                <div class="code-header">
                    <div class="code-header-left">
                        <span style="color: var(--text-secondary);">å®Œæ•´çš„é¸¢å°¾èŠ±åˆ†ç±»å®éªŒ</span>
                    </div>
                </div>
                <div class="code-content">
<pre><code class="python">from sklearn import datasets
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
import numpy as np
import matplotlib.pyplot as plt

# åŠ è½½é¸¢å°¾èŠ±æ•°æ®é›†
iris = datasets.load_iris()
X = iris.data
y = iris.target

# ä¸ºäº†æ¼”ç¤ºæ„ŸçŸ¥æœºï¼Œæˆ‘ä»¬åªé€‰æ‹©ä¸¤ä¸ªç±»åˆ«
# é€‰æ‹© Setosa (0) å’Œ Versicolor (1)
mask = y != 2  # æ’é™¤ Virginica
X_binary = X[mask]
y_binary = y[mask]
y_binary = np.where(y_binary == 0, -1, 1)  # è½¬æ¢ä¸º -1 å’Œ +1

# åªä½¿ç”¨ä¸¤ä¸ªç‰¹å¾è¿›è¡Œå¯è§†åŒ–
X_2d = X_binary[:, [2, 3]]  # èŠ±ç“£é•¿åº¦å’Œå®½åº¦

# æ•°æ®æ ‡å‡†åŒ–
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X_2d)

# åˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†
X_train, X_test, y_train, y_test = train_test_split(
    X_scaled, y_binary, test_size=0.3, random_state=42
)

# è®­ç»ƒæ„ŸçŸ¥æœº
model = Perceptron(n_features=2, learning_rate=0.01)
model.fit(X_train, y_train, epochs=100)

# è¯„ä¼°æ€§èƒ½
train_acc = model.score(X_train, y_train)
test_acc = model.score(X_test, y_test)

print(f"è®­ç»ƒé›†å‡†ç¡®ç‡: {train_acc*100:.1f}%")
print(f"æµ‹è¯•é›†å‡†ç¡®ç‡: {test_acc*100:.1f}%")

# å¯è§†åŒ–ç»“æœ
plt.figure(figsize=(12, 5))

# å­å›¾1ï¼šè®­ç»ƒæ•°æ®å’Œå†³ç­–è¾¹ç•Œ
plt.subplot(1, 2, 1)
plot_decision_boundary(model, X_train, y_train,
                      title='è®­ç»ƒé›†ä¸Šçš„å†³ç­–è¾¹ç•Œ')

# å­å›¾2ï¼šæµ‹è¯•æ•°æ®å’Œå†³ç­–è¾¹ç•Œ
plt.subplot(1, 2, 2)
plot_decision_boundary(model, X_test, y_test,
                      title='æµ‹è¯•é›†ä¸Šçš„å†³ç­–è¾¹ç•Œ')

plt.tight_layout()
plt.show()

# å°è¯•ä¸‰åˆ†ç±»é—®é¢˜ï¼ˆä¼šå¤±è´¥ï¼ï¼‰
print("\nå°è¯•ä¸‰åˆ†ç±»é—®é¢˜...")
X_multi = X[:, [2, 3]]
y_multi = y

# æ„ŸçŸ¥æœºæ— æ³•ç›´æ¥å¤„ç†å¤šåˆ†ç±»
# è¿™æ˜¯å®ƒçš„æ ¹æœ¬å±€é™ä¹‹ä¸€</code></pre>
                </div>
            </div>

            <!-- å…³é”®å‘ç° -->
            <div class="tip info mt-3">
                <span class="tip-icon">ğŸ’¡</span>
                <div class="tip-content">
                    <strong>å…³é”®å‘ç°ï¼š</strong><br>
                    â€¢ Setosa ç±»ä¸å…¶ä»–ä¸¤ç±»æ˜¯çº¿æ€§å¯åˆ†çš„<br>
                    â€¢ Versicolor å’Œ Virginica æœ‰é‡å ï¼Œä¸å®Œå…¨çº¿æ€§å¯åˆ†<br>
                    â€¢ æ„ŸçŸ¥æœºåœ¨çº¿æ€§å¯åˆ†æ•°æ®ä¸Šè¡¨ç°å®Œç¾<br>
                    â€¢ ä½†æ— æ³•å¤„ç†éçº¿æ€§å¯åˆ†çš„æƒ…å†µ
                </div>
            </div>
        </section>

        <!-- XORé—®é¢˜ï¼šè‡´å‘½ç¼ºé™· -->
        <section id="limitation" class="section-card">
            <h2 style="color: var(--accent-red); margin-bottom: 1.5rem;">
                ğŸ’¥ è‡´å‘½ç¼ºé™·ï¼šXORé—®é¢˜
                <span class="depth-indicator advanced">æ·±å…¥</span>
            </h2>

            <!-- é—®é¢˜å¼•å…¥ -->
            <div class="dialogue-container">
                <div class="dialogue-item">
                    <div class="dialogue-avatar student">ğŸ˜¤</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">å°é™ˆï¼ˆæ²®ä¸§ï¼‰</div>
                        <p>æ•™æˆï¼Œæˆ‘ç”¨æ„ŸçŸ¥æœºåšå¼‚æˆ–ï¼ˆXORï¼‰åˆ†ç±»ï¼Œè®­ç»ƒäº†ä¸€æ™šä¸Šéƒ½ä¸æ”¶æ•›ï¼</p>
                    </div>
                </div>
                <div class="dialogue-item">
                    <div class="dialogue-avatar teacher">ğŸ‘¨â€ğŸ«</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">ç‹æ•™æˆ</div>
                        <p>è¿™ä¸æ˜¯ä½ çš„é—®é¢˜ã€‚1969å¹´ï¼ŒMinskyå’ŒPapertåœ¨ã€ŠPerceptronsã€‹ä¸€ä¹¦ä¸­
                            è¯æ˜äº†æ„ŸçŸ¥æœºæ— æ³•è§£å†³XORé—®é¢˜ã€‚è¿™ä¸ªå‘ç°ç›´æ¥å¯¼è‡´äº†AIçš„ç¬¬ä¸€ä¸ªå†¬å¤©...</p>
                    </div>
                </div>
            </div>

            <!-- XORé—®é¢˜å¯è§†åŒ– -->
            <div class="interactive-demo mt-4">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ® XORé—®é¢˜æ¼”ç¤º</h3>

                <div style="text-align: center; margin-bottom: 2rem;">
                    <h4>XORï¼ˆå¼‚æˆ–ï¼‰é€»è¾‘</h4>
                    <table style="margin: 0 auto; background: rgba(0,0,0,0.2); border-radius: 0.5rem;">
                        <thead>
                        <tr>
                            <th style="padding: 1rem;">è¾“å…¥1</th>
                            <th style="padding: 1rem;">è¾“å…¥2</th>
                            <th style="padding: 1rem;">è¾“å‡º</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td style="padding: 1rem;">0</td>
                            <td style="padding: 1rem;">0</td>
                            <td style="padding: 1rem; color: var(--accent-red);">0</td>
                        </tr>
                        <tr>
                            <td style="padding: 1rem;">0</td>
                            <td style="padding: 1rem;">1</td>
                            <td style="padding: 1rem; color: var(--accent-green);">1</td>
                        </tr>
                        <tr>
                            <td style="padding: 1rem;">1</td>
                            <td style="padding: 1rem;">0</td>
                            <td style="padding: 1rem; color: var(--accent-green);">1</td>
                        </tr>
                        <tr>
                            <td style="padding: 1rem;">1</td>
                            <td style="padding: 1rem;">1</td>
                            <td style="padding: 1rem; color: var(--accent-red);">0</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="demo-controls">
                    <button class="btn btn-primary" onclick="tryXORPerceptron()" tabindex="0">
                        ğŸ”„ å°è¯•è®­ç»ƒï¼ˆä¼šå¤±è´¥ï¼‰
                    </button>
                    <button class="btn btn-secondary" onclick="showXORSolution()" tabindex="0">
                        ğŸ’¡ æŸ¥çœ‹è§£å†³æ–¹æ¡ˆ
                    </button>
                </div>

                <canvas id="xor-canvas" width="800" height="400"></canvas>

                <div class="mt-3" id="xor-explanation" style="display: none;">
                    <div class="tip error">
                        <span class="tip-icon">âŒ</span>
                        <div class="tip-content">
                            <strong>ä¸ºä»€ä¹ˆå¤±è´¥ï¼Ÿ</strong><br>
                            XORçš„ä¸¤ä¸ªç±»åˆ«æ— æ³•ç”¨ä¸€æ¡ç›´çº¿åˆ†å¼€ï¼<br>
                            (0,0) å’Œ (1,1) å±äºåŒä¸€ç±»ï¼Œä½† (0,1) å’Œ (1,0) å±äºå¦ä¸€ç±»ã€‚<br>
                            ä»»ä½•ç›´çº¿éƒ½æ— æ³•æ­£ç¡®åˆ†å‰²è¿™å››ä¸ªç‚¹ã€‚
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ•°å­¦è¯æ˜ -->
            <div class="collapsible mt-4 advanced-content">
                <div class="collapsible-header" tabindex="0">
                    <div class="collapsible-title">
                        <span>ğŸ”¬</span>
                        <span>XORä¸å¯åˆ†çš„æ•°å­¦è¯æ˜</span>
                        <span class="depth-indicator advanced">æ·±å…¥</span>
                    </div>
                    <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <div class="math-derivation">
                            <h4>åè¯æ³•</h4>

                            <div class="math-step" data-step="1">
                                <strong>å‡è®¾å­˜åœ¨çº¿æ€§åˆ†ç±»å™¨</strong>
                                <p>å‡è®¾å­˜åœ¨æƒé‡ wâ‚, wâ‚‚ å’Œåç½® bï¼Œä½¿å¾—ï¼š</p>
                                <div style="text-align: center; margin: 1rem 0;">
                                    f(xâ‚, xâ‚‚) = sign(wâ‚xâ‚ + wâ‚‚xâ‚‚ + b)
                                </div>
                            </div>

                            <div class="math-step" data-step="2">
                                <strong>æ ¹æ®XORå®šä¹‰ï¼Œå¿…é¡»æ»¡è¶³</strong>
                                <ul style="line-height: 2;">
                                    <li>f(0,0) = -1 â†’ b < 0</li>
                                    <li>f(0,1) = +1 â†’ wâ‚‚ + b > 0</li>
                                    <li>f(1,0) = +1 â†’ wâ‚ + b > 0</li>
                                    <li>f(1,1) = -1 â†’ wâ‚ + wâ‚‚ + b < 0</li>
                                </ul>
                            </div>

                            <div class="math-step" data-step="3">
                                <strong>å¯¼å‡ºçŸ›ç›¾</strong>
                                <p>ä»æ¡ä»¶2å’Œ3ï¼šwâ‚ + b > 0 ä¸” wâ‚‚ + b > 0</p>
                                <p>ç›¸åŠ å¾—ï¼š(wâ‚ + b) + (wâ‚‚ + b) > 0</p>
                                <p>å³ï¼šwâ‚ + wâ‚‚ + 2b > 0</p>
                                <p>ä½†ä»æ¡ä»¶1ï¼šb < 0ï¼Œæ‰€ä»¥ï¼šwâ‚ + wâ‚‚ + b > wâ‚ + wâ‚‚ + 2b > 0</p>
                                <p>è¿™ä¸æ¡ä»¶4çŸ›ç›¾ï¼</p>
                                <div class="math-explanation">
                                    å› æ­¤ï¼Œä¸å­˜åœ¨æ»¡è¶³æ‰€æœ‰æ¡ä»¶çš„çº¿æ€§åˆ†ç±»å™¨
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è§£å†³æ–¹æ¡ˆé¢„è§ˆ -->
            <div class="tip success mt-4">
                <span class="tip-icon">âœ…</span>
                <div class="tip-content">
                    <strong>è§£å†³æ–¹æ¡ˆï¼šå¤šå±‚ç½‘ç»œ</strong><br>
                    â€¢ å•ä¸ªæ„ŸçŸ¥æœºæ— æ³•è§£å†³XOR<br>
                    â€¢ ä½†ä¸¤å±‚æ„ŸçŸ¥æœºå¯ä»¥ï¼<br>
                    â€¢ è¿™å°±æ˜¯æ·±åº¦å­¦ä¹ ä¸­"æ·±åº¦"çš„æ„ä¹‰<br>
                    â€¢ ä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ å¤šå±‚æ„ŸçŸ¥æœºï¼ˆMLPï¼‰
                </div>
            </div>
        </section>

        <!-- å†å²å›é¡¾ -->
        <section id="history" class="section-card">
            <h2 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">
                ğŸ“š å†å²å›é¡¾ï¼šAIçš„ç¬¬ä¸€ä¸ªå†¬å¤©
                <span class="depth-indicator beginner">åˆå­¦è€…</span>
            </h2>

            <!-- æ—¶é—´çº¿ -->
            <div style="position: relative; padding: 2rem 0;">
                <div style="position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background: var(--accent-purple);"></div>

                <!-- 1957å¹´ -->
                <div style="display: flex; align-items: center; margin-bottom: 3rem;">
                    <div style="flex: 1; text-align: right; padding-right: 2rem;">
                        <h4 style="color: var(--accent-green);">1957å¹´ï¼šå¸Œæœ›çš„æ›™å…‰</h4>
                        <p>Frank Rosenblatt å‘æ˜æ„ŸçŸ¥æœº</p>
                        <p style="font-style: italic; color: var(--text-secondary);">
                            "æ„ŸçŸ¥æœºæœ€ç»ˆå°†èƒ½å¤Ÿå­¦ä¹ ã€åšå†³å®šå’Œç¿»è¯‘è¯­è¨€"
                        </p>
                    </div>
                    <div style="width: 20px; height: 20px; background: var(--accent-green); border-radius: 50%; position: relative; z-index: 1;"></div>
                    <div style="flex: 1; padding-left: 2rem;">
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1rem; border-radius: 0.5rem;">
                            ğŸ‰ åª’ä½“çƒ­çƒˆæŠ¥é“ï¼Œè®¤ä¸ºäººå·¥æ™ºèƒ½å³å°†å®ç°
                        </div>
                    </div>
                </div>

                <!-- 1960å¹´ä»£åˆ -->
                <div style="display: flex; align-items: center; margin-bottom: 3rem;">
                    <div style="flex: 1; text-align: right; padding-right: 2rem;">
                        <div style="background: rgba(251, 191, 36, 0.1); padding: 1rem; border-radius: 0.5rem;">
                            ğŸš€ å¤§é‡èµ„é‡‘æ¶Œå…¥ï¼ŒæœŸæœ›æé«˜
                        </div>
                    </div>
                    <div style="width: 20px; height: 20px; background: var(--accent-yellow); border-radius: 50%; position: relative; z-index: 1;"></div>
                    <div style="flex: 1; padding-left: 2rem;">
                        <h4 style="color: var(--accent-yellow);">1960sï¼šé»„é‡‘æ—¶ä»£</h4>
                        <p>æ„ŸçŸ¥æœºç ”ç©¶å¦‚ç«å¦‚è¼</p>
                    </div>
                </div>

                <!-- 1969å¹´ -->
                <div style="display: flex; align-items: center; margin-bottom: 3rem;">
                    <div style="flex: 1; text-align: right; padding-right: 2rem;">
                        <h4 style="color: var(--accent-red);">1969å¹´ï¼šè‡´å‘½ä¸€å‡»</h4>
                        <p>Minsky & Papert å‡ºç‰ˆã€ŠPerceptronsã€‹</p>
                        <p style="font-style: italic; color: var(--text-secondary);">
                            "æ„ŸçŸ¥æœºè¿XORéƒ½è§£å†³ä¸äº†"
                        </p>
                    </div>
                    <div style="width: 20px; height: 20px; background: var(--accent-red); border-radius: 50%; position: relative; z-index: 1;"></div>
                    <div style="flex: 1; padding-left: 2rem;">
                        <div style="background: rgba(239, 68, 68, 0.1); padding: 1rem; border-radius: 0.5rem;">
                            ğŸ’” ç ”ç©¶èµ„é‡‘æ–­å´–å¼ä¸‹è·Œï¼Œäººæ‰æµå¤±
                        </div>
                    </div>
                </div>

                <!-- 1970-1980å¹´ä»£ -->
                <div style="display: flex; align-items: center;">
                    <div style="flex: 1; text-align: right; padding-right: 2rem;">
                        <div style="background: rgba(15, 23, 42, 0.5); padding: 1rem; border-radius: 0.5rem;">
                            â„ï¸ AIå†¬å¤©ï¼šç ”ç©¶åœæ»è¿‘20å¹´
                        </div>
                    </div>
                    <div style="width: 20px; height: 20px; background: var(--text-muted); border-radius: 50%; position: relative; z-index: 1;"></div>
                    <div style="flex: 1; padding-left: 2rem;">
                        <h4 style="color: var(--text-muted);">1970s-80sï¼šæ¼«é•¿çš„å†¬å¤©</h4>
                        <p>ç¥ç»ç½‘ç»œç ”ç©¶å‡ ä¹åœæ­¢</p>
                    </div>
                </div>
            </div>

            <!-- å†å²æ•™è®­ -->
            <div class="common-mistakes">
                <h3 style="color: var(--accent-red); margin-bottom: 1rem;">ğŸ“ å†å²çš„æ•™è®­</h3>

                <div class="mistake-item">
                    <div class="mistake-icon">ğŸ“</div>
                    <div class="mistake-content">
                        <h4>è¿‡åº¦æ‰¿è¯º</h4>
                        <p>Rosenblattå¯¹æ„ŸçŸ¥æœºèƒ½åŠ›çš„é¢„æµ‹è¿‡äºä¹è§‚ï¼Œå¯¼è‡´æœŸæœ›ä¸ç°å®çš„å·¨å¤§è½å·®ã€‚</p>
                    </div>
                </div>

                <div class="mistake-item">
                    <div class="mistake-icon">ğŸ“</div>
                    <div class="mistake-content">
                        <h4>ç†è®ºå±€é™</h4>
                        <p>å•å±‚æ„ŸçŸ¥æœºçš„è¡¨è¾¾èƒ½åŠ›ç¡®å®æœ‰é™ï¼Œä½†Minskyçš„æ‰¹è¯„ä¹Ÿè¿‡äºæ‚²è§‚ã€‚</p>
                    </div>
                </div>

                <div class="mistake-item">
                    <div class="mistake-icon">ğŸ“</div>
                    <div class="mistake-content">
                        <h4>é”™å¤±çš„æœºä¼š</h4>
                        <p>å…¶å®æ—©åœ¨1960å¹´ä»£å°±æœ‰äººæå‡ºå¤šå±‚ç½‘ç»œï¼Œä½†è¢«å¿½è§†äº†20å¹´ï¼</p>
                    </div>
                </div>
            </div>

            <!-- å¤å…´çš„ç§å­ -->
            <div class="tip info mt-4">
                <span class="tip-icon">ğŸŒ±</span>
                <div class="tip-content">
                    <strong>å¤å…´çš„ç§å­ï¼š</strong><br>
                    â€¢ 1974å¹´ï¼šWerbos å‘æ˜åå‘ä¼ æ’­ï¼ˆåšå£«è®ºæ–‡ï¼Œæ— äººé—®æ´¥ï¼‰<br>
                    â€¢ 1986å¹´ï¼šRumelhart ç­‰äººé‡æ–°å‘ç°åå‘ä¼ æ’­<br>
                    â€¢ 1989å¹´ï¼šLeCun ç”¨CNNè¯†åˆ«æ‰‹å†™æ•°å­—<br>
                    â€¢ æ·±åº¦å­¦ä¹ çš„æ˜¥å¤©ç»ˆäºåˆ°æ¥...
                </div>
            </div>
        </section>

        <!-- çªç ´æ€è€ƒ -->
        <section id="breakthrough" class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">
                ğŸš€ çªç ´æ€è€ƒï¼šæ·±åº¦çš„å¿…è¦æ€§
                <span class="depth-indicator intermediate">è¿›é˜¶</span>
            </h2>

            <!-- æ€ç»´å®éªŒ -->
            <div class="dialogue-container">
                <div class="dialogue-item">
                    <div class="dialogue-avatar student">ğŸ’¡</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">å°é™ˆï¼ˆçµå…‰ä¸€ç°ï¼‰</div>
                        <p>ç­‰ç­‰ï¼å¦‚æœæˆ‘ä»¬æŠŠå¤šä¸ªæ„ŸçŸ¥æœºç»„åˆèµ·æ¥ä¼šæ€æ ·ï¼Ÿ
                            å°±åƒæ­ç§¯æœ¨ä¸€æ ·ï¼</p>
                    </div>
                </div>
                <div class="dialogue-item">
                    <div class="dialogue-avatar teacher">ğŸ‘¨â€ğŸ«</div>
                    <div class="dialogue-content">
                        <div class="dialogue-name">ç‹æ•™æˆ</div>
                        <p>æ­å–œä½ ï¼ä½ åˆšåˆšé‡æ–°å‘ç°äº†å¤šå±‚æ„ŸçŸ¥æœºçš„æ€æƒ³ã€‚
                            è¿™æ­£æ˜¯çªç ´æ„ŸçŸ¥æœºå±€é™çš„å…³é”®...</p>
                    </div>
                </div>
            </div>

            <!-- å¤šå±‚ç½‘ç»œæ¼”ç¤º -->
            <div class="interactive-demo mt-4">
                <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">ğŸ—ï¸ ä»å•å±‚åˆ°å¤šå±‚</h3>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                    <!-- å•å±‚é™åˆ¶ -->
                    <div style="text-align: center;">
                        <h4 style="color: var(--accent-red);">å•å±‚æ„ŸçŸ¥æœº</h4>
                        <div style="background: rgba(239, 68, 68, 0.1); padding: 1.5rem; border-radius: 0.5rem;">
                            <p><strong>è¡¨è¾¾èƒ½åŠ›ï¼š</strong>çº¿æ€§å‡½æ•°</p>
                            <p><strong>å†³ç­–è¾¹ç•Œï¼š</strong>ç›´çº¿/è¶…å¹³é¢</p>
                            <p><strong>å¯è§£å†³ï¼š</strong>çº¿æ€§å¯åˆ†é—®é¢˜</p>
                            <p><strong>æ— æ³•è§£å†³ï¼š</strong>XORã€åœ†å½¢è¾¹ç•Œç­‰</p>
                        </div>
                    </div>

                    <!-- å¤šå±‚èƒ½åŠ› -->
                    <div style="text-align: center;">
                        <h4 style="color: var(--accent-green);">å¤šå±‚ç½‘ç»œ</h4>
                        <div style="background: rgba(34, 197, 94, 0.1); padding: 1.5rem; border-radius: 0.5rem;">
                            <p><strong>è¡¨è¾¾èƒ½åŠ›ï¼š</strong>éçº¿æ€§å‡½æ•°</p>
                            <p><strong>å†³ç­–è¾¹ç•Œï¼š</strong>ä»»æ„å¤æ‚å½¢çŠ¶</p>
                            <p><strong>å¯è§£å†³ï¼š</strong>å‡ ä¹æ‰€æœ‰åˆ†ç±»é—®é¢˜</p>
                            <p><strong>é€šç”¨è¿‘ä¼¼å®šç†ï¼š</strong>ç†è®ºä¿è¯</p>
                        </div>
                    </div>
                </div>

                <!-- XORçš„å¤šå±‚è§£å†³æ–¹æ¡ˆ -->
                <div class="mt-4">
                    <h4 style="text-align: center; color: var(--accent-purple);">ä¸¤å±‚ç½‘ç»œè§£å†³XOR</h4>
                    <canvas id="mlp-xor-canvas" width="800" height="400"></canvas>
                </div>
            </div>

            <!-- æ·±åº¦çš„æ„ä¹‰ -->
            <div class="math-derivation mt-4">
                <h3>ä¸ºä»€ä¹ˆéœ€è¦"æ·±åº¦"ï¼Ÿ</h3>

                <div class="math-step" data-step="1">
                    <strong>è¡¨è¾¾æ•ˆç‡</strong>
                    <p>æ·±å±‚ç½‘ç»œå¯ä»¥ç”¨æŒ‡æ•°çº§æ›´å°‘çš„ç¥ç»å…ƒè¡¨è¾¾åŒæ ·çš„å‡½æ•°</p>
                    <div class="math-explanation">
                        ä¾‹å¦‚ï¼šnä½å¥‡å¶æ ¡éªŒ<br>
                        â€¢ å•éšå±‚éœ€è¦ 2^n ä¸ªç¥ç»å…ƒ<br>
                        â€¢ æ·±å±‚åªéœ€è¦ O(n) ä¸ªç¥ç»å…ƒ
                    </div>
                </div>

                <div class="math-step" data-step="2">
                    <strong>ç‰¹å¾å±‚æ¬¡</strong>
                    <p>æ¯ä¸€å±‚å­¦ä¹ ä¸åŒæŠ½è±¡çº§åˆ«çš„ç‰¹å¾</p>
                    <div class="math-explanation">
                        å›¾åƒè¯†åˆ«ä¸­ï¼š<br>
                        â€¢ ç¬¬1å±‚ï¼šè¾¹ç¼˜ã€è§’ç‚¹<br>
                        â€¢ ç¬¬2å±‚ï¼šç®€å•å½¢çŠ¶<br>
                        â€¢ ç¬¬3å±‚ï¼šå¤æ‚æ¨¡å¼<br>
                        â€¢ æ›´æ·±å±‚ï¼šè¯­ä¹‰æ¦‚å¿µ
                    </div>
                </div>

                <div class="math-step" data-step="3">
                    <strong>ç»„åˆæ€§åŸç†</strong>
                    <p>å¤æ‚æ¦‚å¿µç”±ç®€å•æ¦‚å¿µç»„åˆè€Œæˆ</p>
                    <div class="math-explanation">
                        å°±åƒè¯­è¨€ï¼šå­—æ¯â†’å•è¯â†’å¥å­â†’æ®µè½â†’æ–‡ç« 
                    </div>
                </div>
            </div>

            <!-- å±•æœ›æœªæ¥ -->
            <div class="learning-path">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ”® å±•æœ›ï¼šæ·±åº¦å­¦ä¹ ä¹‹è·¯</h3>

                <div class="path-item">
                    <div class="path-icon">ğŸ“</div>
                    <div class="path-content">
                        <h4>ä¸‹ä¸€æ­¥ï¼šåå‘ä¼ æ’­</h4>
                        <p>å¦‚ä½•è®­ç»ƒå¤šå±‚ç½‘ç»œï¼Ÿæ¢¯åº¦ä¸‹é™çš„é“¾å¼æ³•åˆ™</p>
                    </div>
                </div>
                <div class="path-item">
                    <div class="path-icon">ğŸ§®</div>
                    <div class="path-content">
                        <h4>æ¿€æ´»å‡½æ•°ï¼šéçº¿æ€§çš„é­”æ³•</h4>
                        <p>ReLUã€Sigmoidã€Tanh...ä¸ºä»€ä¹ˆéœ€è¦å®ƒä»¬ï¼Ÿ</p>
                    </div>
                </div>
                <div class="path-item">
                    <div class="path-icon">ğŸ—ï¸</div>
                    <div class="path-content">
                        <h4>ç°ä»£æ¶æ„ï¼šCNNã€RNNã€Transformer</h4>
                        <p>ä»å…¨è¿æ¥åˆ°ä¸“é—¨è®¾è®¡çš„ç½‘ç»œç»“æ„</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ€»ç»“ -->
        <section id="summary" class="section-card">
            <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">
                ğŸ“ æ€»ç»“ï¼šæ‰¿å‰å¯å
            </h2>

            <!-- çŸ¥è¯†æ€»ç»“ -->
            <div class="concept-grid">
                <div class="concept-card what">
                    <h3 style="color: var(--accent-green);">âœ“ æˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆ</h3>
                    <ul style="line-height: 1.8;">
                        <li>æ„ŸçŸ¥æœºçš„æ•°å­¦æ¨¡å‹å’Œå‡ ä½•æ„ä¹‰</li>
                        <li>æ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•çš„åŸç†</li>
                        <li>çº¿æ€§å¯åˆ†æ€§çš„é‡è¦æ€§</li>
                        <li>æ„ŸçŸ¥æœºçš„å®ç°å’Œåº”ç”¨</li>
                    </ul>
                </div>
                <div class="concept-card why">
                    <h3 style="color: var(--accent-red);">âœ“ ä¸ºä»€ä¹ˆé‡è¦</h3>
                    <ul style="line-height: 1.8;">
                        <li>æ·±åº¦å­¦ä¹ çš„å†å²èµ·ç‚¹</li>
                        <li>ç†è§£çº¿æ€§åˆ†ç±»çš„æœ¬è´¨</li>
                        <li>è®¤è¯†å•å±‚ç½‘ç»œçš„å±€é™</li>
                        <li>ä½“ä¼š"æ·±åº¦"çš„å¿…è¦æ€§</li>
                    </ul>
                </div>
                <div class="concept-card how">
                    <h3 style="color: var(--accent-blue);">âœ“ å¦‚ä½•åº”ç”¨</h3>
                    <ul style="line-height: 1.8;">
                        <li>äºŒåˆ†ç±»é—®é¢˜çš„åŸºå‡†æ–¹æ³•</li>
                        <li>ç‰¹å¾å·¥ç¨‹çš„é‡è¦æ€§</li>
                        <li>åœ¨çº¿å­¦ä¹ çš„ç®€å•å®ç°</li>
                        <li>ç†è§£æ›´å¤æ‚æ¨¡å‹çš„åŸºç¡€</li>
                    </ul>
                </div>
                <div class="concept-card pitfall">
                    <h3 style="color: var(--accent-yellow);">âœ“ éœ€è¦æ³¨æ„</h3>
                    <ul style="line-height: 1.8;">
                        <li>ä»…é€‚ç”¨äºçº¿æ€§å¯åˆ†æ•°æ®</li>
                        <li>å¯¹ç‰¹å¾å°ºåº¦æ•æ„Ÿ</li>
                        <li>æ— æ³•ç›´æ¥å¤„ç†å¤šåˆ†ç±»</li>
                        <li>ä¸è¾“å‡ºæ¦‚ç‡å€¼</li>
                    </ul>
                </div>
            </div>

            <!-- å…³é”®è¦ç‚¹ -->
            <div class="tip success mt-4">
                <span class="tip-icon">ğŸ¯</span>
                <div class="tip-content">
                    <strong>ä¸‰ä¸ªå…³é”®è¦ç‚¹ï¼š</strong><br>
                    1. <strong>ç®€å•è€Œä¼˜é›…ï¼š</strong>æ„ŸçŸ¥æœºç”¨æœ€ç®€å•çš„æ¨¡å‹å®ç°äº†æœºå™¨å­¦ä¹ çš„æ ¸å¿ƒæ€æƒ³<br>
                    2. <strong>å±€é™ä½†é‡è¦ï¼š</strong>è™½æœ‰XORä¹‹é™ï¼Œä½†å¥ å®šäº†ç¥ç»ç½‘ç»œçš„åŸºç¡€<br>
                    3. <strong>æ·±åº¦çš„ç§å­ï¼š</strong>å¤šå±‚ç½‘ç»œçš„éœ€æ±‚æ¨åŠ¨äº†æ·±åº¦å­¦ä¹ çš„è¯ç”Ÿ
                </div>
            </div>

            <!-- æ€è€ƒé¢˜ -->
            <div class="instant-practice mt-4">
                <h3 style="color: var(--accent-green); margin-bottom: 1rem;">ğŸ¤” æ·±åº¦æ€è€ƒ</h3>
                <div class="practice-question">
                    å¦‚æœä½ æ˜¯1970å¹´çš„ç ”ç©¶è€…ï¼ŒçŸ¥é“äº†æ„ŸçŸ¥æœºçš„å±€é™ï¼Œä½ ä¼šå¦‚ä½•å°è¯•æ”¹è¿›ï¼Ÿ
                </div>
                <div style="background: rgba(139, 92, 246, 0.1); padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem;">
                    <p><strong>æç¤ºï¼š</strong></p>
                    <ul style="line-height: 1.8;">
                        <li>èƒ½å¦ç»„åˆå¤šä¸ªæ„ŸçŸ¥æœºï¼Ÿ</li>
                        <li>å¦‚ä½•å¼•å…¥éçº¿æ€§ï¼Ÿ</li>
                        <li>æ€æ ·è®­ç»ƒå¤šå±‚ç»“æ„ï¼Ÿ</li>
                        <li>è®¡ç®—èµ„æºçš„é™åˆ¶å¦‚ä½•å…‹æœï¼Ÿ</li>
                    </ul>
                </div>
            </div>

            <!-- ä¸‹ä¸€ç« é¢„å‘Š -->
            <div style="background: var(--primary-gradient); padding: 2rem; border-radius: 1rem; margin-top: 2rem; color: white; text-align: center;">
                <h3 style="margin-bottom: 1rem;">ğŸ¬ ä¸‹ä¸€ç« é¢„å‘Š</h3>
                <h2 style="font-size: 2rem; margin-bottom: 1rem;">åå‘ä¼ æ’­ï¼šæ·±åº¦å­¦ä¹ çš„å¼•æ“</h2>
                <p style="font-size: 1.1rem; opacity: 0.9;">
                    çªç ´æ„ŸçŸ¥æœºçš„å±€é™ï¼Œå¼€å¯æ·±åº¦ç½‘ç»œè®­ç»ƒçš„å¤§é—¨ã€‚<br>
                    æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•è®©è¯¯å·®ä¿¡å·åœ¨ç½‘ç»œä¸­åå‘æµåŠ¨ï¼Œå®ç°ç«¯åˆ°ç«¯çš„å­¦ä¹ ã€‚
                </p>
                <button class="btn" style="background: white; color: var(--accent-purple); margin-top: 1.5rem;" tabindex="0">
                    ç»§ç»­å­¦ä¹  â†’
                </button>
            </div>
        </section>

        <!-- å­¦ä¹ åé¦ˆ -->
        <section class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">ğŸ’¬ å­¦ä¹ åé¦ˆ</h2>
            <div style="text-align: center;">
                <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">è¿™ä¸€ç« çš„å†…å®¹å¯¹ä½ æœ‰å¸®åŠ©å—ï¼Ÿ</p>
                <div style="display: flex; gap: 1rem; justify-content: center;">
                    <button class="btn btn-secondary" onclick="submitFeedback('helpful')" tabindex="0">
                        ğŸ‘ å¾ˆæœ‰å¸®åŠ©
                    </button>
                    <button class="btn btn-secondary" onclick="submitFeedback('ok')" tabindex="0">
                        ğŸ˜ è¿˜å¯ä»¥
                    </button>
                    <button class="btn btn-secondary" onclick="submitFeedback('confusing')" tabindex="0">
                        ğŸ˜• æœ‰ç‚¹å›°æƒ‘
                    </button>
                </div>
                <div id="feedback-response" style="margin-top: 1rem; display: none;">
                    <p style="color: var(--accent-green);">æ„Ÿè°¢ä½ çš„åé¦ˆï¼æˆ‘ä»¬ä¼šç»§ç»­æ”¹è¿›ã€‚</p>
                </div>
            </div>
        </section>
    </div>
</main>

<!-- JavaScriptä»£ç  -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
<script>

    class PerceptronMathVisualizer {
        constructor() {
            this.canvas = document.getElementById('perceptron-math-viz');
            this.ctx = this.canvas.getContext('2d');
            this.width = this.canvas.width;
            this.height = this.canvas.height;

            // æ•°æ®ç‚¹
            this.points = [
                {x: [3, 3], y: 1, label: 'A', color: '#3b82f6'},
                {x: [4, 3], y: 1, label: 'B', color: '#3b82f6'},
                {x: [1, 1], y: -1, label: 'C', color: '#ef4444'},
                {x: [2, 1], y: -1, label: 'D', color: '#ef4444'}
            ];

            // æ„ŸçŸ¥æœºå‚æ•°
            this.w = [0, 0];
            this.b = 0;
            this.lr = 1;

            // çŠ¶æ€
            this.epoch = 0;
            this.sampleIdx = -1;
            this.isRunning = false;
            this.history = [];
            this.updateCount = 0;

            // ç»˜åˆ¶åˆå§‹çŠ¶æ€
            this.draw();

            // ç»‘å®šé€Ÿåº¦æ§åˆ¶
            const speedSlider = document.getElementById('calc-speed');
            speedSlider.addEventListener('input', (e) => {
                document.getElementById('calc-speed-value').textContent = (e.target.value / 1000).toFixed(1) + 's';
            });
        }

        draw() {
            this.ctx.clearRect(0, 0, this.width, this.height);

            // è®¾ç½®åæ ‡ç³»
            this.ctx.save();
            this.ctx.translate(50, this.height - 50);
            this.ctx.scale(60, -60);

            // ç»˜åˆ¶ç½‘æ ¼
            this.drawGrid();

            // ç»˜åˆ¶å†³ç­–è¾¹ç•Œ
            this.drawDecisionBoundary();

            // ç»˜åˆ¶æ•°æ®ç‚¹
            this.drawPoints();

            // ç»˜åˆ¶åæ ‡è½´
            this.drawAxes();

            this.ctx.restore();

            // ç»˜åˆ¶æ ‡ç­¾
            this.drawLabels();
        }

        drawGrid() {
            this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            this.ctx.lineWidth = 0.01;

            for (let i = 0; i <= 5; i++) {
                // å‚ç›´çº¿
                this.ctx.beginPath();
                this.ctx.moveTo(i, 0);
                this.ctx.lineTo(i, 5);
                this.ctx.stroke();

                // æ°´å¹³çº¿
                this.ctx.beginPath();
                this.ctx.moveTo(0, i);
                this.ctx.lineTo(5, i);
                this.ctx.stroke();
            }
        }

        drawAxes() {
            this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.5)';
            this.ctx.lineWidth = 0.02;

            // xè½´
            this.ctx.beginPath();
            this.ctx.moveTo(0, 0);
            this.ctx.lineTo(5, 0);
            this.ctx.stroke();

            // yè½´
            this.ctx.beginPath();
            this.ctx.moveTo(0, 0);
            this.ctx.lineTo(0, 5);
            this.ctx.stroke();
        }

        drawDecisionBoundary() {
            if (this.w[0] === 0 && this.w[1] === 0) return;

            this.ctx.strokeStyle = '#22c55e';
            this.ctx.lineWidth = 0.05;

            // è®¡ç®—è¾¹ç•Œçº¿çš„ä¸¤ä¸ªç«¯ç‚¹
            let x1, y1, x2, y2;

            if (Math.abs(this.w[1]) > 0.001) {
                x1 = 0;
                y1 = -(this.w[0] * x1 + this.b) / this.w[1];
                x2 = 5;
                y2 = -(this.w[0] * x2 + this.b) / this.w[1];
            } else {
                x1 = x2 = -this.b / this.w[0];
                y1 = 0;
                y2 = 5;
            }

            this.ctx.beginPath();
            this.ctx.moveTo(x1, y1);
            this.ctx.lineTo(x2, y2);
            this.ctx.stroke();

            // ç»˜åˆ¶æ³•å‘é‡
            if (this.w[0] !== 0 || this.w[1] !== 0) {
                const norm = Math.sqrt(this.w[0]**2 + this.w[1]**2);
                const nx = this.w[0] / norm;
                const ny = this.w[1] / norm;

                this.ctx.strokeStyle = '#8b5cf6';
                this.ctx.lineWidth = 0.03;

                const centerX = 2.5;
                const centerY = 2.5;

                this.ctx.beginPath();
                this.ctx.moveTo(centerX, centerY);
                this.ctx.lineTo(centerX + nx, centerY + ny);
                this.ctx.stroke();

                // ç®­å¤´
                this.ctx.fillStyle = '#8b5cf6';
                this.ctx.beginPath();
                this.ctx.arc(centerX + nx, centerY + ny, 0.1, 0, Math.PI * 2);
                this.ctx.fill();
            }
        }

        drawPoints() {
            this.points.forEach((point, idx) => {
                const isActive = idx === this.sampleIdx;

                // ç»˜åˆ¶ç‚¹
                this.ctx.fillStyle = point.color;
                this.ctx.strokeStyle = isActive ? '#fbbf24' : '#1f2937';
                this.ctx.lineWidth = isActive ? 0.08 : 0.04;

                this.ctx.beginPath();
                this.ctx.arc(point.x[0], point.x[1], 0.15, 0, Math.PI * 2);
                this.ctx.fill();
                this.ctx.stroke();

                // å¦‚æœæ˜¯å½“å‰å¤„ç†çš„ç‚¹ï¼Œæ·»åŠ åŠ¨ç”»æ•ˆæœ
                if (isActive) {
                    this.ctx.strokeStyle = '#fbbf24';
                    this.ctx.lineWidth = 0.02;
                    this.ctx.setLineDash([0.1, 0.1]);
                    this.ctx.beginPath();
                    this.ctx.arc(point.x[0], point.x[1], 0.25, 0, Math.PI * 2);
                    this.ctx.stroke();
                    this.ctx.setLineDash([]);
                }
            });
        }

        drawLabels() {
            this.ctx.font = '14px Arial';
            this.ctx.fillStyle = '#f1f5f9';

            // xè½´æ ‡ç­¾
            for (let i = 0; i <= 5; i++) {
                this.ctx.fillText(i.toString(), 50 + i * 60 - 5, this.height - 30);
            }

            // yè½´æ ‡ç­¾
            for (let i = 0; i <= 5; i++) {
                this.ctx.fillText(i.toString(), 25, this.height - 50 - i * 60 + 5);
            }

            // è½´åç§°
            this.ctx.fillText('xâ‚', this.width - 30, this.height - 10);
            this.ctx.fillText('xâ‚‚', 10, 20);

            // ç‚¹æ ‡ç­¾
            this.points.forEach(point => {
                const x = 50 + point.x[0] * 60;
                const y = this.height - 50 - point.x[1] * 60;
                this.ctx.fillText(point.label, x + 15, y - 15);
            });
        }

        step() {
            // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ ·æœ¬
            this.sampleIdx++;
            if (this.sampleIdx >= this.points.length) {
                this.sampleIdx = 0;
                this.epoch++;
            }

            const point = this.points[this.sampleIdx];
            const x = point.x;
            const y = point.y;

            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('calc-epoch').textContent = this.epoch;
            document.getElementById('calc-sample').textContent = `${point.label} (${x[0]}, ${x[1]}), y = ${y > 0 ? '+1' : '-1'}`;
            document.getElementById('calc-w').textContent = `${this.w[0].toFixed(2)}, ${this.w[1].toFixed(2)}`;
            document.getElementById('calc-b').textContent = this.b.toFixed(2);

            // è®¡ç®—
            const z = this.w[0] * x[0] + this.w[1] * x[1] + this.b;
            const pred = z >= 0 ? 1 : -1;
            const correct = pred === y;

            // æ˜¾ç¤ºè®¡ç®—ç»†èŠ‚
            const mathDetails = document.getElementById('math-details');
            mathDetails.innerHTML = `
            <div>wÂ·x + b = ${this.w[0].toFixed(2)}Ã—${x[0]} + ${this.w[1].toFixed(2)}Ã—${x[1]} + ${this.b.toFixed(2)}</div>
            <div style="margin-left: 3.5rem;">= ${(this.w[0]*x[0]).toFixed(2)} + ${(this.w[1]*x[1]).toFixed(2)} + ${this.b.toFixed(2)}</div>
            <div style="margin-left: 3.5rem;">= <strong>${z.toFixed(2)}</strong></div>
            <div style="margin-top: 0.5rem;">é¢„æµ‹: sign(${z.toFixed(2)}) = <strong style="color: ${pred > 0 ? '#3b82f6' : '#ef4444'}">${pred > 0 ? '+1' : '-1'}</strong></div>
            <div>çœŸå®: <strong style="color: ${y > 0 ? '#3b82f6' : '#ef4444'}">${y > 0 ? '+1' : '-1'}</strong></div>
            <div style="margin-top: 0.5rem; color: ${correct ? '#22c55e' : '#ef4444'}"><strong>${correct ? 'âœ“ æ­£ç¡®!' : 'âœ— é”™è¯¯!'}</strong></div>
        `;

            // é«˜äº®æ˜¾ç¤ºè®¡ç®—æ­¥éª¤
            const steps = document.querySelectorAll('.calc-step');
            steps.forEach((step, idx) => {
                step.style.opacity = '1';
                step.style.color = idx < 3 ? 'var(--accent-green)' : (correct ? 'var(--text-muted)' : 'var(--accent-yellow)');
            });

            // å¦‚æœé¢„æµ‹é”™è¯¯ï¼Œæ›´æ–°å‚æ•°
            if (!correct) {
                const old_w = [...this.w];
                const old_b = this.b;

                this.w[0] += this.lr * y * x[0];
                this.w[1] += this.lr * y * x[1];
                this.b += this.lr * y;

                this.updateCount++;

                // æ·»åŠ æ›´æ–°å†å²
                const history = document.getElementById('update-history');
                const updateInfo = `
                <div style="padding: 0.5rem; background: rgba(239, 68, 68, 0.1); border-radius: 0.25rem; margin-bottom: 0.5rem;">
                    <strong>ç¬¬${this.updateCount}æ¬¡æ›´æ–°</strong> (è½®${this.epoch}, æ ·æœ¬${point.label})
                    <div style="font-size: 0.8rem; margin-top: 0.25rem;">
                        w: [${old_w[0].toFixed(2)}, ${old_w[1].toFixed(2)}] â†’ [${this.w[0].toFixed(2)}, ${this.w[1].toFixed(2)}]<br>
                        b: ${old_b.toFixed(2)} â†’ ${this.b.toFixed(2)}
                    </div>
                </div>
            `;

                if (this.updateCount === 1) {
                    history.innerHTML = updateInfo;
                } else {
                    history.innerHTML = updateInfo + history.innerHTML;
                }

                // æ›´æ–°æ•°å­¦ç»†èŠ‚æ˜¾ç¤º
                setTimeout(() => {
                    mathDetails.innerHTML += `
                    <div style="margin-top: 1rem; padding: 0.5rem; background: rgba(251, 191, 36, 0.2); border-radius: 0.25rem;">
                        <strong>æ›´æ–°å‚æ•°:</strong><br>
                        w â† w + Î·Â·yÂ·x = [${old_w[0].toFixed(2)}, ${old_w[1].toFixed(2)}] + 1Ã—${y}Ã—[${x[0]}, ${x[1]}]<br>
                        ã€€ã€€ã€€ã€€ã€€ã€€= [${this.w[0].toFixed(2)}, ${this.w[1].toFixed(2)}]<br>
                        b â† b + Î·Â·y = ${old_b.toFixed(2)} + 1Ã—${y} = ${this.b.toFixed(2)}
                    </div>
                `;
                }, 500);
            }

            // é‡æ–°ç»˜åˆ¶
            this.draw();

            // æ£€æŸ¥æ˜¯å¦æ”¶æ•›
            if (this.checkConvergence()) {
                this.isRunning = false;
                this.showResult();
                return true;
            }

            return false;
        }

        checkConvergence() {
            if (this.epoch > 50) return true; // é˜²æ­¢æ— é™å¾ªç¯

            for (const point of this.points) {
                const z = this.w[0] * point.x[0] + this.w[1] * point.x[1] + this.b;
                const pred = z >= 0 ? 1 : -1;
                if (pred !== point.y) return false;
            }
            return true;
        }

        showResult() {
            const resultDiv = document.getElementById('calculation-result');
            resultDiv.style.display = 'block';

            document.getElementById('final-result').innerHTML = `
            <p><strong>æœ€ç»ˆå‚æ•°ï¼š</strong></p>
            <ul>
                <li>æƒé‡å‘é‡ w = [${this.w[0].toFixed(3)}, ${this.w[1].toFixed(3)}]</li>
                <li>åç½® b = ${this.b.toFixed(3)}</li>
                <li>å†³ç­–è¾¹ç•Œæ–¹ç¨‹ï¼š${this.w[0].toFixed(3)}xâ‚ + ${this.w[1].toFixed(3)}xâ‚‚ + ${this.b.toFixed(3)} = 0</li>
            </ul>
            <p><strong>è®­ç»ƒç»Ÿè®¡ï¼š</strong></p>
            <ul>
                <li>æ€»è¿­ä»£è½®æ¬¡ï¼š${this.epoch}</li>
                <li>å‚æ•°æ›´æ–°æ¬¡æ•°ï¼š${this.updateCount}</li>
                <li>æœ€ç»ˆå‡†ç¡®ç‡ï¼š100%</li>
            </ul>
        `;

            showNotification('ğŸ‰ æ„ŸçŸ¥æœºæ”¶æ•›æˆåŠŸï¼');
        }

        reset() {
            this.w = [0, 0];
            this.b = 0;
            this.epoch = 0;
            this.sampleIdx = -1;
            this.updateCount = 0;
            this.isRunning = false;

            document.getElementById('calc-epoch').textContent = '0';
            document.getElementById('calc-sample').textContent = 'ç­‰å¾…å¼€å§‹...';
            document.getElementById('calc-w').textContent = '0, 0';
            document.getElementById('calc-b').textContent = '0';
            document.getElementById('math-details').innerHTML = 'ç­‰å¾…è®¡ç®—...';
            document.getElementById('update-history').innerHTML = '<div style="color: var(--text-secondary);">è¿˜æ²¡æœ‰æ›´æ–°è®°å½•...</div>';
            document.getElementById('calculation-result').style.display = 'none';

            document.querySelectorAll('.calc-step').forEach(step => {
                step.style.opacity = '0.5';
                step.style.color = 'inherit';
            });

            this.draw();
        }
    }

    // åˆå§‹åŒ–æ•°å­¦å¯è§†åŒ–
    let mathViz = null;
    document.addEventListener('DOMContentLoaded', () => {
        if (document.getElementById('perceptron-math-viz')) {
            mathViz = new PerceptronMathVisualizer();
        }
    });

    // æ§åˆ¶å‡½æ•°
    function startCalculation() {
        if (!mathViz) mathViz = new PerceptronMathVisualizer();

        mathViz.isRunning = true;
        document.getElementById('start-calculation').innerHTML = 'â¸ï¸ æš‚åœ';
        document.getElementById('start-calculation').onclick = pauseCalculation;

        const speed = parseInt(document.getElementById('calc-speed').value);

        const runStep = () => {
            if (!mathViz.isRunning) return;

            const converged = mathViz.step();

            if (!converged) {
                setTimeout(runStep, speed);
            } else {
                document.getElementById('start-calculation').innerHTML = 'â–¶ï¸ å¼€å§‹è®¡ç®—';
                document.getElementById('start-calculation').onclick = startCalculation;
            }
        };

        runStep();
    }

    function pauseCalculation() {
        if (mathViz) {
            mathViz.isRunning = false;
            document.getElementById('start-calculation').innerHTML = 'â–¶ï¸ ç»§ç»­';
            document.getElementById('start-calculation').onclick = startCalculation;
        }
    }

    function stepCalculation() {
        if (!mathViz) mathViz = new PerceptronMathVisualizer();
        mathViz.isRunning = false;
        mathViz.step();
    }

    function resetCalculation() {
        if (!mathViz) mathViz = new PerceptronMathVisualizer();
        mathViz.reset();
        document.getElementById('start-calculation').innerHTML = 'â–¶ï¸ å¼€å§‹è®¡ç®—';
        document.getElementById('start-calculation').onclick = startCalculation;
    }
    // åˆå§‹åŒ–ä»£ç é«˜äº®
    hljs.highlightAll();

    // åˆå§‹åŒ–æ•°å­¦å…¬å¼æ¸²æŸ“
    renderMathInElement(document.body, {
        delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
        ]
    });

    // å…¨å±€å˜é‡
    let currentDifficulty = 'beginner';
    let buddyMessages = {
        beginner: [
            "è®°ä½ï¼šæ„ŸçŸ¥æœºå°±åƒä¸€ä¸ªç®€å•çš„æŠ•ç¥¨å™¨ï¼",
            "å¦‚æœè§‰å¾—æ•°å­¦å…¬å¼éš¾æ‡‚ï¼Œå…ˆçœ‹å‡ ä½•ç›´è§‚ã€‚",
            "XORé—®é¢˜å‘Šè¯‰æˆ‘ä»¬ï¼šæœ‰æ—¶å€™ç®€å•ä¸å¤Ÿç”¨ã€‚"
        ],
        intermediate: [
            "æ³¨æ„æƒé‡æ›´æ–°çš„æ–¹å‘ä¸é”™è¯¯åˆ†ç±»çš„å…³ç³»ã€‚",
            "æ€è€ƒä¸€ä¸‹ï¼šä¸ºä»€ä¹ˆåç½®é¡¹bä¹Ÿéœ€è¦æ›´æ–°ï¼Ÿ",
            "æ”¶æ•›å®šç†çš„æ¡ä»¶å¾ˆé‡è¦ï¼šçº¿æ€§å¯åˆ†ï¼"
        ],
        advanced: [
            "æ„ŸçŸ¥æœºæŸå¤±å‡½æ•°æ˜¯éå‡¸çš„ï¼Œä½†ä¾ç„¶èƒ½æ”¶æ•›ã€‚",
            "å¯¹å¶å½¢å¼èƒ½æ­ç¤ºæ”¯æŒå‘é‡æœºçš„è”ç³»ã€‚",
            "æ ¸æŠ€å·§èƒ½è®©æ„ŸçŸ¥æœºå¤„ç†éçº¿æ€§é—®é¢˜ã€‚"
        ]
    };

    // å¯¼èˆªåŠŸèƒ½
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const toggleSidebarBtn = document.getElementById('toggle-sidebar');

    toggleSidebarBtn.addEventListener('click', () => {
        sidebar.classList.toggle('open');
        sidebarOverlay.classList.toggle('active');
    });

    sidebarOverlay.addEventListener('click', () => {
        sidebar.classList.remove('open');
        sidebarOverlay.classList.remove('active');
    });

    // å­¦ä¹ ä¼™ä¼´åŠŸèƒ½
    const learningBuddy = document.getElementById('learning-buddy');
    const toggleBuddyBtn = document.getElementById('toggle-buddy');
    const minimizeBuddyBtn = document.getElementById('minimize-buddy');
    const closeBuddyBtn = document.getElementById('close-buddy');
    const buddyAvatar = document.getElementById('buddy-avatar');

    toggleBuddyBtn.addEventListener('click', () => {
        learningBuddy.classList.toggle('active');
    });

    minimizeBuddyBtn.addEventListener('click', () => {
        learningBuddy.classList.toggle('minimized');
    });

    closeBuddyBtn.addEventListener('click', () => {
        learningBuddy.classList.remove('active');
    });

    buddyAvatar.addEventListener('click', () => {
        if (learningBuddy.classList.contains('minimized')) {
            learningBuddy.classList.remove('minimized');
        }
    });

    // å­¦ä¹ ä¼™ä¼´æç¤ºåŠŸèƒ½
    function getBuddyHint() {
        const messages = buddyMessages[currentDifficulty];
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        updateBuddyMessage(randomMessage);
    }

    function getBuddySummary() {
        const summary = `
        æœ¬ç« æ ¸å¿ƒè¦ç‚¹ï¼š<br>
        1. æ„ŸçŸ¥æœº = çº¿æ€§ç»„åˆ + ç¬¦å·å‡½æ•°<br>
        2. å­¦ä¹ è§„åˆ™ï¼šä»é”™è¯¯ä¸­å­¦ä¹ <br>
        3. å±€é™æ€§ï¼šåªèƒ½å¤„ç†çº¿æ€§å¯åˆ†é—®é¢˜<br>
        4. å†å²æ„ä¹‰ï¼šå¼€å¯äº†ç¥ç»ç½‘ç»œæ—¶ä»£
    `;
        updateBuddyMessage(summary);
    }

    function updateBuddyMessage(message) {
        const messageElement = document.querySelector('.buddy-message p');
        messageElement.innerHTML = message;

        // æ·»åŠ åŠ¨ç”»æ•ˆæœ
        messageElement.style.animation = 'none';
        setTimeout(() => {
            messageElement.style.animation = 'fadeIn 0.5s ease';
        }, 10);
    }

    // ä¸»é¢˜åˆ‡æ¢
    const toggleThemeBtn = document.getElementById('toggle-theme');
    toggleThemeBtn.addEventListener('click', () => {
        const currentTheme = document.body.getAttribute('data-theme');
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        document.body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
    });

    // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.body.setAttribute('data-theme', savedTheme);

    // éš¾åº¦é€‰æ‹©åŠŸèƒ½
    const difficultyOptions = document.querySelectorAll('.difficulty-option');
    difficultyOptions.forEach(option => {
        option.addEventListener('click', () => {
            const difficulty = option.querySelector('input').value;
            currentDifficulty = difficulty;

            // æ›´æ–°é€‰ä¸­çŠ¶æ€
            difficultyOptions.forEach(opt => opt.classList.remove('active'));
            option.classList.add('active');

            // æ›´æ–°å†…å®¹æ˜¾ç¤º
            updateContentVisibility(difficulty);

            // æ˜¾ç¤ºé€šçŸ¥
            showNotification(`å·²åˆ‡æ¢åˆ°${option.textContent.trim()}æ¨¡å¼`);
        });
    });

    function updateContentVisibility(difficulty) {
        // æ ¹æ®éš¾åº¦æ˜¾ç¤º/éšè—å†…å®¹
        const beginnerContent = document.querySelectorAll('.beginner-content');
        const intermediateContent = document.querySelectorAll('.intermediate-content');
        const advancedContent = document.querySelectorAll('.advanced-content');

        // é»˜è®¤æ˜¾ç¤ºæ‰€æœ‰åˆå­¦è€…å†…å®¹
        beginnerContent.forEach(el => el.style.display = 'block');

        if (difficulty === 'beginner') {
            intermediateContent.forEach(el => el.style.display = 'none');
            advancedContent.forEach(el => el.style.display = 'none');
        } else if (difficulty === 'intermediate') {
            intermediateContent.forEach(el => el.style.display = 'block');
            advancedContent.forEach(el => el.style.display = 'none');
        } else {
            intermediateContent.forEach(el => el.style.display = 'block');
            advancedContent.forEach(el => el.style.display = 'block');
        }
    }

    // æŠ˜å åŠŸèƒ½
    const collapsibles = document.querySelectorAll('.collapsible-header');
    collapsibles.forEach(header => {
        header.addEventListener('click', () => {
            const collapsible = header.parentElement;
            collapsible.classList.toggle('expanded');
        });

        // é”®ç›˜æ”¯æŒ
        header.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                header.click();
            }
        });
    });

    // æ»šåŠ¨è¿›åº¦æ¡
    function updateProgressBar() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrollPercentage = (scrollTop / scrollHeight) * 100;
        document.getElementById('progress-bar').style.width = scrollPercentage + '%';
    }

    window.addEventListener('scroll', updateProgressBar);

    // å¯¼èˆªé«˜äº®
    const sections = document.querySelectorAll('section[id]');
    const navItems = document.querySelectorAll('.toc-item');

    function updateNavHighlight() {
        const scrollPosition = window.pageYOffset + 100;

        sections.forEach((section, index) => {
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;

            if (scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                navItems.forEach(item => item.classList.remove('active'));
                navItems[index].classList.add('active');
            }
        });
    }

    window.addEventListener('scroll', updateNavHighlight);

    // æˆå°±ç³»ç»Ÿ
    let completedSections = new Set();
    let achievements = {
        firstConcept: false,
        allPractice: false,
        deepDive: false,
        finishChapter: false
    };

    function checkAchievements() {
        const totalSections = sections.length;
        const completed = completedSections.size;

        if (completed === 1 && !achievements.firstConcept) {
            achievements.firstConcept = true;
            showAchievement("åˆè¯†æ„ŸçŸ¥æœº", "å®Œæˆäº†ç¬¬ä¸€ä¸ªæ¦‚å¿µçš„å­¦ä¹ ï¼");
        }

        if (completed === totalSections && !achievements.finishChapter) {
            achievements.finishChapter = true;
            showAchievement("æ„ŸçŸ¥æœºå¤§å¸ˆ", "å®Œæˆäº†æ•´ç« çš„å­¦ä¹ ï¼");
        }

        updateAchievementProgress(completed, totalSections);
    }

    function showAchievement(title, description) {
        const popup = document.getElementById('achievement-popup');
        const textElement = document.getElementById('achievement-text');

        textElement.textContent = description;
        popup.classList.add('show');

        setTimeout(() => {
            popup.classList.remove('show');
        }, 5000);
    }

    function updateAchievementProgress(completed, total) {
        const progress = (completed / total) * 100;
        document.getElementById('achievement-progress').style.width = progress + '%';
        document.getElementById('achievement-count').textContent = completed;
    }

    // äº¤äº’å¼å¯è§†åŒ–
    class PerceptronVisualizer {
        constructor(canvasId) {
            this.canvas = document.getElementById(canvasId);
            this.ctx = this.canvas.getContext('2d');
            this.width = this.canvas.width;
            this.height = this.canvas.height;

            // æ•°æ®ç‚¹
            this.points = this.generateData();

            // æ„ŸçŸ¥æœºå‚æ•°
            this.w1 = 1;
            this.w2 = 1;
            this.b = -120;

            // ç»‘å®šæ»‘å—
            this.bindSliders();

            // åˆå§‹ç»˜åˆ¶
            this.draw();

            // é¼ æ ‡äº¤äº’
            this.canvas.addEventListener('click', (e) => this.addPoint(e));
        }

        generateData() {
            const points = [];

            // ç”Ÿæˆä¸¤ç±»æ•°æ®
            // ç¬¬ä¸€ç±»ï¼šé€šè¿‡è€ƒè¯•çš„å­¦ç”Ÿï¼ˆè“è‰²ï¼‰
            for (let i = 0; i < 20; i++) {
                points.push({
                    x: 60 + Math.random() * 40,  // ä½œä¸šåˆ†æ•° 60-100
                    y: 60 + Math.random() * 40,  // æœŸä¸­åˆ†æ•° 60-100
                    label: 1,
                    color: '#3b82f6'
                });
            }

            // ç¬¬äºŒç±»ï¼šæœªé€šè¿‡çš„å­¦ç”Ÿï¼ˆçº¢è‰²ï¼‰
            for (let i = 0; i < 20; i++) {
                points.push({
                    x: 20 + Math.random() * 40,  // ä½œä¸šåˆ†æ•° 20-60
                    y: 20 + Math.random() * 40,  // æœŸä¸­åˆ†æ•° 20-60
                    label: -1,
                    color: '#ef4444'
                });
            }

            return points;
        }

        bindSliders() {
            const w1Slider = document.getElementById('w1-slider');
            const w2Slider = document.getElementById('w2-slider');
            const bSlider = document.getElementById('b-slider');

            w1Slider.addEventListener('input', (e) => {
                this.w1 = parseFloat(e.target.value);
                document.getElementById('w1-value').textContent = this.w1.toFixed(1);
                this.draw();
            });

            w2Slider.addEventListener('input', (e) => {
                this.w2 = parseFloat(e.target.value);
                document.getElementById('w2-value').textContent = this.w2.toFixed(1);
                this.draw();
            });

            bSlider.addEventListener('input', (e) => {
                this.b = parseFloat(e.target.value);
                document.getElementById('b-value').textContent = this.b;
                this.draw();
            });
        }

        predict(x, y) {
            return Math.sign(this.w1 * x + this.w2 * y + this.b);
        }

        draw() {
            // æ¸…ç©ºç”»å¸ƒ
            this.ctx.clearRect(0, 0, this.width, this.height);

            // ç»˜åˆ¶å†³ç­–è¾¹ç•Œ
            this.drawDecisionBoundary();

            // ç»˜åˆ¶æ•°æ®ç‚¹
            let correct = 0;
            let errors = 0;

            this.points.forEach(point => {
                const predicted = this.predict(point.x, point.y);
                const isCorrect = predicted === point.label;

                if (isCorrect) correct++;
                else errors++;

                this.drawPoint(point, isCorrect);
            });

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            document.getElementById('correct-count').textContent = correct;
            document.getElementById('error-count').textContent = errors;
            document.getElementById('accuracy').textContent =
                ((correct / this.points.length) * 100).toFixed(1) + '%';
        }

        drawDecisionBoundary() {
            if (this.w2 === 0) return;

            this.ctx.strokeStyle = '#22c55e';
            this.ctx.lineWidth = 3;
            this.ctx.beginPath();

            // è®¡ç®—å†³ç­–è¾¹ç•Œçš„ä¸¤ä¸ªç«¯ç‚¹
            const x1 = 0;
            const y1 = -(this.w1 * x1 + this.b) / this.w2;

            const x2 = 100;
            const y2 = -(this.w1 * x2 + this.b) / this.w2;

            // è½¬æ¢åˆ°ç”»å¸ƒåæ ‡
            const canvasX1 = (x1 / 100) * this.width;
            const canvasY1 = this.height - (y1 / 100) * this.height;

            const canvasX2 = (x2 / 100) * this.width;
            const canvasY2 = this.height - (y2 / 100) * this.height;

            this.ctx.moveTo(canvasX1, canvasY1);
            this.ctx.lineTo(canvasX2, canvasY2);
            this.ctx.stroke();

            // ç»˜åˆ¶æ³•å‘é‡
            const centerX = this.width / 2;
            const centerY = this.height / 2;
            const normalScale = 50;

            this.ctx.strokeStyle = '#8b5cf6';
            this.ctx.beginPath();
            this.ctx.moveTo(centerX, centerY);
            this.ctx.lineTo(
                centerX + this.w1 * normalScale,
                centerY - this.w2 * normalScale
            );
            this.ctx.stroke();

            // ç»˜åˆ¶ç®­å¤´
            this.ctx.fillStyle = '#8b5cf6';
            this.ctx.beginPath();
            this.ctx.arc(
                centerX + this.w1 * normalScale,
                centerY - this.w2 * normalScale,
                5, 0, Math.PI * 2
            );
            this.ctx.fill();
        }

        drawPoint(point, isCorrect) {
            const canvasX = (point.x / 100) * this.width;
            const canvasY = this.height - (point.y / 100) * this.height;

            this.ctx.fillStyle = point.color;
            this.ctx.strokeStyle = isCorrect ? '#10b981' : '#fbbf24';
            this.ctx.lineWidth = isCorrect ? 2 : 4;

            this.ctx.beginPath();
            this.ctx.arc(canvasX, canvasY, 8, 0, Math.PI * 2);
            this.ctx.fill();
            this.ctx.stroke();
        }

        addPoint(event) {
            const rect = this.canvas.getBoundingClientRect();
            const canvasX = event.clientX - rect.left;
            const canvasY = event.clientY - rect.top;

            // è½¬æ¢åˆ°æ•°æ®åæ ‡
            const x = (canvasX / this.width) * 100;
            const y = ((this.height - canvasY) / this.height) * 100;

            // é¢„æµ‹æ ‡ç­¾
            const label = this.predict(x, y);

            this.points.push({
                x: x,
                y: y,
                label: label,
                color: label === 1 ? '#3b82f6' : '#ef4444'
            });

            this.draw();
        }
    }

    // åˆ›å»ºå¯è§†åŒ–å®ä¾‹
    const perceptronViz = new PerceptronVisualizer('perceptron-canvas');

    // è‡ªåŠ¨è®­ç»ƒåŠŸèƒ½
    function autoTrain() {
        const points = perceptronViz.points;
        const lr = 0.01;
        let iterations = 0;
        const maxIterations = 1000;

        const trainStep = () => {
            let hasError = false;

            // éšæœºé€‰æ‹©ä¸€ä¸ªé”™è¯¯åˆ†ç±»çš„ç‚¹
            const shuffled = [...points].sort(() => Math.random() - 0.5);

            for (const point of shuffled) {
                const predicted = perceptronViz.predict(point.x, point.y);

                if (predicted !== point.label) {
                    hasError = true;

                    // æ›´æ–°æƒé‡
                    perceptronViz.w1 += lr * point.label * point.x;
                    perceptronViz.w2 += lr * point.label * point.y;
                    perceptronViz.b += lr * point.label;

                    // æ›´æ–°æ»‘å—
                    document.getElementById('w1-slider').value = perceptronViz.w1;
                    document.getElementById('w2-slider').value = perceptronViz.w2;
                    document.getElementById('b-slider').value = perceptronViz.b;

                    document.getElementById('w1-value').textContent = perceptronViz.w1.toFixed(1);
                    document.getElementById('w2-value').textContent = perceptronViz.w2.toFixed(1);
                    document.getElementById('b-value').textContent = perceptronViz.b.toFixed(0);

                    perceptronViz.draw();
                    break;
                }
            }

            iterations++;

            if (!hasError || iterations >= maxIterations) {
                if (!hasError) {
                    showNotification('ğŸ‰ è®­ç»ƒå®Œæˆï¼æ‰€æœ‰æ ·æœ¬éƒ½è¢«æ­£ç¡®åˆ†ç±»ã€‚');
                } else {
                    showNotification('âš ï¸ è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œæ•°æ®å¯èƒ½ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚');
                }
            } else {
                setTimeout(trainStep, 50);
            }
        };

        trainStep();
    }

    function resetParams() {
        perceptronViz.w1 = 1;
        perceptronViz.w2 = 1;
        perceptronViz.b = -120;

        document.getElementById('w1-slider').value = 1;
        document.getElementById('w2-slider').value = 1;
        document.getElementById('b-slider').value = -120;

        document.getElementById('w1-value').textContent = '1.0';
        document.getElementById('w2-value').textContent = '1.0';
        document.getElementById('b-value').textContent = '-120';

        perceptronViz.draw();
    }

    // ç»ƒä¹ é¢˜åŠŸèƒ½
    const practiceOptions = document.querySelectorAll('.practice-option');
    practiceOptions.forEach(option => {
        option.addEventListener('click', function() {
            const answer = this.getAttribute('data-answer');
            const questionNumber = this.closest('.instant-practice').querySelector('.practice-feedback').id.split('-').pop();

            // æ¸…é™¤ä¹‹å‰çš„é€‰æ‹©
            this.parentElement.querySelectorAll('.practice-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            this.classList.add('selected');

            // æ£€æŸ¥ç­”æ¡ˆ
            checkAnswer(answer, questionNumber);
        });
    });

    function checkAnswer(answer, questionNumber) {
        const correctAnswers = {
            '1': 'b',  // ä¸çŸ¥é“å¦‚ä½•ç¡®å®šæœ€ä½³çš„æƒé‡å‚æ•°
            '2': 'b',  // ä¸€æ¡ç›´çº¿
            '3': 'b'   // æ­£ç¡®åˆ†ç±»çš„æ ·æœ¬ä¸éœ€è¦è°ƒæ•´å†³ç­–è¾¹ç•Œ
        };

        const feedback = document.getElementById(`practice-feedback-${questionNumber}`);
        const isCorrect = answer === correctAnswers[questionNumber];

        if (isCorrect) {
            feedback.className = 'practice-feedback show correct';
            feedback.innerHTML = `
            <strong>âœ… æ­£ç¡®ï¼</strong><br>
            ${getFeedbackText(questionNumber, true)}
        `;

            // æ ‡è®°å®Œæˆ
            completedSections.add(`practice-${questionNumber}`);
            checkAchievements();
        } else {
            feedback.className = 'practice-feedback show incorrect';
            feedback.innerHTML = `
            <strong>âŒ å†æƒ³æƒ³...</strong><br>
            ${getFeedbackText(questionNumber, false)}
        `;
        }
    }

    function getFeedbackText(questionNumber, isCorrect) {
        const feedbacks = {
            '1': {
                correct: "æ²¡é”™ï¼å°é™ˆçš„æ ¸å¿ƒå›°éš¾æ˜¯ä¸çŸ¥é“å¦‚ä½•ç³»ç»Ÿåœ°æ‰¾åˆ°æœ€ä¼˜å‚æ•°ï¼Œè¿™æ­£æ˜¯æœºå™¨å­¦ä¹ è¦è§£å†³çš„é—®é¢˜ã€‚",
                incorrect: "æç¤ºï¼šæƒ³æƒ³çœ‹ï¼Œå°é™ˆå°è¯•äº†å„ç§æƒé‡ç»„åˆä½†æ•ˆæœä¸å¥½ï¼Œä»–æœ€éœ€è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ"
            },
            '2': {
                correct: "æ­£ç¡®ï¼åœ¨äºŒç»´ç©ºé—´ä¸­ï¼Œwâ‚xâ‚ + wâ‚‚xâ‚‚ + b = 0 ç¡®å®è¡¨ç¤ºä¸€æ¡ç›´çº¿ï¼Œè¿™å°±æ˜¯æ„ŸçŸ¥æœºçš„å†³ç­–è¾¹ç•Œã€‚",
                incorrect: "æç¤ºï¼šè¿™æ˜¯ä¸€ä¸ªçº¿æ€§æ–¹ç¨‹ï¼Œæƒ³æƒ³çº¿æ€§æ–¹ç¨‹åœ¨å¹³é¢ä¸Šè¡¨ç¤ºä»€ä¹ˆå‡ ä½•å›¾å½¢ï¼Ÿ"
            },
            '3': {
                correct: "å®Œå…¨æ­£ç¡®ï¼è¿™å°±æ˜¯æ„ŸçŸ¥æœºå­¦ä¹ ç®—æ³•çš„ç²¾é«“ â€”â€” åªä¿®æ­£é”™è¯¯ï¼Œä¿æŒæ­£ç¡®ã€‚",
                incorrect: "æç¤ºï¼šå¦‚æœä¸€ä¸ªæ ·æœ¬å·²ç»è¢«æ­£ç¡®åˆ†ç±»äº†ï¼Œè°ƒæ•´å‚æ•°å¯èƒ½ä¼šå½±å“ä»€ä¹ˆï¼Ÿ"
            }
        };

        return feedbacks[questionNumber][isCorrect ? 'correct' : 'incorrect'];
    }

    // ä»£ç æ ‡ç­¾åˆ‡æ¢
    const codeTabs = document.querySelectorAll('.code-tab');
    codeTabs.forEach(tab => {
        tab.addEventListener('click', function() {
            const lang = this.getAttribute('data-lang');

            // æ›´æ–°æ ‡ç­¾çŠ¶æ€
            codeTabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            // åˆ‡æ¢ä»£ç å†…å®¹
            document.querySelectorAll('.code-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById(`${lang}-code`).style.display = 'block';
        });
    });

    // ä»£ç åŠŸèƒ½
    function copyCode() {
        const activeTab = document.querySelector('.code-tab.active');
        const lang = activeTab.getAttribute('data-lang');
        const codeContent = document.getElementById(`${lang}-code`).textContent;

        navigator.clipboard.writeText(codeContent).then(() => {
            showNotification('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
        });
    }

    function runCode() {
        const output = document.getElementById('code-output');
        output.classList.add('show');

        // æ¨¡æ‹Ÿè¿è¡Œæ•ˆæœ
        output.innerHTML = `
        <strong>è¿è¡Œç»“æœï¼š</strong>
        <pre>æ­£åœ¨è®­ç»ƒæ„ŸçŸ¥æœº...
Epoch 0: é”™è¯¯æ•° = 12, å‡†ç¡®ç‡ = 88.0%
Epoch 10: é”™è¯¯æ•° = 5, å‡†ç¡®ç‡ = 95.0%
Epoch 20: é”™è¯¯æ•° = 2, å‡†ç¡®ç‡ = 98.0%
âœ“ å®Œç¾æ”¶æ•›ï¼ä»…ç”¨äº† 23 è½®è¿­ä»£

æœ€ç»ˆå‚æ•°ï¼š
æƒé‡ w = [0.832, 0.645]
åç½® b = -1.2451
è®­ç»ƒå‡†ç¡®ç‡: 100.0%</pre>
    `;
    }

    // é€šçŸ¥åŠŸèƒ½
    function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => {
            notification.remove();
        }, 3000);
    }

    // XORæ¼”ç¤º
    class XORVisualizer {
        constructor() {
            this.canvas = document.getElementById('xor-canvas');
            this.ctx = this.canvas.getContext('2d');
            this.width = this.canvas.width;
            this.height = this.canvas.height;

            // XORæ•°æ®
            this.points = [
                {x: 0, y: 0, label: -1, color: '#ef4444'},
                {x: 0, y: 1, label: 1, color: '#3b82f6'},
                {x: 1, y: 0, label: 1, color: '#3b82f6'},
                {x: 1, y: 1, label: -1, color: '#ef4444'}
            ];

            this.drawXOR();
        }

        drawXOR() {
            this.ctx.clearRect(0, 0, this.width, this.height);

            // ç»˜åˆ¶ç½‘æ ¼
            this.drawGrid();

            // ç»˜åˆ¶æ•°æ®ç‚¹
            this.points.forEach(point => {
                const canvasX = point.x * this.width * 0.8 + this.width * 0.1;
                const canvasY = this.height - (point.y * this.height * 0.8 + this.height * 0.1);

                this.ctx.fillStyle = point.color;
                this.ctx.strokeStyle = '#1f2937';
                this.ctx.lineWidth = 3;

                this.ctx.beginPath();
                this.ctx.arc(canvasX, canvasY, 20, 0, Math.PI * 2);
                this.ctx.fill();
                this.ctx.stroke();

                // ç»˜åˆ¶åæ ‡æ ‡ç­¾
                this.ctx.fillStyle = '#f1f5f9';
                this.ctx.font = '14px sans-serif';
                this.ctx.textAlign = 'center';
                this.ctx.fillText(`(${point.x},${point.y})`, canvasX, canvasY + 40);
            });
        }

        drawGrid() {
            this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
            this.ctx.lineWidth = 1;

            // å‚ç›´çº¿
            for (let i = 0; i <= 10; i++) {
                const x = (i / 10) * this.width;
                this.ctx.beginPath();
                this.ctx.moveTo(x, 0);
                this.ctx.lineTo(x, this.height);
                this.ctx.stroke();
            }

            // æ°´å¹³çº¿
            for (let i = 0; i <= 10; i++) {
                const y = (i / 10) * this.height;
                this.ctx.beginPath();
                this.ctx.moveTo(0, y);
                this.ctx.lineTo(this.width, y);
                this.ctx.stroke();
            }
        }

        animateFailure() {
            let angle = 0;
            const animate = () => {
                this.drawXOR();

                // ç»˜åˆ¶æ—‹è½¬çš„ç›´çº¿ï¼Œè¡¨ç¤ºæ— æ³•æ‰¾åˆ°åˆé€‚çš„å†³ç­–è¾¹ç•Œ
                this.ctx.save();
                this.ctx.translate(this.width / 2, this.height / 2);
                this.ctx.rotate(angle);

                this.ctx.strokeStyle = '#ef4444';
                this.ctx.lineWidth = 3;
                this.ctx.setLineDash([10, 10]);

                this.ctx.beginPath();
                this.ctx.moveTo(-this.width, 0);
                this.ctx.lineTo(this.width, 0);
                this.ctx.stroke();

                this.ctx.restore();

                angle += 0.02;

                if (angle < Math.PI * 2) {
                    requestAnimationFrame(animate);
                } else {
                    this.drawXOR();
                    document.getElementById('xor-explanation').style.display = 'block';
                }
            };

            animate();
        }
    }

    const xorViz = new XORVisualizer();

    function tryXORPerceptron() {
        showNotification('å°è¯•è®­ç»ƒæ„ŸçŸ¥æœºè§£å†³XORé—®é¢˜...');
        xorViz.animateFailure();
    }

    function showXORSolution() {
        // è¿™é‡Œå¯ä»¥å±•ç¤ºå¤šå±‚æ„ŸçŸ¥æœºçš„è§£å†³æ–¹æ¡ˆ
        showNotification('ä½¿ç”¨ä¸¤å±‚ç¥ç»ç½‘ç»œå¯ä»¥è§£å†³XORé—®é¢˜ï¼è¯¦è§ä¸‹ä¸€ç« ã€‚');
    }

    // åé¦ˆåŠŸèƒ½
    function submitFeedback(type) {
        document.getElementById('feedback-response').style.display = 'block';

        // è®°å½•åé¦ˆ
        console.log(`User feedback: ${type}`);

        // å¯ä»¥å‘é€åˆ°æœåŠ¡å™¨
        // fetch('/api/feedback', { method: 'POST', body: JSON.stringify({ type, chapter: 1 }) });
    }

    // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', () => {
        // åˆå§‹åŒ–éš¾åº¦
        updateContentVisibility(currentDifficulty);

        // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
        setTimeout(() => {
            learningBuddy.classList.add('active');
        }, 2000);

        // æ£€æŸ¥å­¦ä¹ è¿›åº¦
        const visited = localStorage.getItem('chapter1_visited');
        if (!visited) {
            localStorage.setItem('chapter1_visited', 'true');
            showAchievement('å¼€å§‹å­¦ä¹ ', 'æ¬¢è¿æ¥åˆ°æ·±åº¦å­¦ä¹ ä¹‹æ—…ï¼');
        }
    });

    // ç”Ÿç‰©ç¥ç»å…ƒå¯è§†åŒ–
    function drawBioNeuron() {
        const canvas = document.getElementById('bio-neuron-canvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        ctx.clearRect(0, 0, width, height);

        // ç»†èƒä½“
        ctx.fillStyle = '#fbbf24';
        ctx.beginPath();
        ctx.arc(width/2, height/2, 40, 0, Math.PI * 2);
        ctx.fill();

        // æ ‘çª
        ctx.strokeStyle = '#f59e0b';
        ctx.lineWidth = 3;
        for (let i = 0; i < 5; i++) {
            const angle = (i / 5) * Math.PI - Math.PI/2;
            const x1 = width/2 + Math.cos(angle) * 40;
            const y1 = height/2 + Math.sin(angle) * 40;
            const x2 = width/2 + Math.cos(angle) * 80;
            const y2 = height/2 + Math.sin(angle) * 80;

            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();

            // åˆ†æ”¯
            for (let j = 0; j < 2; j++) {
                const branchAngle = angle + (j - 0.5) * 0.3;
                const bx1 = x2;
                const by1 = y2;
                const bx2 = x2 + Math.cos(branchAngle) * 20;
                const by2 = y2 + Math.sin(branchAngle) * 20;

                ctx.beginPath();
                ctx.moveTo(bx1, by1);
                ctx.lineTo(bx2, by2);
                ctx.stroke();
            }
        }

        // è½´çª
        ctx.strokeStyle = '#dc2626';
        ctx.lineWidth = 5;
        ctx.beginPath();
        ctx.moveTo(width/2, height/2 + 40);
        ctx.lineTo(width/2, height - 20);
        ctx.stroke();

        // è½´çªæœ«æ¢¢
        for (let i = 0; i < 3; i++) {
            const x = width/2 + (i - 1) * 30;
            const y = height - 20;

            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(x, y, 8, 0, Math.PI * 2);
            ctx.fill();
        }

        // æ ‡ç­¾
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '12px sans-serif';
        ctx.fillText('æ ‘çª', 50, 50);
        ctx.fillText('ç»†èƒä½“', width/2 + 50, height/2);
        ctx.fillText('è½´çª', width/2 + 20, height/2 + 80);
    }

    // äººå·¥ç¥ç»å…ƒå¯è§†åŒ–
    function drawArtificialNeuron() {
        const canvas = document.getElementById('artificial-neuron-canvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        ctx.clearRect(0, 0, width, height);

        // è¾“å…¥
        const inputs = [
            {x: 50, y: 50, label: 'xâ‚'},
            {x: 50, y: 100, label: 'xâ‚‚'},
            {x: 50, y: 150, label: 'xâ‚ƒ'},
            {x: 50, y: 200, label: '...'},
            {x: 50, y: 250, label: 'xâ‚™'}
        ];

        // ç»˜åˆ¶è¾“å…¥èŠ‚ç‚¹
        inputs.forEach(input => {
            ctx.fillStyle = '#3b82f6';
            ctx.beginPath();
            ctx.arc(input.x, input.y, 15, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#f1f5f9';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText(input.label, input.x, input.y + 5);
        });

        // ä¸­å¿ƒç¥ç»å…ƒ
        const centerX = width/2;
        const centerY = height/2;

        ctx.fillStyle = '#8b5cf6';
        ctx.beginPath();
        ctx.arc(centerX, centerY, 40, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = '#ffffff';
        ctx.font = '20px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('Î£', centerX, centerY + 7);

        // è¿æ¥çº¿å’Œæƒé‡
        inputs.forEach((input, i) => {
            if (i < 3) {
                ctx.strokeStyle = '#6366f1';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(input.x + 15, input.y);
                ctx.lineTo(centerX - 40, centerY);
                ctx.stroke();

                // æƒé‡æ ‡ç­¾
                const midX = (input.x + centerX) / 2;
                const midY = (input.y + centerY) / 2;
                ctx.fillStyle = '#f1f5f9';
                ctx.font = '12px sans-serif';
                ctx.fillText(`w${i+1}`, midX, midY - 5);
            }
        });

        // è¾“å‡º
        ctx.strokeStyle = '#22c55e';
        ctx.lineWidth = 3;
        ctx.beginPath();
        ctx.moveTo(centerX + 40, centerY);
        ctx.lineTo(width - 50, centerY);
        ctx.stroke();

        // è¾“å‡ºèŠ‚ç‚¹
        ctx.fillStyle = '#22c55e';
        ctx.beginPath();
        ctx.arc(width - 50, centerY, 20, 0, Math.PI * 2);
        ctx.fill();

        ctx.fillStyle = '#ffffff';
        ctx.font = '16px sans-serif';
        ctx.fillText('y', width - 50, centerY + 5);

        // æ¿€æ´»å‡½æ•°æ ‡ç­¾
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '12px sans-serif';
        ctx.fillText('sign()', centerX + 80, centerY - 10);
    }

    // åˆå§‹åŒ–ç”Ÿç‰©ç¥ç»å…ƒå’Œäººå·¥ç¥ç»å…ƒå¯è§†åŒ–
    drawBioNeuron();
    drawArtificialNeuron();

    // 3Dè¶…å¹³é¢å¯è§†åŒ–
    class HyperplaneVisualizer {
        constructor() {
            this.canvas = document.getElementById('hyperplane-canvas');
            this.ctx = this.canvas.getContext('2d');
            this.width = this.canvas.width;
            this.height = this.canvas.height;

            this.rotation = 45;
            this.elevation = 30;
            this.animating = false;

            this.bindControls();
            this.draw();
        }

        bindControls() {
            const rotationSlider = document.getElementById('rotation-slider');
            const elevationSlider = document.getElementById('elevation-slider');

            rotationSlider.addEventListener('input', (e) => {
                this.rotation = parseFloat(e.target.value);
                document.getElementById('rotation-value').textContent = this.rotation + 'Â°';
                this.draw();
            });

            elevationSlider.addEventListener('input', (e) => {
                this.elevation = parseFloat(e.target.value);
                document.getElementById('elevation-value').textContent = this.elevation + 'Â°';
                this.draw();
            });
        }

        project3D(x, y, z) {
            // ç®€å•çš„3DæŠ•å½±
            const rotRad = this.rotation * Math.PI / 180;
            const eleRad = this.elevation * Math.PI / 180;

            // æ—‹è½¬
            const x1 = x * Math.cos(rotRad) - y * Math.sin(rotRad);
            const y1 = x * Math.sin(rotRad) + y * Math.cos(rotRad);
            const z1 = z;

            // ä¿¯ä»°
            const y2 = y1 * Math.cos(eleRad) - z1 * Math.sin(eleRad);
            const z2 = y1 * Math.sin(eleRad) + z1 * Math.cos(eleRad);

            // æŠ•å½±åˆ°2D
            const scale = 200;
            const px = this.width/2 + x1 * scale;
            const py = this.height/2 - y2 * scale;

            return {x: px, y: py, z: z2};
        }

        draw() {
            this.ctx.clearRect(0, 0, this.width, this.height);

            // ç»˜åˆ¶åæ ‡è½´
            this.drawAxes();

            // ç»˜åˆ¶æ•°æ®ç‚¹
            this.drawDataPoints();

            // ç»˜åˆ¶è¶…å¹³é¢
            this.drawHyperplane();
        }

        drawAxes() {
            this.ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
            this.ctx.lineWidth = 1;

            // Xè½´
            const xStart = this.project3D(-1, 0, 0);
            const xEnd = this.project3D(1, 0, 0);
            this.ctx.beginPath();
            this.ctx.moveTo(xStart.x, xStart.y);
            this.ctx.lineTo(xEnd.x, xEnd.y);
            this.ctx.stroke();

            // Yè½´
            const yStart = this.project3D(0, -1, 0);
            const yEnd = this.project3D(0, 1, 0);
            this.ctx.beginPath();
            this.ctx.moveTo(yStart.x, yStart.y);
            this.ctx.lineTo(yEnd.x, yEnd.y);
            this.ctx.stroke();

            // Zè½´
            const zStart = this.project3D(0, 0, -1);
            const zEnd = this.project3D(0, 0, 1);
            this.ctx.beginPath();
            this.ctx.moveTo(zStart.x, zStart.y);
            this.ctx.lineTo(zEnd.x, zEnd.y);
            this.ctx.stroke();

            // è½´æ ‡ç­¾
            this.ctx.fillStyle = '#f1f5f9';
            this.ctx.font = '14px sans-serif';
            this.ctx.fillText('X', xEnd.x + 10, xEnd.y);
            this.ctx.fillText('Y', yEnd.x + 10, yEnd.y);
            this.ctx.fillText('Z', zEnd.x + 10, zEnd.y);
        }

        drawDataPoints() {
            // ç¤ºä¾‹æ•°æ®ç‚¹
            const points = [
                // æ­£ç±»
                {x: 0.5, y: 0.5, z: 0.3, class: 1},
                {x: 0.4, y: 0.6, z: 0.4, class: 1},
                {x: 0.6, y: 0.4, z: 0.5, class: 1},
                // è´Ÿç±»
                {x: -0.5, y: -0.5, z: -0.3, class: -1},
                {x: -0.4, y: -0.6, z: -0.4, class: -1},
                {x: -0.6, y: -0.4, z: -0.5, class: -1}
            ];

            points.forEach(point => {
                const p = this.project3D(point.x, point.y, point.z);

                this.ctx.fillStyle = point.class === 1 ? '#3b82f6' : '#ef4444';
                this.ctx.beginPath();
                this.ctx.arc(p.x, p.y, 8, 0, Math.PI * 2);
                this.ctx.fill();

                this.ctx.strokeStyle = '#1f2937';
                this.ctx.lineWidth = 2;
                this.ctx.stroke();
            });
        }

        drawHyperplane() {
            // ç»˜åˆ¶è¶…å¹³é¢ç½‘æ ¼
            this.ctx.strokeStyle = 'rgba(34, 197, 94, 0.3)';
            this.ctx.lineWidth = 1;

            const steps = 10;
            for (let i = 0; i <= steps; i++) {
                const t = (i / steps) * 2 - 1;

                // æ¨ªçº¿
                this.ctx.beginPath();
                for (let j = 0; j <= steps; j++) {
                    const s = (j / steps) * 2 - 1;
                    const z = -0.5 * t - 0.5 * s;  // å¹³é¢æ–¹ç¨‹: 0.5x + 0.5y + z = 0
                    const p = this.project3D(t, s, z);

                    if (j === 0) {
                        this.ctx.moveTo(p.x, p.y);
                    } else {
                        this.ctx.lineTo(p.x, p.y);
                    }
                }
                this.ctx.stroke();

                // çºµçº¿
                this.ctx.beginPath();
                for (let j = 0; j <= steps; j++) {
                    const s = (j / steps) * 2 - 1;
                    const z = -0.5 * s - 0.5 * t;
                    const p = this.project3D(s, t, z);

                    if (j === 0) {
                        this.ctx.moveTo(p.x, p.y);
                    } else {
                        this.ctx.lineTo(p.x, p.y);
                    }
                }
                this.ctx.stroke();
            }

            // ç»˜åˆ¶æ³•å‘é‡
            const origin = this.project3D(0, 0, 0);
            const normal = this.project3D(0.3, 0.3, 0.6);  // å½’ä¸€åŒ–çš„æ³•å‘é‡

            this.ctx.strokeStyle = '#8b5cf6';
            this.ctx.lineWidth = 3;
            this.ctx.beginPath();
            this.ctx.moveTo(origin.x, origin.y);
            this.ctx.lineTo(normal.x, normal.y);
            this.ctx.stroke();

            // ç®­å¤´
            this.ctx.fillStyle = '#8b5cf6';
            this.ctx.beginPath();
            this.ctx.arc(normal.x, normal.y, 5, 0, Math.PI * 2);
            this.ctx.fill();
        }
    }

    const hyperplaneViz = new HyperplaneVisualizer();

    function toggleAnimation() {
        hyperplaneViz.animating = !hyperplaneViz.animating;
        document.getElementById('animation-toggle').textContent =
            hyperplaneViz.animating ? 'â¸ï¸ æš‚åœåŠ¨ç”»' : 'â–¶ï¸ æ’­æ”¾åŠ¨ç”»';

        if (hyperplaneViz.animating) {
            const animate = () => {
                if (!hyperplaneViz.animating) return;

                hyperplaneViz.rotation = (hyperplaneViz.rotation + 1) % 360;
                document.getElementById('rotation-slider').value = hyperplaneViz.rotation;
                document.getElementById('rotation-value').textContent = hyperplaneViz.rotation + 'Â°';

                hyperplaneViz.draw();
                requestAnimationFrame(animate);
            };
            animate();
        }
    }

    // è®­ç»ƒå¯è§†åŒ–
    class TrainingVisualizer {
        constructor() {
            this.canvas = document.getElementById('training-canvas');
            this.ctx = this.canvas.getContext('2d');
            this.width = this.canvas.width;
            this.height = this.canvas.height;

            this.training = false;
            this.epoch = 0;
            this.currentSample = -1;

            // ç®€å•çš„è®­ç»ƒæ•°æ®
            this.data = [
                {x: [0.2, 0.3], y: -1},
                {x: [0.8, 0.9], y: 1},
                {x: [0.3, 0.2], y: -1},
                {x: [0.7, 0.8], y: 1},
                {x: [0.1, 0.4], y: -1},
                {x: [0.9, 0.7], y: 1}
            ];

            // æ„ŸçŸ¥æœºå‚æ•°
            this.w = [0.1, 0.1];
            this.b = 0;
            this.lr = 0.1;

            this.draw();
        }

        predict(x) {
            const z = this.w[0] * x[0] + this.w[1] * x[1] + this.b;
            return z >= 0 ? 1 : -1;
        }

        update(x, y) {
            const pred = this.predict(x);
            if (pred !== y) {
                this.w[0] += this.lr * y * x[0];
                this.w[1] += this.lr * y * x[1];
                this.b += this.lr * y;
                return true;
            }
            return false;
        }

        draw() {
            this.ctx.clearRect(0, 0, this.width, this.height);

            // ç»˜åˆ¶å†³ç­–è¾¹ç•Œ
            this.drawDecisionBoundary();

            // ç»˜åˆ¶æ•°æ®ç‚¹
            this.data.forEach((point, idx) => {
                const x = point.x[0] * this.width;
                const y = this.height - point.x[1] * this.height;

                this.ctx.fillStyle = point.y === 1 ? '#3b82f6' : '#ef4444';
                this.ctx.strokeStyle = idx === this.currentSample ? '#fbbf24' : '#1f2937';
                this.ctx.lineWidth = idx === this.currentSample ? 4 : 2;

                this.ctx.beginPath();
                this.ctx.arc(x, y, 12, 0, Math.PI * 2);
                this.ctx.fill();
                this.ctx.stroke();
            });

            // ç»˜åˆ¶æƒé‡å‘é‡
            this.drawWeightVector();
        }

        drawDecisionBoundary() {
            if (this.w[1] === 0) return;

            this.ctx.strokeStyle = '#22c55e';
            this.ctx.lineWidth = 3;
            this.ctx.beginPath();

            const x1 = 0;
            const y1 = -(this.w[0] * 0 + this.b) / this.w[1];

            const x2 = 1;
            const y2 = -(this.w[0] * 1 + this.b) / this.w[1];

            this.ctx.moveTo(x1 * this.width, this.height - y1 * this.height);
            this.ctx.lineTo(x2 * this.width, this.height - y2 * this.height);
            this.ctx.stroke();
        }

        drawWeightVector() {
            const centerX = this.width / 2;
            const centerY = this.height / 2;
            const scale = 100;

            this.ctx.strokeStyle = '#8b5cf6';
            this.ctx.lineWidth = 2;
            this.ctx.beginPath();
            this.ctx.moveTo(centerX, centerY);
            this.ctx.lineTo(
                centerX + this.w[0] * scale,
                centerY - this.w[1] * scale
            );
            this.ctx.stroke();

            // ç®­å¤´
            this.ctx.fillStyle = '#8b5cf6';
            this.ctx.beginPath();
            this.ctx.arc(
                centerX + this.w[0] * scale,
                centerY - this.w[1] * scale,
                5, 0, Math.PI * 2
            );
            this.ctx.fill();
        }

        step() {
            this.currentSample = (this.currentSample + 1) % this.data.length;

            if (this.currentSample === 0) {
                this.epoch++;
            }

            const sample = this.data[this.currentSample];
            const updated = this.update(sample.x, sample.y);

            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('epoch-count').textContent = this.epoch;
            document.getElementById('current-sample').textContent =
                `(${sample.x[0].toFixed(2)}, ${sample.x[1].toFixed(2)})`;
            document.getElementById('prediction').textContent =
                this.predict(sample.x) === 1 ? '+1' : '-1';

            if (updated) {
                document.getElementById('update-info').textContent =
                    `æ›´æ–°äº†æƒé‡: w=[${this.w[0].toFixed(3)}, ${this.w[1].toFixed(3)}], b=${this.b.toFixed(3)}`;
            } else {
                document.getElementById('update-info').textContent = 'æ­£ç¡®åˆ†ç±»ï¼Œæ— éœ€æ›´æ–°';
            }

            this.draw();

            // æ£€æŸ¥æ˜¯å¦æ”¶æ•›
            let allCorrect = true;
            for (const sample of this.data) {
                if (this.predict(sample.x) !== sample.y) {
                    allCorrect = false;
                    break;
                }
            }

            if (allCorrect) {
                this.training = false;
                document.getElementById('train-button').textContent = 'â–¶ï¸ å¼€å§‹è®­ç»ƒ';
                showNotification('ğŸ‰ æ„ŸçŸ¥æœºå·²æ”¶æ•›ï¼');
            }
        }
    }

    const trainingViz = new TrainingVisualizer();

    function startTraining() {
        trainingViz.training = !trainingViz.training;
        document.getElementById('train-button').textContent =
            trainingViz.training ? 'â¸ï¸ æš‚åœ' : 'â–¶ï¸ å¼€å§‹è®­ç»ƒ';

        if (trainingViz.training) {
            const speed = parseInt(document.getElementById('speed-slider').value);

            const trainLoop = () => {
                if (!trainingViz.training) return;

                trainingViz.step();

                if (trainingViz.training) {
                    setTimeout(trainLoop, speed);
                }
            };

            trainLoop();
        }
    }

    function stepTraining() {
        trainingViz.training = false;
        document.getElementById('train-button').textContent = 'â–¶ï¸ å¼€å§‹è®­ç»ƒ';
        trainingViz.step();
    }

    // é¸¢å°¾èŠ±æ•°æ®é›†æ¼”ç¤º
    const irisData = {
        setosa: [
            [5.1, 3.5, 1.4, 0.2], [4.9, 3.0, 1.4, 0.2], [4.7, 3.2, 1.3, 0.2],
            [4.6, 3.1, 1.5, 0.2], [5.0, 3.6, 1.4, 0.2], [5.4, 3.9, 1.7, 0.4]
        ],
        versicolor: [
            [7.0, 3.2, 4.7, 1.4], [6.4, 3.2, 4.5, 1.5], [6.9, 3.1, 4.9, 1.5],
            [5.5, 2.3, 4.0, 1.3], [6.5, 2.8, 4.6, 1.5], [5.7, 2.8, 4.5, 1.3]
        ],
        virginica: [
            [6.3, 3.3, 6.0, 2.5], [5.8, 2.7, 5.1, 1.9], [7.1, 3.0, 5.9, 2.1],
            [6.3, 2.9, 5.6, 1.8], [6.5, 3.0, 5.8, 2.2], [7.6, 3.0, 6.6, 2.1]
        ]
    };

    function trainIrisPerceptron() {
        const canvas = document.getElementById('iris-canvas');
        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        // è·å–é€‰æ‹©çš„ç‰¹å¾å’Œç±»åˆ«
        const xFeature = parseInt(document.getElementById('x-feature').value);
        const yFeature = parseInt(document.getElementById('y-feature').value);

        const classes = [];
        if (document.getElementById('class-0').checked) classes.push(0);
        if (document.getElementById('class-1').checked) classes.push(1);
        if (document.getElementById('class-2').checked) classes.push(2);

        if (classes.length !== 2) {
            showNotification('è¯·é€‰æ‹©æ°å¥½ä¸¤ä¸ªç±»åˆ«è¿›è¡ŒäºŒåˆ†ç±»ï¼');
            return;
        }

        // å‡†å¤‡æ•°æ®
        const data = [];
        const labels = [];
        const classNames = ['setosa', 'versicolor', 'virginica'];
        const colors = ['#ef4444', '#22c55e', '#3b82f6'];

        classes.forEach(classIdx => {
            const className = classNames[classIdx];
            const samples = irisData[className];

            samples.forEach(sample => {
                data.push([sample[xFeature], sample[yFeature]]);
                labels.push(classIdx === classes[0] ? -1 : 1);
            });
        });

        // å½’ä¸€åŒ–æ•°æ®
        const xMin = Math.min(...data.map(d => d[0]));
        const xMax = Math.max(...data.map(d => d[0]));
        const yMin = Math.min(...data.map(d => d[1]));
        const yMax = Math.max(...data.map(d => d[1]));

        const normalizedData = data.map(d => [
            (d[0] - xMin) / (xMax - xMin),
            (d[1] - yMin) / (yMax - yMin)
        ]);

        // è®­ç»ƒæ„ŸçŸ¥æœº
        let w = [0, 0];
        let b = 0;
        const lr = 0.1;
        let epoch = 0;
        const maxEpochs = 100;

        const trainStep = () => {
            let errors = 0;

            for (let i = 0; i < normalizedData.length; i++) {
                const x = normalizedData[i];
                const y = labels[i];
                const pred = Math.sign(w[0] * x[0] + w[1] * x[1] + b) || 1;

                if (pred !== y) {
                    w[0] += lr * y * x[0];
                    w[1] += lr * y * x[1];
                    b += lr * y;
                    errors++;
                }
            }

            // ç»˜åˆ¶
            ctx.clearRect(0, 0, width, height);

            // ç»˜åˆ¶å†³ç­–è¾¹ç•Œ
            if (w[1] !== 0) {
                ctx.strokeStyle = '#8b5cf6';
                ctx.lineWidth = 3;
                ctx.beginPath();

                const x1 = 0;
                const y1 = -(w[0] * x1 + b) / w[1];
                const x2 = 1;
                const y2 = -(w[0] * x2 + b) / w[1];

                ctx.moveTo(x1 * width, height - y1 * height);
                ctx.lineTo(x2 * width, height - y2 * height);
                ctx.stroke();
            }

            // ç»˜åˆ¶æ•°æ®ç‚¹
            normalizedData.forEach((point, idx) => {
                const x = point[0] * width;
                const y = height - point[1] * height;
                const label = labels[idx];

                ctx.fillStyle = label === -1 ? colors[classes[0]] : colors[classes[1]];
                ctx.beginPath();
                ctx.arc(x, y, 8, 0, Math.PI * 2);
                ctx.fill();

                ctx.strokeStyle = '#1f2937';
                ctx.lineWidth = 2;
                ctx.stroke();
            });

            // æ˜¾ç¤ºç»“æœ
            document.getElementById('iris-results').style.display = 'block';
            document.getElementById('iris-stats').innerHTML = `
            <p>è®­ç»ƒè½®æ¬¡ï¼š${epoch}</p>
            <p>é”™è¯¯æ•°ï¼š${errors}</p>
            <p>å‡†ç¡®ç‡ï¼š${((1 - errors/normalizedData.length) * 100).toFixed(1)}%</p>
            <p>æƒé‡ï¼šw = [${w[0].toFixed(3)}, ${w[1].toFixed(3)}], b = ${b.toFixed(3)}</p>
        `;

            epoch++;

            if (errors > 0 && epoch < maxEpochs) {
                setTimeout(trainStep, 100);
            } else {
                if (errors === 0) {
                    showNotification('ğŸ‰ é¸¢å°¾èŠ±æ•°æ®é›†è®­ç»ƒæˆåŠŸï¼');
                } else {
                    showNotification('âš ï¸ è¾¾åˆ°æœ€å¤§è½®æ¬¡ï¼Œå¯èƒ½æ•°æ®ä¸æ˜¯çº¿æ€§å¯åˆ†çš„ã€‚');
                }
            }
        };

        trainStep();
    }

    // éšè—å¯¼èˆªæ 
    let lastScrollTop = 0;
    const navHeader = document.querySelector('.nav-header');

    window.addEventListener('scroll', () => {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

        if (scrollTop > lastScrollTop && scrollTop > 100) {
            // å‘ä¸‹æ»šåŠ¨
            navHeader.classList.add('hidden');
        } else {
            // å‘ä¸Šæ»šåŠ¨
            navHeader.classList.remove('hidden');
        }

        lastScrollTop = scrollTop;
    });

    // å¤šå±‚æ„ŸçŸ¥æœºè§£å†³XORæ¼”ç¤º
    function drawMLPXOR() {
        const canvas = document.getElementById('mlp-xor-canvas');
        if (!canvas) return;

        const ctx = canvas.getContext('2d');
        const width = canvas.width;
        const height = canvas.height;

        // æ¸…ç©ºç”»å¸ƒ
        ctx.clearRect(0, 0, width, height);

        // ç»˜åˆ¶ç½‘ç»œç»“æ„
        const layers = [
            {neurons: 2, x: width * 0.2, label: 'è¾“å…¥å±‚'},
            {neurons: 2, x: width * 0.5, label: 'éšè—å±‚'},
            {neurons: 1, x: width * 0.8, label: 'è¾“å‡ºå±‚'}
        ];

        const neuronRadius = 25;
        const verticalSpacing = 80;

        // è®¡ç®—ç¥ç»å…ƒä½ç½®
        const positions = [];
        layers.forEach((layer, layerIdx) => {
            const layerPositions = [];
            const startY = (height - (layer.neurons - 1) * verticalSpacing) / 2;

            for (let i = 0; i < layer.neurons; i++) {
                layerPositions.push({
                    x: layer.x,
                    y: startY + i * verticalSpacing
                });
            }
            positions.push(layerPositions);
        });

        // ç»˜åˆ¶è¿æ¥
        for (let l = 0; l < positions.length - 1; l++) {
            const currentLayer = positions[l];
            const nextLayer = positions[l + 1];

            currentLayer.forEach(fromNeuron => {
                nextLayer.forEach(toNeuron => {
                    ctx.strokeStyle = 'rgba(139, 92, 246, 0.3)';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(fromNeuron.x + neuronRadius, fromNeuron.y);
                    ctx.lineTo(toNeuron.x - neuronRadius, toNeuron.y);
                    ctx.stroke();
                });
            });
        }

        // ç»˜åˆ¶ç¥ç»å…ƒ
        positions.forEach((layer, layerIdx) => {
            layer.forEach(neuron => {
                // ç¥ç»å…ƒåœ†åœˆ
                ctx.fillStyle = layerIdx === 0 ? '#3b82f6' :
                    layerIdx === 1 ? '#8b5cf6' : '#22c55e';
                ctx.beginPath();
                ctx.arc(neuron.x, neuron.y, neuronRadius, 0, Math.PI * 2);
                ctx.fill();

                ctx.strokeStyle = '#1f2937';
                ctx.lineWidth = 2;
                ctx.stroke();
            });
        });

        // ç»˜åˆ¶å±‚æ ‡ç­¾
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '14px sans-serif';
        ctx.textAlign = 'center';

        layers.forEach((layer, idx) => {
            ctx.fillText(layer.label, layer.x, height - 20);
        });

        // ç»˜åˆ¶XORçœŸå€¼è¡¨
        const tableX = width * 0.1;
        const tableY = height * 0.7;

        ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
        ctx.fillRect(tableX - 10, tableY - 10, 100, 80);

        ctx.fillStyle = '#f1f5f9';
        ctx.font = '12px monospace';
        ctx.textAlign = 'left';

        const xorTable = [
            'XORçœŸå€¼è¡¨:',
            '0 XOR 0 = 0',
            '0 XOR 1 = 1',
            '1 XOR 0 = 1',
            '1 XOR 1 = 0'
        ];

        xorTable.forEach((line, idx) => {
            ctx.fillText(line, tableX, tableY + idx * 15);
        });

        // è§£é‡Šæ–‡å­—
        ctx.fillStyle = '#10b981';
        ctx.font = '16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('âœ“ ä¸¤å±‚ç½‘ç»œå¯ä»¥è§£å†³XOR!', width / 2, 30);
    }

    // åˆå§‹åŒ–MLP XORæ¼”ç¤º
    setTimeout(drawMLPXOR, 1000);

    // å­¦ä¹ è¿›åº¦è·Ÿè¸ª
    function trackSectionView(sectionId) {
        completedSections.add(sectionId);
        checkAchievements();

        // ä¿å­˜è¿›åº¦åˆ°æœ¬åœ°å­˜å‚¨
        const progress = Array.from(completedSections);
        localStorage.setItem('chapter1_progress', JSON.stringify(progress));
    }

    // æ¢å¤å­¦ä¹ è¿›åº¦
    const savedProgress = localStorage.getItem('chapter1_progress');
    if (savedProgress) {
        const progress = JSON.parse(savedProgress);
        progress.forEach(section => completedSections.add(section));
        checkAchievements();
    }

    // ç›‘å¬ç« èŠ‚è¿›å…¥è§†å›¾
    const sectionObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const sectionId = entry.target.id;
                if (sectionId) {
                    trackSectionView(sectionId);
                }
            }
        });
    }, {
        threshold: 0.5
    });

    sections.forEach(section => {
        sectionObserver.observe(section);
    });

    console.log('ğŸš€ æ„ŸçŸ¥æœºç« èŠ‚åŠ è½½å®Œæˆï¼ç¥å­¦ä¹ æ„‰å¿«ï¼');
</script>
</body>
</html>