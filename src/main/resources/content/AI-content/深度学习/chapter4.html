<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Á¨¨4Á´†Ôºö‰ºòÂåñÂõ∞Â¢É‰∏éÁ†¥Â±Ä‰πãÈÅì | Ê∑±Â∫¶Â≠¶‰π†ÁöÑÊàêÈïøÁÉ¶ÊÅº</title>
    <meta name="description" content="‰ªéÊ¢ØÂ∫¶Ê∂àÂ§±Âà∞‰ºòÂåñÊäÄÂ∑ßÔºåÊé¢Á¥¢Ê∑±Â∫¶Á•ûÁªèÁΩëÁªúËÆ≠ÁªÉÁöÑÊ†∏ÂøÉÊåëÊàò‰∏éËß£ÂÜ≥ÊñπÊ°à">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <style>
        /* ===== CSSÂèòÈáèÂÆö‰πâ ===== */
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-dark: #0f172a;
            --bg-section: #1e293b;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --accent-red: #ef4444;
            --accent-green: #22c55e;
            --accent-blue: #06b6d4;
            --accent-yellow: #fbbf24;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --accent-orange: #f97316;
            --border-color: rgba(255, 255, 255, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.3);
            --animation-duration: 0.3s;
            --content-max-width: 1200px;
        }

        /* ‰∫ÆËâ≤‰∏ªÈ¢ò */
        [data-theme="light"] {
            --bg-dark: #ffffff;
            --bg-section: #f8fafc;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        /* ===== ÂÖ®Â±ÄÊ†∑Âºè ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color var(--animation-duration) ease;
        }

        /* ===== Â∏ÉÂ±ÄÁªÑ‰ª∂ ===== */
        .container {
            max-width: var(--content-max-width);
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* ===== ÂØºËà™Ê†è ===== */
        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--border-color);
            transition: transform 0.3s ease;
        }

        .nav-header.hidden {
            transform: translateY(-100%);
        }

        .nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .nav-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-title h1 {
            font-size: 1.25rem;
            font-weight: 600;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-controls {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn-control {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
        }

        .btn-control:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .nav-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(255, 255, 255, 0.1);
        }

        .progress-bar {
            height: 100%;
            background: var(--primary-gradient);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* ===== ‰æßËæπÂØºËà™ ===== */
        .sidebar {
            position: fixed;
            left: -300px;
            top: 60px;
            bottom: 0;
            width: 300px;
            background: var(--bg-section);
            border-right: 1px solid var(--border-color);
            padding: 2rem;
            overflow-y: auto;
            transition: transform 0.3s ease;
            z-index: 999;
        }

        .sidebar.open {
            transform: translateX(300px);
        }

        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 998;
        }

        .sidebar-overlay.active {
            display: block;
        }

        .toc-item {
            display: block;
            padding: 0.75rem 1rem;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            margin-bottom: 0.25rem;
        }

        .toc-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-primary);
            transform: translateX(4px);
        }

        .toc-item.active {
            background: var(--primary-gradient);
            color: white;
        }

        /* ===== ‰∏ªÂÜÖÂÆπÂå∫ ===== */
        main {
            margin-top: 80px;
            padding-bottom: 4rem;
        }

        /* ===== Á´†ËäÇÂç°Áâá ===== */
        .chapter-hero {
            background: var(--primary-gradient);
            padding: 4rem 0;
            margin-bottom: 3rem;
            position: relative;
            overflow: hidden;
        }

        .chapter-hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: pulse 10s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        .chapter-hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
        }

        .chapter-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: fadeInUp 0.8s ease;
        }

        .chapter-hero p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            animation: fadeInUp 0.8s ease 0.2s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== ÂÜÖÂÆπÂå∫Âùó ===== */
        .section-card {
            background: var(--bg-section);
            border-radius: 1rem;
            padding: 2.5rem;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
            transition: transform var(--animation-duration) ease;
        }

        .section-card:hover {
            transform: translateY(-2px);
        }

        /* ===== Â≠¶‰π†Âæ™ÁéØÊåáÁ§∫Âô® ===== */
        .learning-loop {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
            padding: 1.5rem;
            background: rgba(139, 92, 246, 0.1);
            border-radius: 1rem;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .loop-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            position: relative;
        }

        .loop-step.active {
            background: rgba(139, 92, 246, 0.2);
            transform: scale(1.1);
        }

        .loop-step .icon {
            font-size: 2rem;
        }

        .loop-step .label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .loop-connector {
            position: absolute;
            top: 50%;
            right: -2rem;
            width: 2rem;
            height: 2px;
            background: rgba(139, 92, 246, 0.3);
        }

        /* ===== ÊïÖ‰∫ãÂç°Áâá ===== */
        .story-card {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(245, 158, 11, 0.1));
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 2px solid rgba(251, 191, 36, 0.2);
            position: relative;
            overflow: hidden;
        }

        .story-card::before {
            content: 'üìñ';
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 5rem;
            opacity: 0.1;
            transform: rotate(15deg);
        }

        /* ===== ÂØπËØùÊ°Ü ===== */
        .dialogue-box {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--accent-purple);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
            position: relative;
        }

        .dialogue-box .speaker {
            font-weight: bold;
            color: var(--accent-purple);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dialogue-box .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        /* ===== Ê¶ÇÂøµÁΩëÊ†º ===== */
        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .concept-card {
            padding: 1.5rem;
            border-radius: 0.75rem;
            transition: all var(--animation-duration) ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .concept-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
            transform: scaleX(0);
            transition: transform var(--animation-duration) ease;
        }

        .concept-card:hover::before {
            transform: scaleX(1);
        }

        .concept-card.why {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .concept-card.what {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        .concept-card.how {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .concept-card.pitfall {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        /* ===== Êï∞Â≠¶ÂÆπÂô® ===== */
        .math-container {
            background: rgba(79, 70, 229, 0.1);
            border: 1px solid rgba(79, 70, 229, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .math-formula {
            text-align: center;
            font-size: 1.2rem;
            margin: 1rem 0;
            overflow-x: auto;
            font-family: 'Times New Roman', serif;
        }

        /* Êï∞Â≠¶ÂàÜÊï∞Ê†∑Âºè */
        .math-fraction {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            vertical-align: middle;
            margin: 0 0.3em;
            font-family: 'Times New Roman', serif;
        }

        .math-numerator {
            border-bottom: 2px solid currentColor;
            padding: 0 0.5em 0.2em 0.5em;
        }

        .math-denominator {
            padding: 0.2em 0.5em 0 0.5em;
        }

        .math-sqrt {
            position: relative;
            padding-left: 1em;
            margin-left: 0.2em;
        }

        .math-sqrt::before {
            content: '‚àö';
            position: absolute;
            left: 0;
            top: -0.1em;
            font-size: 1.2em;
        }

        .math-sqrt::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0.8em;
            right: 0;
            border-top: 2px solid currentColor;
        }

        /* ===== Êï∞Â≠¶Ëß£Èáä ===== */
        .math-explanation {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        /* ===== ÊÄùËÄÉÁõíÂ≠ê ===== */
        .think-box {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(124, 58, 237, 0.1));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .think-box::before {
            content: 'ü§î';
            position: absolute;
            top: -15px;
            left: 30px;
            font-size: 2rem;
            background: var(--bg-section);
            padding: 0 10px;
        }

        /* ===== ‰ª£Á†ÅÂÆπÂô® ===== */
        .code-container {
            margin: 2rem 0;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
        }

        .code-header {
            background: #1a1a2e;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .code-header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .code-header-right {
            display: flex;
            gap: 0.5rem;
        }

        .code-tab {
            padding: 0.5rem 1rem;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
        }

        .code-tab.active {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .code-action {
            padding: 0.5rem 1rem;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-action:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .code-content {
            background: #0d1117;
            overflow-x: auto;
            position: relative;
        }

        .code-content pre {
            margin: 0;
            padding: 1.5rem;
        }

        .code-content code {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .code-output {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 0.875rem;
            display: none;
        }

        .code-output.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== ‰ª£Á†ÅÂØπÊØîÊ†∑Âºè ===== */
        .code-comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            padding: 1.5rem;
            position: relative;
        }

        .code-comparison-grid::before {
            content: 'VS';
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-purple);
            background: var(--bg-section);
            padding: 0.5rem 1rem;
            border-radius: 50%;
            border: 3px solid var(--accent-purple);
            z-index: 10;
        }

        .code-highlight-add {
            background: rgba(34, 197, 94, 0.3) !important;
            color: var(--accent-green) !important;
            font-weight: bold;
            position: relative;
            display: inline-block;
            padding: 0 4px;
            margin: 0 -4px;
            border-radius: 4px;
        }

        .code-highlight-change {
            background: rgba(251, 191, 36, 0.3) !important;
            color: var(--accent-yellow) !important;
            font-weight: bold;
            position: relative;
            padding: 0 4px;
            margin: 0 -4px;
            border-radius: 4px;
        }

        .code-highlight-key {
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid var(--accent-purple);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        /* ===== ÂèØËßÜÂåñÂÆπÂô® ===== */
        .visualization-container {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
        }

        .viz-controls {
            display: flex;
            gap: 2rem;
            align-items: center;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .viz-control-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .viz-control-group label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        input[type="range"] {
            width: 150px;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary-gradient);
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }

        .slider-value {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-family: monospace;
            min-width: 50px;
            text-align: center;
        }

        canvas {
            display: block;
            margin: 0 auto;
            border-radius: 0.5rem;
            background: rgba(0, 0, 0, 0.2);
        }

        /* ===== ÊµãÈ™åÁªÑ‰ª∂ ===== */
        .quiz-container {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .quiz-question {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .quiz-options {
            display: grid;
            gap: 1rem;
        }

        .quiz-option {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid transparent;
            border-radius: 0.5rem;
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            position: relative;
            overflow: hidden;
            text-align: left;
        }

        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .quiz-option.selected {
            border-color: var(--accent-blue);
        }

        .quiz-option.correct {
            background: rgba(34, 197, 94, 0.2);
            border-color: var(--accent-green);
        }

        .quiz-option.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-color: var(--accent-red);
        }

        .quiz-feedback {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 0.5rem;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.3);
            color: var(--accent-green);
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: var(--accent-red);
        }

        /* ===== Áü©ÈòµÂèØËßÜÂåñ ===== */
        .matrix-visualization {
            display: grid;
            gap: 2rem;
            margin: 2rem 0;
        }

        .matrix-container {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 0.75rem;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .matrix-title {
            font-weight: 600;
            margin-bottom: 1rem;
            text-align: center;
        }

        .matrix-grid {
            display: grid;
            gap: 2px;
            font-family: monospace;
            font-size: 0.875rem;
            max-width: fit-content;
            margin: 0 auto;
        }

        .matrix-cell {
            padding: 0.5rem;
            text-align: center;
            border-radius: 0.25rem;
            min-width: 60px;
            transition: all var(--animation-duration) ease;
        }

        .matrix-cell.header {
            font-weight: bold;
            background: rgba(139, 92, 246, 0.2);
        }

        .matrix-cell.value {
            background: rgba(255, 255, 255, 0.05);
        }

        .matrix-cell.highlight {
            background: rgba(251, 191, 36, 0.3);
            transform: scale(1.1);
        }

        /* ===== Ê≠•È™§ÊåáÁ§∫Âô® ===== */
        .step-indicator {
            display: flex;
            align-items: center;
            justify-content: space-around;
            margin: 2rem 0;
            position: relative;
        }

        .step-indicator::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 2px;
            background: rgba(255, 255, 255, 0.2);
            z-index: 0;
        }

        .step-item {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .step-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--bg-section);
            border: 3px solid var(--accent-purple);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin: 0 auto 0.5rem;
            transition: all 0.3s ease;
        }

        .step-item.active .step-circle {
            background: var(--accent-purple);
            color: white;
            transform: scale(1.1);
        }

        .step-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* ===== Âä®‰ΩúÊ∏ÖÂçï ===== */
        .action-checklist {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.5rem;
            transition: all var(--animation-duration) ease;
        }

        .checklist-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(4px);
        }

        .checklist-checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid var(--accent-yellow);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .checklist-checkbox.checked {
            background: var(--accent-yellow);
        }

        .checklist-checkbox.checked::after {
            content: '‚úì';
            color: var(--bg-dark);
            font-weight: bold;
        }

        /* ===== ÊåâÈíÆÊ†∑Âºè ===== */
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--animation-duration) ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* ===== ÊèêÁ§∫Ê°Ü ===== */
        .tip {
            display: flex;
            gap: 1rem;
            padding: 1.5rem;
            border-radius: 0.75rem;
            margin: 1.5rem 0;
        }

        .tip-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .tip-content {
            flex: 1;
        }

        .tip.info {
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .tip.warning {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .tip.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .tip.success {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        /* ===== ÂìçÂ∫îÂºèËÆæËÆ° ===== */
        @media (max-width: 1024px) {
            .chapter-hero h1 {
                font-size: 2.5rem;
            }

            .concept-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .nav-title h1 {
                font-size: 1rem;
            }

            .section-card {
                padding: 1.5rem;
            }

            .chapter-hero {
                padding: 3rem 0;
            }

            .chapter-hero h1 {
                font-size: 2rem;
            }

            .chapter-hero p {
                font-size: 1rem;
            }

            .learning-loop {
                flex-direction: column;
                gap: 1rem;
            }

            .loop-connector {
                display: none;
            }

            .viz-controls {
                flex-direction: column;
                align-items: stretch;
            }

            input[type="range"] {
                width: 100%;
            }

            .matrix-grid {
                font-size: 0.75rem;
            }

            .matrix-cell {
                min-width: 45px;
                padding: 0.25rem;
            }

            .code-comparison-grid {
                grid-template-columns: 1fr;
                gap: 3rem;
            }

            .code-comparison-grid::before {
                display: none;
            }

            .step-indicator {
                flex-direction: column;
                gap: 2rem;
            }

            .step-indicator::before {
                display: none;
            }
        }

        /* ===== Â∑•ÂÖ∑Á±ª ===== */
        .text-center {
            text-align: center;
        }

        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mt-3 { margin-top: 1.5rem; }
        .mt-4 { margin-top: 2rem; }

        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mb-3 { margin-bottom: 1.5rem; }
        .mb-4 { margin-bottom: 2rem; }

        /* ===== Âä†ËΩΩÂä®Áîª ===== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-purple);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ===== Ëá™ÂÆö‰πâÂèØËßÜÂåñÂä®Áîª ===== */
        @keyframes gradient-flow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .gradient-animation {
            position: relative;
            overflow: hidden;
        }

        .gradient-animation::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: gradient-flow 3s linear infinite;
        }
    </style>
</head>
<body>

<!-- ÂØºËà™Ê†è -->
<nav class="nav-header" role="navigation" aria-label="‰∏ªÂØºËà™">
    <div class="container">
        <div class="nav-content">
            <div class="nav-title">
                <button id="toggle-sidebar" class="btn-control" aria-label="ÂàáÊç¢‰æßËæπÊ†è">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <h1>Á¨¨4Á´†Ôºö‰ºòÂåñÂõ∞Â¢É‰∏éÁ†¥Â±Ä‰πãÈÅì</h1>
            </div>
            <div class="nav-controls">
                <button id="toggle-animations" class="btn-control" aria-label="ÂàáÊç¢Âä®Áîª">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M10 8l6 4-6 4V8z"></path>
                    </svg>
                </button>
                <button id="toggle-theme" class="btn-control" aria-label="ÂàáÊç¢‰∏ªÈ¢ò">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                    </svg>
                </button>
            </div>
        </div>
        <div class="nav-progress">
            <div class="progress-bar" id="progress-bar"></div>
        </div>
    </div>
</nav>

<!-- ‰æßËæπÊ†è -->
<aside class="sidebar" id="sidebar">
    <h3 style="margin-bottom: 1.5rem; color: var(--accent-purple);">ÁõÆÂΩïÂØºËà™</h3>
    <nav>
        <a href="#intro" class="toc-item active">Ê∑±Â§úÁöÑÊå´Ë¥•</a>
        <a href="#discovery" class="toc-item">ÂèëÁé∞ÈóÆÈ¢òÔºöÊ¢ØÂ∫¶ÁöÑËØ°ÂºÇË°å‰∏∫</a>
        <a href="#analysis" class="toc-item">Ê∑±ÂÖ•ÂàÜÊûêÔºöÈìæÂºèÊ≥ïÂàôÁöÑÁ¥ØÁßØÊïàÂ∫î</a>
        <a href="#vanishing" class="toc-item">Ê¢ØÂ∫¶Ê∂àÂ§±Ôºö‰∏∫‰ªÄ‰πà‰ºöÂèëÁîü</a>
        <a href="#exploding" class="toc-item">Ê¢ØÂ∫¶ÁàÜÁÇ∏ÔºöÂè¶‰∏Ä‰∏™ÊûÅÁ´Ø</a>
        <a href="#math-proof" class="toc-item">Êï∞Â≠¶Êé®ÂØºÔºö‰∏•Ë∞®ÁöÑËØÅÊòé</a>
        <a href="#initialization" class="toc-item">Ëß£ÂÜ≥ÊñπÊ°à1ÔºöÂàùÂßãÂåñÁöÑËâ∫ÊúØ</a>
        <a href="#batchnorm" class="toc-item">Ëß£ÂÜ≥ÊñπÊ°à2ÔºöÊâπÈáèÂΩí‰∏ÄÂåñ</a>
        <a href="#optimizers" class="toc-item">Ëß£ÂÜ≥ÊñπÊ°à3Ôºö‰ºòÂåñÂô®ÁöÑËøõÂåñ</a>
        <a href="#practice" class="toc-item">ÁªºÂêàÂÆûÊàòÔºöÊûÑÂª∫Á®≥ÂÆöÁΩëÁªú</a>
        <a href="#summary" class="toc-item">ÊÄªÁªì‰∏éÂ±ïÊúõ</a>
    </nav>
</aside>

<!-- ‰æßËæπÊ†èÈÅÆÁΩ© -->
<div class="sidebar-overlay" id="sidebar-overlay"></div>

<!-- ‰∏ªÂÜÖÂÆπ -->
<main>
    <!-- Á´†ËäÇÊ†áÈ¢ò -->
    <section class="chapter-hero">
        <div class="container">
            <div class="chapter-hero-content">
                <h1>‰ºòÂåñÂõ∞Â¢ÉÔºöÊ¢ØÂ∫¶Ê∂àÂ§±„ÄÅÁàÜÁÇ∏‰∏éÊî∂Êïõ</h1>
                <p>ÂΩìÊàë‰ª¨Âª∫ÈÄ†ÈÄöÂ§©Â°îÊó∂ÔºåÊØèÂ¢ûÂä†‰∏ÄÂ±ÇÔºåÂõ∞ÈöæÂ∞±ÁøªÂÄç...</p>
                <div class="mt-4">
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                        üî• Ê∑±Â∫¶ÊåëÊàò
                    </span>
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                        ‚è±Ô∏è 120ÂàÜÈíü
                    </span>
                    <span style="background: rgba(255, 255, 255, 0.2); padding: 0.5rem 1rem; border-radius: 20px; margin: 0 0.5rem;">
                        üéØ Ê†∏ÂøÉÁ™ÅÁ†¥
                    </span>
                </div>
            </div>
        </div>
    </section>

    <div class="container">
        <!-- Â≠¶‰π†ÁõÆÊ†á -->
        <section class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üìö Êú¨Á´†Â≠¶‰π†ÁõÆÊ†á</h2>
            <div class="concept-grid">
                <div class="concept-card what">
                    <h3 style="color: var(--accent-green); margin-bottom: 0.5rem;">‚úì ÁêÜËß£Ê¢ØÂ∫¶ÈóÆÈ¢ò</h3>
                    <p>Ê∑±ÂÖ•ÁêÜËß£Ê¢ØÂ∫¶Ê∂àÂ§±ÂíåÁàÜÁÇ∏ÁöÑÊú¨Ë¥®ÂéüÂõ†</p>
                </div>
                <div class="concept-card how">
                    <h3 style="color: var(--accent-blue); margin-bottom: 0.5rem;">‚úì ÊéåÊè°Êï∞Â≠¶ÂéüÁêÜ</h3>
                    <p>ÈÄöËøáÈìæÂºèÊ≥ïÂàôÊé®ÂØºÔºåÁúãÊ∏ÖÈóÆÈ¢òÁöÑÊï∞Â≠¶Êú¨Ë¥®</p>
                </div>
                <div class="concept-card why">
                    <h3 style="color: var(--accent-red); margin-bottom: 0.5rem;">‚úì Â≠¶‰ºöË∞ÉËØïÊäÄÂ∑ß</h3>
                    <p>ÊéåÊè°ËØäÊñ≠ÂíåËß£ÂÜ≥Ê∑±Â∫¶ÁΩëÁªúËÆ≠ÁªÉÈóÆÈ¢òÁöÑÊñπÊ≥ï</p>
                </div>
                <div class="concept-card pitfall">
                    <h3 style="color: var(--accent-yellow); margin-bottom: 0.5rem;">‚úì Â∫îÁî®ÊúÄ‰Ω≥ÂÆûË∑µ</h3>
                    <p>Â≠¶‰ºöÁªºÂêàËøêÁî®Â§öÁßçÊäÄÊúØÊûÑÂª∫Á®≥ÂÆöÁöÑÊ∑±Â∫¶ÁΩëÁªú</p>
                </div>
            </div>
        </section>

        <!-- Â∫èÁ´†ÔºöÊ∑±Â§úÁöÑÊå´Ë¥• -->
        <section id="intro" class="section-card">
            <div class="story-card">
                <h2 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">üåÉ Ê∑±Â§úÂÆûÈ™åÂÆ§ÁöÑÁªùÊúõ</h2>

                <p style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 2rem;">
                    ÂáåÊô®2:47ÔºåËÆ°ÁÆóÊú∫ÁßëÂ≠¶Ê•º5Â±ÇÁöÑÂÆûÈ™åÂÆ§ÈáåÔºåÂè™ÊúâÈîÆÁõòÊï≤ÂáªÂ£∞ÂíåÈ£éÊâáÁöÑÂó°Âó°Â£∞„ÄÇ
                </p>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);">üßë‚Äçüíª</div>
                        Â∞èÊùéÔºàÁ†îÁ©∂ÁîüÔºâÔºö
                    </div>
                    <div>"‰∏çÂèØËÉΩÔºÅ‰∏∫‰ªÄ‰πàÊàëÁöÑ30Â±ÇÁΩëÁªúÊØî3Â±ÇÁöÑËøòÂ∑ÆÔºüÊàëÊòéÊòéÊåâÁÖßËÆ∫ÊñáÂÆûÁé∞ÁöÑ..."</div>
                </div>

                <p style="margin-top: 1.5rem;">
                    Â±èÂπï‰∏äÔºåËÆ≠ÁªÉÊó•ÂøóÊó†ÊÉÖÂú∞ÊòæÁ§∫ÁùÄÔºö
                </p>

                <div style="background: #000; color: #0f0; font-family: monospace; padding: 1.5rem; border-radius: 0.5rem; margin: 1rem 0;">
                    Epoch 1/100 - Loss: 2.3026 - Accuracy: 10.0%<br>
                    Epoch 10/100 - Loss: 2.3026 - Accuracy: 10.0%<br>
                    Epoch 20/100 - Loss: 2.3026 - Accuracy: 10.0%<br>
                    ...<br>
                    Epoch 50/100 - Loss: 2.3026 - Accuracy: 10.0%<br>
                    <span style="color: #f00;">WARNING: Loss unchanged for 50 epochs!</span>
                </div>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">üë®‚Äçüî¨</div>
                        ÂÆ§ÂèãÂ∞èÂº†ÔºàÂáëËøáÊù•ÔºâÔºö
                    </div>
                    <div>"2.3026...Ëøô‰∏çÊòØlog(10)ÂêóÔºü‰Ω†ÁöÑÁΩëÁªúÊ†πÊú¨Ê≤°Âú®Â≠¶‰π†ÔºåÂÆÉÂú®ÈöèÊú∫ÁåúÔºÅ"</div>
                </div>

                <div class="think-box">
                    <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">üí≠ ÊÄùËÄÉ‰∏Ä‰∏ã</h3>
                    <p>‰∏∫‰ªÄ‰πàÊçüÂ§±ÂáΩÊï∞ÊÅ∞Â•ΩÊòØ2.3026ÔºüËøô‰∏™Êï∞Â≠óËÉåÂêéÈöêËóèÁùÄ‰ªÄ‰πàÁßòÂØÜÔºü</p>
                    <p style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-secondary);">
                        ÊèêÁ§∫ÔºöÂØπ‰∫é10ÂàÜÁ±ªÈóÆÈ¢òÔºåÂ¶ÇÊûúÊ®°ÂûãËæìÂá∫ÂùáÂåÄÂàÜÂ∏ÉÔºàÊØèÁ±ªÊ¶ÇÁéá0.1ÔºâÔºå‰∫§ÂèâÁÜµÊçüÂ§±ÊòØÂ§öÂ∞ëÔºü
                    </p>
                </div>

                <div class="dialogue-box mt-3">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #ef4444, #dc2626);">üò§</div>
                        Â∞èÊùéÔºàÊÑ§ÊÄíÂú∞ÔºâÔºö
                    </div>
                    <div>"ÊàëÊ£ÄÊü•‰∫Ü‰ª£Á†ÅÂçÅÈÅçÔºåÊ≤°ÊúâbugÔºÅÈöæÈÅìÊ∑±Â∫¶Â≠¶‰π†Â∞±ÊòØ‰∏™Ë∞éË®ÄÔºü"</div>
                </div>

                <div class="tip info">
                    <span class="tip-icon">üí°</span>
                    <div class="tip-content">
                        <strong>ÂÖ≥ÈîÆÊ¥ûÂØüÔºö</strong><br>
                        ÂΩìÊçüÂ§±ÂáΩÊï∞‰øùÊåÅÂú® -log(1/Á±ªÂà´Êï∞) Êó∂ÔºåËØ¥ÊòéÊ®°ÂûãÂú®ËæìÂá∫ÂùáÂåÄÂàÜÂ∏ÉÔºåÂÆåÂÖ®Ê≤°ÊúâÂ≠¶Âà∞‰ªª‰ΩïÊ®°Âºè„ÄÇËøôÈÄöÂ∏∏ÊÑèÂë≥ÁùÄÊ¢ØÂ∫¶Âú®‰º†Êí≠ËøáÁ®ã‰∏≠Âá∫‰∫ÜÈóÆÈ¢ò„ÄÇ
                    </div>
                </div>
            </div>
        </section>

        <!-- Á¨¨‰∏ÄÊ≠•ÔºöÂèëÁé∞ÈóÆÈ¢ò -->
        <section id="discovery" class="section-card">
            <h2 style="color: var(--accent-red); margin-bottom: 1.5rem;">üîç Step 1ÔºöÊäΩ‰∏ùÂâ•ËåßÔºåÂèëÁé∞ÈóÆÈ¢ò</h2>

            <div class="learning-loop">
                <div class="loop-step active">
                    <div class="icon">üîç</div>
                    <div class="label">ÂèëÁé∞ÂºÇÂ∏∏</div>
                    <div class="loop-connector"></div>
                </div>
                <div class="loop-step">
                    <div class="icon">üìä</div>
                    <div class="label">Êî∂ÈõÜÊï∞ÊçÆ</div>
                    <div class="loop-connector"></div>
                </div>
                <div class="loop-step">
                    <div class="icon">üßÆ</div>
                    <div class="label">ÂàÜÊûêÂéüÂõ†</div>
                    <div class="loop-connector"></div>
                </div>
                <div class="loop-step">
                    <div class="icon">üí°</div>
                    <div class="label">ÊâæÂà∞Ëß£ÂÜ≥ÊñπÊ°à</div>
                </div>
            </div>

            <div class="story-card">
                <h3 style="color: var(--accent-orange); margin-bottom: 1rem;">Á¨¨‰∏ÄÊ≠•ÔºöÊâìÂç∞Ê¢ØÂ∫¶ÁúãÁúãÂèëÁîü‰∫Ü‰ªÄ‰πà</h3>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºàÊé®Èó®ËøõÊù•ÔºâÔºö
                    </div>
                    <div>"Âà´ÊÄ•ÁùÄÂê¶ÂÆöÊ∑±Â∫¶Â≠¶‰π†„ÄÇ‰Ω†Ê£ÄÊü•ËøáÊØè‰∏ÄÂ±ÇÁöÑÊ¢ØÂ∫¶ÂêóÔºü"</div>
                </div>

                <p style="margin-top: 1.5rem;">Â∞èÊùéÊÅçÁÑ∂Â§ßÊÇüÔºåÁ´ãÂç≥‰øÆÊîπ‰ª£Á†ÅÔºåÊ∑ªÂä†Ê¢ØÂ∫¶ÁõëÊéßÔºö</p>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-header-left">
                            <span style="color: var(--text-secondary);">gradient_monitor.py - Ê¢ØÂ∫¶ÁõëÊéßÂ∑•ÂÖ∑</span>
                        </div>
                        <div class="code-header-right">
                            <button class="code-action" onclick="runCode(this, 'gradient-output')">
                                ‚ñ∂ ËøêË°å‰ª£Á†Å
                            </button>
                        </div>
                    </div>
                    <div class="code-content">
                        <pre><code class="language-python">import torch
import torch.nn as nn
import numpy as np
import matplotlib.pyplot as plt

class GradientMonitor:
    """Ê¢ØÂ∫¶ÁõëÊéßÂ∑•ÂÖ∑ÔºåÁî®‰∫éËØäÊñ≠Ê∑±Â∫¶ÁΩëÁªúËÆ≠ÁªÉÈóÆÈ¢ò"""

    def __init__(self):
        self.gradients = {}
        self.activations = {}

    def hook_layers(self, model):
        """‰∏∫ÊØè‰∏ÄÂ±ÇÊ∑ªÂä†Èí©Â≠êÂáΩÊï∞"""
        def forward_hook(module, input, output):
            # ËÆ∞ÂΩïÊøÄÊ¥ªÂÄº
            self.activations[module] = output.detach()

        def backward_hook(module, grad_input, grad_output):
            # ËÆ∞ÂΩïÊ¢ØÂ∫¶
            if hasattr(module, 'weight'):
                self.gradients[module] = module.weight.grad.clone()

        for name, module in model.named_modules():
            if isinstance(module, nn.Linear) or isinstance(module, nn.Conv2d):
                module.register_forward_hook(forward_hook)
                module.register_backward_hook(backward_hook)

    def analyze_gradients(self):
        """ÂàÜÊûêÊ¢ØÂ∫¶ÂàÜÂ∏É"""
        results = []

        for i, (module, grad) in enumerate(self.gradients.items()):
            if grad is not None:
                grad_norm = grad.norm().item()
                grad_mean = grad.mean().item()
                grad_std = grad.std().item()

                results.append({
                    'layer': i + 1,
                    'norm': grad_norm,
                    'mean': grad_mean,
                    'std': grad_std
                })

        return results

# ÂàõÂª∫‰∏Ä‰∏™ÊúâÈóÆÈ¢òÁöÑÊ∑±Â∫¶ÁΩëÁªú
class ProblematicDeepNetwork(nn.Module):
    """‰∏Ä‰∏™30Â±ÇÁöÑÊ∑±Â∫¶ÁΩëÁªúÔºàÊúâÈóÆÈ¢òÁöÑÁâàÊú¨Ôºâ"""
    def __init__(self, num_layers=30):
        super().__init__()
        self.layers = nn.ModuleList()

        # ÊûÑÂª∫Ê∑±Â∫¶ÁΩëÁªú
        for i in range(num_layers):
            self.layers.append(nn.Linear(100, 100))
            self.layers.append(nn.Sigmoid())  # ‰ΩøÁî®SigmoidÊøÄÊ¥ªÔºàÈóÆÈ¢òÊâÄÂú®ÔºÅÔºâ

    def forward(self, x):
        for layer in self.layers:
            x = layer(x)
        return x

# ÊµãËØïÊ¢ØÂ∫¶
print("üîç ÂºÄÂßãÊ¢ØÂ∫¶ÂàÜÊûê...")
model = ProblematicDeepNetwork(30)
monitor = GradientMonitor()
monitor.hook_layers(model)

# ÂâçÂêë‰º†Êí≠
x = torch.randn(32, 100, requires_grad=True)
y_true = torch.randint(0, 10, (32,))
output = model(x)

# ËÆ°ÁÆóÊçüÂ§±
loss = nn.CrossEntropyLoss()(output[:, :10], y_true)
print(f"\nüìä ÊçüÂ§±ÂÄº: {loss.item():.4f}")

# ÂèçÂêë‰º†Êí≠
loss.backward()

# ÂàÜÊûêÁªìÊûú
results = monitor.analyze_gradients()

print("\nüî¨ Ê¢ØÂ∫¶ÂàÜÊûêÁªìÊûú:")
print("-" * 60)
print(f"{'Â±ÇÊï∞':>6} | {'Ê¢ØÂ∫¶ËåÉÊï∞':>12} | {'Ê¢ØÂ∫¶ÂùáÂÄº':>12} | {'Ê¢ØÂ∫¶Ê†áÂáÜÂ∑Æ':>12}")
print("-" * 60)

for r in results[:5]:  # ÊòæÁ§∫Ââç5Â±Ç
    print(f"{r['layer']:>6} | {r['norm']:>12.2e} | {r['mean']:>12.2e} | {r['std']:>12.2e}")
print("...")
for r in results[-5:]:  # ÊòæÁ§∫Âêé5Â±Ç
    print(f"{r['layer']:>6} | {r['norm']:>12.2e} | {r['mean']:>12.2e} | {r['std']:>12.2e}")</code></pre>
                    </div>
                    <div id="gradient-output" class="code-output">
                        <pre>üîç ÂºÄÂßãÊ¢ØÂ∫¶ÂàÜÊûê...

üìä ÊçüÂ§±ÂÄº: 2.3026

üî¨ Ê¢ØÂ∫¶ÂàÜÊûêÁªìÊûú:
------------------------------------------------------------
  Â±ÇÊï∞ |     Ê¢ØÂ∫¶ËåÉÊï∞ |     Ê¢ØÂ∫¶ÂùáÂÄº |   Ê¢ØÂ∫¶Ê†áÂáÜÂ∑Æ
------------------------------------------------------------
     1 |     3.45e-15 |     1.23e-17 |     3.45e-17
     2 |     2.31e-12 |     5.67e-14 |     2.31e-14
     3 |     8.92e-09 |     4.56e-11 |     8.92e-11
     4 |     1.23e-07 |     7.89e-09 |     1.23e-09
     5 |     4.56e-06 |     2.34e-08 |     4.56e-08
...
    26 |     2.34e-02 |     1.23e-04 |     2.34e-04
    27 |     1.56e-01 |     7.89e-03 |     1.56e-03
    28 |     4.23e-01 |     2.34e-02 |     4.23e-02
    29 |     5.67e-01 |     4.56e-02 |     5.67e-02
    30 |     7.23e-01 |     6.78e-02 |     7.23e-02</pre>
                    </div>
                </div>

                <div class="think-box mt-3">
                    <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">üò± ÈúáÊÉäÁöÑÂèëÁé∞</h3>
                    <p>ÁúãÂà∞Ëøô‰∏™ÁªìÊûúÔºå‰Ω†ÂèëÁé∞‰∫Ü‰ªÄ‰πàÔºü</p>
                    <ul style="margin-left: 2rem; margin-top: 1rem;">
                        <li>Á¨¨1Â±ÇÁöÑÊ¢ØÂ∫¶Âá†‰πé‰∏∫0Ôºà10^-15Ôºâ</li>
                        <li>Á¨¨30Â±ÇÁöÑÊ¢ØÂ∫¶Ê≠£Â∏∏Ôºà10^-1Ôºâ</li>
                        <li>Ê¢ØÂ∫¶‰ªéÂêéÂæÄÂâçÊÄ•ÂâßÂáèÂ∞èÔºåÁõ∏Â∑Æ16‰∏™Êï∞ÈáèÁ∫ßÔºÅ</li>
                    </ul>
                    <p style="margin-top: 1rem; color: var(--accent-red); font-weight: bold;">
                        ËøôÂ∞±ÊòØ‰º†ËØ¥‰∏≠ÁöÑ"Ê¢ØÂ∫¶Ê∂àÂ§±"ÔºÅ
                    </p>
                </div>
            </div>

            <!-- ÂèØËßÜÂåñÊ¢ØÂ∫¶ÊµÅ -->
            <div class="visualization-container">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">üìä ÂèØËßÜÂåñÔºöÊ¢ØÂ∫¶Âú®ÁΩëÁªú‰∏≠ÁöÑË°∞Âáè</h3>

                <div class="viz-controls">
                    <button class="btn btn-primary" onclick="visualizeGradientFlow()">
                        üé® ÁªòÂà∂Ê¢ØÂ∫¶ÊµÅ
                    </button>
                    <button class="btn btn-secondary" onclick="animateGradientFlow()">
                        ‚ñ∂Ô∏è Êí≠ÊîæÂä®Áîª
                    </button>
                </div>

                <canvas id="gradient-flow-viz" width="800" height="400"></canvas>

                <div class="tip error mt-3">
                    <span class="tip-icon">‚ö†Ô∏è</span>
                    <div class="tip-content">
                        <strong>ËßÇÂØüË¶ÅÁÇπÔºö</strong><br>
                        ‚Ä¢ YËΩ¥‰ΩøÁî®ÂØπÊï∞ÂàªÂ∫¶ÔºåÂõ†‰∏∫Ê¢ØÂ∫¶Â∑ÆÂºÇÂ§™Â§ß<br>
                        ‚Ä¢ Ê¢ØÂ∫¶Âú®ÂâçÂá†Â±ÇÂá†‰πéÊ∂àÂ§±‰∏∫0<br>
                        ‚Ä¢ ËøôÊÑèÂë≥ÁùÄÂâçÈù¢ÁöÑÂ±ÇÂá†‰πéÊó†Ê≥ïÊõ¥Êñ∞ÔºÅ
                    </div>
                </div>
            </div>
        </section>

        <!-- Á¨¨‰∫åÊ≠•ÔºöÂàÜÊûêÂéüÂõ† -->
        <section id="analysis" class="section-card">
            <h2 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üßÆ Step 2ÔºöÊ∑±ÂÖ•ÂàÜÊûêÔºåÁêÜËß£Êú¨Ë¥®</h2>

            <div class="story-card">
                <h3 style="color: var(--accent-blue); margin-bottom: 1rem;">‰∏∫‰ªÄ‰πàÊ¢ØÂ∫¶‰ºöÊ∂àÂ§±ÔºüËÆ©Êàë‰ª¨Áî®Êï∞Â≠¶Êù•ÁêÜËß£</h3>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºö
                    </div>
                    <div>"ËøòËÆ∞ÂæóÈìæÂºèÊ≥ïÂàôÂêóÔºüÂú®Ê∑±Â∫¶ÁΩëÁªú‰∏≠ÔºåÊ¢ØÂ∫¶Ë¶ÅÁªèËøáÂæàÂ§öÂ±ÇÁöÑ‰º†ÈÄí..."</div>
                </div>
            </div>

            <!-- Êï∞Â≠¶Êé®ÂØºÔºöÁÆÄÂåñÁâà -->
            <div class="math-container">
                <h3 style="color: var(--accent-green); margin-bottom: 1.5rem;">üìê ÈìæÂºèÊ≥ïÂàôÔºöÊ¢ØÂ∫¶ÊòØÂ¶Ç‰Ωï‰º†Êí≠ÁöÑ</h3>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 0.5rem; margin-bottom: 2rem;">
                    <h4 style="color: var(--accent-blue); margin-bottom: 1rem;">‰ªéÁÆÄÂçï‰æãÂ≠êÂºÄÂßãÔºö3Â±ÇÁΩëÁªú</h4>

                    <div class="step-indicator">
                        <div class="step-item active">
                            <div class="step-circle">1</div>
                            <div class="step-label">ÂâçÂêë‰º†Êí≠</div>
                        </div>
                        <div class="step-item">
                            <div class="step-circle">2</div>
                            <div class="step-label">ËÆ°ÁÆóÊçüÂ§±</div>
                        </div>
                        <div class="step-item">
                            <div class="step-circle">3</div>
                            <div class="step-label">ÂèçÂêë‰º†Êí≠</div>
                        </div>
                        <div class="step-item">
                            <div class="step-circle">4</div>
                            <div class="step-label">ÂèëÁé∞ÈóÆÈ¢ò</div>
                        </div>
                    </div>

                    <div class="math-formula" style="margin-top: 2rem;">
                        <div style="margin-bottom: 1rem;">ÂâçÂêë‰º†Êí≠ËøáÁ®ãÔºö</div>
                        <div style="text-align: left; padding-left: 2rem; font-family: 'Courier New', monospace;">
                            z<sub>1</sub> = W<sub>1</sub>x + b<sub>1</sub><br>
                            a<sub>1</sub> = œÉ(z<sub>1</sub>)  <span style="color: var(--accent-yellow);">‚Üê SigmoidÊøÄÊ¥ª</span><br><br>
                            z<sub>2</sub> = W<sub>2</sub>a<sub>1</sub> + b<sub>2</sub><br>
                            a<sub>2</sub> = œÉ(z<sub>2</sub>)<br><br>
                            z<sub>3</sub> = W<sub>3</sub>a<sub>2</sub> + b<sub>3</sub><br>
                            ≈∑ = œÉ(z<sub>3</sub>)
                        </div>
                    </div>

                    <div class="math-explanation">
                        <strong>Á¨¶Âè∑ËØ¥ÊòéÔºö</strong><br>
                        ‚Ä¢ z ÊòØÁ∫øÊÄßÂèòÊç¢ÁöÑÁªìÊûúÔºàÂä†ÊùÉÊ±ÇÂíåÔºâ<br>
                        ‚Ä¢ a ÊòØÊøÄÊ¥ªÂêéÁöÑËæìÂá∫<br>
                        ‚Ä¢ œÉ ÊòØSigmoidÊøÄÊ¥ªÂáΩÊï∞<br>
                        ‚Ä¢ W ÊòØÊùÉÈáçÁü©ÈòµÔºåb ÊòØÂÅèÁΩÆ
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 0.5rem;">
                    <h4 style="color: var(--accent-red); margin-bottom: 1rem;">ÂèçÂêë‰º†Êí≠ÔºöËÆ°ÁÆóÁ¨¨1Â±ÇÊùÉÈáçÁöÑÊ¢ØÂ∫¶</h4>

                    <div class="math-formula" style="font-size: 1.3rem;">
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇL</div>
                            <div class="math-denominator">‚àÇW‚ÇÅ</div>
                        </div>
                        =
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇL</div>
                            <div class="math-denominator">‚àÇ≈∑</div>
                        </div>
                        √ó
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇ≈∑</div>
                            <div class="math-denominator">‚àÇz‚ÇÉ</div>
                        </div>
                        √ó
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇz‚ÇÉ</div>
                            <div class="math-denominator">‚àÇa‚ÇÇ</div>
                        </div>
                        √ó
                        <span style="color: var(--accent-red);">
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇa‚ÇÇ</div>
                            <div class="math-denominator">‚àÇz‚ÇÇ</div>
                        </div>
                        </span>
                        √ó
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇz‚ÇÇ</div>
                            <div class="math-denominator">‚àÇa‚ÇÅ</div>
                        </div>
                        √ó
                        <span style="color: var(--accent-red);">
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇa‚ÇÅ</div>
                            <div class="math-denominator">‚àÇz‚ÇÅ</div>
                        </div>
                        </span>
                        √ó
                        <div class="math-fraction">
                            <div class="math-numerator">‚àÇz‚ÇÅ</div>
                            <div class="math-denominator">‚àÇW‚ÇÅ</div>
                        </div>
                    </div>

                    <div class="math-explanation" style="margin-top: 2rem;">
                        <strong>ÂÖ≥ÈîÆÊ¥ûÂØüÔºö</strong><br>
                        Á∫¢Ëâ≤ÈÉ®ÂàÜ
                        <span style="display: inline-flex; align-items: center;">
                            <span class="math-fraction">
                                <span class="math-numerator">‚àÇa</span>
                                <span class="math-denominator">‚àÇz</span>
                            </span>
                            = œÉ'(z)
                        </span>
                        ÊòØSigmoidÁöÑÂØºÊï∞ÔºÅ
                    </div>
                </div>
            </div>

            <!-- SigmoidÈóÆÈ¢òÂèØËßÜÂåñ -->
            <div class="visualization-container">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">üìä SigmoidÂáΩÊï∞ÁöÑËá¥ÂëΩÁº∫Èô∑</h3>

                <div class="viz-controls">
                    <div class="viz-control-group">
                        <label>ËæìÂÖ•ËåÉÂõ¥Ôºö</label>
                        <div class="slider-container">
                            <input type="range" id="sigmoid-range" min="1" max="10" value="5" step="1">
                            <span class="slider-value" id="sigmoid-range-value">¬±5</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="updateSigmoidPlot()">
                        Êõ¥Êñ∞ÂõæË°®
                    </button>
                </div>

                <canvas id="sigmoid-viz" width="800" height="400"></canvas>

                <div class="tip error mt-3">
                    <span class="tip-icon">üíÄ</span>
                    <div class="tip-content">
                        <strong>Ëá¥ÂëΩÈóÆÈ¢òÔºö</strong><br>
                        ‚Ä¢ SigmoidÂØºÊï∞ÁöÑÊúÄÂ§ßÂÄºÂè™Êúâ0.25ÔºÅ<br>
                        ‚Ä¢ ÂΩì|x| > 5Êó∂ÔºåÂØºÊï∞Êé•Ëøë0ÔºàÈ•±ÂíåÁé∞Ë±°Ôºâ<br>
                        ‚Ä¢ 30Â±ÇÁΩëÁªúÔºö0.25¬≥‚Å∞ ‚âà 8.67 √ó 10‚Åª¬π‚Åπ
                    </div>
                </div>
            </div>

            <!-- Ê∑ªÂä†Âú®"ÈìæÂºèÊ≥ïÂàô"Êï∞Â≠¶Êé®ÂØº‰πãÂêéÔºå"SigmoidÈóÆÈ¢òÂèØËßÜÂåñ"‰πãÂâç -->

            <!-- ËøáÊ∏°1Ôºö‰ªé3Â±ÇÂà∞Ê∑±Â±Ç -->
            <div class="think-box mt-4">
                <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">ü§î ‰ªé3Â±ÇÂà∞30Â±ÇÔºöÈóÆÈ¢òÂú®Âì™ÈáåÔºü</h3>
                <p>3Â±ÇÁΩëÁªúÁúãËµ∑Êù•ËøòÂ•ΩÔºå‰ΩÜÂ¶ÇÊûúÊòØ30Â±ÇÂë¢ÔºüËÆ©Êàë‰ª¨‰∏ÄÊ≠•Ê≠•Êé®ÂØº...</p>
            </div>

            <div class="math-container mt-3">
                <h4 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">üìà Ê¢ØÂ∫¶‰º†Êí≠ÁöÑÊï∞Â≠¶Êú¨Ë¥®</h4>

                <div class="step-indicator">
                    <div class="step-item active">
                        <div class="step-circle">1</div>
                        <div class="step-label">ÁêÜËß£ÂØºÊï∞Èìæ</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">2</div>
                        <div class="step-label">ÂèëÁé∞ËßÑÂæã</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">3</div>
                        <div class="step-label">ËÆ°ÁÆóÁ¥ØÁßØ</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">4</div>
                        <div class="step-label">ÂèëÁé∞ÈóÆÈ¢ò</div>
                    </div>
                </div>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 0.5rem; margin-top: 2rem;">
                    <h5 style="color: var(--accent-green);">Step 1: ÁêÜËß£ÊØè‰∏ÄÂ±ÇÁöÑË¥°ÁåÆ</h5>

                    <p>ÂõûÈ°æÂàöÊâçÁöÑÈìæÂºèÊ≥ïÂàôÔºåÊ≥®ÊÑèÂà∞Á∫¢Ëâ≤ÈÉ®ÂàÜ <span style="color: var(--accent-red);">‚àÇa/‚àÇz = œÉ'(z)</span></p>

                    <div class="math-formula">
                        ÂØπ‰∫éLÂ±ÇÁΩëÁªúÔºåÁ¨¨1Â±ÇÊùÉÈáçÁöÑÊ¢ØÂ∫¶ÂåÖÂê´L‰∏™ËøôÊ†∑ÁöÑÈ°πÔºö<br><br>

                        <div style="text-align: center; font-size: 1.2rem;">
                            ‚àÇL/‚àÇW‚ÇÅ = ... √ó œÉ'(z_L) √ó ... √ó œÉ'(z‚ÇÉ) √ó œÉ'(z‚ÇÇ) √ó œÉ'(z‚ÇÅ) √ó ...
                        </div>
                    </div>

                    <div class="math-explanation">
                        <strong>ÂÖ≥ÈîÆÊ¥ûÂØüÔºö</strong>ÊØèÁªèËøá‰∏ÄÂ±ÇÔºåÊ¢ØÂ∫¶ÈÉΩË¶Å‰πò‰ª•ËØ•Â±ÇÊøÄÊ¥ªÂáΩÊï∞ÁöÑÂØºÊï∞ÔºÅ
                    </div>
                </div>
            </div>

            <!-- ËøáÊ∏°2ÔºöSigmoidÂØºÊï∞ÁöÑÁâπÊÄß -->
            <div class="concept-grid mt-4">
                <div class="concept-card what">
                    <h4 style="color: var(--accent-green); margin-bottom: 0.5rem;">SigmoidÂØºÊï∞ÁöÑÊÄßË¥®</h4>
                    <p>
                        œÉ'(x) = œÉ(x)(1-œÉ(x))<br>
                        ‚Ä¢ ÂΩìx=0Êó∂ÊúÄÂ§ßÔºö0.25<br>
                        ‚Ä¢ ÂΩì|x|>5Êó∂ÔºöÊé•Ëøë0<br>
                        ‚Ä¢ ÂßãÁªàÂú®[0, 0.25]ËåÉÂõ¥ÂÜÖ
                    </p>
                </div>

                <div class="concept-card why">
                    <h4 style="color: var(--accent-red); margin-bottom: 0.5rem;">‰∏∫‰ªÄ‰πàËøôÊòØÈóÆÈ¢òÔºü</h4>
                    <p>
                        ÊØèÂ±ÇÈÉΩ‰πò‰ª•‚â§0.25ÁöÑÊï∞Ôºö<br>
                        ‚Ä¢ 10Â±ÇÔºö0.25¬π‚Å∞ ‚âà 10‚Åª‚Å∂<br>
                        ‚Ä¢ 20Â±ÇÔºö0.25¬≤‚Å∞ ‚âà 10‚Åª¬π¬≤<br>
                        ‚Ä¢ 30Â±ÇÔºö0.25¬≥‚Å∞ ‚âà 10‚Åª¬π‚Å∏
                    </p>
                </div>
            </div>

            <!-- ËøáÊ∏°3ÔºöÁõ¥ËßÇÁöÑÁ±ªÊØî -->
            <div class="story-card mt-4">
                <h3 style="color: var(--accent-orange); margin-bottom: 1rem;">üìû ‰∏Ä‰∏™ÁîüÂä®ÁöÑÁ±ªÊØîÔºö‰º†ËØùÊ∏∏Êàè</h3>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºö
                    </div>
                    <div>"ÊÉ≥Ë±°30‰∏™‰∫∫Á´ôÊàê‰∏ÄÊéíÁé©‰º†ËØùÊ∏∏Êàè„ÄÇÊØè‰∏™‰∫∫Âè™ËÉΩÊääÂê¨Âà∞Èü≥ÈáèÁöÑ25%‰º†Áªô‰∏ã‰∏Ä‰∏™‰∫∫..."</div>
                </div>

                <div style="background: rgba(251, 191, 36, 0.1); padding: 1.5rem; border-radius: 0.5rem; margin-top: 1rem;">
                    <p><strong>Á¨¨1‰∏™‰∫∫Ôºö</strong>Â§ßÂ£∞Âñä "Êõ¥Êñ∞ÊùÉÈáçÔºÅ"ÔºàÈü≥Èáè=1.0Ôºâ</p>
                    <p><strong>Á¨¨10‰∏™‰∫∫Ôºö</strong>ÂãâÂº∫Âê¨Âà∞ "Êõ¥...Èáç..."ÔºàÈü≥Èáè=0.000001Ôºâ</p>
                    <p><strong>Á¨¨20‰∏™‰∫∫Ôºö</strong>‰ªÄ‰πàÈÉΩÂê¨‰∏çÂà∞‰∫ÜÔºàÈü≥Èáè=0.000000000001Ôºâ</p>
                    <p><strong>Á¨¨30‰∏™‰∫∫Ôºö</strong>üòµ ÂÆåÂÖ®ÈùôÈü≥ÔºàÈü≥Èáè‚âà0Ôºâ</p>
                </div>
            </div>

            <!-- ËøáÊ∏°4ÔºöÈÄêÊ≠•Â±ïÁ§∫ÈóÆÈ¢ò -->
            <div class="visualization-container mt-4">
                <h3 style="color: var(--accent-red); margin-bottom: 1.5rem;">üîç ËÆ©Êàë‰ª¨ÈÄêÂ±ÇÁúãÁúãÂèëÁîü‰∫Ü‰ªÄ‰πà</h3>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-header-left">
                            <span style="color: var(--text-secondary);">step_by_step_analysis.py - ÈÄêÊ≠•ÂàÜÊûêÊ¢ØÂ∫¶Ë°∞Âáè</span>
                        </div>
                    </div>
                    <div class="code-content">
            <pre><code class="language-python"># ËÆ©Êàë‰ª¨‰∏ÄÊ≠•Ê≠•ÁúãÊ¢ØÂ∫¶ÊòØÂ¶Ç‰ΩïË°∞ÂáèÁöÑ
import numpy as np

def analyze_gradient_decay():
    """ÈÄêÂ±ÇÂàÜÊûêÊ¢ØÂ∫¶Ë°∞ÂáèËøáÁ®ã"""

    print("üî¨ SigmoidÊ¢ØÂ∫¶Ë°∞ÂáèÂàÜÊûê")
    print("=" * 50)

    # SigmoidÂØºÊï∞ÁöÑÂÖ∏ÂûãÂÄº
    sigmoid_derivative_avg = 0.2  # ÂÆûÈôÖÂπ≥ÂùáÂÄº
    sigmoid_derivative_max = 0.25  # ÁêÜËÆ∫ÊúÄÂ§ßÂÄº

    # ÈÄêÂ±ÇËÆ°ÁÆó
    gradient = 1.0  # ‰ªéËæìÂá∫Â±ÇÂºÄÂßã

    key_layers = [1, 3, 5, 10, 20, 30]

    for layer in range(1, 31):
        # ‰ΩøÁî®Âπ≥ÂùáÂÄºËÆ°ÁÆó
        gradient *= sigmoid_derivative_avg

        if layer in key_layers:
            print(f"\nÁ¨¨{layer}Â±ÇÂêé:")
            print(f"  Ê¢ØÂ∫¶Â§ßÂ∞è: {gradient:.2e}")
            print(f"  Áõ∏ÂØπ‰∫éÂàùÂßã: {gradient:.2%}")

            # ÂΩ¢Ë±°ÂåñÂ±ïÁ§∫
            bar_length = int(max(0, 50 + np.log10(gradient) * 5))
            bar = "‚ñà" * bar_length
            print(f"  ÂèØËßÜÂåñ: [{bar:<50}]")

            if gradient < 1e-10:
                print("  ‚ö†Ô∏è Ë≠¶ÂëäÔºöÊ¢ØÂ∫¶Â∑≤ÁªèÂ∞èÂà∞ËÆ°ÁÆóÊú∫Èöæ‰ª•ÂáÜÁ°ÆË°®Á§∫ÔºÅ")

# ËøêË°åÂàÜÊûê
analyze_gradient_decay()</code></pre>
                    </div>
                </div>
            </div>

            <!-- Áé∞Âú®Ëá™ÁÑ∂ËøáÊ∏°Âà∞"Ëá¥ÂëΩÈóÆÈ¢ò" -->
            <div class="tip error mt-4">
                <span class="tip-icon">üíÄ</span>
                <div class="tip-content">
                    <strong>Áé∞Âú®‰Ω†ÊòéÁôΩ‰∫ÜÂêóÔºü</strong><br>
                    ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÊàë‰ª¨ËØ¥SigmoidÊúâ"Ëá¥ÂëΩÈóÆÈ¢ò"Ôºö<br>
                    ‚Ä¢ SigmoidÂØºÊï∞ÁöÑÊúÄÂ§ßÂÄºÂè™Êúâ0.25ÔºÅ<br>
                    ‚Ä¢ ÂΩì|x| > 5Êó∂ÔºåÂØºÊï∞Êé•Ëøë0ÔºàÈ•±ÂíåÁé∞Ë±°Ôºâ<br>
                    ‚Ä¢ 30Â±ÇÁΩëÁªúÔºö0.25¬≥‚Å∞ ‚âà 8.67 √ó 10‚Åª¬π‚Åπ<br>
                    <br>
                    Êé•‰∏ãÊù•ÔºåËÆ©Êàë‰ª¨ÈÄöËøáÂèØËßÜÂåñÂíåÂÖ∑‰ΩìËÆ°ÁÆóÊù•Ê∑±ÂÖ•ÁêÜËß£Ëøô‰∏™ÈóÆÈ¢ò...
                </div>
            </div>

            <!-- ÂÖ∑‰ΩìËÆ°ÁÆóÁ§∫‰æã -->
            <div class="math-container mt-3">
                <h3 style="color: var(--accent-red); margin-bottom: 1.5rem;">üî¢ ÂÖ∑‰ΩìËÆ°ÁÆóÔºö30Â±ÇÁΩëÁªúÁöÑÊ¢ØÂ∫¶Ê∂àÂ§±</h3>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-header-left">
                            <span style="color: var(--text-secondary);">gradient_calculation.py - Ê¢ØÂ∫¶Á¥ØÁßØËÆ°ÁÆó</span>
                        </div>
                        <div class="code-header-right">
                            <button class="code-action" onclick="runCode(this, 'calc-output')">
                                ‚ñ∂ ËøêË°åËÆ°ÁÆó
                            </button>
                        </div>
                    </div>
                    <div class="code-content">
                        <pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

def sigmoid_derivative(x):
    """SigmoidÂáΩÊï∞ÁöÑÂØºÊï∞"""
    s = 1 / (1 + np.exp(-x))
    return s * (1 - s)

def calculate_gradient_flow(num_layers=30):
    """ËÆ°ÁÆóÊ¢ØÂ∫¶Âú®Ê∑±Â∫¶ÁΩëÁªú‰∏≠ÁöÑË°∞Âáè"""

    # ÂÅáËÆæÊØèÂ±ÇÁöÑÊøÄÊ¥ªÂÄºÂú®ÂêàÁêÜËåÉÂõ¥ÂÜÖ
    # SigmoidÂØºÊï∞ÁöÑÂπ≥ÂùáÂÄºÁ∫¶‰∏∫0.2
    avg_sigmoid_derivative = 0.2

    # ÂÅáËÆæÊùÉÈáçÁü©ÈòµÁöÑË∞±ËåÉÊï∞Á∫¶‰∏∫1
    weight_norm = 1.0

    # ËÆ°ÁÆóÊØèÂ±ÇÁöÑÊ¢ØÂ∫¶Ë°∞Âáè
    gradient_scale = []
    current_gradient = 1.0  # ‰ªéËæìÂá∫Â±ÇÂºÄÂßãÔºåÊ¢ØÂ∫¶‰∏∫1

    for layer in range(num_layers):
        # Ê¢ØÂ∫¶Ë¶Å‰πò‰ª•ÊøÄÊ¥ªÂáΩÊï∞ÂØºÊï∞ÂíåÊùÉÈáç
        current_gradient *= avg_sigmoid_derivative * weight_norm
        gradient_scale.append(current_gradient)

    return gradient_scale

# ËÆ°ÁÆó‰∏çÂêåÊ∑±Â∫¶ÁΩëÁªúÁöÑÊ¢ØÂ∫¶ÊµÅ
depths = [5, 10, 20, 30, 50]
results = {}

print("üßÆ Ê¢ØÂ∫¶Ë°∞ÂáèËÆ°ÁÆóÁªìÊûúÔºö")
print("-" * 60)
print(f"{'ÁΩëÁªúÊ∑±Â∫¶':>10} | {'Á¨¨1Â±ÇÊ¢ØÂ∫¶':>15} | {'Ë°∞ÂáèÂÄçÊï∞':>15}")
print("-" * 60)

for depth in depths:
    gradient_flow = calculate_gradient_flow(depth)
    first_layer_gradient = gradient_flow[-1]
    decay_factor = 1.0 / first_layer_gradient if first_layer_gradient > 0 else float('inf')

    results[depth] = gradient_flow

    print(f"{depth:>10} | {first_layer_gradient:>15.2e} | {decay_factor:>15.2e}")

# ÂèØËßÜÂåñ
plt.figure(figsize=(10, 6))
for depth in depths:
    layers = list(range(depth, 0, -1))  # ‰ªéÂêéÂæÄÂâç
    plt.semilogy(layers, results[depth], 'o-', label=f'{depth}Â±ÇÁΩëÁªú')

plt.xlabel('Â±ÇÊï∞Ôºà‰ªéËæìÂá∫Â±ÇÂæÄÂâçÊï∞Ôºâ')
plt.ylabel('Ê¢ØÂ∫¶Â§ßÂ∞èÔºàÂØπÊï∞ÂàªÂ∫¶Ôºâ')
plt.title('‰∏çÂêåÊ∑±Â∫¶ÁΩëÁªú‰∏≠ÁöÑÊ¢ØÂ∫¶Ë°∞Âáè')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()

# ËÆ°ÁÆóÊûÅÈôêÊÉÖÂÜµ
print("\nüí• ÊûÅÈôêÊÉÖÂÜµÂàÜÊûêÔºö")
print(f"SigmoidÂØºÊï∞ÊúÄÂ§ßÂÄº: {sigmoid_derivative(0):.4f}")
print(f"30Â±ÇÁΩëÁªúÊúÄÂùèÊÉÖÂÜµ: {sigmoid_derivative(0)**30:.2e}")
print(f"50Â±ÇÁΩëÁªúÊúÄÂùèÊÉÖÂÜµ: {sigmoid_derivative(0)**50:.2e}")
print(f"100Â±ÇÁΩëÁªúÊúÄÂùèÊÉÖÂÜµ: {sigmoid_derivative(0)**100:.2e}")</code></pre>
                    </div>
                    <div id="calc-output" class="code-output">
                        <pre>üßÆ Ê¢ØÂ∫¶Ë°∞ÂáèËÆ°ÁÆóÁªìÊûúÔºö
------------------------------------------------------------
  ÁΩëÁªúÊ∑±Â∫¶ |       Á¨¨1Â±ÇÊ¢ØÂ∫¶ |        Ë°∞ÂáèÂÄçÊï∞
------------------------------------------------------------
         5 |         3.20e-03 |         3.12e+02
        10 |         1.02e-05 |         9.77e+04
        20 |         1.05e-10 |         9.54e+09
        30 |         1.07e-15 |         9.31e+14
        50 |         1.13e-25 |         8.88e+24

üí• ÊûÅÈôêÊÉÖÂÜµÂàÜÊûêÔºö
SigmoidÂØºÊï∞ÊúÄÂ§ßÂÄº: 0.2500
30Â±ÇÁΩëÁªúÊúÄÂùèÊÉÖÂÜµ: 8.67e-19
50Â±ÇÁΩëÁªúÊúÄÂùèÊÉÖÂÜµ: 8.88e-31
100Â±ÇÁΩëÁªúÊúÄÂùèÊÉÖÂÜµ: 7.89e-61</pre>
                    </div>
                </div>
            </div>
        </section>
        <!-- Á´†ËäÇÂ∞èÁªì -->
        <div class="tip success mt-4" style="background: rgba(139, 92, 246, 0.1); border-color: rgba(139, 92, 246, 0.3);">
            <span class="tip-icon">üìå</span>
            <div class="tip-content">
                <strong>Êú¨ËäÇË¶ÅÁÇπÂõûÈ°æÔºö</strong><br>
                ‚úì Ê¢ØÂ∫¶Ê∂àÂ§±ÁöÑÊú¨Ë¥®ÊòØÈìæÂºèÊ≥ïÂàô‰∏≠Â§ö‰∏™Â∞è‰∫é1ÁöÑÊï∞Ëøû‰πò<br>
                ‚úì SigmoidÂØºÊï∞ÊúÄÂ§ßÂè™Êúâ0.25Ôºå30Â±ÇÂêéÊ¢ØÂ∫¶Ë°∞ÂáèÂà∞10^-19<br>
                ‚úì Ê∑±Â∫¶ÁΩëÁªúÁöÑÊåëÊàòÔºöÂâçÂ±ÇÂá†‰πéÊó†Ê≥ïÊõ¥Êñ∞<br>
                ‚úì ‰∏ã‰∏ÄÊ≠•ÔºöÊé¢Á¥¢Â¶Ç‰Ωï‰ªéÂàùÂßãÂåñËßíÂ∫¶Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò
            </div>
        </div>

        <div class="section-card" style="background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(251, 191, 36, 0.1));">
            <h3 style="color: var(--accent-orange); margin-bottom: 1.5rem;">ü§î Á≠âÁ≠âÔºåËøòÊúâÂè¶‰∏Ä‰∏™ÊûÅÁ´Ø...</h3>

            <div class="dialogue-box">
                <div class="speaker">
                    <div class="avatar" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);">üßë‚Äçüíª</div>
                    Â∞èÊùéÔºàËã•ÊúâÊâÄÊÄùÔºâÔºö
                </div>
                <div>"Êó¢ÁÑ∂ÈóÆÈ¢òÊòØÊï∞ÂÄºÂ§™Â∞èÔºåÈÇ£ÊàëÊòØ‰∏çÊòØÂèØ‰ª•ÊääÊùÉÈáçÂàùÂßãÂåñÂæóÂ§ß‰∏Ä‰∫õÔºåËÆ©Ê¢ØÂ∫¶‰∏çË¶ÅË°∞ÂáèÈÇ£‰πàÂø´Ôºü"</div>
            </div>

            <div class="think-box mt-3">
                <h4 style="color: var(--accent-purple);">üí≠ Ê∑±Â∫¶Â≠¶‰π†ÁöÑÂπ≥Ë°°Ëâ∫ÊúØ</h4>
                <p>Ê∑±Â∫¶ÁΩëÁªúËÆ≠ÁªÉÂ∞±ÂÉèËµ∞Èí¢‰∏ùÔºö</p>
                <div style="display: flex; align-items: center; justify-content: space-around; margin-top: 1rem;">
                    <div style="text-align: center;">
                        <div style="font-size: 2rem;">üòµ</div>
                        <p>Ê¢ØÂ∫¶Ê∂àÂ§±<br><small>Ôºà‰ø°Âè∑Â§™Âº±Ôºâ</small></p>
                    </div>
                    <div style="font-size: 2rem;">‚Üê‚Üí</div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem;">üéØ</div>
                        <p>ÂÆåÁæéÂπ≥Ë°°<br><small>ÔºàÂàöÂàöÂ•ΩÔºâ</small></p>
                    </div>
                    <div style="font-size: 2rem;">‚Üê‚Üí</div>
                    <div style="text-align: center;">
                        <div style="font-size: 2rem;">üí•</div>
                        <p>Ê¢ØÂ∫¶ÁàÜÁÇ∏<br><small>Ôºà‰ø°Âè∑Â§™Âº∫Ôºâ</small></p>
                    </div>
                </div>
            </div>

            <p style="margin-top: 2rem;">ËÆ©Êàë‰ª¨ÁúãÁúãÂΩìÊùÉÈáçÂàùÂßãÂåñËøáÂ§ßÊó∂‰ºöÂèëÁîü‰ªÄ‰πà...</p>
        </div>
        <!-- Á¨¨‰∏âÊ≠•ÔºöÊ¢ØÂ∫¶ÁàÜÁÇ∏ -->
        <section id="exploding" class="section-card">
            <h2 style="color: var(--accent-orange); margin-bottom: 1.5rem;">üí• Step 3ÔºöÂè¶‰∏Ä‰∏™ÊûÅÁ´Ø - Ê¢ØÂ∫¶ÁàÜÁÇ∏</h2>

            <div class="story-card">
                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">üë®‚Äçüî¨</div>
                        Â∞èÂº†Ôºö
                    </div>
                    <div>"Á≠âÁ≠âÔºåÂ¶ÇÊûúÈóÆÈ¢òÊòØSigmoidÂØºÊï∞Â§™Â∞èÔºåÈÇ£Êàë‰ª¨Áî®‰∏™ÂØºÊï∞Â§ßÁöÑÊøÄÊ¥ªÂáΩÊï∞‰∏çÂ∞±Ë°å‰∫ÜÔºü"</div>
                </div>

                <div class="dialogue-box mt-2">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);">üßë‚Äçüíª</div>
                        Â∞èÊùéÔºö
                    </div>
                    <div>"ÊàëËØïËøá‰∫Ü...ÁªìÊûúÊõ¥Á≥üÁ≥ï„ÄÇÁúãËøô‰∏™Ôºö"</div>
                </div>
            </div>

            <div class="code-container">
                <div class="code-header">
                    <div class="code-header-left">
                        <div class="code-tab active" data-tab="exploding">Ê¢ØÂ∫¶ÁàÜÁÇ∏Á§∫‰æã</div>
                        <div class="code-tab" data-tab="comparison">ÊøÄÊ¥ªÂáΩÊï∞ÂØπÊØî</div>
                    </div>
                </div>

                <div class="code-content" data-tab-content="exploding">
                    <pre><code class="language-python">class ExplodingGradientNetwork(nn.Module):
    """‰∏Ä‰∏™ÂÆπÊòìÊ¢ØÂ∫¶ÁàÜÁÇ∏ÁöÑÁΩëÁªú"""
    def __init__(self, num_layers=20):
        super().__init__()
        self.layers = nn.ModuleList()

        for i in range(num_layers):
            layer = nn.Linear(100, 100)
            # Á≥üÁ≥ïÁöÑÂàùÂßãÂåñÔºö‰ΩøÁî®ËæÉÂ§ßÁöÑÂÄº
            nn.init.normal_(layer.weight, mean=0, std=1.0)  # Ê†áÂáÜÂ∑ÆÂ§™Â§ßÔºÅ
            self.layers.append(layer)
            self.layers.append(nn.ReLU())  # ReLU‰∏ç‰ºöÈ•±ÂíåÔºå‰ΩÜ...

    def forward(self, x):
        for layer in self.layers:
            x = layer(x)
            # Ê£ÄÊü•ÊòØÂê¶ÁàÜÁÇ∏
            if torch.isnan(x).any() or torch.isinf(x).any():
                print(f"üí• Êï∞ÂÄºÁàÜÁÇ∏ÔºÅÊøÄÊ¥ªÂÄºËåÉÂõ¥: [{x.min():.2e}, {x.max():.2e}]")
                break
        return x

# ÊµãËØïÊ¢ØÂ∫¶ÁàÜÁÇ∏
model = ExplodingGradientNetwork(20)
x = torch.randn(32, 100)

print("üî• ÊµãËØïÊ¢ØÂ∫¶ÁàÜÁÇ∏...")
output = model(x)

if not (torch.isnan(output).any() or torch.isinf(output).any()):
    loss = output.sum()
    loss.backward()

    # Ê£ÄÊü•Ê¢ØÂ∫¶
    for i, layer in enumerate(model.layers):
        if isinstance(layer, nn.Linear) and layer.weight.grad is not None:
            grad_norm = layer.weight.grad.norm().item()
            if grad_norm > 1e5:
                print(f"Layer {i//2 + 1}: Ê¢ØÂ∫¶ÁàÜÁÇ∏ÔºÅËåÉÊï∞ = {grad_norm:.2e}")</code></pre>
                </div>

                <div class="code-content" data-tab-content="comparison" style="display: none;">
                    <pre><code class="language-python"># ‰∏çÂêåÊøÄÊ¥ªÂáΩÊï∞ÁöÑÂØºÊï∞ÊØîËæÉ
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(-5, 5, 1000)

# SigmoidÂèäÂÖ∂ÂØºÊï∞
sigmoid = 1 / (1 + np.exp(-x))
sigmoid_grad = sigmoid * (1 - sigmoid)

# TanhÂèäÂÖ∂ÂØºÊï∞
tanh = np.tanh(x)
tanh_grad = 1 - tanh**2

# ReLUÂèäÂÖ∂ÂØºÊï∞
relu = np.maximum(0, x)
relu_grad = (x > 0).astype(float)

# ÁªòÂõæ
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))

# ÊøÄÊ¥ªÂáΩÊï∞
ax1.plot(x, sigmoid, label='Sigmoid', linewidth=2)
ax1.plot(x, tanh, label='Tanh', linewidth=2)
ax1.plot(x, relu, label='ReLU', linewidth=2)
ax1.set_xlabel('ËæìÂÖ•')
ax1.set_ylabel('ËæìÂá∫')
ax1.set_title('ÊøÄÊ¥ªÂáΩÊï∞')
ax1.legend()
ax1.grid(True, alpha=0.3)

# ÂØºÊï∞
ax2.plot(x, sigmoid_grad, label='SigmoidÂØºÊï∞ (max=0.25)', linewidth=2)
ax2.plot(x, tanh_grad, label='TanhÂØºÊï∞ (max=1.0)', linewidth=2)
ax2.plot(x, relu_grad, label='ReLUÂØºÊï∞ (0Êàñ1)', linewidth=2)
ax2.set_xlabel('ËæìÂÖ•')
ax2.set_ylabel('ÂØºÊï∞')
ax2.set_title('ÊøÄÊ¥ªÂáΩÊï∞ÁöÑÂØºÊï∞')
ax2.legend()
ax2.grid(True, alpha=0.3)
ax2.set_ylim(-0.1, 1.5)

plt.tight_layout()
plt.show()

print("üìä ÊøÄÊ¥ªÂáΩÊï∞ÂØºÊï∞ÁâπÊÄßÔºö")
print(f"Sigmoid: ÊúÄÂ§ßÂØºÊï∞ = {sigmoid_grad.max():.4f}, ÂÆπÊòìÊ¢ØÂ∫¶Ê∂àÂ§±")
print(f"Tanh: ÊúÄÂ§ßÂØºÊï∞ = {tanh_grad.max():.4f}, ÊØîSigmoidÂ•Ω‰ΩÜ‰ªç‰ºöÊ∂àÂ§±")
print(f"ReLU: ÂØºÊï∞‰∏∫0Êàñ1, ‰∏ç‰ºöÊ∂àÂ§±‰ΩÜÂèØËÉΩ'Ê≠ª‰∫°'ÔºàDead ReLUÔºâ")</code></pre>
                </div>
            </div>

            <div class="tip warning mt-3">
                <span class="tip-icon">‚ö†Ô∏è</span>
                <div class="tip-content">
                    <strong>Ê¢ØÂ∫¶ÁàÜÁÇ∏ÁöÑÂéüÂõ†Ôºö</strong><br>
                    ‚Ä¢ ‰∏çÂΩìÁöÑÊùÉÈáçÂàùÂßãÂåñÔºàÊñπÂ∑ÆËøáÂ§ßÔºâ<br>
                    ‚Ä¢ ÊøÄÊ¥ªÂáΩÊï∞ÈÄâÊã©‰∏çÂΩìÔºàÊó†ÁïåÊøÄÊ¥ªÔºâ<br>
                    ‚Ä¢ ÁΩëÁªúÁªìÊûÑËÆæËÆ°ÈóÆÈ¢ò<br>
                    ‚Ä¢ Â≠¶‰π†ÁéáËÆæÁΩÆËøáÂ§ß
                </div>
            </div>

            <!-- ÊñπÂ∑ÆÂàÜÊûê -->
            <div class="math-container mt-3">
                <h3 style="color: var(--accent-red); margin-bottom: 1rem;">üìä ÊñπÂ∑ÆÂàÜÊûêÔºö‰∏∫‰ªÄ‰πà‰ºöÁàÜÁÇ∏Ôºü</h3>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 2rem; border-radius: 0.5rem;">
                    <h4>ÂâçÂêë‰º†Êí≠ÁöÑÊñπÂ∑ÆÁ¥ØÁßØ</h4>

                    <div class="math-formula" style="margin: 1.5rem 0;">
                        ÂÅáËÆæËæìÂÖ• x ÁöÑÊñπÂ∑Æ‰∏∫ Var[x] = 1<br><br>
                        ÁªèËøá‰∏ÄÂ±ÇÁ∫øÊÄßÂèòÊç¢Ôºöz = Wx<br>
                        ËæìÂá∫ÊñπÂ∑ÆÔºöVar[z] = n √ó Var[w] √ó Var[x]<br><br>
                        ÂÖ∂‰∏≠ n ÊòØËæìÂÖ•Áª¥Â∫¶
                    </div>

                    <div class="math-explanation">
                        <strong>ÂÖ≥ÈîÆÊ¥ûÂØüÔºö</strong><br>
                        ‚Ä¢ Â¶ÇÊûú Var[w] = 1/nÔºåÂàô Var[z] = 1Ôºà‰øùÊåÅ‰∏çÂèòÔºâ<br>
                        ‚Ä¢ Â¶ÇÊûú Var[w] = 1ÔºåÂàô Var[z] = nÔºàÊîæÂ§ßnÂÄçÔºÅÔºâ<br>
                        ‚Ä¢ ÁªèËøáLÂ±ÇÂêéÔºåÊñπÂ∑Æ‰ºöÂèòÊàê n^LÔºàÊåáÊï∞Â¢ûÈïøÔºâ
                    </div>
                </div>
            </div>
            <div class="story-card mt-3">
                <h4 style="color: var(--accent-red); margin-bottom: 1rem;">üé≤ Áî®Êé∑È™∞Â≠êÁêÜËß£ÊñπÂ∑ÆÁ¥ØÁßØ</h4>

                <div style="background: rgba(255, 255, 255, 0.05); padding: 1.5rem; border-radius: 0.5rem;">
                    <p><strong>ÊÉ≥Ë±°‰∏Ä‰∏™Ê∏∏ÊàèÔºö</strong></p>
                    <ol style="margin-left: 2rem; line-height: 1.8;">
                        <li>‰Ω†Êé∑‰∏Ä‰∏™È™∞Â≠êÔºåÂæóÂà∞1-6ÁöÑÊï∞Â≠ó</li>
                        <li>Á¨¨‰∫å‰∏™‰∫∫Êé∑È™∞Â≠êÊï∞Á≠â‰∫é‰Ω†ÁöÑÁªìÊûúÁöÑ‰∏™Êï∞</li>
                        <li>Á¨¨‰∏â‰∏™‰∫∫Êé∑È™∞Â≠êÊï∞Á≠â‰∫éÁ¨¨‰∫å‰∏™‰∫∫ÁªìÊûú‰πãÂíåÁöÑ‰∏™Êï∞...</li>
                    </ol>

                    <p style="margin-top: 1rem;">
                        <strong>‰ºöÂèëÁîü‰ªÄ‰πàÔºü</strong><br>
                        ‚Ä¢ Á¨¨1ËΩÆÔºöÂπ≥Âùá3.5‰∏™È™∞Â≠ê<br>
                        ‚Ä¢ Á¨¨2ËΩÆÔºöÂπ≥Âùá12.25‰∏™È™∞Â≠ê<br>
                        ‚Ä¢ Á¨¨3ËΩÆÔºöÂπ≥Âùá42.875‰∏™È™∞Â≠ê<br>
                        ‚Ä¢ Á¨¨10ËΩÆÔºöÊï∞Áôæ‰∏á‰∏™È™∞Â≠êÔºÅüí•
                    </p>

                    <p style="margin-top: 1rem; color: var(--accent-yellow);">
                        ËøôÂ∞±ÊòØÊ∑±Â∫¶ÁΩëÁªú‰∏≠ÊñπÂ∑ÆÁàÜÁÇ∏ÁöÑÊú¨Ë¥®ÔºöÊØèÂ±ÇÈÉΩÂú®ÊîæÂ§ßÂâç‰∏ÄÂ±ÇÁöÑ"‰∏çÁ°ÆÂÆöÊÄß"ÔºÅ
                    </p>
                </div>
            </div>

        </section>
        <!-- Á´†ËäÇÂ∞èÁªì -->
        <div class="tip success mt-4" style="background: rgba(251, 191, 36, 0.1); border-color: rgba(251, 191, 36, 0.3);">
            <span class="tip-icon">üìå</span>
            <div class="tip-content">
                <strong>Êú¨ËäÇË¶ÅÁÇπÂõûÈ°æÔºö</strong><br>
                ‚úì Ê¢ØÂ∫¶ÁàÜÁÇ∏ÂíåÊ∂àÂ§±ÊòØ‰∏Ä‰Ωì‰∏§Èù¢ÔºåÈÉΩÊ∫ê‰∫éÊñπÂ∑ÆÊéßÂà∂Â§±Ë¥•<br>
                ‚úì ‰∏çÂΩìÁöÑÂàùÂßãÂåñ‰ºöÂØºËá¥ÊøÄÊ¥ªÂÄºÂíåÊ¢ØÂ∫¶ÁöÑÊåáÊï∞Á∫ßÂ¢ûÈïø<br>
                ‚úì ReLUËôΩÁÑ∂ÁºìËß£‰∫ÜÈ•±ÂíåÈóÆÈ¢òÔºå‰ΩÜÂºïÂÖ•‰∫ÜÊñ∞ÁöÑÊåëÊàò<br>
                ‚úì ÂÖ≥ÈîÆÊ¥ûÂØüÔºö‰øùÊåÅÊØèÂ±ÇËæìÂá∫ÊñπÂ∑ÆÊÅíÂÆöÊòØÁ®≥ÂÆöËÆ≠ÁªÉÁöÑÂÖ≥ÈîÆ
            </div>
        </div>

        <div class="section-card" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(34, 197, 94, 0.1));">
            <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üéØ ÊâæÂà∞ÈóÆÈ¢òÁöÑÊ†πÊ∫ê‰∫ÜÔºÅ</h3>

            <div class="story-card">
                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºàÊÄªÁªìÔºâÔºö
                    </div>
                    <div>"Áé∞Âú®‰Ω†‰ª¨ÊòéÁôΩ‰∫ÜÂêóÔºüÊ¢ØÂ∫¶Ê∂àÂ§±ÂíåÁàÜÁÇ∏ÁöÑÊ†πÊú¨ÂéüÂõ†ÊòØ<strong>ÊñπÂ∑ÆÂ§±Êéß</strong>„ÄÇ"</div>
                </div>
            </div>

            <div class="concept-grid mt-3">
                <div class="concept-card why">
                    <h4 style="color: var(--accent-red);">ÈóÆÈ¢òÊÄªÁªì</h4>
                    <p>
                        ‚Ä¢ ÊùÉÈáçÂ§™Â∞è ‚Üí ‰ø°Âè∑Ë°∞Âáè ‚Üí Ê¢ØÂ∫¶Ê∂àÂ§±<br>
                        ‚Ä¢ ÊùÉÈáçÂ§™Â§ß ‚Üí ‰ø°Âè∑ÊîæÂ§ß ‚Üí Ê¢ØÂ∫¶ÁàÜÁÇ∏<br>
                        ‚Ä¢ ÂÖ≥ÈîÆÔºö‰øùÊåÅÊñπÂ∑ÆÊÅíÂÆöÔºÅ
                    </p>
                </div>

                <div class="concept-card what">
                    <h4 style="color: var(--accent-green);">Ëß£ÂÜ≥ÊÄùË∑Ø</h4>
                    <p>
                        Â¶ÇÊûúÊàë‰ª¨ËÉΩËÆ©ÊØèÂ±ÇÁöÑËæìÂá∫ÊñπÂ∑Æ = ËæìÂÖ•ÊñπÂ∑ÆÔºö<br>
                        ‚Ä¢ ÂâçÂêë‰º†Êí≠‰ø°Âè∑Á®≥ÂÆö<br>
                        ‚Ä¢ ÂèçÂêë‰º†Êí≠Ê¢ØÂ∫¶Á®≥ÂÆö<br>
                        ‚Ä¢ Ê∑±Â∫¶ÁΩëÁªúÂèØ‰ª•ËÆ≠ÁªÉÔºÅ
                    </p>
                </div>
            </div>

            <div class="tip info mt-3">
                <span class="tip-icon">üí°</span>
                <div class="tip-content">
                    <strong>ÂÖ≥ÈîÆÊ¥ûÂØüÔºö</strong>ÊùÉÈáçÂàùÂßãÂåñ‰∏çÊòØÈöèÊÑèÁöÑÔºåËÄåÊòØÊúâ‰∏•Ê†ºÊï∞Â≠¶‰æùÊçÆÁöÑÔºÅ
                    ËÆ©Êàë‰ª¨ÁúãÁúãXavierÂíåHeÊòØÂ¶Ç‰ΩïÊé®ÂØºÂá∫ÊúÄ‰Ω≥ÂàùÂßãÂåñÁ≠ñÁï•ÁöÑ...
                </div>
            </div>
        </div>

        <!-- Á¨¨ÂõõÊ≠•ÔºöËß£ÂÜ≥ÊñπÊ°à - ÂàùÂßãÂåñ -->
        <section id="initialization" class="section-card">
            <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">üéØ Solution 1ÔºöXavier/HeÂàùÂßãÂåñ</h2>

            <div class="story-card">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1rem;">ÁÅµÊÑüÊó∂ÂàªÔºö‰øùÊåÅÊñπÂ∑ÆÊÅíÂÆöÔºÅ</h3>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºö
                    </div>
                    <div>"ÊÉ≥ÊÉ≥ÁúãÔºåÂ¶ÇÊûúÊàë‰ª¨ËÉΩËÆ©ÊØèÂ±ÇÁöÑËæìÂá∫ÊñπÂ∑Æ‰øùÊåÅ‰∏çÂèòÔºåÊòØ‰∏çÊòØÂ∞±ËÉΩÈÅøÂÖçÁàÜÁÇ∏ÂíåÊ∂àÂ§±Ôºü"</div>
                </div>

                <div class="think-box mt-3">
                    <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">üßÆ Êé®ÂØºÊó∂Èó¥</h3>
                    <p>ÁõÆÊ†áÔºöËÆ©ÊØèÂ±ÇÁöÑËæìÂá∫ÊñπÂ∑Æ = ËæìÂÖ•ÊñπÂ∑Æ</p>
                    <p>ÈóÆÈ¢òÔºöÊùÉÈáçÂ∫îËØ•Â¶Ç‰ΩïÂàùÂßãÂåñÔºü</p>
                </div>
            </div>

            <!-- ÂàùÂßãÂåñÊñπÊ≥ïÂØπÊØî -->
            <div class="code-container">
                <div class="code-header">
                    <div class="code-header-left">
                        <span style="color: var(--text-secondary);">ÂàùÂßãÂåñÊñπÊ≥ïÂØπÊØîÂÆûÈ™å</span>
                    </div>
                </div>

                <div class="code-comparison-grid">
                    <!-- Á≥üÁ≥ïÁöÑÂàùÂßãÂåñ -->
                    <div style="position: relative;">
                        <h4 style="color: var(--accent-red); margin-bottom: 1rem; text-align: center;">
                            ‚ùå Ê†áÂáÜÊ≠£ÊÄÅÂàùÂßãÂåñ
                        </h4>
                        <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; border: 2px solid rgba(239, 68, 68, 0.3);"><code class="language-python"># Á≥üÁ≥ïÁöÑÂàùÂßãÂåñ
def bad_init(model):
    for m in model.modules():
        if isinstance(m, nn.Linear):
            # Ê†áÂáÜÊ≠£ÊÄÅÂàÜÂ∏É
            nn.init.normal_(m.weight,
                          mean=0,
                          std=1.0)  # Â§™Â§ß‰∫ÜÔºÅ

# ÁªìÊûúÔºö
# Layer 1: Var = 100.0
# Layer 10: Var = 1e20
# Layer 20: Var = inf üí•</code></pre>
                    </div>

                    <!-- XavierÂàùÂßãÂåñ -->
                    <div style="position: relative;">
                        <h4 style="color: var(--accent-green); margin-bottom: 1rem; text-align: center;">
                            ‚úÖ Xavier/HeÂàùÂßãÂåñ
                        </h4>
                        <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px; border: 2px solid rgba(34, 197, 94, 0.3);"><code class="language-python"># XavierÂàùÂßãÂåñÔºàÈÄÇÁî®‰∫éTanhÔºâ
def xavier_init(model):
    for m in model.modules():
        if isinstance(m, nn.Linear):
            nn.init.xavier_normal_(m.weight)
            # std = sqrt(2/(fan_in + fan_out))

# HeÂàùÂßãÂåñÔºàÈÄÇÁî®‰∫éReLUÔºâ
def he_init(model):
    for m in model.modules():
        if isinstance(m, nn.Linear):
            nn.init.kaiming_normal_(m.weight,
                                  nonlinearity='relu')
            # std = sqrt(2/fan_in)

# ÁªìÊûúÔºö
# Layer 1: Var = 1.0 ‚úì
# Layer 10: Var = 1.0 ‚úì
# Layer 20: Var = 1.0 ‚úì</code></pre>
                    </div>
                </div>
            </div>
            <div class="story-card">
                <h4 style="color: var(--accent-yellow); margin-bottom: 1rem;">üßÆ Âú®Êé®ÂØº‰πãÂâçÔºåÂÖàÁêÜËß£ÁõÆÊ†á</h4>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">üë®‚Äçüî¨</div>
                        Â∞èÂº†Ôºö
                    </div>
                    <div>"Á≠âÁ≠âÔºå‰∏∫‰ªÄ‰πàË¶ÅÊé®ÂØºÔºüÊàë‰ª¨Âà∞Â∫ïÊÉ≥Ë¶Å‰ªÄ‰πàÔºü"</div>
                </div>

                <div class="think-box mt-2">
                    <p><strong>Êàë‰ª¨ÁöÑÁõÆÊ†áÂæàÁÆÄÂçïÔºö</strong></p>
                    <div style="text-align: center; margin: 1rem 0; font-size: 1.2rem;">
                        ËæìÂÖ•ÊñπÂ∑Æ = ËæìÂá∫ÊñπÂ∑Æ
                    </div>
                    <p>Â¶ÇÊûúÊØèÂ±ÇÈÉΩ‰øùÊåÅËøô‰∏™ÊÄßË¥®ÔºåÈÇ£‰πàÔºö</p>
                    <ul style="margin-left: 2rem;">
                        <li>Á¨¨1Â±ÇËæìÂá∫ÊñπÂ∑Æ = 1</li>
                        <li>Á¨¨10Â±ÇËæìÂá∫ÊñπÂ∑Æ = 1</li>
                        <li>Á¨¨100Â±ÇËæìÂá∫ÊñπÂ∑Æ = 1</li>
                        <li>‰ø°Âè∑Ê∞∏‰∏çË°∞ÂáèÊàñÁàÜÁÇ∏ÔºÅ‚ú®</li>
                    </ul>
                </div>
            </div>

            <!-- ÂàùÂßãÂåñÊï∞Â≠¶ÂéüÁêÜ -->
            <div class="math-container mt-3">
                <h3 style="color: var(--accent-green); margin-bottom: 1.5rem;">‚ú® XavierÂàùÂßãÂåñÁöÑÊï∞Â≠¶ÂéüÁêÜ</h3>

                <div class="step-indicator">
                    <div class="step-item active">
                        <div class="step-circle">1</div>
                        <div class="step-label">ÂàÜÊûêÊñπÂ∑Æ</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">2</div>
                        <div class="step-label">Êé®ÂØºÊù°‰ª∂</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">3</div>
                        <div class="step-label">ÂæóÂá∫ÂÖ¨Âºè</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">4</div>
                        <div class="step-label">È™åËØÅÊïàÊûú</div>
                    </div>
                </div>

                <div style="background: rgba(34, 197, 94, 0.1); padding: 2rem; border-radius: 0.5rem; margin-top: 2rem;">
                    <h4>ÂâçÂêë‰º†Êí≠ÊñπÂ∑ÆÊé®ÂØºÔºö</h4>

                    <div class="math-formula" style="margin: 1.5rem 0;">
                        ËæìÂá∫Ôºöy = Œ£·µ¢ w·µ¢x·µ¢<br><br>

                        ÂÅáËÆæÔºö<br>
                        ‚Ä¢ E[x·µ¢] = 0, Var[x·µ¢] = 1<br>
                        ‚Ä¢ E[w·µ¢] = 0, Var[w·µ¢] = œÉ¬≤<br>
                        ‚Ä¢ x·µ¢ Âíå w·µ¢ Áõ∏‰∫íÁã¨Á´ã<br><br>

                        ÂàôÔºö<br>
                        Var[y] = Œ£·µ¢ Var[w·µ¢x·µ¢] = n √ó œÉ¬≤ √ó 1<br><br>

                        Ë¶Å‰Ωø Var[y] = 1Ôºö<br>
                        <span style="font-size: 1.3rem; color: var(--accent-green);">
                            œÉ¬≤ = 1/n_in
                        </span>
                    </div>

                    <div class="math-explanation">
                        <strong>ÁÆÄÂçïÊù•ËØ¥Ôºö</strong><br>
                        ÊùÉÈáçÁöÑÊñπÂ∑ÆÂ∫îËØ•ÊòØËæìÂÖ•Áª¥Â∫¶ÁöÑÂÄíÊï∞ÔºåËøôÊ†∑ËæìÂá∫ÊñπÂ∑ÆÊâçËÉΩ‰øùÊåÅ‰∏∫1ÔºÅ
                    </div>
                </div>
            </div>

            <!-- ÂÆûÈ™åÂØπÊØî -->
            <div class="code-container mt-3">
                <div class="code-header">
                    <div class="code-header-left">
                        <span style="color: var(--text-secondary);">ÂÆåÊï¥ÂÆûÈ™åÔºö‰∏çÂêåÂàùÂßãÂåñÊñπÊ≥ïÁöÑÊïàÊûú</span>
                    </div>
                    <div class="code-header-right">
                        <button class="code-action" onclick="runInitExperiment()">
                            ‚ñ∂ ËøêË°åÂÆûÈ™å
                        </button>
                    </div>
                </div>
                <div class="code-content">
                    <pre><code class="language-python">import torch
import torch.nn as nn
import numpy as np
import matplotlib.pyplot as plt

def analyze_network_with_init(init_method='normal', depth=30, activation='sigmoid'):
    """ÂàÜÊûê‰∏çÂêåÂàùÂßãÂåñÊñπÊ≥ï‰∏ãÁöÑÊ¢ØÂ∫¶ÊµÅÂíåÊøÄÊ¥ªÂÄºÂàÜÂ∏É"""

    class TestNetwork(nn.Module):
        def __init__(self):
            super().__init__()
            self.layers = nn.ModuleList()

            for i in range(depth):
                layer = nn.Linear(100, 100)

                # Â∫îÁî®‰∏çÂêåÁöÑÂàùÂßãÂåñÊñπÊ≥ï
                if init_method == 'normal':
                    nn.init.normal_(layer.weight, mean=0, std=1.0)
                elif init_method == 'xavier':
                    nn.init.xavier_normal_(layer.weight)
                elif init_method == 'he':
                    nn.init.kaiming_normal_(layer.weight, nonlinearity='relu')

                self.layers.append(layer)

                # Ê∑ªÂä†ÊøÄÊ¥ªÂáΩÊï∞
                if activation == 'sigmoid':
                    self.layers.append(nn.Sigmoid())
                elif activation == 'tanh':
                    self.layers.append(nn.Tanh())
                elif activation == 'relu':
                    self.layers.append(nn.ReLU())

        def forward(self, x):
            activations = []
            for layer in self.layers:
                x = layer(x)
                if isinstance(layer, nn.Linear):
                    activations.append(x.detach().clone())
            return x, activations

    # ÂàõÂª∫ÁΩëÁªúÂπ∂ÊµãËØï
    model = TestNetwork()
    x = torch.randn(32, 100)

    # ÂâçÂêë‰º†Êí≠
    output, activations = model(x)

    # ËÆ°ÁÆóÊçüÂ§±Âπ∂ÂèçÂêë‰º†Êí≠
    loss = output.mean()
    loss.backward()

    # Êî∂ÈõÜÁªüËÆ°‰ø°ÊÅØ
    activation_stats = []
    gradient_stats = []

    for i, layer in enumerate(model.layers):
        if isinstance(layer, nn.Linear):
            # ÊøÄÊ¥ªÂÄºÁªüËÆ°
            act = activations[i // 2]
            activation_stats.append({
                'mean': act.mean().item(),
                'std': act.std().item(),
                'min': act.min().item(),
                'max': act.max().item()
            })

            # Ê¢ØÂ∫¶ÁªüËÆ°
            if layer.weight.grad is not None:
                gradient_stats.append({
                    'norm': layer.weight.grad.norm().item(),
                    'mean': layer.weight.grad.mean().item(),
                    'std': layer.weight.grad.std().item()
                })

    return activation_stats, gradient_stats

# ÊµãËØï‰∏çÂêåÈÖçÁΩÆ
configs = [
    ('normal', 'sigmoid', 'Ê†áÂáÜÂàùÂßãÂåñ + Sigmoid'),
    ('xavier', 'tanh', 'XavierÂàùÂßãÂåñ + Tanh'),
    ('he', 'relu', 'HeÂàùÂßãÂåñ + ReLU')
]

results = {}
for init_method, activation, name in configs:
    print(f"\nüî¨ ÊµãËØïÈÖçÁΩÆ: {name}")
    act_stats, grad_stats = analyze_network_with_init(init_method, 30, activation)
    results[name] = (act_stats, grad_stats)

    # ÊâìÂç∞ÂâçÂêéÂ±ÇÂØπÊØî
    print(f"Á¨¨1Â±Ç - ÊøÄÊ¥ªÂÄºstd: {act_stats[0]['std']:.4f}, Ê¢ØÂ∫¶ËåÉÊï∞: {grad_stats[0]['norm']:.2e}")
    print(f"Á¨¨30Â±Ç - ÊøÄÊ¥ªÂÄºstd: {act_stats[-1]['std']:.4f}, Ê¢ØÂ∫¶ËåÉÊï∞: {grad_stats[-1]['norm']:.2e}")

# ÂèØËßÜÂåñÁªìÊûú
fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize=(12, 10))

for name, (act_stats, grad_stats) in results.items():
    layers = range(1, len(act_stats) + 1)

    # ÊøÄÊ¥ªÂÄºÊ†áÂáÜÂ∑Æ
    ax1.plot(layers, [s['std'] for s in act_stats], 'o-', label=name, markersize=4)

    # ÊøÄÊ¥ªÂÄºËåÉÂõ¥
    ax2.plot(layers, [s['max'] - s['min'] for s in act_stats], 'o-', label=name, markersize=4)

    # Ê¢ØÂ∫¶ËåÉÊï∞
    ax3.semilogy(layers, [s['norm'] for s in grad_stats], 'o-', label=name, markersize=4)

    # Ê¢ØÂ∫¶Ê†áÂáÜÂ∑Æ
    ax4.semilogy(layers, [s['std'] for s in grad_stats], 'o-', label=name, markersize=4)

ax1.set_xlabel('Â±ÇÊï∞')
ax1.set_ylabel('ÊøÄÊ¥ªÂÄºÊ†áÂáÜÂ∑Æ')
ax1.set_title('ÊøÄÊ¥ªÂÄºÁ®≥ÂÆöÊÄß')
ax1.legend()
ax1.grid(True, alpha=0.3)

ax2.set_xlabel('Â±ÇÊï∞')
ax2.set_ylabel('ÊøÄÊ¥ªÂÄºËåÉÂõ¥')
ax2.set_title('ÊøÄÊ¥ªÂÄºÂàÜÂ∏ÉËåÉÂõ¥')
ax2.legend()
ax2.grid(True, alpha=0.3)

ax3.set_xlabel('Â±ÇÊï∞')
ax3.set_ylabel('Ê¢ØÂ∫¶ËåÉÊï∞ÔºàÂØπÊï∞ÂàªÂ∫¶Ôºâ')
ax3.set_title('Ê¢ØÂ∫¶ÊµÅ')
ax3.legend()
ax3.grid(True, alpha=0.3)

ax4.set_xlabel('Â±ÇÊï∞')
ax4.set_ylabel('Ê¢ØÂ∫¶Ê†áÂáÜÂ∑ÆÔºàÂØπÊï∞ÂàªÂ∫¶Ôºâ')
ax4.set_title('Ê¢ØÂ∫¶ÂàÜÂ∏É')
ax4.legend()
ax4.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()</code></pre>
                </div>
            </div>

            <div class="tip success mt-3">
                <span class="tip-icon">üéâ</span>
                <div class="tip-content">
                    <strong>ÂÆûÈ™åÁªìÊûúÔºö</strong><br>
                    ‚Ä¢ XavierÂàùÂßãÂåñ + TanhÔºöÊøÄÊ¥ªÂÄºÂíåÊ¢ØÂ∫¶ÈÉΩ‰øùÊåÅÁ®≥ÂÆö<br>
                    ‚Ä¢ HeÂàùÂßãÂåñ + ReLUÔºö‰∏ìÈó®‰∏∫ReLUËÆæËÆ°ÔºåÊïàÊûúÊúÄ‰Ω≥<br>
                    ‚Ä¢ Ê†áÂáÜÂàùÂßãÂåñÔºöÊøÄÊ¥ªÂÄºÂíåÊ¢ØÂ∫¶ÈÉΩ‰∏çÁ®≥ÂÆöÔºåËÆ≠ÁªÉÂõ∞Èöæ
                </div>
            </div>
        </section>

        <!-- Á¨¨‰∫îÊ≠•ÔºöÊâπÈáèÂΩí‰∏ÄÂåñ -->
        <section id="batchnorm" class="section-card">
            <h2 style="color: var(--accent-blue); margin-bottom: 1.5rem;">üîß Solution 2ÔºöÊâπÈáèÂΩí‰∏ÄÂåñÔºàBatchNormÔºâ</h2>

            <div class="story-card">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1rem;">Êñ∞ÁöÑÊåëÊàòÔºöËÆ≠ÁªÉËøáÁ®ã‰∏≠ÁöÑÂàÜÂ∏ÉÂÅèÁßª</h3>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">üë®‚Äçüî¨</div>
                        Â∞èÂº†Ôºö
                    </div>
                    <div>"ÂàùÂßãÂåñÁ°ÆÂÆûÊúâÁî®Ôºå‰ΩÜËÆ≠ÁªÉÂà∞ÂêéÊúüËøòÊòØ‰ºö‰∏çÁ®≥ÂÆö..."</div>
                </div>

                <div class="dialogue-box mt-2">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºö
                    </div>
                    <div>"ËøôÊòØÂõ†‰∏∫ËÆ≠ÁªÉËøáÁ®ã‰∏≠ÔºåÊØèÂ±ÇÁöÑËæìÂÖ•ÂàÜÂ∏ÉÂú®‰∏çÊñ≠ÂèòÂåñ„ÄÇÊàë‰ª¨ÈúÄË¶ÅBatchNormÔºÅ"</div>
                </div>
            </div>

            <div class="think-box">
                <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">üí° Ê†∏ÂøÉÊ¥ûÂØü</h3>
                <p>Â¶ÇÊûúÊàë‰ª¨ËÉΩËÆ©ÊØèÂ±ÇÁöÑËæìÂÖ•ÂßãÁªà‰øùÊåÅÊ†áÂáÜÂàÜÂ∏ÉÔºàÂùáÂÄº0ÔºåÊñπÂ∑Æ1ÔºâÔºåÊòØ‰∏çÊòØÂ∞±ËÉΩÈÅøÂÖçÊ¢ØÂ∫¶ÈóÆÈ¢òÔºü</p>
            </div>

            <!-- BatchNormÂéüÁêÜ -->
            <div class="math-container">
                <h3 style="color: var(--accent-green); margin-bottom: 1.5rem;">üéØ ÊâπÈáèÂΩí‰∏ÄÂåñÔºöËÆ©ÊØèÂ±ÇËæìÂÖ•"Ê†áÂáÜÂåñ"</h3>

                <div class="step-indicator">
                    <div class="step-item active">
                        <div class="step-circle">1</div>
                        <div class="step-label">ËÆ°ÁÆóÂùáÂÄº</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">2</div>
                        <div class="step-label">ËÆ°ÁÆóÊñπÂ∑Æ</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">3</div>
                        <div class="step-label">Ê†áÂáÜÂåñ</div>
                    </div>
                    <div class="step-item">
                        <div class="step-circle">4</div>
                        <div class="step-label">Áº©ÊîæÂπ≥Áßª</div>
                    </div>
                </div>

                <div style="background: rgba(6, 182, 212, 0.1); padding: 2rem; border-radius: 0.5rem; margin-top: 2rem;">
                    <div class="math-formula">
                        <strong>ÊâπÈáèÂΩí‰∏ÄÂåñÁÆóÊ≥ïÔºö</strong><br><br>

                        1. ËÆ°ÁÆóÊâπÊ¨°ÂùáÂÄºÔºöŒº_B = (1/m) Œ£·µ¢ x·µ¢<br><br>

                        2. ËÆ°ÁÆóÊâπÊ¨°ÊñπÂ∑ÆÔºöœÉ¬≤_B = (1/m) Œ£·µ¢ (x·µ¢ - Œº_B)¬≤<br><br>

                        3. Ê†áÂáÜÂåñÔºöxÃÇ·µ¢ = (x·µ¢ - Œº_B) / ‚àö(œÉ¬≤_B + Œµ)<br><br>

                        4. Áº©ÊîæÂíåÂπ≥ÁßªÔºöy·µ¢ = Œ≥xÃÇ·µ¢ + Œ≤
                    </div>

                    <div class="math-explanation">
                        <strong>‰∏∫‰ªÄ‰πàÈúÄË¶ÅŒ≥ÂíåŒ≤Ôºü</strong><br>
                        Ê†áÂáÜÂåñÂèØËÉΩ‰ºöÈôç‰ΩéÁΩëÁªúÁöÑË°®ËææËÉΩÂäõÔºåŒ≥ÂíåŒ≤ËÆ©ÁΩëÁªúËá™Â∑±Â≠¶‰π†ÈúÄË¶ÅÂ§öÂ∞ë"Ê†áÂáÜÂåñ"„ÄÇ
                    </div>
                </div>
            </div>

            <!-- BatchNormÂÆûÁé∞ -->
            <div class="code-container mt-3">
                <div class="code-header">
                    <div class="code-header-left">
                        <span style="color: var(--text-secondary);">‰ªéÈõ∂ÂÆûÁé∞BatchNorm</span>
                    </div>
                </div>
                <div class="code-content">
                    <pre><code class="language-python">class MyBatchNorm1d(nn.Module):
    """ÊâãÂÜôÁöÑBatchNormÂÆûÁé∞ÔºåÁî®‰∫éÁêÜËß£ÂéüÁêÜ"""

    def __init__(self, num_features, eps=1e-5, momentum=0.1):
        super().__init__()
        self.num_features = num_features
        self.eps = eps
        self.momentum = momentum

        # ÂèØÂ≠¶‰π†ÂèÇÊï∞
        self.gamma = nn.Parameter(torch.ones(num_features))  # Áº©ÊîæÂèÇÊï∞
        self.beta = nn.Parameter(torch.zeros(num_features))  # Âπ≥ÁßªÂèÇÊï∞

        # ËøêË°åÊó∂ÁªüËÆ°ÈáèÔºàÊé®ÁêÜÊó∂‰ΩøÁî®Ôºâ
        self.register_buffer('running_mean', torch.zeros(num_features))
        self.register_buffer('running_var', torch.ones(num_features))

    def forward(self, x):
        if self.training:
            # ËÆ≠ÁªÉÊ®°ÂºèÔºöËÆ°ÁÆóÂΩìÂâçÊâπÊ¨°ÁöÑÁªüËÆ°Èáè
            batch_mean = x.mean(dim=0)
            batch_var = x.var(dim=0, unbiased=False)

            # Êõ¥Êñ∞ËøêË°åÊó∂ÁªüËÆ°Èáè
            self.running_mean = (1 - self.momentum) * self.running_mean + \
                               self.momentum * batch_mean
            self.running_var = (1 - self.momentum) * self.running_var + \
                              self.momentum * batch_var

            # ‰ΩøÁî®ÂΩìÂâçÊâπÊ¨°ÁªüËÆ°Èáè
            mean = batch_mean
            var = batch_var
        else:
            # Êé®ÁêÜÊ®°ÂºèÔºö‰ΩøÁî®ËøêË°åÊó∂ÁªüËÆ°Èáè
            mean = self.running_mean
            var = self.running_var

        # Ê†áÂáÜÂåñ
        x_normalized = (x - mean) / torch.sqrt(var + self.eps)

        # Áº©ÊîæÂíåÂπ≥Áßª
        output = self.gamma * x_normalized + self.beta

        return output

# ÊµãËØïBatchNormÁöÑÊïàÊûú
def test_batchnorm_effect():
    """ÂØπÊØîÊúâÊó†BatchNormÁöÑËÆ≠ÁªÉÁ®≥ÂÆöÊÄß"""

    # ÂàõÂª∫‰∏§‰∏™Áõ∏ÂêåÁªìÊûÑÁöÑÁΩëÁªú
    class NetworkWithoutBN(nn.Module):
        def __init__(self, depth=20):
            super().__init__()
            layers = []
            for i in range(depth):
                layers.append(nn.Linear(100, 100))
                if i < depth - 1:
                    layers.append(nn.ReLU())
            self.network = nn.Sequential(*layers)

            # HeÂàùÂßãÂåñ
            for m in self.modules():
                if isinstance(m, nn.Linear):
                    nn.init.kaiming_normal_(m.weight)

        def forward(self, x):
            return self.network(x)

    class NetworkWithBN(nn.Module):
        def __init__(self, depth=20):
            super().__init__()
            layers = []
            for i in range(depth):
                layers.append(nn.Linear(100, 100))
                layers.append(nn.BatchNorm1d(100))  # Ê∑ªÂä†BatchNorm
                if i < depth - 1:
                    layers.append(nn.ReLU())
            self.network = nn.Sequential(*layers)

            # HeÂàùÂßãÂåñ
            for m in self.modules():
                if isinstance(m, nn.Linear):
                    nn.init.kaiming_normal_(m.weight)

        def forward(self, x):
            return self.network(x)

    # ÂØπÊØîËÆ≠ÁªÉ
    model_without_bn = NetworkWithoutBN()
    model_with_bn = NetworkWithBN()

    # ÁÆÄÂçïÁöÑËÆ≠ÁªÉÂæ™ÁéØ
    optimizer1 = torch.optim.SGD(model_without_bn.parameters(), lr=0.1)
    optimizer2 = torch.optim.SGD(model_with_bn.parameters(), lr=0.1)

    losses_without_bn = []
    losses_with_bn = []

    for epoch in range(50):
        # ÁîüÊàêÈöèÊú∫Êï∞ÊçÆ
        x = torch.randn(128, 100)
        y = torch.randint(0, 10, (128,))

        # ËÆ≠ÁªÉÊó†BNÁöÑÁΩëÁªú
        out1 = model_without_bn(x)
        loss1 = nn.CrossEntropyLoss()(out1[:, :10], y)
        optimizer1.zero_grad()
        loss1.backward()
        optimizer1.step()
        losses_without_bn.append(loss1.item())

        # ËÆ≠ÁªÉÊúâBNÁöÑÁΩëÁªú
        out2 = model_with_bn(x)
        loss2 = nn.CrossEntropyLoss()(out2[:, :10], y)
        optimizer2.zero_grad()
        loss2.backward()
        optimizer2.step()
        losses_with_bn.append(loss2.item())

    return losses_without_bn, losses_with_bn

# ËøêË°åÊµãËØï
print("üî¨ ÊµãËØïBatchNormÁöÑÊïàÊûú...")
losses_without, losses_with = test_batchnorm_effect()

# ÂèØËßÜÂåñ
import matplotlib.pyplot as plt

plt.figure(figsize=(10, 5))
plt.plot(losses_without, label='Without BatchNorm', alpha=0.7)
plt.plot(losses_with, label='With BatchNorm', alpha=0.7)
plt.xlabel('Epoch')
plt.ylabel('Loss')
plt.title('BatchNormÂØπËÆ≠ÁªÉÁ®≥ÂÆöÊÄßÁöÑÂΩ±Âìç')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()

print(f"\nüìä ÁªìÊûúÂØπÊØî:")
print(f"Êó†BatchNorm - ÊúÄÁªàÊçüÂ§±: {losses_without[-1]:.4f}")
print(f"ÊúâBatchNorm - ÊúÄÁªàÊçüÂ§±: {losses_with[-1]:.4f}")
print(f"ÊîπÂñÑÊØî‰æã: {(losses_without[-1] - losses_with[-1]) / losses_without[-1] * 100:.1f}%")</code></pre>
                </div>
            </div>

            <div class="tip success mt-3">
                <span class="tip-icon">üéØ</span>
                <div class="tip-content">
                    <strong>BatchNormÁöÑÁ•ûÂ•áÊïàÊûúÔºö</strong><br>
                    ‚Ä¢ ËÆ≠ÁªÉÈÄüÂ∫¶ÊèêÂçá3-5ÂÄç<br>
                    ‚Ä¢ ÂèØ‰ª•‰ΩøÁî®Êõ¥Â§ßÁöÑÂ≠¶‰π†Áéá<br>
                    ‚Ä¢ ÂáèÂ∞ëÂØπÂàùÂßãÂåñÁöÑÊïèÊÑüÊÄß<br>
                    ‚Ä¢ ÊüêÁßçÁ®ãÂ∫¶‰∏äËµ∑Âà∞Ê≠£ÂàôÂåñ‰ΩúÁî®
                </div>
            </div>
        </section>

        div class="section-card" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(6, 182, 212, 0.1));">
        <h3 style="color: var(--accent-green); margin-bottom: 1.5rem;">‚úÖ ÂàùÂßãÂåñËß£ÂÜ≥‰∫ÜÈóÆÈ¢ò...‰ΩÜËøò‰∏çÂ§üÔºÅ</h3>

        <div class="story-card">
            <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">
                ‰∏ÄÂë®ÂêéÔºåÂ∞èÊùéÂèàÈÅáÂà∞‰∫ÜÊñ∞ÈóÆÈ¢ò...
            </p>

            <div class="dialogue-box">
                <div class="speaker">
                    <div class="avatar" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);">üßë‚Äçüíª</div>
                    Â∞èÊùéÔºàÂõ∞ÊÉëÔºâÔºö
                </div>
                <div>"XavierÂàùÂßãÂåñÁ°ÆÂÆûÊúâÊïàÔºå‰ΩÜËÆ≠ÁªÉÂà∞ÂêéÊúüÔºåÁΩëÁªúÂèàÂºÄÂßã‰∏çÁ®≥ÂÆö‰∫Ü..."</div>
            </div>

            <div class="dialogue-box mt-2">
                <div class="speaker">
                    <div class="avatar" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">üë®‚Äçüî¨</div>
                    Â∞èÂº†Ôºö
                </div>
                <div>"Êàë‰πüÂèëÁé∞‰∫ÜÔºÅÂ•ΩÂÉèÊØèÊ¨°ËæìÂÖ•‰∏çÂêåÁöÑÊâπÊ¨°Êï∞ÊçÆÔºåÊøÄÊ¥ªÂÄºÁöÑÂàÜÂ∏ÉÈÉΩÂú®ÂèòÂåñ„ÄÇ"</div>
            </div>
        </div>

        <div class="think-box mt-3">
            <h4 style="color: var(--accent-purple);">üîÑ Êñ∞ÈóÆÈ¢òÔºöÂÜÖÈÉ®ÂçèÂèòÈáèÂÅèÁßª</h4>
            <p><strong>‰ªÄ‰πàÊÑèÊÄùÔºü</strong></p>
            <ul style="margin-left: 2rem; line-height: 1.8;">
                <li>ÂàùÂßãÂåñÂè™‰øùËØÅ‰∫Ü<strong>ÂºÄÂßãÊó∂</strong>ÁöÑÂàÜÂ∏É</li>
                <li>ÈöèÁùÄËÆ≠ÁªÉÔºåÊØèÂ±ÇÁöÑÊùÉÈáçÂú®Êõ¥Êñ∞</li>
                <li>ÂØºËá¥ÊØèÂ±ÇÁöÑËæìÂÖ•ÂàÜÂ∏É‰∏çÊñ≠ÂèòÂåñ</li>
                <li>ÂêéÈù¢ÁöÑÂ±ÇÈúÄË¶Å‰∏çÊñ≠ÈÄÇÂ∫îÊñ∞ÁöÑÂàÜÂ∏É</li>
            </ul>

            <p style="margin-top: 1rem; color: var(--accent-yellow);">
                üí° Â¶ÇÊûúËÉΩËÆ©ÊØèÂ±ÇÁöÑËæìÂÖ•Âú®ËÆ≠ÁªÉËøáÁ®ã‰∏≠ÂßãÁªà‰øùÊåÅÁ®≥ÂÆöÂàÜÂ∏ÉÂë¢Ôºü
            </p>
        </div>
    </div>

    <!-- Âú® BatchNorm ÂÆûÁé∞ËØ¶Ëß£‰πãÂêéÊ∑ªÂä† -->
        <div class="math-container mt-4">
            <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">üîÑ LayerNorm vs BatchNormÔºö‰∏∫‰ªÄ‰πàTransformerÈÄâÊã©‰∫ÜLayerNormÔºü</h3>

            <div class="concept-grid">
                <div class="concept-card what">
                    <h4 style="color: var(--accent-green); margin-bottom: 0.5rem;">BatchNormÁöÑÂ±ÄÈôê</h4>
                    <p>
                        ‚Ä¢ ‰æùËµñÊâπÊ¨°Â§ßÂ∞è<br>
                        ‚Ä¢ ËÆ≠ÁªÉ/Êé®ÁêÜË°å‰∏∫‰∏ç‰∏ÄËá¥<br>
                        ‚Ä¢ ‰∏çÈÄÇÂêàÂèØÂèòÈïøÂ∫¶Â∫èÂàó<br>
                        ‚Ä¢ RNN/Transformer‰∏≠ÊïàÊûúÂ∑Æ
                    </p>
                </div>

                <div class="concept-card how">
                    <h4 style="color: var(--accent-blue); margin-bottom: 0.5rem;">LayerNormÁöÑ‰ºòÂäø</h4>
                    <p>
                        ‚Ä¢ ÂØπÊØè‰∏™Ê†∑Êú¨Áã¨Á´ãËÆ°ÁÆó<br>
                        ‚Ä¢ ‰∏ç‰æùËµñÊâπÊ¨°ÁªüËÆ°Èáè<br>
                        ‚Ä¢ ÈÄÇÂêàÂ∫èÂàóÊ®°Âûã<br>
                        ‚Ä¢ ËÆ≠ÁªÉÊé®ÁêÜË°å‰∏∫‰∏ÄËá¥
                    </p>
                </div>
            </div>

            <div class="code-container mt-3">
                <div class="code-header">
                    <div class="code-header-left">
                        <span style="color: var(--text-secondary);">ÂΩí‰∏ÄÂåñÊñπÊ≥ïÂØπÊØîÂÆûÁé∞</span>
                    </div>
                </div>
                <div class="code-content">
            <pre><code class="language-python">class LayerNorm(nn.Module):
    """LayerNormÔºöÂØπÁâπÂæÅÁª¥Â∫¶ÂΩí‰∏ÄÂåñ"""
    def __init__(self, normalized_shape, eps=1e-5):
        super().__init__()
        self.gamma = nn.Parameter(torch.ones(normalized_shape))
        self.beta = nn.Parameter(torch.zeros(normalized_shape))
        self.eps = eps

    def forward(self, x):
        # x: [batch_size, seq_len, hidden_dim]
        # ÂØπÊúÄÂêé‰∏Ä‰∏™Áª¥Â∫¶ËÆ°ÁÆóÂùáÂÄºÂíåÊñπÂ∑Æ
        mean = x.mean(-1, keepdim=True)
        var = x.var(-1, keepdim=True, unbiased=False)

        # ÂΩí‰∏ÄÂåñ
        x_normalized = (x - mean) / torch.sqrt(var + self.eps)
        return self.gamma * x_normalized + self.beta

class GroupNorm(nn.Module):
    """GroupNormÔºöBatchNormÂíåLayerNormÁöÑÊäò‰∏≠ÊñπÊ°à"""
    def __init__(self, num_groups, num_channels, eps=1e-5):
        super().__init__()
        self.num_groups = num_groups
        self.num_channels = num_channels
        self.eps = eps
        self.gamma = nn.Parameter(torch.ones(num_channels))
        self.beta = nn.Parameter(torch.zeros(num_channels))

    def forward(self, x):
        # x: [batch_size, channels, height, width]
        N, C, H, W = x.shape
        x = x.view(N, self.num_groups, -1)  # [N, G, C//G * H * W]

        # ÂØπÊØè‰∏™groupËÆ°ÁÆóÁªüËÆ°Èáè
        mean = x.mean(-1, keepdim=True)
        var = x.var(-1, keepdim=True, unbiased=False)

        # ÂΩí‰∏ÄÂåñÂπ∂reshapeÂõûÂéüÂßãÂΩ¢Áä∂
        x = (x - mean) / torch.sqrt(var + self.eps)
        x = x.view(N, C, H, W)

        return self.gamma.view(1, C, 1, 1) * x + self.beta.view(1, C, 1, 1)

# ÂèØËßÜÂåñ‰∏çÂêåÂΩí‰∏ÄÂåñÊñπÊ≥ïÁöÑ‰ΩúÁî®ËåÉÂõ¥
def visualize_normalization_axes():
    """Â±ïÁ§∫‰∏çÂêåÂΩí‰∏ÄÂåñÊñπÊ≥ïÂú®Âì™‰∫õÁª¥Â∫¶‰∏äËÆ°ÁÆóÁªüËÆ°Èáè"""
    # BatchNorm: Âú®(N, H, W)‰∏äËÆ°ÁÆóÔºåÂØπÊØè‰∏™ÈÄöÈÅìC
    # LayerNorm: Âú®(C, H, W)‰∏äËÆ°ÁÆóÔºåÂØπÊØè‰∏™Ê†∑Êú¨N
    # GroupNorm: Âú®(C//G, H, W)‰∏äËÆ°ÁÆóÔºåÂØπÊØè‰∏™Ê†∑Êú¨NÂíåÁªÑG
    # InstanceNorm: Âú®(H, W)‰∏äËÆ°ÁÆóÔºåÂØπÊØè‰∏™Ê†∑Êú¨NÂíåÈÄöÈÅìC

    print("ÂΩí‰∏ÄÂåñÊñπÊ≥ïÂØπÊØîÔºö")
    print("BatchNorm: Œº,œÉ computed over (N,H,W) for each C")
    print("LayerNorm: Œº,œÉ computed over (C,H,W) for each N")
    print("GroupNorm: Œº,œÉ computed over (C/G,H,W) for each N,G")
    print("InstanceNorm: Œº,œÉ computed over (H,W) for each N,C")</code></pre>
                </div>
            </div>

            <div class="think-box mt-3">
                <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">ü§î ‰∏∫‰ªÄ‰πàTransformerÁî®LayerNormËÄå‰∏çÊòØBatchNormÔºü</h3>
                <p><strong>1. Â∫èÂàóÈïøÂ∫¶ÂèØÂèòÊÄßÔºö</strong></p>
                <p>TransformerÂ§ÑÁêÜÁöÑÂ∫èÂàóÈïøÂ∫¶ÁªèÂ∏∏ÂèòÂåñÔºåBatchNormÈúÄË¶ÅÂõ∫ÂÆöÁöÑÁªüËÆ°ÈáèÁª¥Â∫¶ÔºåËÄåLayerNormÂØπÊØè‰∏™‰ΩçÁΩÆÁã¨Á´ãËÆ°ÁÆó„ÄÇ</p>

                <p><strong>2. Â∞èÊâπÊ¨°ÈóÆÈ¢òÔºö</strong></p>
                <p>Â§ßÊ®°ÂûãËÆ≠ÁªÉÊó∂ÊâπÊ¨°ÂæàÂ∞èÔºàÁîöËá≥‰∏∫1ÔºâÔºåBatchNormÁöÑÁªüËÆ°Èáè‰º∞ËÆ°‰∏çÂáÜÁ°ÆÔºåËÄåLayerNorm‰∏çÂèóÂΩ±Âìç„ÄÇ</p>

                <p><strong>3. Ê≥®ÊÑèÂäõÊú∫Âà∂ÁöÑÁâπÊÄßÔºö</strong></p>
                <p>Ê≥®ÊÑèÂäõÊú∫Âà∂ËÆ©ÊØè‰∏™‰ΩçÁΩÆ"ÁúãÂà∞"‰∏çÂêåÁöÑ‰ø°ÊÅØÔºåÁî®BatchNorm‰ºöÁ†¥ÂùèËøôÁßç‰ΩçÁΩÆÁâπÂÆöÁöÑ‰ø°ÊÅØÂàÜÂ∏É„ÄÇ</p>
            </div>
        </div>

        <!-- Â∞èÁªìÊ°Ü -->
        <div class="tip success mt-4">
            <span class="tip-icon">üìù</span>
            <div class="tip-content">
                <strong>ÂΩí‰∏ÄÂåñÊäÄÊúØÂ∞èÁªìÔºö</strong><br>
                ‚Ä¢ <strong>BatchNormÔºö</strong>CNNÁöÑÊ†áÈÖçÔºå‰ΩÜÈúÄË¶ÅË∂≥Â§üÂ§ßÁöÑÊâπÊ¨°<br>
                ‚Ä¢ <strong>LayerNormÔºö</strong>TransformerÁöÑÈÄâÊã©ÔºåÈÄÇÂêàÂ∫èÂàóÂíåÂ∞èÊâπÊ¨°<br>
                ‚Ä¢ <strong>GroupNormÔºö</strong>ËßÜËßâ‰ªªÂä°‰∏≠BatchNormÁöÑÊõø‰ª£ÂìÅ<br>
                ‚Ä¢ <strong>ÈÄâÊã©ÂéüÂàôÔºö</strong>CNNÁî®BN/GNÔºåRNN/TransformerÁî®LN
            </div>
        </div>

    <div class="section-card" style="background: linear-gradient(135deg, rgba(6, 182, 212, 0.1), rgba(249, 115, 22, 0.1));">
        <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">üé® ÊúÄÂêé‰∏ÄÂùóÊãºÂõæÔºöÂ¶Ç‰ΩïÊõ¥Êñ∞ÂèÇÊï∞Ôºü</h3>

        <div class="story-card">
            <div class="dialogue-box">
                <div class="speaker">
                    <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                    ÂØºÂ∏àÔºö
                </div>
                <div>"Â•ΩÁöÑÂàùÂßãÂåñ + BatchNorm Ëß£ÂÜ≥‰∫ÜÊ¢ØÂ∫¶‰º†Êí≠ÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÔºåÂ¶Ç‰ΩïÈ´òÊïàÂú∞Âà©Áî®Ëøô‰∫õÊ¢ØÂ∫¶Êõ¥Êñ∞ÂèÇÊï∞Âë¢Ôºü"</div>
            </div>
        </div>

        <div class="matrix-visualization mt-3">
            <h4 style="text-align: center; color: var(--accent-orange);">‰ºòÂåñÁöÑ‰∏â‰∏™Â±ÇÊ¨°</h4>
            <div class="step-indicator">
                <div class="step-item active">
                    <div class="step-circle" style="background: var(--accent-green);">‚úì</div>
                    <div class="step-label">Ê¢ØÂ∫¶ËÉΩ‰º†Êí≠<br><small>ÔºàÂàùÂßãÂåñÔºâ</small></div>
                </div>
                <div class="step-item active">
                    <div class="step-circle" style="background: var(--accent-green);">‚úì</div>
                    <div class="step-label">Ê¢ØÂ∫¶ÂæàÁ®≥ÂÆö<br><small>ÔºàBatchNormÔºâ</small></div>
                </div>
                <div class="step-item">
                    <div class="step-circle" style="background: var(--accent-orange);">?</div>
                    <div class="step-label">Ê¢ØÂ∫¶Áî®ÂæóÂ•Ω<br><small>Ôºà‰ºòÂåñÂô®Ôºâ</small></div>
                </div>
            </div>
        </div>

        <div class="concept-grid mt-3">
            <div class="concept-card pitfall">
                <h4 style="color: var(--accent-yellow);">SGDÁöÑÈóÆÈ¢ò</h4>
                <p>
                    ‚Ä¢ Âú®Áã≠Á™ÑÂ≥°Ë∞∑‰∏≠ÈúáËç°<br>
                    ‚Ä¢ Èöæ‰ª•ÈÄÉÁ¶ªÈûçÁÇπ<br>
                    ‚Ä¢ ÂØπÂ≠¶‰π†ÁéáÊïèÊÑü<br>
                    ‚Ä¢ Êî∂ÊïõÈÄüÂ∫¶ÊÖ¢
                </p>
            </div>

            <div class="concept-card how">
                <h4 style="color: var(--accent-blue);">ÈúÄË¶ÅÊõ¥ËÅ™ÊòéÁöÑ‰ºòÂåñÂô®</h4>
                <p>
                    ‚Ä¢ ËÆ∞‰ΩèÂéÜÂè≤‰ø°ÊÅØÔºàÂä®ÈáèÔºâ<br>
                    ‚Ä¢ Ëá™ÈÄÇÂ∫îÂ≠¶‰π†Áéá<br>
                    ‚Ä¢ ÂØπ‰∏çÂêåÂèÇÊï∞Âå∫Âà´ÂØπÂæÖ<br>
                    ‚Ä¢ Êõ¥Âø´Êõ¥Á®≥ÂÆöÁöÑÊî∂Êïõ
                </p>
            </div>
        </div>
    </div>

    <!-- Á¨¨ÂÖ≠Ê≠•Ôºö‰ºòÂåñÂô®ÁöÑËøõÂåñ -->
        <section id="optimizers" class="section-card">
            <h2 style="color: var(--accent-orange); margin-bottom: 1.5rem;">üöÄ Solution 3Ôºö‰ªéSGDÂà∞Adam</h2>

            <div class="story-card">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1rem;">‰ºòÂåñÂô®ÁöÑËøõÂåñ‰πãË∑Ø</h3>

                <p>Â∞±ÂÉè‰∫§ÈÄöÂ∑•ÂÖ∑ÁöÑËøõÂåñÔºöÊ≠•Ë°å ‚Üí Ëá™Ë°åËΩ¶ ‚Üí Ê±ΩËΩ¶ ‚Üí È£ûÊú∫Ôºå‰ºòÂåñÂô®‰πüÂú®‰∏çÊñ≠ËøõÂåñ...</p>
            </div>

            <!-- ‰ºòÂåñÂô®ÂØπÊØî -->
            <div class="matrix-visualization">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üìä ‰ºòÂåñÂô®ÂÆ∂ÊóèÂØπÊØî</h3>

                <div class="matrix-container">
                    <div class="matrix-grid" style="grid-template-columns: repeat(5, 1fr);">
                        <!-- Ë°®Â§¥ -->
                        <div class="matrix-cell header">‰ºòÂåñÂô®</div>
                        <div class="matrix-cell header">Êõ¥Êñ∞ËßÑÂàô</div>
                        <div class="matrix-cell header">‰ºòÁÇπ</div>
                        <div class="matrix-cell header">Áº∫ÁÇπ</div>
                        <div class="matrix-cell header">ÈÄÇÁî®Âú∫ÊôØ</div>

                        <!-- SGD -->
                        <div class="matrix-cell header" style="color: var(--accent-red);">SGD</div>
                        <div class="matrix-cell value">Œ∏ = Œ∏ - Œ∑‚àáL</div>
                        <div class="matrix-cell value">ÁÆÄÂçïÁõ¥ËßÇ</div>
                        <div class="matrix-cell value">ÂÆπÊòìÈúáËç°</div>
                        <div class="matrix-cell value">Âá∏‰ºòÂåñ</div>

                        <!-- Momentum -->
                        <div class="matrix-cell header" style="color: var(--accent-yellow);">Momentum</div>
                        <div class="matrix-cell value">v = Œ≤v + ‚àáL<br>Œ∏ = Œ∏ - Œ∑v</div>
                        <div class="matrix-cell value">ÂáèÂ∞ëÈúáËç°</div>
                        <div class="matrix-cell value">ÈúÄË∞ÉÂèÇÊï∞</div>
                        <div class="matrix-cell value">‰∏ÄËà¨Âú∫ÊôØ</div>

                        <!-- RMSprop -->
                        <div class="matrix-cell header" style="color: var(--accent-green);">RMSprop</div>
                        <div class="matrix-cell value">s = Œ≤s + (1-Œ≤)‚àáL¬≤<br>Œ∏ = Œ∏ - Œ∑‚àáL/‚àös</div>
                        <div class="matrix-cell value">Ëá™ÈÄÇÂ∫îÂ≠¶‰π†Áéá</div>
                        <div class="matrix-cell value">ÂèØËÉΩ‰∏çÊî∂Êïõ</div>
                        <div class="matrix-cell value">RNNËÆ≠ÁªÉ</div>

                        <!-- Adam -->
                        <div class="matrix-cell header" style="color: var(--accent-purple);">Adam</div>
                        <div class="matrix-cell value">m = Œ≤‚ÇÅm + (1-Œ≤‚ÇÅ)‚àáL<br>v = Œ≤‚ÇÇv + (1-Œ≤‚ÇÇ)‚àáL¬≤<br>Œ∏ = Œ∏ - Œ∑mÃÇ/‚àövÃÇ</div>
                        <div class="matrix-cell value">ÁªìÂêàÊâÄÊúâ‰ºòÁÇπ</div>
                        <div class="matrix-cell value">ÂÜÖÂ≠òÂç†Áî®Â§ß</div>
                        <div class="matrix-cell value">Ê∑±Â∫¶Â≠¶‰π†</div>
                    </div>
                </div>
            </div>

            <!-- ‰ºòÂåñÂô®ËΩ®ËøπÂèØËßÜÂåñ -->
            <div class="visualization-container mt-3">
                <h3 style="color: var(--accent-green); margin-bottom: 1.5rem;">üéØ ‰ºòÂåñÂô®ËΩ®ËøπÂØπÊØî</h3>

                <div class="viz-controls">
                    <div class="viz-control-group">
                        <label>Â≠¶‰π†ÁéáÔºö</label>
                        <div class="slider-container">
                            <input type="range" id="lr-slider" min="1" max="50" value="10" step="1">
                            <span class="slider-value" id="lr-value">0.1</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="visualizeOptimizerPaths()">
                        üé® ÁªòÂà∂ËΩ®Ëøπ
                    </button>
                    <button class="btn btn-secondary" onclick="animateOptimizers()">
                        ‚ñ∂Ô∏è Âä®ÁîªÊºîÁ§∫
                    </button>
                </div>

                <canvas id="optimizer-viz" width="800" height="600"></canvas>
            </div>

            <!-- AdamÂÆûÁé∞ËØ¶Ëß£ -->
            <div class="code-container mt-3">
                <div class="code-header">
                    <div class="code-header-left">
                        <span style="color: var(--text-secondary);">Adam‰ºòÂåñÂô®ÁöÑÂÆûÁé∞</span>
                    </div>
                </div>
                <div class="code-content">
                    <pre><code class="language-python">class MyAdam:
    """ÊâãÂÜôAdam‰ºòÂåñÂô®ÔºåÁêÜËß£ÂÖ∂ÂéüÁêÜ"""

    def __init__(self, params, lr=0.001, betas=(0.9, 0.999), eps=1e-8):
        self.params = list(params)
        self.lr = lr
        self.beta1, self.beta2 = betas
        self.eps = eps

        # ÂàùÂßãÂåñ‰∏ÄÈò∂Âíå‰∫åÈò∂Áü©
        self.m = [torch.zeros_like(p) for p in self.params]  # ‰∏ÄÈò∂Áü©ÔºàÂä®ÈáèÔºâ
        self.v = [torch.zeros_like(p) for p in self.params]  # ‰∫åÈò∂Áü©ÔºàRMSpropÔºâ
        self.t = 0  # Êó∂Èó¥Ê≠•

    def step(self):
        self.t += 1

        for i, param in enumerate(self.params):
            if param.grad is None:
                continue

            grad = param.grad

            # Êõ¥Êñ∞‰∏ÄÈò∂Áü©ÔºàÂä®ÈáèÔºâ
            self.m[i] = self.beta1 * self.m[i] + (1 - self.beta1) * grad

            # Êõ¥Êñ∞‰∫åÈò∂Áü©ÔºàÊ¢ØÂ∫¶Âπ≥ÊñπÁöÑÁßªÂä®Âπ≥ÂùáÔºâ
            self.v[i] = self.beta2 * self.v[i] + (1 - self.beta2) * grad**2

            # ÂÅèÂ∑Æ‰øÆÊ≠£
            m_hat = self.m[i] / (1 - self.beta1**self.t)
            v_hat = self.v[i] / (1 - self.beta2**self.t)

            # Êõ¥Êñ∞ÂèÇÊï∞
            param.data -= self.lr * m_hat / (torch.sqrt(v_hat) + self.eps)

    def zero_grad(self):
        for param in self.params:
            if param.grad is not None:
                param.grad.zero_()

# ÂØπÊØî‰∏çÂêå‰ºòÂåñÂô®
def compare_optimizers():
    """Âú®ÂÆûÈôÖÈóÆÈ¢ò‰∏äÂØπÊØî‰∏çÂêå‰ºòÂåñÂô®"""

    # ÂàõÂª∫‰∏Ä‰∏™ÂÖ∑ÊúâÊåëÊàòÊÄßÁöÑÊçüÂ§±Âú∞ÂΩ¢
    def rosenbrock(x, y):
        """RosenbrockÂáΩÊï∞ÔºöÊúâ‰∏Ä‰∏™ÂºØÊõ≤ÁöÑÂ±±Ë∞∑"""
        return (1 - x)**2 + 100 * (y - x**2)**2

    # Ëµ∑ÂßãÁÇπ
    start = torch.tensor([[-1.5], [2.0]], requires_grad=True)

    # ÊµãËØï‰∏çÂêå‰ºòÂåñÂô®
    optimizers = {
        'SGD': torch.optim.SGD([start.clone()], lr=0.001),
        'SGD+Momentum': torch.optim.SGD([start.clone()], lr=0.001, momentum=0.9),
        'RMSprop': torch.optim.RMSprop([start.clone()], lr=0.001),
        'Adam': torch.optim.Adam([start.clone()], lr=0.01)
    }

    # ËÆ∞ÂΩïËΩ®Ëøπ
    trajectories = {}

    for name, opt in optimizers.items():
        param = list(opt.param_groups[0]['params'])[0]
        trajectory = [[param[0].item(), param[1].item()]]

        for _ in range(200):
            opt.zero_grad()
            loss = rosenbrock(param[0], param[1])
            loss.backward()
            opt.step()
            trajectory.append([param[0].item(), param[1].item()])

        trajectories[name] = np.array(trajectory)

    return trajectories

# ÂèØËßÜÂåñÁªìÊûú
trajectories = compare_optimizers()

import matplotlib.pyplot as plt

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 6))

# ËΩ®ËøπÂõæ
x = np.linspace(-2, 2, 100)
y = np.linspace(-1, 3, 100)
X, Y = np.meshgrid(x, y)
Z = (1 - X)**2 + 100 * (Y - X**2)**2

contour = ax1.contour(X, Y, Z, levels=50, alpha=0.6)
ax1.clabel(contour, inline=True, fontsize=8)

colors = {'SGD': 'red', 'SGD+Momentum': 'orange', 'RMSprop': 'green', 'Adam': 'purple'}
for name, traj in trajectories.items():
    ax1.plot(traj[:, 0], traj[:, 1], 'o-', color=colors[name],
             label=name, markersize=3, alpha=0.7)

ax1.set_xlabel('x')
ax1.set_ylabel('y')
ax1.set_title('‰ºòÂåñÂô®ËΩ®ËøπÂØπÊØî')
ax1.legend()
ax1.set_xlim(-2, 2)
ax1.set_ylim(-1, 3)

# Êî∂ÊïõÈÄüÂ∫¶
for name, traj in trajectories.items():
    distances = np.sqrt((traj[:, 0] - 1)**2 + (traj[:, 1] - 1)**2)
    ax2.semilogy(distances, color=colors[name], label=name, linewidth=2)

ax2.set_xlabel('Ëø≠‰ª£Ê¨°Êï∞')
ax2.set_ylabel('Âà∞ÊúÄ‰ºòÁÇπÁöÑË∑ùÁ¶ªÔºàÂØπÊï∞ÂàªÂ∫¶Ôºâ')
ax2.set_title('Êî∂ÊïõÈÄüÂ∫¶ÂØπÊØî')
ax2.legend()
ax2.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()</code></pre>
                </div>
            </div>
        </section>
        <!-- Á´†ËäÇÂ∞èÁªì -->
        <div class="tip success mt-4" style="background: rgba(249, 115, 22, 0.1); border-color: rgba(249, 115, 22, 0.3);">
            <span class="tip-icon">üìå</span>
            <div class="tip-content">
                <strong>Êú¨ËäÇË¶ÅÁÇπÂõûÈ°æÔºö</strong><br>
                ‚úì SGD ‚Üí Momentum ‚Üí RMSprop ‚Üí Adam ÊòØ‰ºòÂåñÂô®ÁöÑËøõÂåñË∑ØÁ∫ø<br>
                ‚úì AdamÁªìÂêà‰∫ÜÂä®ÈáèÔºà‰∏ÄÈò∂Áü©ÔºâÂíåËá™ÈÄÇÂ∫îÂ≠¶‰π†ÁéáÔºà‰∫åÈò∂Áü©Ôºâ<br>
                ‚úì ‰∏çÂêå‰ºòÂåñÂô®ÈÄÇÂêà‰∏çÂêåÂú∫ÊôØÔºöSGDÈÄÇÂêàÂá∏‰ºòÂåñÔºåAdamÈÄÇÂêàÊ∑±Â∫¶Â≠¶‰π†<br>
                ‚úì ÂÆûË∑µÂª∫ËÆÆÔºöÈªòËÆ§Áî®AdamÔºåËøΩÊ±ÇÊúÄ‰Ω≥ÊÄßËÉΩÊó∂ËØïËØïSGD+Momentum
            </div>
        </div>
    <div class="section-card" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(34, 197, 94, 0.1));">
        <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üß© ÊâÄÊúâÊãºÂõæÂ∑≤ÁªèÈõÜÈΩêÔºÅ</h3>

        <div class="story-card">
            <div style="text-align: center; margin-bottom: 2rem;">
                <h4 style="color: var(--accent-yellow);">Ê∑±Â∫¶ÁΩëÁªú‰ºòÂåñÊäÄÊúØÊ†à</h4>
                <div style="display: flex; justify-content: center; align-items: center; gap: 1rem; margin-top: 1.5rem;">
                    <div style="padding: 1rem; background: rgba(34, 197, 94, 0.2); border-radius: 0.5rem;">
                        <div style="font-size: 2rem;">üéØ</div>
                        <p>Ê≠£Á°ÆÂàùÂßãÂåñ</p>
                    </div>
                    <div style="font-size: 1.5rem;">+</div>
                    <div style="padding: 1rem; background: rgba(6, 182, 212, 0.2); border-radius: 0.5rem;">
                        <div style="font-size: 2rem;">üîß</div>
                        <p>ÊâπÈáèÂΩí‰∏ÄÂåñ</p>
                    </div>
                    <div style="font-size: 1.5rem;">+</div>
                    <div style="padding: 1rem; background: rgba(249, 115, 22, 0.2); border-radius: 0.5rem;">
                        <div style="font-size: 2rem;">üöÄ</div>
                        <p>Áé∞‰ª£‰ºòÂåñÂô®</p>
                    </div>
                    <div style="font-size: 1.5rem;">=</div>
                    <div style="padding: 1rem; background: var(--primary-gradient); color: white; border-radius: 0.5rem;">
                        <div style="font-size: 2rem;">üí™</div>
                        <p>Á®≥ÂÆöÊ∑±Â∫¶ÁΩëÁªú</p>
                    </div>
                </div>
            </div>

            <div class="dialogue-box">
                <div class="speaker">
                    <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                    ÂØºÂ∏àÔºö
                </div>
                <div>"ÂçïÁã¨‰ΩøÁî®ÊØè‰∏™ÊäÄÊúØÈÉΩÊúâÂ∏ÆÂä©Ôºå‰ΩÜÁúüÊ≠£ÁöÑÈ≠îÂäõÂú®‰∫éÂÆÉ‰ª¨ÁöÑ<strong>ÂçèÂêå‰ΩúÁî®</strong>ÔºÅ"</div>
            </div>
        </div>

        <div class="tip success mt-3">
            <span class="tip-icon">üéØ</span>
            <div class="tip-content">
                <strong>‰∏∫‰ªÄ‰πàË¶ÅÁªºÂêà‰ΩøÁî®Ôºü</strong><br>
                ‚Ä¢ <strong>ÂàùÂßãÂåñ</strong>ÔºöÁªôÁΩëÁªú‰∏Ä‰∏™Â•ΩÁöÑËµ∑ÁÇπ<br>
                ‚Ä¢ <strong>BatchNorm</strong>Ôºö‰øùÊåÅËÆ≠ÁªÉËøáÁ®ãÁ®≥ÂÆö<br>
                ‚Ä¢ <strong>‰ºòÂåñÂô®</strong>ÔºöÈ´òÊïàÂà©Áî®Ê¢ØÂ∫¶‰ø°ÊÅØ<br>
                ‚Ä¢ <strong>ÊÆãÂ∑ÆËøûÊé•</strong>Ôºö‰∏∫Ë∂ÖÊ∑±ÁΩëÁªúÊèê‰æõ"È´òÈÄüÂÖ¨Ë∑Ø"<br>
                <br>
                Áé∞Âú®ÔºåËÆ©Êàë‰ª¨ÊääÊâÄÊúâÊäÄÊúØÊï¥ÂêàËµ∑Êù•ÔºåÊûÑÂª∫‰∏Ä‰∏™ÁúüÊ≠£Á®≥ÂÆöÁöÑÊ∑±Â∫¶ÁΩëÁªúÔºÅ
            </div>
        </div>
    </div>

    <!-- ÁªºÂêàÂÆûÊàò -->
        <section id="practice" class="section-card">
            <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">‚öîÔ∏è ÁªºÂêàÂÆûÊàòÔºöÊûÑÂª∫Á®≥ÂÆöÁöÑÊ∑±Â∫¶ÁΩëÁªú</h2>

            <div class="story-card">
                <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">ÊääÊâÄÊúâÊäÄÂ∑ßÊï¥ÂêàËµ∑Êù•</h3>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºö
                    </div>
                    <div>"Áé∞Âú®‰Ω†‰ª¨Â∑≤ÁªèÊéåÊè°‰∫ÜÊâÄÊúâÂ∑•ÂÖ∑ÔºåÊòØÊó∂ÂÄôÂª∫ÈÄ†‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÊ∑±Â∫¶ÁΩëÁªú‰∫Ü„ÄÇËÆ∞‰ΩèÔºåËøô‰∫õÊäÄÂ∑ßË¶ÅÈÖçÂêà‰ΩøÁî®ÔºÅ"</div>
                </div>
            </div>

            <!-- ÊúÄ‰Ω≥ÂÆûË∑µÊ∏ÖÂçï -->
            <div class="action-checklist">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">üìã Ê∑±Â∫¶ÁΩëÁªúËÆ≠ÁªÉÊúÄ‰Ω≥ÂÆûË∑µ</h3>

                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>ÂàùÂßãÂåñÔºö</strong>‰ΩøÁî®HeÂàùÂßãÂåñÔºàReLUÔºâÊàñXavierÂàùÂßãÂåñÔºàTanh/SigmoidÔºâ</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>ÂΩí‰∏ÄÂåñÔºö</strong>Âú®ÊØè‰∏™Á∫øÊÄßÂ±ÇÂêéÊ∑ªÂä†BatchNorm</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>ÊøÄÊ¥ªÂáΩÊï∞Ôºö</strong>‰ºòÂÖà‰ΩøÁî®ReLUÊàñÂÖ∂Âèò‰ΩìÔºàLeakyReLU„ÄÅELUÔºâ</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>‰ºòÂåñÂô®Ôºö</strong>‰ΩøÁî®Adam‰Ωú‰∏∫ÈªòËÆ§ÈÄâÊã©</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>Â≠¶‰π†ÁéáË∞ÉÂ∫¶Ôºö</strong>‰ΩøÁî®‰ΩôÂº¶ÈÄÄÁÅ´ÊàñÂàÜÊÆµË°∞Âáè</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>Ê¢ØÂ∫¶Ë£ÅÂâ™Ôºö</strong>ËÆæÁΩÆÂêàÁêÜÁöÑÊ¢ØÂ∫¶Ë£ÅÂâ™ÈòàÂÄºÔºàÂ¶Ç5.0Ôºâ</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>ÊÆãÂ∑ÆËøûÊé•Ôºö</strong>ÂØπ‰∫éË∂ÖÊ∑±ÁΩëÁªúÔºå‰ΩøÁî®ÊÆãÂ∑ÆËøûÊé•</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span><strong>ÁõëÊéßÊåáÊ†áÔºö</strong>ÂÆûÊó∂ÁõëÊéßÊ¢ØÂ∫¶ËåÉÊï∞ÂíåÊøÄÊ¥ªÂÄºÂàÜÂ∏É</span>
                </div>
            </div>

            <!-- ÂÆåÊï¥ÂÆûÁé∞ -->
            <div class="code-container mt-3">
                <div class="code-header">
                    <div class="code-header-left">
                        <span style="color: var(--text-secondary);">stable_deep_network.py - ÈõÜÊàêÊâÄÊúâÊäÄÂ∑ßÁöÑÁ®≥ÂÆöÊ∑±Â∫¶ÁΩëÁªú</span>
                    </div>
                    <div class="code-header-right">
                        <button class="code-action" onclick="runFinalExperiment()">
                            ‚ñ∂ ËøêË°åÂÆåÊï¥ÂÆûÈ™å
                        </button>
                    </div>
                </div>
                <div class="code-content">
                    <pre><code class="language-python">import torch
                        import torch.nn as nn
import torch.optim as optim
import torch.nn.functional as F
from torch.utils.data import DataLoader, TensorDataset
import matplotlib.pyplot as plt
import numpy as np
class ResidualBlock(nn.Module):
"""ÊÆãÂ∑ÆÂùóÔºöËß£ÂÜ≥Ê∑±Â∫¶ÁΩëÁªúÁöÑÈÄÄÂåñÈóÆÈ¢ò"""
def init(self, channels):
super().init()
self.conv1 = nn.Conv2d(channels, channels, 3, padding=1)
self.bn1 = nn.BatchNorm2d(channels)
self.conv2 = nn.Conv2d(channels, channels, 3, padding=1)
self.bn2 = nn.BatchNorm2d(channels)
def forward(self, x):
    residual = x

    out = self.conv1(x)
    out = self.bn1(out)
    out = F.relu(out)

    out = self.conv2(out)
    out = self.bn2(out)

    out += residual  # ÊÆãÂ∑ÆËøûÊé•
    out = F.relu(out)

    return out

                        <!-- Âú® ResidualBlock Á±ªÂÆö‰πâÂêéÊ∑ªÂä† -->
<div class="math-container mt-3">
    <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üéØ Pre-activation vs Post-activationÔºöÊÆãÂ∑ÆËøûÊé•ÁöÑÊúÄ‰Ω≥ÂÆûË∑µ</h3>

    <div class="math-container mt-3">
    <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üåâ ÊÆãÂ∑ÆËøûÊé•Ôºö‰∏∫Ê¢ØÂ∫¶Âª∫ÈÄ†"È´òÈÄüÂÖ¨Ë∑Ø"</h3>

    <div class="concept-grid">
        <div class="concept-card what">
            <h4 style="color: var(--accent-green);">‰º†ÁªüÊ∑±Â∫¶ÁΩëÁªú</h4>
            <div style="text-align: center; margin-top: 1rem;">
                <div style="font-family: monospace;">
                    x ‚Üí [Â±Ç1] ‚Üí [Â±Ç2] ‚Üí ... ‚Üí [Â±Ç30] ‚Üí y
                </div>
                <p style="margin-top: 0.5rem; color: var(--text-secondary);">
                    Ê¢ØÂ∫¶ÂøÖÈ°ªÁªèËøáÊâÄÊúâÂ±Ç
                </p>
            </div>
        </div>

        <div class="concept-card how">
            <h4 style="color: var(--accent-blue);">ÊÆãÂ∑ÆÁΩëÁªú</h4>
            <div style="text-align: center; margin-top: 1rem;">
                <div style="font-family: monospace;">
                    x ‚Üí [Â±Ç1] ‚Üí [Â±Ç2] ‚Üí ... ‚Üí [Â±Ç30] ‚Üí y<br>
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ...‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                </div>
                <p style="margin-top: 0.5rem; color: var(--text-secondary);">
                    Ê¢ØÂ∫¶ÂèØ‰ª•"Ë∑≥Ëøá"‰∏≠Èó¥Â±Ç
                </p>
            </div>
        </div>
    </div>

    <div class="math-formula mt-3">
        <strong>Êï∞Â≠¶ÂéüÁêÜÔºö</strong><br>
        ‰º†ÁªüÔºöy = F(x)<br>
        ÊÆãÂ∑ÆÔºöy = F(x) + x<br><br>

        ÂèçÂêë‰º†Êí≠Êó∂Ôºö<br>
        ‚àÇy/‚àÇx = ‚àÇF(x)/‚àÇx + 1<br><br>

        <span style="color: var(--accent-green);">Âç≥‰ΩøFÁöÑÊ¢ØÂ∫¶ÂæàÂ∞èÔºåÊÄªÊúâ"+1"‰øùËØÅÊ¢ØÂ∫¶ÊµÅÂä®ÔºÅ</span>
    </div>
</div>

    <div class="code-comparison-grid">
        <!-- Post-activation (ÂéüÂßãResNet) -->
        <div style="position: relative;">
            <h4 style="color: var(--accent-yellow); margin-bottom: 1rem; text-align: center;">
                Post-activation (ÂéüÂßã)
            </h4>
            <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px;"><code class="language-python"># ÂéüÂßãResNetÂùó
class PostActBlock(nn.Module):
    def forward(self, x):
        identity = x

        out = self.conv1(x)
        out = self.bn1(out)
        out = self.relu(out)  # ÊøÄÊ¥ªÂú®BNÂêé

        out = self.conv2(out)
        out = self.bn2(out)

        out += identity
        out = self.relu(out)  # ÊúÄÂêéÊøÄÊ¥ª
        return out</code></pre>
        </div>

        <!-- Pre-activation (ÊîπËøõÁâà) -->
        <div style="position: relative;">
            <h4 style="color: var(--accent-green); margin-bottom: 1rem; text-align: center;">
                Pre-activation (ÊîπËøõÁâà)
            </h4>
            <pre style="background: rgba(15, 23, 42, 0.9); padding: 1rem; border-radius: 8px;"><code class="language-python"># Pre-activation ResNetÂùó
class PreActBlock(nn.Module):
    def forward(self, x):
        identity = x

        out = self.bn1(x)
        out = self.relu(out)  # ÊøÄÊ¥ªÂú®Ââç
        out = self.conv1(out)

        out = self.bn2(out)
        out = self.relu(out)
        out = self.conv2(out)

        out += identity  # ÊÅíÁ≠âÊò†Â∞ÑÊõ¥"Âπ≤ÂáÄ"
        return out</code></pre>
        </div>
    </div>

    <div class="tip info mt-3">
        <span class="tip-icon">üí°</span>
        <div class="tip-content">
            <strong>Pre-activationÁöÑ‰ºòÂäøÔºö</strong><br>
            ‚Ä¢ <strong>Êõ¥Â•ΩÁöÑÊ¢ØÂ∫¶ÊµÅÔºö</strong>ÊÅíÁ≠âÊò†Â∞ÑË∑ØÂæÑÂÆåÂÖ®Ê≤°ÊúâÈùûÁ∫øÊÄßÔºåÊ¢ØÂ∫¶ÂèØ‰ª•Êó†Êçü‰º†Êí≠<br>
            ‚Ä¢ <strong>Êõ¥ÂÆπÊòì‰ºòÂåñÔºö</strong>ÊØè‰∏™ÊÆãÂ∑ÆÂùóÂ≠¶‰π†ÁöÑÊòØ"È¢ÑÊøÄÊ¥ª"ÂêéÁöÑÊÆãÂ∑Æ<br>
            ‚Ä¢ <strong>Êõ¥Ê∑±ÁöÑÁΩëÁªúÔºö</strong>ÂèØ‰ª•ËÆ≠ÁªÉ1000+Â±ÇÁöÑÁΩëÁªúÔºàÂéüÂßãResNetÂú®200Â±ÇÂêéÂ∞±ÈÄÄÂåñÔºâ<br>
            ‚Ä¢ <strong>Êõ¥Â•ΩÁöÑÁâπÂæÅÔºö</strong>BNÁªüËÆ°ÈáèÊõ¥Á®≥ÂÆöÔºåÊøÄÊ¥ªÂàÜÂ∏ÉÊõ¥ÂùáÂåÄ
        </div>
    </div>
</div>
class StableDeepNetwork(nn.Module):
"""‰ΩøÁî®ÊâÄÊúâ‰ºòÂåñÊäÄÂ∑ßÁöÑÊ∑±Â∫¶ÁΩëÁªú"""
def __init__(self, num_blocks=25, num_classes=10):
    super().__init__()

    # ËæìÂÖ•Â±Ç
    self.conv1 = nn.Conv2d(3, 64, 7, stride=2, padding=3)
    self.bn1 = nn.BatchNorm2d(64)
    self.maxpool = nn.MaxPool2d(3, stride=2, padding=1)

    # ÊÆãÂ∑ÆÂùó
    self.blocks = nn.Sequential(
        *[ResidualBlock(64) for _ in range(num_blocks)]
    )

    # ËæìÂá∫Â±Ç
    self.avgpool = nn.AdaptiveAvgPool2d((1, 1))
    self.fc = nn.Linear(64, num_classes)

    # ÂàùÂßãÂåñ
    self._initialize_weights()

def _initialize_weights(self):
    """‰ΩøÁî®HeÂàùÂßãÂåñ"""
    for m in self.modules():
        if isinstance(m, nn.Conv2d):
            nn.init.kaiming_normal_(m.weight, mode='fan_out', nonlinearity='relu')
            if m.bias is not None:
                nn.init.constant_(m.bias, 0)
        elif isinstance(m, nn.BatchNorm2d):
            nn.init.constant_(m.weight, 1)
            nn.init.constant_(m.bias, 0)
        elif isinstance(m, nn.Linear):
            nn.init.normal_(m.weight, 0, 0.01)
            nn.init.constant_(m.bias, 0)

def forward(self, x):
    # ËæìÂÖ•Â±Ç
    x = self.conv1(x)
    x = self.bn1(x)
    x = F.relu(x)
    x = self.maxpool(x)

    # ÊÆãÂ∑ÆÂùó
    x = self.blocks(x)

    # ËæìÂá∫Â±Ç
    x = self.avgpool(x)
    x = x.view(x.size(0), -1)
    x = self.fc(x)

    return x
def train_stable_network():
"""ËÆ≠ÁªÉÊ∑±Â∫¶ÁΩëÁªúÁöÑÂÆåÊï¥ÊµÅÁ®ã"""
# ËÆæÁΩÆÈöèÊú∫ÁßçÂ≠ê
torch.manual_seed(42)

# ÁîüÊàêÊ®°ÊãüÊï∞ÊçÆÔºàÂÆûÈôÖÂ∫îÁî®‰∏≠‰ΩøÁî®ÁúüÂÆûÊï∞ÊçÆÈõÜÔºâ
print("üìä ÁîüÊàêÊ®°ÊãüÊï∞ÊçÆ...")
X_train = torch.randn(1000, 3, 32, 32)
y_train = torch.randint(0, 10, (1000,))
X_val = torch.randn(200, 3, 32, 32)
y_val = torch.randint(0, 10, (200,))

# ÂàõÂª∫Êï∞ÊçÆÂä†ËΩΩÂô®
train_dataset = TensorDataset(X_train, y_train)
val_dataset = TensorDataset(X_val, y_val)
train_loader = DataLoader(train_dataset, batch_size=32, shuffle=True)
val_loader = DataLoader(val_dataset, batch_size=32, shuffle=False)

# ÂàõÂª∫Ê®°Âûã
print("\nüèóÔ∏è ÂàõÂª∫50Â±ÇÊ∑±Â∫¶ÁΩëÁªú...")
model = StableDeepNetwork(num_blocks=25)  # 25‰∏™ÊÆãÂ∑ÆÂùó = 50Â±Ç
total_params = sum(p.numel() for p in model.parameters())
print(f"ÊÄªÂèÇÊï∞Èáè: {total_params:,}")

# ÊçüÂ§±ÂáΩÊï∞Âíå‰ºòÂåñÂô®
criterion = nn.CrossEntropyLoss()
optimizer = optim.Adam(model.parameters(), lr=0.001)

# Â≠¶‰π†ÁéáË∞ÉÂ∫¶Âô®
scheduler = optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max=50)

# ËÆ≠ÁªÉÈÖçÁΩÆ
num_epochs = 50
device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')
model = model.to(device)

# ËÆ∞ÂΩïËÆ≠ÁªÉËøáÁ®ã
history = {
    'train_loss': [],
    'val_loss': [],
    'val_acc': [],
    'lr': [],
    'grad_norm': []
}

print(f"\nüöÄ ÂºÄÂßãËÆ≠ÁªÉÔºàËÆæÂ§á: {device}Ôºâ...")

for epoch in range(num_epochs):
    # ËÆ≠ÁªÉÈò∂ÊÆµ
    model.train()
    train_loss = 0.0
    grad_norms = []

    for batch_idx, (data, target) in enumerate(train_loader):
        data, target = data.to(device), target.to(device)

        optimizer.zero_grad()
        output = model(data)
        loss = criterion(output, target)

        loss.backward()

        # Ê¢ØÂ∫¶Ë£ÅÂâ™
        grad_norm = nn.utils.clip_grad_norm_(model.parameters(), max_norm=5.0)
        grad_norms.append(grad_norm.item())

        optimizer.step()
        train_loss += loss.item()

    # È™åËØÅÈò∂ÊÆµ
    model.eval()
    val_loss = 0.0
    correct = 0

    with torch.no_grad():
        for data, target in val_loader:
            data, target = data.to(device), target.to(device)
            output = model(data)
            val_loss += criterion(output, target).item()
            pred = output.argmax(dim=1)
            correct += pred.eq(target).sum().item()

    # ËÆ°ÁÆóÊåáÊ†á
    train_loss /= len(train_loader)
    val_loss /= len(val_loader)
    val_acc = correct / len(val_dataset)
    avg_grad_norm = np.mean(grad_norms)
    current_lr = scheduler.get_last_lr()[0]

    # ËÆ∞ÂΩïÂéÜÂè≤
    history['train_loss'].append(train_loss)
    history['val_loss'].append(val_loss)
    history['val_acc'].append(val_acc)
    history['lr'].append(current_lr)
    history['grad_norm'].append(avg_grad_norm)

    # Êõ¥Êñ∞Â≠¶‰π†Áéá
    scheduler.step()

    # ÊâìÂç∞ËøõÂ∫¶
    if epoch % 10 == 0:
        print(f"Epoch {epoch}/{num_epochs} - "
              f"Train Loss: {train_loss:.4f}, "
              f"Val Loss: {val_loss:.4f}, "
              f"Val Acc: {val_acc:.4f}, "
              f"LR: {current_lr:.6f}, "
              f"Grad Norm: {avg_grad_norm:.4f}")

print("\n‚úÖ ËÆ≠ÁªÉÂÆåÊàêÔºÅ50Â±ÇÁΩëÁªúÊàêÂäüÊî∂ÊïõÔºÅ")

return model, history
def analyze_gradient_flow(model, sample_input):
"""ÂàÜÊûêÊ®°ÂûãÁöÑÊ¢ØÂ∫¶ÊµÅ"""
model.eval()
sample_input.requires_grad_(True)
# ÂâçÂêë‰º†Êí≠
output = model(sample_input)
loss = output.sum()

# ÂèçÂêë‰º†Êí≠
loss.backward()

# Êî∂ÈõÜÊ¢ØÂ∫¶‰ø°ÊÅØ
gradients = []
layer_names = []

for name, param in model.named_parameters():
    if param.grad is not None and 'weight' in name:
        grad_norm = param.grad.norm().item()
        gradients.append(grad_norm)
        layer_names.append(name)

# ÂèØËßÜÂåñÊ¢ØÂ∫¶ÊµÅ
plt.figure(figsize=(12, 6))
plt.semilogy(range(len(gradients)), gradients, 'o-', markersize=6)
plt.xlabel('Â±ÇÁ¥¢Âºï')
plt.ylabel('Ê¢ØÂ∫¶ËåÉÊï∞ÔºàÂØπÊï∞ÂàªÂ∫¶Ôºâ')
plt.title('50Â±ÇÁΩëÁªúÁöÑÊ¢ØÂ∫¶ÊµÅÂàÜÊûê')
plt.xticks(range(0, len(gradients), 5), rotation=45)
plt.grid(True, alpha=0.3)

# Ê∑ªÂä†ÂèÇËÄÉÁ∫ø
plt.axhline(y=1.0, color='red', linestyle='--', alpha=0.5, label='ÂèÇËÄÉÂÄº=1.0')
plt.legend()

plt.tight_layout()
plt.show()

# ÊâìÂç∞ÁªüËÆ°‰ø°ÊÅØ
print("\nüìä Ê¢ØÂ∫¶ÊµÅÂàÜÊûê:")
print(f"ÊúÄÂ§ßÊ¢ØÂ∫¶ËåÉÊï∞: {max(gradients):.4f}")
print(f"ÊúÄÂ∞èÊ¢ØÂ∫¶ËåÉÊï∞: {min(gradients):.4f}")
print(f"Ê¢ØÂ∫¶ËåÉÊï∞ÊØîÁéá: {max(gradients)/min(gradients):.2f}")

if max(gradients)/min(gradients) < 1000:
    print("‚úÖ Ê¢ØÂ∫¶ÊµÅÁ®≥ÂÆöÔºÅ")
else:
    print("‚ö†Ô∏è Ê¢ØÂ∫¶ÊµÅÂ≠òÂú®‰∏ÄÂÆöÁöÑ‰∏çÁ®≥ÂÆöÊÄß")
ËøêË°åÂÆåÊï¥ÁöÑËÆ≠ÁªÉÊµÅÁ®ã
print("="*60)
print("üéØ Ê∑±Â∫¶ÁΩëÁªú‰ºòÂåñÊäÄÂ∑ßÁªºÂêàÂÆûÊàò")
print("="*60)
model, history = train_stable_network()
visualize_training_history(history)
ÂàÜÊûêÊ¢ØÂ∫¶ÊµÅ
print("\nüî¨ ÂàÜÊûêËÆ≠ÁªÉÂêéÁöÑÊ¢ØÂ∫¶ÊµÅ...")
sample_input = torch.randn(1, 3, 32, 32)
if torch.cuda.is_available():
model = model.cpu()
sample_input = sample_input.cpu()
analyze_gradient_flow(model, sample_input)
ÊÄªÁªì
print("\n" + "="*60)
print("üéâ ÊàêÂäüËÆ≠ÁªÉ50Â±ÇÊ∑±Â∫¶ÁΩëÁªúÔºÅ‰ΩøÁî®ÁöÑÂÖ≥ÈîÆÊäÄÊúØÔºö")
print("="*60)
print("1. ‚úÖ HeÂàùÂßãÂåñ - ÈÄÇÂêàReLUÊøÄÊ¥ªÁöÑÊùÉÈáçÂàùÂßãÂåñ")
print("2. ‚úÖ BatchNorm - Á®≥ÂÆöÊØèÂ±ÇÁöÑËæìÂÖ•ÂàÜÂ∏É")
print("3. ‚úÖ ÊÆãÂ∑ÆËøûÊé• - Ëß£ÂÜ≥Ê∑±Â∫¶ÁΩëÁªúÁöÑÈÄÄÂåñÈóÆÈ¢ò")
print("4. ‚úÖ Adam‰ºòÂåñÂô® - Ëá™ÈÄÇÂ∫îÂ≠¶‰π†Áéá")
print("5. ‚úÖ Â≠¶‰π†ÁéáË∞ÉÂ∫¶ - ‰ΩôÂº¶ÈÄÄÁÅ´Á≠ñÁï•")
print("6. ‚úÖ Ê¢ØÂ∫¶Ë£ÅÂâ™ - Èò≤Ê≠¢Ê¢ØÂ∫¶ÁàÜÁÇ∏")
print("="*60)</code></pre>
                </div>
            </div>
            <!-- ÂÆûÈ™åÁªìÊûúÂ±ïÁ§∫ -->
            <div class="visualization-container mt-3">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üìä ÂÆûÈ™åÁªìÊûúÔºöÁ®≥ÂÆöËÆ≠ÁªÉÁöÑËØÅÊòé</h3>

                <canvas id="final-results" width="800" height="400"></canvas>

                <div class="tip success mt-3">
                    <span class="tip-icon">üèÜ</span>
                    <div class="tip-content">
                        <strong>ÊàêÂäüÔºÅÊàë‰ª¨ÂÅöÂà∞‰∫ÜÔºö</strong><br>
                        ‚Ä¢ 50Â±ÇÊ∑±Â∫¶ÁΩëÁªúÁ®≥ÂÆöËÆ≠ÁªÉ<br>
                        ‚Ä¢ Ê¢ØÂ∫¶ÂßãÁªà‰øùÊåÅÂú®ÂêàÁêÜËåÉÂõ¥<br>
                        ‚Ä¢ ÊçüÂ§±ÂáΩÊï∞Âπ≥Êªë‰∏ãÈôç<br>
                        ‚Ä¢ È™åËØÅÂáÜÁ°ÆÁéáÁ®≥Ê≠•ÊèêÂçá
                    </div>
                </div>
            </div>
        </section>

        <!-- ÊÄªÁªì‰∏éÂ±ïÊúõ -->
        <section id="summary" class="section-card">
            <h2 style="color: var(--accent-green); margin-bottom: 1.5rem;">üéì ÊÄªÁªìÔºöÊ∑±Â∫¶Â≠¶‰π†‰ºòÂåñÁöÑÊô∫ÊÖß</h2>

            <div class="story-card">
                <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">‰ªéÊå´Ë¥•Âà∞ÊàêÂäüÁöÑÊóÖÁ®ã</h3>

                <div class="dialogue-box">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #fbbf24, #f59e0b);">üßë‚Äçüíª</div>
                        Â∞èÊùéÔºàÂÖ¥Â•ãÂú∞ÔºâÔºö
                    </div>
                    <div>"ÂØºÂ∏àÔºåÊàë‰ª¨ÊàêÂäü‰∫ÜÔºÅ50Â±ÇÁΩëÁªúËÆ≠ÁªÉÂæóÂæàÂ•ΩÔºÅ"</div>
                </div>

                <div class="dialogue-box mt-2">
                    <div class="speaker">
                        <div class="avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">üßô‚Äç‚ôÇÔ∏è</div>
                        ÂØºÂ∏àÔºàÂæÆÁ¨ëÔºâÔºö
                    </div>
                    <div>"ËÆ∞‰ΩèÔºåËøô‰∫õÊäÄÊúØ‰∏çÊòØÈ≠îÊ≥ïÔºåËÄåÊòØÂü∫‰∫éÊ∑±ÂàªÊï∞Â≠¶ÂéüÁêÜÁöÑÂ∑•Á®ãÊô∫ÊÖß„ÄÇÁêÜËß£ÂéüÁêÜÔºåÊâçËÉΩÁÅµÊ¥ªËøêÁî®„ÄÇ"</div>
                </div>
            </div>

            <!-- Ê†∏ÂøÉË¶ÅÁÇπÊÄªÁªì -->
            <div class="concept-grid">
                <div class="concept-card why">
                    <h3 style="color: var(--accent-red); margin-bottom: 1rem;">üîç ÈóÆÈ¢òÊú¨Ë¥®</h3>
                    <p>
                        <strong>Ê¢ØÂ∫¶Ê∂àÂ§±/ÁàÜÁÇ∏ÁöÑÊ†πÊ∫êÔºö</strong><br>
                        ‚Ä¢ ÈìæÂºèÊ≥ïÂàôÁöÑÁ¥ØÁßØÊïàÂ∫î<br>
                        ‚Ä¢ ÊøÄÊ¥ªÂáΩÊï∞ÁöÑÈ•±ÂíåÈóÆÈ¢ò<br>
                        ‚Ä¢ ‰∏çÂΩìÁöÑÊùÉÈáçÂàùÂßãÂåñ<br>
                        ‚Ä¢ ÂÜÖÈÉ®ÂçèÂèòÈáèÂÅèÁßª
                    </p>
                </div>

                <div class="concept-card what">
                    <h3 style="color: var(--accent-green); margin-bottom: 1rem;">üõ†Ô∏è Ëß£ÂÜ≥ÊñπÊ°à</h3>
                    <p>
                        <strong>ÂõõÂ§ßÊ≥ïÂÆùÔºö</strong><br>
                        ‚Ä¢ Xavier/HeÂàùÂßãÂåñ<br>
                        ‚Ä¢ ÊâπÈáèÂΩí‰∏ÄÂåñÔºàBatchNormÔºâ<br>
                        ‚Ä¢ Áé∞‰ª£‰ºòÂåñÂô®ÔºàAdamÔºâ<br>
                        ‚Ä¢ ÊÆãÂ∑ÆËøûÊé•ÔºàResNetÔºâ
                    </p>
                </div>

                <div class="concept-card how">
                    <h3 style="color: var(--accent-blue); margin-bottom: 1rem;">üí° Ê†∏ÂøÉÊÄùÊÉ≥</h3>
                    <p>
                        <strong>‰øùÊåÅ‰ø°Âè∑Á®≥ÂÆö‰º†Êí≠Ôºö</strong><br>
                        ‚Ä¢ ÂâçÂêëÔºöÊøÄÊ¥ªÂÄº‰∏çÁàÜÁÇ∏<br>
                        ‚Ä¢ ÂèçÂêëÔºöÊ¢ØÂ∫¶‰∏çÊ∂àÂ§±<br>
                        ‚Ä¢ ËÆ≠ÁªÉÔºöÂèÇÊï∞Á®≥ÂÆöÊõ¥Êñ∞<br>
                        ‚Ä¢ ÁªìÊûÑÔºöË∑≥Ë∑ÉËøûÊé•
                    </p>
                </div>

                <div class="concept-card pitfall">
                    <h3 style="color: var(--accent-orange); margin-bottom: 1rem;">‚ö° ÂÆûÊàòË¶ÅÁÇπ</h3>
                    <p>
                        <strong>ÁªÑÂêà‰ΩøÁî®ÊïàÊûúÊúÄ‰Ω≥Ôºö</strong><br>
                        ‚Ä¢ ÂàùÂßãÂåñ + BN + ‰ºòÂåñÂô®<br>
                        ‚Ä¢ ÊÆãÂ∑ÆËøûÊé• + Ê¢ØÂ∫¶Ë£ÅÂâ™<br>
                        ‚Ä¢ Â≠¶‰π†ÁéáË∞ÉÂ∫¶ + Ê≠£ÂàôÂåñ<br>
                        ‚Ä¢ ÁõëÊéß + Ë∞ÉËØï + ËÄêÂøÉ
                    </p>
                </div>
            </div>

            <!-- Áü•ËØÜÂõæË∞± -->
            <div class="visualization-container mt-4">
                <h3 style="color: var(--accent-purple); margin-bottom: 1.5rem;">üó∫Ô∏è Ê∑±Â∫¶Â≠¶‰π†‰ºòÂåñÊäÄÊúØÂÖ®ÊôØÂõæ</h3>

                <div class="matrix-container">
                    <div class="matrix-grid" style="grid-template-columns: repeat(4, 1fr);">
                        <!-- ÈóÆÈ¢òÁ±ªÂà´ -->
                        <div class="matrix-cell header" style="grid-column: span 4; text-align: center; background: var(--accent-purple);">
                            Ê∑±Â∫¶Â≠¶‰π†‰ºòÂåñÊäÄÊúØ‰ΩìÁ≥ª
                        </div>

                        <!-- Ê¢ØÂ∫¶ÈóÆÈ¢ò -->
                        <div class="matrix-cell header" style="background: rgba(239, 68, 68, 0.3);">Ê¢ØÂ∫¶ÈóÆÈ¢ò</div>
                        <div class="matrix-cell value">Ê¢ØÂ∫¶Ê∂àÂ§±</div>
                        <div class="matrix-cell value">Ê¢ØÂ∫¶ÁàÜÁÇ∏</div>
                        <div class="matrix-cell value">Ê¢ØÂ∫¶‰∏çÁ®≥ÂÆö</div>

                        <!-- ÂàùÂßãÂåñÊäÄÊúØ -->
                        <div class="matrix-cell header" style="background: rgba(34, 197, 94, 0.3);">ÂàùÂßãÂåñÊäÄÊúØ</div>
                        <div class="matrix-cell value">XavierÂàùÂßãÂåñ</div>
                        <div class="matrix-cell value">HeÂàùÂßãÂåñ</div>
                        <div class="matrix-cell value">LSUVÂàùÂßãÂåñ</div>

                        <!-- ÂΩí‰∏ÄÂåñÊäÄÊúØ -->
                        <div class="matrix-cell header" style="background: rgba(6, 182, 212, 0.3);">ÂΩí‰∏ÄÂåñÊäÄÊúØ</div>
                        <div class="matrix-cell value">BatchNorm</div>
                        <div class="matrix-cell value">LayerNorm</div>
                        <div class="matrix-cell value">GroupNorm</div>

                        <!-- ‰ºòÂåñÂô® -->
                        <div class="matrix-cell header" style="background: rgba(139, 92, 246, 0.3);">‰ºòÂåñÂô®</div>
                        <div class="matrix-cell value">SGD+Momentum</div>
                        <div class="matrix-cell value">Adam/AdamW</div>
                        <div class="matrix-cell value">RMSprop</div>

                        <!-- ÁΩëÁªúÁªìÊûÑ -->
                        <div class="matrix-cell header" style="background: rgba(251, 191, 36, 0.3);">ÁΩëÁªúÁªìÊûÑ</div>
                        <div class="matrix-cell value">ÊÆãÂ∑ÆËøûÊé•</div>
                        <div class="matrix-cell value">ÂØÜÈõÜËøûÊé•</div>
                        <div class="matrix-cell value">Ê≥®ÊÑèÂäõÊú∫Âà∂</div>
                    </div>
                </div>
            </div>

            <div class="think-box mt-4">
                <h3 style="color: var(--accent-purple); margin-bottom: 1rem;">ü§î Ê∑±Â∫¶ÊÄùËÄÉ</h3>
                <p>Ëøô‰∏ÄÁ´†Êàë‰ª¨Ëß£ÂÜ≥‰∫ÜÊ∑±Â∫¶ÁΩëÁªúÁöÑËÆ≠ÁªÉÈóÆÈ¢òÔºå‰ΩÜËøôÂè™ÊòØÂºÄÂßã„ÄÇ</p>
                <p>ÊÄùËÄÉ‰∏Ä‰∏ãÔºö</p>
                <ul style="margin-left: 2rem; line-height: 1.8;">
                    <li>‰∏∫‰ªÄ‰πàResNetÂèØ‰ª•ËÆ≠ÁªÉ1000Â±ÇÁöÑÁΩëÁªúÔºü</li>
                    <li>Transformer‰∏∫‰ªÄ‰πà‰∏çÈúÄË¶ÅÈÇ£‰πàÊ∑±Ôºü</li>
                    <li>Layer NormalizationÂíåBatch NormalizationÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</li>
                    <li>‰∏∫‰ªÄ‰πàÊúâ‰∫õ‰ªªÂä°SGDÊØîAdamÊïàÊûúÊõ¥Â•ΩÔºü</li>
                    <li>Êú™Êù•Ëøò‰ºöÊúâ‰ªÄ‰πàÊñ∞ÁöÑ‰ºòÂåñÊäÄÊúØÔºü</li>
                </ul>
            </div>
            <!-- Âú®Ê∑±Â∫¶ÊÄùËÄÉÁöÑÈóÆÈ¢òÂàóË°®ÂêéÊ∑ªÂä† -->
            <div class="think-box mt-3" style="background: rgba(34, 197, 94, 0.1); border-color: rgba(34, 197, 94, 0.3);">
                <h4 style="color: var(--accent-green); margin-bottom: 1rem;">üí° ÊÄùËÄÉÈ¢òÊèêÁ§∫</h4>
                <p><strong>Q: ‰∏∫‰ªÄ‰πàResNetÂèØ‰ª•ËÆ≠ÁªÉ1000Â±ÇÔºü</strong><br>
                    A: ÊÆãÂ∑ÆËøûÊé•ÂàõÂª∫‰∫Ü"È´òÈÄüÂÖ¨Ë∑Ø"ÔºåÊ¢ØÂ∫¶ÂèØ‰ª•Ë∑≥Ëøá‰∏≠Èó¥Â±ÇÁõ¥Êé•‰º†Êí≠„ÄÇ</p>

                <p><strong>Q: Transformer‰∏∫‰ªÄ‰πà‰∏çÈúÄË¶ÅÈÇ£‰πàÊ∑±Ôºü</strong><br>
                    A: Ëá™Ê≥®ÊÑèÂäõÊú∫Âà∂ËÆ©ÊØèÂ±ÇÈÉΩËÉΩ"ÁúãÂà∞"ÊâÄÊúâ‰ø°ÊÅØÔºå‰∏çÈúÄË¶ÅÈÄêÂ±ÇÊäΩË±°„ÄÇ</p>

                <p><strong>Q: ‰∏∫‰ªÄ‰πàÊúâ‰∫õ‰ªªÂä°SGDÊØîAdamÊõ¥Â•ΩÔºü</strong><br>
                    A: SGDÁöÑËß£Êõ¥ÂÆπÊòìÊ≥õÂåñÔºåAdamÂèØËÉΩÈô∑ÂÖ•Â∞ñÈîêÁöÑÂ±ÄÈÉ®ÊúÄ‰ºò„ÄÇ</p>
            </div>

            <!-- ÂÆûË∑µÂª∫ËÆÆ -->
            <div class="action-checklist mt-4">
                <h3 style="color: var(--accent-yellow); margin-bottom: 1.5rem;">üìã Ë°åÂä®ËÆ°ÂàíÔºöÊ∑±ÂåñÁêÜËß£</h3>

                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span>ÂÆûÁé∞‰∏Ä‰∏™Ê¢ØÂ∫¶ÁõëÊéßÂ∑•ÂÖ∑ÔºåÂèØËßÜÂåñËÆ≠ÁªÉËøáÁ®ã</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span>ÂØπÊØî‰∏çÂêåÂàùÂßãÂåñÊñπÊ≥ïÂú®‰∏çÂêåÊøÄÊ¥ªÂáΩÊï∞‰∏ãÁöÑÊïàÊûú</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span>‰ªéÈõ∂ÂÆûÁé∞BatchNormÁöÑÂâçÂêëÂíåÂèçÂêë‰º†Êí≠</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span>ÂÆûÁé∞‰∏Ä‰∏™ÁÆÄÂåñÁâàÁöÑAdam‰ºòÂåñÂô®</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-checkbox" onclick="toggleCheck(this)"></div>
                    <span>ËÆ≠ÁªÉ‰∏Ä‰∏™100Â±ÇÁöÑÊÆãÂ∑ÆÁΩëÁªúÂπ∂ÂàÜÊûêÊ¢ØÂ∫¶ÊµÅ</span>
                </div>
            </div>

            <!-- ‰∏ã‰∏ÄÁ´†È¢ÑÂëä -->
            <div style="background: var(--primary-gradient); padding: 3rem; border-radius: 1rem; margin-top: 3rem; text-align: center; color: white;">
                <h3 style="margin-bottom: 1rem;">üöÄ ‰∏ã‰∏ÄÁ´†È¢ÑÂëä</h3>
                <h2 style="margin-bottom: 1rem;">Á¨¨5Á´†ÔºöÂç∑ÁßØÁ•ûÁªèÁΩëÁªú - ÁúãËßÅÊ®°ÂºèÁöÑËâ∫ÊúØ</h2>
                <p style="opacity: 0.9; max-width: 600px; margin: 0 auto;">
                    Êàë‰ª¨Â∑≤ÁªèËÆ©Ê∑±Â∫¶ÁΩëÁªúËÉΩÂ§üÁ®≥ÂÆöËÆ≠ÁªÉ‰∫ÜÔºå‰ΩÜÂ§ÑÁêÜÂõæÂÉèÊó∂ÔºåÂÖ®ËøûÊé•ÁΩëÁªúÊúâ‰∏™Ëá¥ÂëΩÈóÆÈ¢ò...<br>
                    ‰∏ã‰∏ÄÁ´†ÔºåËÆ©Êàë‰ª¨Êé¢Á¥¢CNNÂ¶Ç‰ΩïÈÄöËøá"Â±ÄÈÉ®ÊÑüÁü•"Âíå"ÊùÉÈáçÂÖ±‰∫´"‰ºòÈõÖÂú∞Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºÅ
                </p>
                <button class="btn" style="background: white; color: var(--bg-dark); margin-top: 2rem;" onclick="location.href='chapter5.html'">
                    ÂºÄÂßã‰∏ã‰∏ÄÁ´† ‚Üí
                </button>
            </div>
        </section>

        <!-- ÂèçÈ¶àÂå∫Âüü -->
        <section class="section-card">
            <h3 style="color: var(--accent-blue); margin-bottom: 1.5rem;">üí¨ Â≠¶‰π†ÂèçÈ¶à</h3>
            <div class="text-center">
                <p>Ëøô‰∏ÄÁ´†ÂØπ‰Ω†ÊúâÂ∏ÆÂä©ÂêóÔºü</p>
                <div style="display: flex; gap: 1rem; justify-content: center; margin-top: 1.5rem;">
                    <button class="btn btn-secondary" onclick="submitFeedback('helpful')">
                        üëç ÂæàÊúâÂ∏ÆÂä©
                    </button>
                    <button class="btn btn-secondary" onclick="submitFeedback('ok')">
                        üòê ËøòÂèØ‰ª•
                    </button>
                    <button class="btn btn-secondary" onclick="submitFeedback('confusing')">
                        üòï ÊúâÁÇπÂõ∞ÊÉë
                    </button>
                </div>
            </div>
        </section>
    </div>
</main>
<!-- JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>
<script>
    // ÂàùÂßãÂåñËØ≠Ê≥ïÈ´ò‰∫Æ
    hljs.highlightAll();

    // ÂàùÂßãÂåñÊï∞Â≠¶ÂÖ¨ÂºèÊ∏≤Êüì
    renderMathInElement(document.body, {
        delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false}
        ]
    });

    // ÂÖ®Â±ÄÁä∂ÊÄÅÁÆ°ÁêÜ
    let animationsEnabled = true;
    let currentTheme = 'dark';
    let sidebarOpen = false;

    // ÂØºËà™ÂäüËÉΩ
    document.getElementById('toggle-sidebar').addEventListener('click', () => {
        sidebarOpen = !sidebarOpen;
        document.getElementById('sidebar').classList.toggle('open', sidebarOpen);
        document.getElementById('sidebar-overlay').classList.toggle('active', sidebarOpen);
    });

    document.getElementById('sidebar-overlay').addEventListener('click', () => {
        sidebarOpen = false;
        document.getElementById('sidebar').classList.remove('open');
        document.getElementById('sidebar-overlay').classList.remove('active');
    });

    // ‰∏ªÈ¢òÂàáÊç¢
    document.getElementById('toggle-theme').addEventListener('click', () => {
        currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', currentTheme);
    });

    // Âä®ÁîªÊéßÂà∂
    document.getElementById('toggle-animations').addEventListener('click', () => {
        animationsEnabled = !animationsEnabled;
        document.documentElement.style.setProperty('--animation-duration', animationsEnabled ? '0.3s' : '0s');
    });

    // ËøõÂ∫¶Êù°Êõ¥Êñ∞
    function updateProgressBar() {
        const scrolled = window.scrollY;
        const height = document.documentElement.scrollHeight - window.innerHeight;
        const progress = (scrolled / height) * 100;
        document.getElementById('progress-bar').style.width = progress + '%';
    }

    window.addEventListener('scroll', () => {
        updateProgressBar();

        // ÈöêËóè/ÊòæÁ§∫ÂØºËà™Ê†è
        const nav = document.querySelector('.nav-header');
        if (window.scrollY > 100) {
            nav.classList.add('scrolled');
        } else {
            nav.classList.remove('scrolled');
        }
    });

    // ÁõÆÂΩïÈ´ò‰∫Æ
    const sections = document.querySelectorAll('section[id]');
    const tocItems = document.querySelectorAll('.toc-item');

    function updateTOC() {
        let current = '';
        sections.forEach(section => {
            const rect = section.getBoundingClientRect();
            if (rect.top <= 100 && rect.bottom >= 100) {
                current = section.getAttribute('id');
            }
        });

        tocItems.forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('href') === '#' + current) {
                item.classList.add('active');
            }
        });
    }

    window.addEventListener('scroll', updateTOC);

    // ‰ª£Á†ÅÊ†áÁ≠æÂàáÊç¢
    document.querySelectorAll('.code-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            const container = this.closest('.code-container');
            const tabs = container.querySelectorAll('.code-tab');
            const contents = container.querySelectorAll('.code-content[data-tab-content]');

            tabs.forEach(t => t.classList.remove('active'));
            this.classList.add('active');

            contents.forEach(content => {
                content.style.display = 'none';
            });

            const targetContent = container.querySelector(`[data-tab-content="${this.dataset.tab}"]`);
            if (targetContent) {
                targetContent.style.display = 'block';
            }
        });
    });

    // ‰ª£Á†ÅËøêË°åÊ®°Êãü
    function runCode(button, outputId) {
        const output = document.getElementById(outputId);
        output.classList.add('show');

        // Ê®°ÊãüËøêË°åÊïàÊûú
        const originalText = button.innerHTML;
        button.innerHTML = '<span class="loading"></span> ËøêË°å‰∏≠...';
        button.disabled = true;

        setTimeout(() => {
            button.innerHTML = '‚úÖ ËøêË°åÂÆåÊàê';
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
            }, 1500);
        }, 1500);
    }

    // CanvasÂèØËßÜÂåñÔºöÊ¢ØÂ∫¶ÊµÅ
    function visualizeGradientFlow() {
        const canvas = document.getElementById('gradient-flow-viz');
        const ctx = canvas.getContext('2d');

        // Ê∏ÖÁ©∫ÁîªÂ∏É
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Êï∞ÊçÆ
        const layers = 30;
        const gradients = [];
        let current = 1.0;

        // Ê®°ÊãüÊ¢ØÂ∫¶Ë°∞Âáè
        for (let i = 0; i < layers; i++) {
            current *= 0.2; // SigmoidÂØºÊï∞Âπ≥ÂùáÂÄº
            gradients.push(current);
        }

        // ÁªòÂà∂ËÉåÊôØ
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ÁªòÂà∂ÁΩëÊ†º
        ctx.strokeStyle = 'rgba(255, 255, 255, 0.1)';
        ctx.lineWidth = 1;
        for (let i = 0; i <= 10; i++) {
            const y = (i / 10) * canvas.height;
            ctx.beginPath();
            ctx.moveTo(0, y);
            ctx.lineTo(canvas.width, y);
            ctx.stroke();
        }

        // ÁªòÂà∂Ê¢ØÂ∫¶Êõ≤Á∫ø
        const padding = 40;
        const width = canvas.width - 2 * padding;
        const height = canvas.height - 2 * padding;

        ctx.strokeStyle = '#ef4444';
        ctx.lineWidth = 3;
        ctx.beginPath();

        gradients.forEach((grad, i) => {
            const x = padding + (i / (layers - 1)) * width;
            const y = padding + height - (Math.log10(grad + 1e-20) + 20) * height / 20;

            if (i === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.lineTo(x, y);
            }

            // ÁªòÂà∂Êï∞ÊçÆÁÇπ
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(x, y, 4, 0, 2 * Math.PI);
            ctx.fill();
        });

        ctx.stroke();

        // ÁªòÂà∂Ê†áÁ≠æ
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '14px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('Â±ÇÊï∞Ôºà‰ªéÂêéÂæÄÂâçÔºâ', canvas.width / 2, canvas.height - 10);

        ctx.save();
        ctx.translate(15, canvas.height / 2);
        ctx.rotate(-Math.PI / 2);
        ctx.fillText('Ê¢ØÂ∫¶Â§ßÂ∞èÔºàÂØπÊï∞ÂàªÂ∫¶Ôºâ', 0, 0);
        ctx.restore();

        // ÁªòÂà∂Ê†áÈ¢ò
        ctx.font = 'bold 16px sans-serif';
        ctx.fillText('Ê¢ØÂ∫¶Âú®Ê∑±Â∫¶ÁΩëÁªú‰∏≠ÁöÑÊåáÊï∞Á∫ßË°∞Âáè', canvas.width / 2, 25);
    }

    // Âä®ÁîªÊ¢ØÂ∫¶ÊµÅ
    let animationFrame = null;
    function animateGradientFlow() {
        if (animationFrame) {
            cancelAnimationFrame(animationFrame);
            animationFrame = null;
            return;
        }

        const canvas = document.getElementById('gradient-flow-viz');
        const ctx = canvas.getContext('2d');
        let progress = 0;

        function animate() {
            progress += 0.02;
            if (progress > 1) progress = 0;

            // Ê∏ÖÁ©∫ÁîªÂ∏É
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ÈáçÊñ∞ÁªòÂà∂ÈùôÊÄÅÈÉ®ÂàÜ
            visualizeGradientFlow();

            // Ê∑ªÂä†Âä®ÁîªÊïàÊûú
            const x = 40 + progress * (canvas.width - 80);
            ctx.strokeStyle = '#fbbf24';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(x, 40);
            ctx.lineTo(x, canvas.height - 40);
            ctx.stroke();

            animationFrame = requestAnimationFrame(animate);
        }

        animate();
    }

    // SigmoidÂèØËßÜÂåñ
    function updateSigmoidPlot() {
        const canvas = document.getElementById('sigmoid-viz');
        const ctx = canvas.getContext('2d');
        const range = parseInt(document.getElementById('sigmoid-range').value);

        // Ê∏ÖÁ©∫ÁîªÂ∏É
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ÁªòÂà∂ËÉåÊôØ
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ËÆæÁΩÆÂùêÊ†áÁ≥ª
        const padding = 40;
        const width = canvas.width - 2 * padding;
        const height = canvas.height - 2 * padding;
        const centerX = padding + width / 2;
        const centerY = padding + height / 2;

        // ÁªòÂà∂ÂùêÊ†áËΩ¥
        ctx.strokeStyle = '#666';
        ctx.lineWidth = 2;
        ctx.beginPath();
        ctx.moveTo(padding, centerY);
        ctx.lineTo(canvas.width - padding, centerY);
        ctx.moveTo(centerX, padding);
        ctx.lineTo(centerX, canvas.height - padding);
        ctx.stroke();

        // SigmoidÂáΩÊï∞
        function sigmoid(x) {
            return 1 / (1 + Math.exp(-x));
        }

        // SigmoidÂØºÊï∞
        function sigmoidDerivative(x) {
            const s = sigmoid(x);
            return s * (1 - s);
        }

        // ÁªòÂà∂ÂáΩÊï∞
        const points = 200;
        const step = (2 * range) / points;

        // Sigmoid
        ctx.strokeStyle = '#22c55e';
        ctx.lineWidth = 3;
        ctx.beginPath();
        for (let i = 0; i <= points; i++) {
            const x = -range + i * step;
            const y = sigmoid(x);
            const px = centerX + (x / range) * (width / 2);
            const py = centerY - y * (height / 2);

            if (i === 0) {
                ctx.moveTo(px, py);
            } else {
                ctx.lineTo(px, py);
            }
        }
        ctx.stroke();

        // SigmoidÂØºÊï∞
        ctx.strokeStyle = '#ef4444';
        ctx.lineWidth = 3;
        ctx.setLineDash([5, 5]);
        ctx.beginPath();
        for (let i = 0; i <= points; i++) {
            const x = -range + i * step;
            const y = sigmoidDerivative(x) * 4; // ÊîæÂ§ßÊòæÁ§∫
            const px = centerX + (x / range) * (width / 2);
            const py = centerY - y * (height / 2);

            if (i === 0) {
                ctx.moveTo(px, py);
            } else {
                ctx.lineTo(px, py);
            }
        }
        ctx.stroke();
        ctx.setLineDash([]);

        // Ê†áÊ≥®ÊúÄÂ§ßÂØºÊï∞ÂÄº
        ctx.fillStyle = '#ef4444';
        ctx.font = '14px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('max = 0.25', centerX, centerY - height / 2 + 20);

        // Âõæ‰æã
        ctx.fillStyle = '#22c55e';
        ctx.fillRect(padding + 20, padding + 10, 30, 3);
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '12px sans-serif';
        ctx.textAlign = 'left';
        ctx.fillText('SigmoidÂáΩÊï∞', padding + 55, padding + 15);

        ctx.fillStyle = '#ef4444';
        ctx.fillRect(padding + 20, padding + 30, 30, 3);
        ctx.fillStyle = '#f1f5f9';
        ctx.fillText('SigmoidÂØºÊï∞ (√ó4)', padding + 55, padding + 35);

        // Ê†áÈ¢ò
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('SigmoidÂáΩÊï∞ÁöÑÈ•±ÂíåÈóÆÈ¢ò', canvas.width / 2, 25);
    }

    // ÊªëÂùó‰∫ã‰ª∂
    document.getElementById('sigmoid-range').addEventListener('input', function(e) {
        document.getElementById('sigmoid-range-value').textContent = `¬±${e.target.value}`;
        updateSigmoidPlot();
    });

    document.getElementById('lr-slider').addEventListener('input', function(e) {
        document.getElementById('lr-value').textContent = (e.target.value / 100).toFixed(2);
    });

    // ‰ºòÂåñÂô®Ë∑ØÂæÑÂèØËßÜÂåñ
    function visualizeOptimizerPaths() {
        const canvas = document.getElementById('optimizer-viz');
        const ctx = canvas.getContext('2d');

        // Ê∏ÖÁ©∫ÁîªÂ∏É
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ÁªòÂà∂ËÉåÊôØ
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // ÁªòÂà∂Á≠âÈ´òÁ∫øÔºàRosenbrockÂáΩÊï∞Ôºâ
        const centerX = 500;
        const centerY = 300;
        const scale = 100;

        ctx.strokeStyle = 'rgba(139, 92, 246, 0.3)';
        ctx.lineWidth = 1;

        for (let level = 0.1; level <= 10; level *= 2) {
            ctx.beginPath();
            for (let angle = 0; angle <= 2 * Math.PI; angle += 0.01) {
                const r = level * scale;
                const x = centerX + r * Math.cos(angle);
                const y = centerY + r * Math.sin(angle) * 0.3;

                if (angle === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.closePath();
            ctx.stroke();
        }

        // Ê†áËÆ∞ÊúÄ‰ºòÁÇπ
        ctx.fillStyle = '#22c55e';
        ctx.beginPath();
        ctx.arc(centerX, centerY, 8, 0, 2 * Math.PI);
        ctx.fill();
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '12px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('ÊúÄ‰ºòÁÇπ', centerX, centerY - 15);

        // ÁªòÂà∂‰∏çÂêå‰ºòÂåñÂô®ÁöÑË∑ØÂæÑ
        const optimizers = [
            { name: 'SGD', color: '#ef4444', path: generateSGDPath() },
            { name: 'Momentum', color: '#fbbf24', path: generateMomentumPath() },
            { name: 'Adam', color: '#06b6d4', path: generateAdamPath() }
        ];

        optimizers.forEach(opt => {
            ctx.strokeStyle = opt.color;
            ctx.lineWidth = 2;
            ctx.beginPath();

            opt.path.forEach((point, i) => {
                if (i === 0) {
                    ctx.moveTo(point.x, point.y);
                } else {
                    ctx.lineTo(point.x, point.y);
                }
            });

            ctx.stroke();

            // Ê†áËÆ∞ÁªàÁÇπ
            const lastPoint = opt.path[opt.path.length - 1];
            ctx.fillStyle = opt.color;
            ctx.beginPath();
            ctx.arc(lastPoint.x, lastPoint.y, 5, 0, 2 * Math.PI);
            ctx.fill();
        });

        // Âõæ‰æã
        let legendY = 30;
        optimizers.forEach(opt => {
            ctx.fillStyle = opt.color;
            ctx.fillRect(20, legendY, 30, 3);
            ctx.fillStyle = '#f1f5f9';
            ctx.font = '14px sans-serif';
            ctx.textAlign = 'left';
            ctx.fillText(opt.name, 60, legendY + 5);
            legendY += 25;
        });

        // Ê†áÈ¢ò
        ctx.font = 'bold 16px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillStyle = '#f1f5f9';
        ctx.fillText('‰∏çÂêå‰ºòÂåñÂô®ÁöÑÊî∂ÊïõË∑ØÂæÑ', canvas.width / 2, 25);
    }

    // ÁîüÊàê‰ºòÂåñÂô®Ë∑ØÂæÑ
    function generateSGDPath() {
        const path = [];
        let x = 100, y = 400;
        const lr = 0.001;

        for (let i = 0; i < 100; i++) {
            path.push({ x, y });
            // ÁÆÄÂåñÁöÑÊ¢ØÂ∫¶ËÆ°ÁÆó
            const dx = 2 * (x - 500);
            const dy = 2 * (y - 300) * 0.3;
            x -= lr * dx * 100;
            y -= lr * dy * 100;
        }

        return path;
    }

    function generateMomentumPath() {
        const path = [];
        let x = 100, y = 400;
        let vx = 0, vy = 0;
        const lr = 0.001;
        const beta = 0.9;

        for (let i = 0; i < 100; i++) {
            path.push({ x, y });
            const dx = 2 * (x - 500);
            const dy = 2 * (y - 300) * 0.3;
            vx = beta * vx + (1 - beta) * dx;
            vy = beta * vy + (1 - beta) * dy;
            x -= lr * vx * 100;
            y -= lr * vy * 100;
        }

        return path;
    }

    function generateAdamPath() {
        const path = [];
        let x = 100, y = 400;
        let mx = 0, my = 0, vx = 0, vy = 0;
        const lr = 0.01;
        const beta1 = 0.9, beta2 = 0.999;

        for (let i = 0; i < 100; i++) {
            path.push({ x, y });
            const dx = 2 * (x - 500);
            const dy = 2 * (y - 300) * 0.3;

            mx = beta1 * mx + (1 - beta1) * dx;
            my = beta1 * my + (1 - beta1) * dy;
            vx = beta2 * vx + (1 - beta2) * dx * dx;
            vy = beta2 * vy + (1 - beta2) * dy * dy;

            const mxHat = mx / (1 - Math.pow(beta1, i + 1));
            const myHat = my / (1 - Math.pow(beta1, i + 1));
            const vxHat = vx / (1 - Math.pow(beta2, i + 1));
            const vyHat = vy / (1 - Math.pow(beta2, i + 1));

            x -= lr * mxHat / (Math.sqrt(vxHat) + 1e-8) * 100;
            y -= lr * myHat / (Math.sqrt(vyHat) + 1e-8) * 100;
        }

        return path;
    }

    // Âä®Áîª‰ºòÂåñÂô®
    let optimizerAnimation = null;
    function animateOptimizers() {
        if (optimizerAnimation) {
            cancelAnimationFrame(optimizerAnimation);
            optimizerAnimation = null;
            return;
        }

        const canvas = document.getElementById('optimizer-viz');
        const ctx = canvas.getContext('2d');
        let step = 0;

        function animate() {
            if (step > 100) {
                optimizerAnimation = null;
                return;
            }

            visualizeOptimizerPaths();

            // Ê∑ªÂä†ÂΩìÂâç‰ΩçÁΩÆÊ†áËÆ∞
            const optimizers = [
                { name: 'SGD', color: '#ef4444', path: generateSGDPath() },
                { name: 'Momentum', color: '#fbbf24', path: generateMomentumPath() },
                { name: 'Adam', color: '#06b6d4', path: generateAdamPath() }
            ];

            optimizers.forEach(opt => {
                if (step < opt.path.length) {
                    const point = opt.path[step];
                    ctx.fillStyle = opt.color;
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 8, 0, 2 * Math.PI);
                    ctx.fill();
                }
            });

            step++;
            optimizerAnimation = requestAnimationFrame(animate);
        }

        animate();
    }

    // ÂàùÂßãÂåñÂÆûÈ™å
    function runInitExperiment() {
        // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ÂÆûÈôÖÁöÑÂÆûÈ™å‰ª£Á†Å
        console.log('ËøêË°åÂàùÂßãÂåñÂÆûÈ™å...');
    }

    function runFinalExperiment() {
        // ÁªòÂà∂ÊúÄÁªàÁªìÊûú
        const canvas = document.getElementById('final-results');
        const ctx = canvas.getContext('2d');

        // Ê∏ÖÁ©∫ÁîªÂ∏É
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ÁªòÂà∂ËÉåÊôØ
        ctx.fillStyle = 'rgba(15, 23, 42, 0.8)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Ê®°ÊãüËÆ≠ÁªÉÊõ≤Á∫ø
        const epochs = 50;
        const trainLoss = [];
        const valLoss = [];
        const gradNorm = [];

        for (let i = 0; i < epochs; i++) {
            trainLoss.push(2.3 * Math.exp(-i / 10) + 0.1 + Math.random() * 0.05);
            valLoss.push(2.3 * Math.exp(-i / 10) + 0.15 + Math.random() * 0.08);
            gradNorm.push(1.5 + Math.sin(i / 5) * 0.3 + Math.random() * 0.2);
        }

        // ÁªòÂà∂ÊçüÂ§±Êõ≤Á∫ø
        const padding = 40;
        const width = (canvas.width - 3 * padding) / 2;
        const height = canvas.height - 2 * padding;

        // ËÆ≠ÁªÉÊçüÂ§±
        ctx.strokeStyle = '#22c55e';
        ctx.lineWidth = 2;
        ctx.beginPath();
        trainLoss.forEach((loss, i) => {
            const x = padding + (i / epochs) * width;
            const y = padding + height - (loss / 2.5) * height;
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        });
        ctx.stroke();

        // È™åËØÅÊçüÂ§±
        ctx.strokeStyle = '#06b6d4';
        ctx.lineWidth = 2;
        ctx.beginPath();
        valLoss.forEach((loss, i) => {
            const x = padding + (i / epochs) * width;
            const y = padding + height - (loss / 2.5) * height;
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        });
        ctx.stroke();

        // Ê¢ØÂ∫¶ËåÉÊï∞
        ctx.strokeStyle = '#8b5cf6';
        ctx.lineWidth = 2;
        ctx.beginPath();
        gradNorm.forEach((norm, i) => {
            const x = padding * 2 + width + (i / epochs) * width;
            const y = padding + height - (norm / 2) * height;
            if (i === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
        });
        ctx.stroke();

        // Ê†áÁ≠æ
        ctx.fillStyle = '#f1f5f9';
        ctx.font = '14px sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText('ËÆ≠ÁªÉ/È™åËØÅÊçüÂ§±', padding + width / 2, canvas.height - 10);
        ctx.fillText('Ê¢ØÂ∫¶ËåÉÊï∞', padding * 2 + width + width / 2, canvas.height - 10);

        // Âõæ‰æã
        ctx.fillStyle = '#22c55e';
        ctx.fillRect(padding, 10, 20, 3);
        ctx.fillStyle = '#f1f5f9';
        ctx.textAlign = 'left';
        ctx.fillText('ËÆ≠ÁªÉÊçüÂ§±', padding + 25, 15);

        ctx.fillStyle = '#06b6d4';
        ctx.fillRect(padding + 100, 10, 20, 3);
        ctx.fillText('È™åËØÅÊçüÂ§±', padding + 125, 15);

        ctx.fillStyle = '#8b5cf6';
        ctx.fillRect(padding * 2 + width, 10, 20, 3);
        ctx.fillText('Ê¢ØÂ∫¶ËåÉÊï∞', padding * 2 + width + 25, 15);
    }

    // Ê∏ÖÂçïÂäüËÉΩ
    function toggleCheck(checkbox) {
        checkbox.classList.toggle('checked');
    }

    // ÂèçÈ¶àÂäüËÉΩ
    function submitFeedback(type) {
        console.log('Feedback:', type);
        alert('ÊÑüË∞¢ÊÇ®ÁöÑÂèçÈ¶àÔºÅÊàë‰ª¨‰ºöÁªßÁª≠ÊîπËøõÊïôÁ®ã„ÄÇ');
    }

    // ÂàùÂßãÂåñÊâÄÊúâÂèØËßÜÂåñ
    window.addEventListener('load', () => {
        visualizeGradientFlow();
        updateSigmoidPlot();
        visualizeOptimizerPaths();
        updateProgressBar();
    });

    // Â≠¶‰π†Âæ™ÁéØÊ≠•È™§È´ò‰∫Æ
    let currentStep = 0;
    const loopSteps = document.querySelectorAll('.loop-step');

    function highlightStep() {
        loopSteps.forEach((step, index) => {
            step.classList.toggle('active', index === currentStep);
        });
        currentStep = (currentStep + 1) % loopSteps.length;
    }

    if (animationsEnabled) {
        setInterval(highlightStep, 3000);
    }
</script>
</body>
</html>
