<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLMæ¨¡å‹æ¨ç†ç³»ç»Ÿ - æ·±åº¦è§£æ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --accent-color: #ec4899;
            --bg-dark: #1e293b;
            --bg-light: #f8fafc;
            --text-dark: #1e293b;
            --text-light: #64748b;
            --border-color: #e2e8f0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .navbar {
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .navbar.scrolled {
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
        }

        .logo {
            font-size: 1.5em;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-menu a {
            color: var(--text-dark);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-menu a:hover {
            color: var(--primary-color);
            background: rgba(99, 102, 241, 0.1);
        }

        .nav-menu a.active {
            color: white;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
        }

        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-container {
            margin-top: 90px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px 40px;
        }

        /* è‹±é›„åŒºåŸŸ */
        .hero-section {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 80px 0;
            text-align: center;
            border-radius: 20px;
            margin-bottom: 60px;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 30s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero-section h1 {
            font-size: 3em;
            margin-bottom: 20px;
            animation: fadeInUp 1s ease-out;
        }

        .hero-section p {
            font-size: 1.3em;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            animation: fadeInUp 1s ease-out 0.2s;
            animation-fill-mode: both;
        }

        /* å†…å®¹éƒ¨åˆ† */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .content-section.active {
            display: block;
        }

        /* å¡ç‰‡æ ·å¼ */
        .card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            color: white;
            font-size: 24px;
        }

        .card-title {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--text-dark);
        }

        /* ä»£ç å¯¹æ¯”å®¹å™¨ */
        .code-comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .code-panel {
            padding: 20px;
            background: #282c34;
            color: #abb2bf;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            overflow-x: auto;
            position: relative;
        }

        .code-panel-header {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.1);
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 12px;
            color: #abb2bf;
        }

        .explanation-panel {
            padding: 30px;
            background: var(--bg-light);
        }

        .explanation-panel h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .explanation-panel h4 {
            color: var(--secondary-color);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        /* æµç¨‹å›¾ */
        .flow-container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .flow-diagram {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .flow-step {
            flex: 1;
            min-width: 180px;
            text-align: center;
            position: relative;
        }

        .flow-step-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        .flow-step:hover .flow-step-icon {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .flow-step-icon::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: inherit;
            z-index: -1;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(1.3);
                opacity: 0;
            }
        }

        .flow-step-title {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .flow-step-desc {
            color: var(--text-light);
            font-size: 0.9em;
        }

        .flow-arrow {
            position: absolute;
            top: 40px;
            right: -30px;
            width: 40px;
            height: 2px;
            background: var(--border-color);
        }

        .flow-arrow::after {
            content: '';
            position: absolute;
            right: -8px;
            top: -4px;
            width: 0;
            height: 0;
            border-left: 8px solid var(--border-color);
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
        }

        .flow-step:last-child .flow-arrow {
            display: none;
        }

        /* Tokenå¯è§†åŒ– */
        .token-visualization {
            background: linear-gradient(135deg, #f3f4f6, #e5e7eb);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .token-group {
            margin-bottom: 15px;
        }

        .token-group-label {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .token {
            display: inline-block;
            padding: 6px 12px;
            margin: 4px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: default;
        }

        .token:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .token.normal {
            background: var(--primary-color);
            color: white;
        }

        .token.special {
            background: var(--accent-color);
            color: white;
        }

        .token.mask {
            background: var(--success-color);
            color: white;
        }

        /* çŸ©é˜µå¯è§†åŒ– */
        .matrix-visualization {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid var(--border-color);
        }

        .matrix-grid {
            display: inline-block;
            font-family: monospace;
            font-size: 14px;
            line-height: 1.2;
        }

        .matrix-cell {
            display: inline-block;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
            margin: 1px;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .matrix-cell.one {
            background: var(--primary-color);
            color: white;
        }

        .matrix-cell.zero {
            background: var(--border-color);
            color: var(--text-light);
        }

        .matrix-cell:hover {
            transform: scale(1.2);
            z-index: 10;
        }

        /* ç‰¹æ€§ç½‘æ ¼ */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(99, 102, 241, 0.15);
        }

        .feature-card:hover::before {
            transform: scaleY(1);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            margin-bottom: 16px;
        }

        .feature-title {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .feature-desc {
            color: var(--text-light);
            font-size: 0.95em;
            line-height: 1.6;
        }

        /* é«˜äº®æ¡† */
        .highlight-box {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border: 1px solid #fbbf24;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
        }

        .highlight-box::before {
            content: 'ğŸ’¡';
            position: absolute;
            top: -10px;
            right: 20px;
            font-size: 40px;
            opacity: 0.2;
        }

        .highlight-box h4 {
            color: #92400e;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .highlight-box p {
            color: #78350f;
            margin: 0;
        }

        /* ä»£ç é«˜äº® */
        .code-keyword { color: #c678dd; }
        .code-string { color: #98c379; }
        .code-comment { color: #5c6370; font-style: italic; }
        .code-function { color: #61afef; }
        .code-number { color: #d19a66; }
        .code-class { color: #e06c75; }

        /* æ ‡ç­¾é¡µ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0;
        }

        .tab {
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            color: var(--text-light);
            transition: all 0.3s ease;
            position: relative;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }

        /* åŠ¨ç”» */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ä»£ç è¡Œå· */
        .code-with-lines {
            position: relative;
            background: #282c34;
            border-radius: 8px;
            overflow: hidden;
        }

        .line-numbers {
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 50px;
            background: rgba(255,255,255,0.05);
            padding: 20px 0;
            text-align: center;
            color: #5c6370;
            font-size: 12px;
            line-height: 1.6em;
            user-select: none;
        }

        .code-content {
            padding: 20px 20px 20px 70px;
            overflow-x: auto;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .nav-menu {
                display: none;
            }

            .code-comparison {
                grid-template-columns: 1fr;
            }

            .flow-diagram {
                flex-direction: column;
            }

            .flow-arrow {
                display: none;
            }

            .hero-section h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
<!-- å¯¼èˆªæ  -->
<nav class="navbar" id="navbar">
    <div class="nav-container">
        <div class="logo">GLMæ¨ç†ç³»ç»Ÿ</div>
        <ul class="nav-menu">
            <li><a href="#overview" class="nav-link active">æ€»è§ˆ</a></li>
            <li><a href="#architecture" class="nav-link">æ¶æ„</a></li>
            <li><a href="#data-flow" class="nav-link">æ•°æ®æµ</a></li>
            <li><a href="#implementation" class="nav-link">å®ç°</a></li>
            <li><a href="#features" class="nav-link">ç‰¹æ€§</a></li>
        </ul>
    </div>
</nav>

<!-- ä¸»å®¹å™¨ -->
<div class="main-container">
    <!-- è‹±é›„åŒºåŸŸ -->
    <div class="hero-section">
        <div class="hero-content">
            <h1>GLMæ¨¡å‹æ¨ç†ç³»ç»Ÿæ·±åº¦è§£æ</h1>
            <p>åŸºäºç™¾åº¦Zeusæ¡†æ¶çš„ç”Ÿæˆå¼è¯­è¨€æ¨¡å‹ï¼Œé‡‡ç”¨ç‹¬ç‰¹çš„åŒå‘-è‡ªå›å½’æ··åˆæ³¨æ„åŠ›æœºåˆ¶</p>
        </div>
    </div>

    <!-- æ€»è§ˆéƒ¨åˆ† -->
    <div id="overview" class="content-section active">
        <div class="flow-container">
            <h2 style="text-align: center; margin-bottom: 10px;">ç³»ç»Ÿå·¥ä½œæµç¨‹</h2>
            <p style="text-align: center; color: var(--text-light); margin-bottom: 30px;">
                ä»åŸå§‹æ•°æ®åˆ°æœ€ç»ˆæ¨ç†ç»“æœçš„å®Œæ•´å¤„ç†æµç¨‹
            </p>
            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-step-icon">ğŸ“„</div>
                    <div class="flow-step-title">æ•°æ®è¾“å…¥</div>
                    <div class="flow-step-desc">TSV/JSONLæ ¼å¼<br>ç»“æ„åŒ–æ•°æ®</div>
                    <div class="flow-arrow"></div>
                </div>
                <div class="flow-step">
                    <div class="flow-step-icon">âœ‚ï¸</div>
                    <div class="flow-step-title">æ–‡æœ¬å¤„ç†</div>
                    <div class="flow-step-desc">åˆ†å‰²ä¸æˆªæ–­<br>é•¿åº¦æ§åˆ¶</div>
                    <div class="flow-arrow"></div>
                </div>
                <div class="flow-step">
                    <div class="flow-step-icon">ğŸ”¤</div>
                    <div class="flow-step-title">åˆ†è¯ç¼–ç </div>
                    <div class="flow-step-desc">BPEåˆ†è¯å™¨<br>Tokenè½¬æ¢</div>
                    <div class="flow-arrow"></div>
                </div>
                <div class="flow-step">
                    <div class="flow-step-icon">ğŸ“¦</div>
                    <div class="flow-step-title">æ‰¹å¤„ç†</div>
                    <div class="flow-step-desc">æ•°æ®å¯¹é½<br>æ©ç ç”Ÿæˆ</div>
                    <div class="flow-arrow"></div>
                </div>
                <div class="flow-step">
                    <div class="flow-step-icon">ğŸ§ </div>
                    <div class="flow-step-title">æ¨¡å‹æ¨ç†</div>
                    <div class="flow-step-desc">GLMå‰å‘ä¼ æ’­<br>ç»“æœè¾“å‡º</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ¯</div>
                <h2 class="card-title">æ ¸å¿ƒåŠŸèƒ½</h2>
            </div>
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ“Š</div>
                    <div class="feature-title">æŒ‡ä»¤ç†è§£ä¸å“åº”</div>
                    <div class="feature-desc">
                        å¤„ç†"æŒ‡ä»¤-æŸ¥è¯¢-æ ‡é¢˜"çš„è¾“å…¥æ ¼å¼ï¼Œç”Ÿæˆç›¸åº”çš„æ ‡ç­¾åˆ†ç±»å’ŒåŸå› è§£é‡Š
                    </div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ”€</div>
                    <div class="feature-title">æ··åˆæ³¨æ„åŠ›æœºåˆ¶</div>
                    <div class="feature-desc">
                        ç‹¬ç‰¹çš„GLMè®¾è®¡ï¼šè¾“å…¥éƒ¨åˆ†ä½¿ç”¨åŒå‘æ³¨æ„åŠ›ï¼Œç”Ÿæˆéƒ¨åˆ†ä½¿ç”¨è‡ªå›å½’æ³¨æ„åŠ›
                    </div>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">ğŸ“</div>
                    <div class="feature-title">æ™ºèƒ½é•¿åº¦æ§åˆ¶</div>
                    <div class="feature-desc">
                        è‡ªåŠ¨æˆªæ–­è¿‡é•¿æ–‡æœ¬ï¼Œä¼˜å…ˆä¿ç•™é‡è¦ä¿¡æ¯ï¼Œç¡®ä¿ä¸è¶…è¿‡156ä¸ªtokençš„é™åˆ¶
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¶æ„éƒ¨åˆ† -->
    <div id="architecture" class="content-section">
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ—ï¸</div>
                <h2 class="card-title">ç³»ç»Ÿæ¶æ„</h2>
            </div>

            <div class="tabs">
                <button class="tab active" onclick="showArchTab('classes')">ç±»ç»“æ„</button>
                <button class="tab" onclick="showArchTab('tokens')">Tokenç³»ç»Ÿ</button>
                <button class="tab" onclick="showArchTab('encoding')">ç¼–ç ç³»ç»Ÿ</button>
            </div>

            <div id="arch-classes" class="arch-content active">
                <div class="code-comparison">
                    <div class="code-panel">
                        <div class="code-panel-header">BaseReader åŸºç±»</div>
                        <pre><span class="code-keyword">class</span> <span class="code-class">BaseReader</span>(object):
    <span class="code-keyword">def</span> <span class="code-function">__init__</span>(self, trainer_id, trainer_num, ...):
        <span class="code-comment"># åˆ†å¸ƒå¼è®­ç»ƒé…ç½®</span>
        self.trainer_id = trainer_id
        self.trainer_num = trainer_num

        <span class="code-comment"># åˆ†è¯å™¨åˆå§‹åŒ–</span>
        self.tokenizer = BpeTokenizer(vocab_path)
        self.vocab = self.tokenizer.vocab

        <span class="code-comment"># ç‰¹æ®Štokenæ˜ å°„</span>
        self.pad_id = self.vocab[<span class="code-string">"[PAD]"</span>]
        self.cls_id = self.vocab[<span class="code-string">"[CLS]"</span>]
        self.gmask_id = self.vocab[<span class="code-string">"[gMASK]"</span>]
        self.start_id = self.vocab[<span class="code-string">"[START]"</span>]</pre>
                    </div>
                    <div class="explanation-panel">
                        <h3>BaseReader è®¾è®¡ç†å¿µ</h3>
                        <h4>æ ¸å¿ƒèŒè´£</h4>
                        <ul>
                            <li><strong>æ•°æ®è¯»å–</strong>ï¼šæ”¯æŒTSVå’ŒJSONLä¸¤ç§æ ¼å¼</li>
                            <li><strong>æ‰¹å¤„ç†ç®¡ç†</strong>ï¼šå®ç°é«˜æ•ˆçš„æ‰¹æ¬¡æ•°æ®ç”Ÿæˆ</li>
                            <li><strong>åˆ†å¸ƒå¼æ”¯æŒ</strong>ï¼šé€šè¿‡trainer_idå®ç°å¤šGPUæ•°æ®åˆ†é…</li>
                        </ul>

                        <h4>å…³é”®ç»„ä»¶</h4>
                        <ul>
                            <li><strong>BPEåˆ†è¯å™¨</strong>ï¼šå­è¯çº§åˆ«çš„åˆ†è¯ï¼Œèƒ½å¤„ç†æœªè§è¯æ±‡</li>
                            <li><strong>ç‰¹æ®ŠTokenç³»ç»Ÿ</strong>ï¼šå®šä¹‰äº†æ¨¡å‹ç†è§£çš„ç‰¹æ®Šæ ‡è®°</li>
                            <li><strong>éšæœºæ•°ç”Ÿæˆå™¨</strong>ï¼šä¿è¯æ•°æ®æ‰“ä¹±çš„å¯é‡ç°æ€§</li>
                        </ul>

                        <div class="highlight-box">
                            <h4>è®¾è®¡äº®ç‚¹</h4>
                            <p>é‡‡ç”¨ç”Ÿæˆå™¨æ¨¡å¼å¤„ç†æ•°æ®ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨æ•°æ®åˆ°å†…å­˜ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®é›†å¤„ç†</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="arch-tokens" class="arch-content" style="display: none;">
                <div class="token-visualization">
                    <div class="token-group">
                        <div class="token-group-label">åŸºç¡€æ ‡è®°</div>
                        <span class="token normal">[PAD]</span>
                        <span class="token normal">[CLS]</span>
                        <span class="token normal">[SEP]</span>
                        <span class="token normal">[UNK]</span>
                    </div>
                    <div class="token-group">
                        <div class="token-group-label">GLMç‰¹æ®Šæ ‡è®°</div>
                        <span class="token special">[START]</span>
                        <span class="token mask">[gMASK]</span>
                        <span class="token special">[gEND]</span>
                    </div>
                </div>

                <h4 style="margin-top: 30px;">TokenåŠŸèƒ½è¯´æ˜</h4>
                <table style="width: 100%; margin-top: 15px;">
                    <thead>
                    <tr>
                        <th style="padding: 12px; background: #f8f9fa;">Token</th>
                        <th style="padding: 12px; background: #f8f9fa;">ä½œç”¨</th>
                        <th style="padding: 12px; background: #f8f9fa;">ä½¿ç”¨ä½ç½®</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">[PAD]</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">å¡«å……çŸ­åºåˆ—åˆ°ç»Ÿä¸€é•¿åº¦</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">åºåˆ—æœ«å°¾</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">[CLS]</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">åˆ†ç±»ä»»åŠ¡çš„ç‰¹å¾æå–ç‚¹</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">è¾“å…¥åºåˆ—æœ«å°¾</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">[SEP]</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">åˆ†éš”ä¸åŒæ–‡æœ¬ç‰‡æ®µ</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">ç‰‡æ®µä¹‹é—´</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">[gMASK]</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">æ ‡è®°ç”Ÿæˆä½ç½®</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">è¾“å…¥ä¸ç”Ÿæˆä¹‹é—´</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">[START]</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">ç”Ÿæˆåºåˆ—å¼€å§‹</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">ç›®æ ‡åºåˆ—å¼€å¤´</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">[gEND]</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">ç”Ÿæˆåºåˆ—ç»“æŸ</td>
                        <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">ç›®æ ‡åºåˆ—æœ«å°¾</td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div id="arch-encoding" class="arch-content" style="display: none;">
                <h3>åŒé‡ä½ç½®ç¼–ç ç³»ç»Ÿ</h3>
                <div class="code-comparison">
                    <div class="code-panel">
<pre><span class="code-comment"># ä¸»ä½ç½®ç¼–ç </span>
pos_ids = list(range(<span class="code-number">0</span>, len(tokens_src))) + \
          [tokens_src.index(<span class="code-string">"[gMASK]"</span>)] * len(tokens_target)

<span class="code-comment"># è¾…åŠ©ä½ç½®ç¼–ç </span>
pos_ids_extra = [<span class="code-number">0</span>] * len(tokens_src) + \
                list(range(<span class="code-number">1</span>, len(tokens_target) + <span class="code-number">1</span>))

<span class="code-comment"># æŸå¤±æ©ç </span>
loss_mask = [<span class="code-number">0</span>] * len(tokens_src) + \
            [<span class="code-number">0</span>] + [<span class="code-number">1</span>] * (len(tokens_target) - <span class="code-number">1</span>)</pre>
                    </div>
                    <div class="explanation-panel">
                        <h3>ç¼–ç ç­–ç•¥è§£æ</h3>

                        <h4>ä½ç½®ç¼–ç è®¾è®¡</h4>
                        <p>GLMé‡‡ç”¨åŒé‡ä½ç½®ç¼–ç ç³»ç»Ÿï¼Œå®ç°è¾“å…¥ç†è§£å’Œç”Ÿæˆçš„åˆ†ç¦»ï¼š</p>
                        <ul>
                            <li><strong>ä¸»ä½ç½®ç¼–ç </strong>ï¼šè¾“å…¥éƒ¨åˆ†é€’å¢ï¼Œç”Ÿæˆéƒ¨åˆ†å›ºå®š</li>
                            <li><strong>è¾…åŠ©ä½ç½®ç¼–ç </strong>ï¼šè¾“å…¥éƒ¨åˆ†ä¸º0ï¼Œç”Ÿæˆéƒ¨åˆ†é€’å¢</li>
                        </ul>

                        <div class="matrix-visualization">
                            <h4>ç¼–ç ç¤ºä¾‹</h4>
                            <p style="margin-bottom: 10px;">è¾“å…¥: "åˆ¤æ–­ç›¸å…³æ€§[SEP]æŸ¥è¯¢[SEP]æ ‡é¢˜[SEP][gMASK][CLS]"</p>
                            <p style="margin-bottom: 10px;">ç”Ÿæˆ: "[START]åŸå› è§£é‡Š[gEND]"</p>
                            <div style="font-family: monospace; line-height: 1.8;">
                                <div>ä¸»ä½ç½®:   [0,1,2,3,4,5,6,7,8,9,10,11,12] [11,11,11,11]</div>
                                <div>è¾…åŠ©ä½ç½®: [0,0,0,0,0,0,0,0,0,0,0,0,0]   [1,2,3,4]</div>
                                <div>æŸå¤±æ©ç : [0,0,0,0,0,0,0,0,0,0,0,0,0]   [0,1,1,1]</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ•°æ®æµéƒ¨åˆ† -->
    <div id="data-flow" class="content-section">
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ”„</div>
                <h2 class="card-title">æ•°æ®å¤„ç†æµç¨‹</h2>
            </div>

            <h3>è¾“å…¥æ•°æ®æ ¼å¼</h3>
            <div class="code-comparison">
                <div class="code-panel">
<pre><span class="code-comment"># TSVæ–‡ä»¶æ ¼å¼</span>
qid     src     tgt
<span class="code-number">001</span>     æŒ‡ä»¤[SEP]æŸ¥è¯¢[SEP]æ ‡é¢˜     æ ‡ç­¾[SEP]åŸå› 
<span class="code-number">002</span>     åˆ¤æ–­ç›¸å…³æ€§[SEP]èŒç§°è¯„å®š[SEP]èŒç§°ç”³æŠ¥æœåŠ¡     <span class="code-number">1</span>[SEP]æŸ¥è¯¢ä¸æ ‡é¢˜é«˜åº¦ç›¸å…³

<span class="code-comment"># å¤„ç†æµç¨‹</span>
<span class="code-keyword">def</span> <span class="code-function">_convert_example_to_record</span>(self, example, ...):
    <span class="code-comment"># 1. åˆ†å‰²æ–‡æœ¬</span>
    text_instruction, text_query, text_title = \
        example.src.split(<span class="code-string">"[SEP]"</span>)
    text_label, text_reason = \
        example.tgt.split(<span class="code-string">"[SEP]"</span>)</pre>
                </div>
                <div class="explanation-panel">
                    <h3>æ•°æ®é¢„å¤„ç†æ­¥éª¤</h3>

                    <h4>1. æ–‡æœ¬åˆ†å‰²</h4>
                    <p>ä½¿ç”¨[SEP]æ ‡è®°å°†è¾“å…¥åˆ†è§£ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š</p>
                    <ul>
                        <li><strong>æŒ‡ä»¤</strong>ï¼šä»»åŠ¡æè¿°ï¼ˆå¦‚"åˆ¤æ–­ç›¸å…³æ€§"ï¼‰</li>
                        <li><strong>æŸ¥è¯¢</strong>ï¼šç”¨æˆ·è¾“å…¥çš„æœç´¢è¯</li>
                        <li><strong>æ ‡é¢˜</strong>ï¼šå¾…åŒ¹é…çš„å†…å®¹æ ‡é¢˜</li>
                    </ul>

                    <h4>2. åˆ†è¯å¤„ç†</h4>
                    <div class="token-visualization">
                        <div class="token-group">
                            <div class="token-group-label">åŸå§‹æ–‡æœ¬</div>
                            <span style="background: #e2e8f0; padding: 8px; border-radius: 6px;">
                                    åˆ¤æ–­ç›¸å…³æ€§
                                </span>
                        </div>
                        <div class="token-group">
                            <div class="token-group-label">åˆ†è¯ç»“æœ</div>
                            <span class="token normal">åˆ¤æ–­</span>
                            <span class="token normal">ç›¸å…³</span>
                            <span class="token normal">æ€§</span>
                        </div>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 40px;">åºåˆ—æ„å»º</h3>
            <div class="token-visualization">
                <div class="token-group">
                    <div class="token-group-label">å®Œæ•´è¾“å…¥åºåˆ—</div>
                    <span class="token normal">æŒ‡ä»¤tokens</span>
                    <span class="token special">[SEP]</span>
                    <span class="token normal">æŸ¥è¯¢tokens</span>
                    <span class="token special">[SEP]</span>
                    <span class="token normal">æ ‡é¢˜tokens</span>
                    <span class="token special">[SEP]</span>
                    <span class="token mask">[gMASK]</span>
                    <span class="token special">[CLS]</span>
                </div>
                <div class="token-group">
                    <div class="token-group-label">ç›®æ ‡ç”Ÿæˆåºåˆ—</div>
                    <span class="token special">[START]</span>
                    <span class="token normal">åŸå› tokens</span>
                    <span class="token special">[gEND]</span>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ­</div>
                <h2 class="card-title">æ³¨æ„åŠ›æ©ç æœºåˆ¶</h2>
            </div>

            <h3>GLMç‹¬ç‰¹çš„æ··åˆæ³¨æ„åŠ›æ¨¡å¼</h3>
            <div class="matrix-visualization">
                <h4>æ³¨æ„åŠ›çŸ©é˜µç¤ºä¾‹ï¼ˆ8Ã—8ï¼‰</h4>
                <div class="matrix-grid">
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <br>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <br>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <br>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <br>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <br>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell zero">0</div>
                    <div class="matrix-cell zero">0</div>
                    <br>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell zero">0</div>
                    <br>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                    <div class="matrix-cell one">1</div>
                </div>
                <p style="margin-top: 15px;">
                    <strong>å·¦ä¸Šè§’4Ã—4</strong>ï¼šè¾“å…¥éƒ¨åˆ†ï¼ˆåŒå‘æ³¨æ„åŠ›ï¼‰<br>
                    <strong>å³ä¸‹è§’4Ã—4</strong>ï¼šç”Ÿæˆéƒ¨åˆ†ï¼ˆè‡ªå›å½’æ³¨æ„åŠ›ï¼‰
                </p>
            </div>

            <div class="highlight-box" style="margin-top: 20px;">
                <h4>è®¾è®¡ç†å¿µ</h4>
                <p>è¿™ç§æ··åˆæ³¨æ„åŠ›æœºåˆ¶è®©æ¨¡å‹åœ¨ç†è§£è¾“å…¥æ—¶èƒ½å¤Ÿå……åˆ†åˆ©ç”¨ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆåŒå‘ï¼‰ï¼Œ
                    è€Œåœ¨ç”Ÿæˆè¾“å‡ºæ—¶ä¿æŒè‡ªå›å½’ç‰¹æ€§ï¼Œç¡®ä¿ç”Ÿæˆçš„è¿è´¯æ€§ã€‚</p>
            </div>
        </div>
    </div>

    <!-- å®ç°éƒ¨åˆ† -->
    <div id="implementation" class="content-section">
        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ’»</div>
                <h2 class="card-title">å…³é”®å®ç°ç»†èŠ‚</h2>
            </div>

            <h3>æ‰¹å¤„ç†ä¸å¡«å……</h3>
            <div class="code-comparison">
                <div class="code-panel">
<pre><span class="code-keyword">def</span> <span class="code-function">_pad_batch_records</span>(self, batch_records):
    <span class="code-comment"># æå–å„å­—æ®µ</span>
    batch_token_ids = [record.token_ids
                      <span class="code-keyword">for</span> record <span class="code-keyword">in</span> batch_records]

    <span class="code-comment"># å¡«å……åˆ°ç›¸åŒé•¿åº¦</span>
    padded_token_ids = pad_batch_data(
        batch_token_ids,
        pad_idx=self.pad_id,
        return_input_mask=False
    )

    <span class="code-comment"># ç”Ÿæˆæ³¨æ„åŠ›æ©ç </span>
    input_mask = self._gen_self_attn_mask_for_glm(
        batch_token_ids
    )</pre>
                </div>
                <div class="explanation-panel">
                    <h3>æ‰¹å¤„ç†ç­–ç•¥</h3>

                    <h4>æ•°æ®å¯¹é½</h4>
                    <p>æ‰¹å¤„ç†éœ€è¦å°†ä¸åŒé•¿åº¦çš„åºåˆ—å¯¹é½åˆ°ç›¸åŒé•¿åº¦ï¼š</p>
                    <ul>
                        <li>æ‰¾å‡ºæ‰¹æ¬¡ä¸­æœ€é•¿çš„åºåˆ—</li>
                        <li>ä½¿ç”¨[PAD]æ ‡è®°å¡«å……çŸ­åºåˆ—</li>
                        <li>ç”Ÿæˆå¯¹åº”çš„æ³¨æ„åŠ›æ©ç </li>
                    </ul>

                    <h4>å†…å­˜ä¼˜åŒ–</h4>
                    <ul>
                        <li>ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼ï¼ŒæŒ‰éœ€ç”Ÿæˆæ‰¹æ¬¡</li>
                        <li>åŠ¨æ€æ‰¹æ¬¡å¤§å°ï¼ŒåŸºäºtokenæ€»æ•°</li>
                        <li>é¿å…ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨æ•°æ®</li>
                    </ul>
                </div>
            </div>

            <h3 style="margin-top: 40px;">æ¨¡å‹æ¨ç†æµç¨‹</h3>
            <div class="code-comparison">
                <div class="code-panel">
<pre><span class="code-comment"># å‡†å¤‡è¾“å…¥å¼ é‡</span>
input_ids = torch.tensor(padded_token_ids,
                        dtype=torch.int32,
                        device=device)

<span class="code-comment"># åŒå±‚ä½ç½®ç¼–ç </span>
position_ids = torch.stack([
    old_position_ids,
    old_position_ids_extra
], dim=<span class="code-number">0</span>)

<span class="code-comment"># æ¨¡å‹æ¨ç†</span>
<span class="code-keyword">with</span> torch.no_grad():
    output = hf_model(
        input_ids=input_ids,
        position_ids=position_ids,
        attention_mask=attention_mask,
        last_token_ids=token_pos_ids
    )</pre>
                </div>
                <div class="explanation-panel">
                    <h3>æ¨ç†ä¼˜åŒ–æŠ€å·§</h3>

                    <h4>æ€§èƒ½ä¼˜åŒ–</h4>
                    <ul>
                        <li><code>torch.no_grad()</code>ï¼šç¦ç”¨æ¢¯åº¦è®¡ç®—</li>
                        <li><code>model.eval()</code>ï¼šå…³é—­dropoutç­‰è®­ç»ƒç‰¹æ€§</li>
                        <li>æ‰¹å¤„ç†ï¼šæé«˜GPUåˆ©ç”¨ç‡</li>
                    </ul>

                    <h4>è°ƒè¯•æ”¯æŒ</h4>
                    <ul>
                        <li>è¯¦ç»†çš„è¾“å…¥è¾“å‡ºæ—¥å¿—</li>
                        <li>æ³¨æ„åŠ›æ©ç å¯è§†åŒ–</li>
                        <li>ä¸­é—´ç»“æœä¿å­˜</li>
                    </ul>

                    <div class="highlight-box">
                        <h4>CUDAè°ƒè¯•æŠ€å·§</h4>
                        <p>è®¾ç½®<code>CUDA_LAUNCH_BLOCKING=1</code>å¯ä»¥è®©CUDAæ“ä½œåŒæ­¥æ‰§è¡Œï¼Œ
                            ä¾¿äºå®šä½é”™è¯¯ä½ç½®ã€‚</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç‰¹æ€§éƒ¨åˆ† -->
    <div id="features" class="content-section">
        <div class="card">
            <div class="card-header">
                <div class="card-icon">âœ¨</div>
                <h2 class="card-title">ç³»ç»Ÿç‰¹æ€§æ€»ç»“</h2>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-icon">ğŸ§©</div>
                    <div class="feature-title">æ¨¡å—åŒ–è®¾è®¡</div>
                    <div class="feature-desc">
                        æ¸…æ™°çš„ç±»å±‚æ¬¡ç»“æ„ï¼ŒBaseReaderæä¾›åŸºç¡€åŠŸèƒ½ï¼ŒInstructionReaderå®ç°å…·ä½“é€»è¾‘ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤ã€‚
                    </div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">âš¡</div>
                    <div class="feature-title">é«˜æ•ˆæ•°æ®å¤„ç†</div>
                    <div class="feature-desc">
                        ç”Ÿæˆå™¨æ¨¡å¼å¤„ç†æ•°æ®ï¼Œæ”¯æŒå¤§è§„æ¨¡æ•°æ®é›†ã€‚æ™ºèƒ½æ‰¹å¤„ç†ç­–ç•¥ï¼Œä¼˜åŒ–GPUåˆ©ç”¨ç‡ã€‚
                    </div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">ğŸ”§</div>
                    <div class="feature-title">çµæ´»é…ç½®</div>
                    <div class="feature-desc">
                        æ”¯æŒè°ƒè¯•æ¨¡å¼ã€æ‰¹æ¬¡å¤§å°è°ƒæ•´ã€åºåˆ—é•¿åº¦é™åˆ¶ç­‰å¤šç§é…ç½®é€‰é¡¹ï¼Œé€‚åº”ä¸åŒåœºæ™¯éœ€æ±‚ã€‚
                    </div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">ğŸ“Š</div>
                    <div class="feature-title">åˆ†å¸ƒå¼æ”¯æŒ</div>
                    <div class="feature-desc">
                        å†…ç½®å¤šGPUè®­ç»ƒæ”¯æŒï¼Œé€šè¿‡trainer_idå’Œtrainer_numå®ç°æ•°æ®çš„è‡ªåŠ¨åˆ†é…ã€‚
                    </div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">ğŸ›¡ï¸</div>
                    <div class="feature-title">é”™è¯¯å¤„ç†</div>
                    <div class="feature-desc">
                        å®Œå–„çš„å¼‚å¸¸æ•è·å’Œæ—¥å¿—è®°å½•ï¼Œæ–­è¨€æ£€æŸ¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼Œä¾¿äºé—®é¢˜å®šä½ã€‚
                    </div>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">ğŸ“ˆ</div>
                    <div class="feature-title">æ€§èƒ½ç›‘æ§</div>
                    <div class="feature-desc">
                        è¯¦ç»†çš„è°ƒè¯•è¾“å‡ºï¼ŒåŒ…æ‹¬è¾“å…¥å½¢çŠ¶ã€tokenèŒƒå›´ã€æ³¨æ„åŠ›çŸ©é˜µç»“æ„ç­‰ï¼Œä¾¿äºæ€§èƒ½åˆ†æã€‚
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <div class="card-icon">ğŸ¯</div>
                <h2 class="card-title">ä½¿ç”¨å»ºè®®</h2>
            </div>

            <div style="display: grid; gap: 20px;">
                <div class="highlight-box">
                    <h4>æ•°æ®å‡†å¤‡</h4>
                    <p>ç¡®ä¿è¾“å…¥æ•°æ®æ ¼å¼æ­£ç¡®ï¼Œä½¿ç”¨[SEP]åˆ†éš”ä¸åŒéƒ¨åˆ†ã€‚å»ºè®®é¢„å…ˆæ£€æŸ¥æ•°æ®è´¨é‡ï¼Œé¿å…æ ¼å¼é”™è¯¯ã€‚</p>
                </div>

                <div class="highlight-box">
                    <h4>æ€§èƒ½ä¼˜åŒ–</h4>
                    <p>æ ¹æ®GPUå†…å­˜è°ƒæ•´batch_sizeï¼Œä½¿ç”¨è¾ƒå¤§çš„æ‰¹æ¬¡å¯ä»¥æé«˜ååé‡ã€‚æ³¨æ„åºåˆ—é•¿åº¦é™åˆ¶ï¼Œé¿å…OOMé”™è¯¯ã€‚</p>
                </div>

                <div class="highlight-box">
                    <h4>è°ƒè¯•æŠ€å·§</h4>
                    <p>å¼€å¯debugæ¨¡å¼è¿›è¡Œå°è§„æ¨¡æµ‹è¯•ï¼Œä½¿ç”¨è°ƒè¯•è¾“å‡ºäº†è§£æ•°æ®å¤„ç†æµç¨‹ï¼Œä¿å­˜ä¸­é—´ç»“æœä¾¿äºé—®é¢˜åˆ†æã€‚</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // å¯¼èˆªæ æ»šåŠ¨æ•ˆæœ
    window.addEventListener('scroll', function() {
        const navbar = document.getElementById('navbar');
        if (window.scrollY > 50) {
            navbar.classList.add('scrolled');
        } else {
            navbar.classList.remove('scrolled');
        }
    });

    // å¯¼èˆªé“¾æ¥æ¿€æ´»
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.content-section');

    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();

            // ç§»é™¤æ‰€æœ‰activeç±»
            navLinks.forEach(l => l.classList.remove('active'));
            sections.forEach(s => s.classList.remove('active'));

            // æ·»åŠ activeç±»
            this.classList.add('active');
            const targetId = this.getAttribute('href').substring(1);
            document.getElementById(targetId).classList.add('active');

            // å¹³æ»‘æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    });

    // æ¶æ„æ ‡ç­¾é¡µåˆ‡æ¢
    function showArchTab(tabName) {
        const tabs = document.querySelectorAll('.tab');
        const contents = document.querySelectorAll('.arch-content');

        tabs.forEach(tab => tab.classList.remove('active'));
        contents.forEach(content => content.style.display = 'none');

        event.target.classList.add('active');
        document.getElementById('arch-' + tabName).style.display = 'block';
    }

    // æµç¨‹å›¾åŠ¨ç”»
    const flowSteps = document.querySelectorAll('.flow-step-icon');
    flowSteps.forEach((step, index) => {
        step.style.animationDelay = `${index * 0.2}s`;
    });

    // çŸ©é˜µå•å…ƒæ ¼æ‚¬åœæ•ˆæœ
    const matrixCells = document.querySelectorAll('.matrix-cell');
    matrixCells.forEach(cell => {
        cell.addEventListener('mouseenter', function() {
            this.style.zIndex = '10';
        });
        cell.addEventListener('mouseleave', function() {
            this.style.zIndex = '1';
        });
    });

    // ä»£ç é«˜äº®å¢å¼º
    function enhanceCodeHighlight() {
        const codeBlocks = document.querySelectorAll('.code-panel pre');
        codeBlocks.forEach(block => {
            // æ·»åŠ è¡Œå·
            const lines = block.innerHTML.split('\n');
            const lineNumbers = lines.map((_, i) => i + 1).join('\n');

            // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ›´å¤šçš„ä»£ç é«˜äº®é€»è¾‘
        });
    }

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
        enhanceCodeHighlight();

        // æ·»åŠ åŠ è½½åŠ¨ç”»
        const cards = document.querySelectorAll('.card');
        cards.forEach((card, index) => {
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            setTimeout(() => {
                card.style.transition = 'all 0.5s ease';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, index * 100);
        });
    });

    // å¤åˆ¶ä»£ç åŠŸèƒ½
    document.querySelectorAll('.code-panel').forEach(panel => {
        panel.addEventListener('dblclick', function() {
            const code = this.querySelector('pre').textContent;
            navigator.clipboard.writeText(code).then(() => {
                // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                const tooltip = document.createElement('div');
                tooltip.textContent = 'å·²å¤åˆ¶åˆ°å‰ªè´´æ¿';
                tooltip.style.cssText = `
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        background: #10b981;
                        color: white;
                        padding: 8px 16px;
                        border-radius: 6px;
                        font-size: 14px;
                        z-index: 1000;
                    `;
                this.appendChild(tooltip);

                setTimeout(() => {
                    tooltip.remove();
                }, 2000);
            });
        });
    });
</script>
</body>
</html>